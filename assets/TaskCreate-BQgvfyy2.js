import{r as Ve,w as Sn,j as J,T as Uu,d as Ca,U as Ii,V as Ju,W as Zu,X as gt,Y as Ku}from"./index-DmENW6B2.js";import{B as $i,e as Uc,a as bi,C as yi,I as Gs,z as kt,u as Qu,F as ef,t as tf}from"./index-BeOvlGq0.js";import{C as Jr,L as sf,a as nf,b as rf,y as Zr}from"./index-fVCei9CP.js";import{J as af,K as of,L as lf,M as cf,N as hf,O as df,Q as uf,R as ff,S as pf,D as vl,U as gf}from"./index-CugqLUv5.js";import{F as mf,t as xf,c as bf,R as Kr}from"./FileItem-i_5a3kv3.js";import"./debounce-CQ_EGqN2.js";import{C as Jc,g as Qr,o as Zc}from"./CloseButton-DKk2w9LK.js";import"./index-IEdz60AJ.js";import{u as yf,S as vf}from"./StatusIcon-CJIZHJAy.js";import"./floating-ui.dom-CV1Qg3mg.js";const wf=a=>{const{className:t,children:s,closable:o=!1,customIcon:c,duration:d=3e3,onClose:p,style:x,ref:w,title:S,triggerByToast:M,type:E,width:I=350,...D}=a,[R,Y]=Ve.useState("show"),{clear:_}=yf(p,d,d>0),$=Ve.useCallback(X=>{Y("hiding"),p==null||p(X),_(),M||setTimeout(()=>{Y("hide")},400)},[p,_,M]),ne=Sn("notification",t);return R==="hide"?null:J.jsxs("div",{ref:w,...D,className:ne,style:{width:I,...x},children:[J.jsxs("div",{className:Sn("notification-content",!s&&"no-child"),children:[E&&!c?J.jsx("div",{className:"mr-3 mt-0.5",children:J.jsx(vf,{type:E})}):null,c&&J.jsx("div",{className:"mr-3",children:c}),J.jsxs("div",{className:"mr-4",children:[S&&J.jsx("div",{className:Sn("notification-title",s?"mb-2":""),children:S}),J.jsx("div",{className:Sn("notification-description",!S&&s?"mt-1":""),children:s})]})]}),o&&J.jsx(Jc,{className:"notification-close",absolute:!0,onClick:$})]})},wl=a=>Object.keys(a).map(t=>a[t]),kf=a=>{const{accept:t,beforeUpload:s,disabled:o=!1,draggable:c=!1,fileList:d=[],fileListClass:p,fileItemClass:x,multiple:w,onChange:S,onFileRemove:M,ref:E,showList:I=!0,tip:D,uploadLimit:R,children:Y,className:_,...$}=a,ne=Ve.useRef(null),[X,Z]=Ve.useState(d),[se,ee]=Ve.useState(!1);Ve.useEffect(()=>{JSON.stringify(X)!==JSON.stringify(d)&&Z(d)},[JSON.stringify(d)]);const te=(he="")=>{xf.push(J.jsx(wf,{type:"danger",duration:2e3,children:he||"Upload Failed!"}),{placement:"top-center"})},de=(he,Ee)=>{if(he)for(const Mt of he)Ee.push(Mt);return Ee},ue=he=>{let Ee=bf(X);return typeof R=="number"&&R!==0&&Object.keys(Ee).length>=R?(R===1&&(Ee.shift(),Ee=de(he,Ee)),wl({...Ee})):(Ee=de(he,Ee),wl({...Ee}))},Fe=he=>{const{files:Ee}=he.target;let Mt=!0;if(s){if(Mt=s(Ee,X),Mt===!1){te();return}if(typeof Mt=="string"&&Mt.length>0){te(Mt);return}}if(Mt){const Pt=ue(Ee);Z(Pt),S==null||S(Pt,X)}},Pe=he=>{const Ee=X.filter((Mt,Pt)=>Pt!==he);Z(Ee),M==null||M(Ee)},Ye=he=>{var Ee;o||(Ee=ne.current)==null||Ee.click(),he.stopPropagation()},He=()=>!c&&!Y?J.jsx($i,{disabled:o,onClick:he=>he.preventDefault(),children:"Upload"}):c&&!Y?J.jsx("span",{children:"Choose a file or drag and drop here"}):Y,ei=Ve.useCallback(()=>{c&&ee(!1)},[c]),ns=Ve.useCallback(()=>{c&&!o&&ee(!0)},[c,o]),li=Ve.useCallback(()=>{c&&ee(!1)},[c]),At={onDragLeave:ei,onDragOver:ns,onDrop:li},qe="border-primary",wt=Qr("upload",c&&"upload-draggable",c&&!o&&`hover:${qe}`,c&&o&&"disabled",se&&qe,_),Lt=Qr("upload-input",c&&"draggable");return J.jsxs(J.Fragment,{children:[J.jsxs("div",{ref:E,className:wt,...c?At:{onClick:Ye},...$,children:[J.jsx("input",{ref:ne,className:Lt,type:"file",disabled:o,multiple:w,accept:t,title:"",value:"",onChange:Fe,...$}),He()]}),D,I&&J.jsx("div",{className:Qr("upload-file-list",p),children:X.map((he,Ee)=>J.jsx(mf,{file:he,className:x,children:J.jsx(Jc,{className:"upload-file-remove",onClick:()=>Pe(Ee)})},he.name+Ee))})]})};var ea={};/*!
 * ApexCharts v4.2.0
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */var ta,kl;function Sf(){if(kl)return ta;kl=1;function a(f,e){(e==null||e>f.length)&&(e=f.length);for(var i=0,n=Array(e);i<e;i++)n[i]=f[i];return n}function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function s(f,e){if(!(f instanceof e))throw new TypeError("Cannot call a class as a function")}function o(f,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,_(n.key),n)}}function c(f,e,i){return e&&o(f.prototype,e),i&&o(f,i),Object.defineProperty(f,"prototype",{writable:!1}),f}function d(f,e){var i=typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(!i){if(Array.isArray(f)||(i=ne(f))||e){i&&(f=i);var n=0,r=function(){};return{s:r,n:function(){return n>=f.length?{done:!0}:{done:!1,value:f[n++]}},e:function(g){throw g},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,h=!0,u=!1;return{s:function(){i=i.call(f)},n:function(){var g=i.next();return h=g.done,g},e:function(g){u=!0,l=g},f:function(){try{h||i.return==null||i.return()}finally{if(u)throw l}}}}function p(f){var e=M();return function(){var i,n=w(f);if(e){var r=w(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return function(l,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(l)}(this,i)}}function x(f,e,i){return(e=_(e))in f?Object.defineProperty(f,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):f[e]=i,f}function w(f){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(f)}function S(f,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(e&&e.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),e&&D(f,e)}function M(){try{var f=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!f})()}function E(f,e){var i=Object.keys(f);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(f);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(f,r).enumerable})),i.push.apply(i,n)}return i}function I(f){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?E(Object(i),!0).forEach(function(n){x(f,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach(function(n){Object.defineProperty(f,n,Object.getOwnPropertyDescriptor(i,n))})}return f}function D(f,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},D(f,e)}function R(f,e){return function(i){if(Array.isArray(i))return i}(f)||function(i,n){var r=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(r!=null){var l,h,u,g,m=[],y=!0,b=!1;try{if(u=(r=r.call(i)).next,n===0){if(Object(r)!==r)return;y=!1}else for(;!(y=(l=u.call(r)).done)&&(m.push(l.value),m.length!==n);y=!0);}catch(v){b=!0,h=v}finally{try{if(!y&&r.return!=null&&(g=r.return(),Object(g)!==g))return}finally{if(b)throw h}}return m}}(f,e)||ne(f,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y(f){return function(e){if(Array.isArray(e))return a(e)}(f)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(f)||ne(f)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _(f){var e=function(i,n){if(typeof i!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}(f,"string");return typeof e=="symbol"?e:e+""}function $(f){return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(f)}function ne(f,e){if(f){if(typeof f=="string")return a(f,e);var i={}.toString.call(f).slice(8,-1);return i==="Object"&&f.constructor&&(i=f.constructor.name),i==="Map"||i==="Set"?Array.from(f):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(f,e):void 0}}var X=function(){function f(){s(this,f)}return c(f,[{key:"shadeRGBColor",value:function(e,i){var n=i.split(","),r=e<0?0:255,l=e<0?-1*e:e,h=parseInt(n[0].slice(4),10),u=parseInt(n[1],10),g=parseInt(n[2],10);return"rgb("+(Math.round((r-h)*l)+h)+","+(Math.round((r-u)*l)+u)+","+(Math.round((r-g)*l)+g)+")"}},{key:"shadeHexColor",value:function(e,i){var n=parseInt(i.slice(1),16),r=e<0?0:255,l=e<0?-1*e:e,h=n>>16,u=n>>8&255,g=255&n;return"#"+(16777216+65536*(Math.round((r-h)*l)+h)+256*(Math.round((r-u)*l)+u)+(Math.round((r-g)*l)+g)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,i){return f.isColorHex(i)?this.shadeHexColor(e,i):this.shadeRGBColor(e,i)}}],[{key:"bind",value:function(e,i){return function(){return e.apply(i,arguments)}}},{key:"isObject",value:function(e){return e&&$(e)==="object"&&!Array.isArray(e)&&e!=null}},{key:"is",value:function(e,i){return Object.prototype.toString.call(i)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var i,n=[];for(i=0;i<e.length;i++)n[i]=e[i];return n}},{key:"extend",value:function(e,i){var n=this;typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(l),u=1;u<arguments.length;u++){var g=arguments[u];if(g!=null)for(var m in g)g.hasOwnProperty(m)&&(h[m]=g[m])}return h});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(i)&&Object.keys(i).forEach(function(l){n.isObject(i[l])&&l in e?r[l]=n.extend(e[l],i[l]):Object.assign(r,x({},l,i[l]))}),r}},{key:"extendArray",value:function(e,i){var n=[];return e.map(function(r){n.push(f.extend(i,r))}),e=n}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(e){if(f.is("Array",e)){for(var i=[],n=0;n<e.length;n++)i[n]=this.clone(e[n]);return i}if(f.is("Null",e))return null;if(f.is("Date",e))return e;if($(e)==="object"){var r={};for(var l in e)e.hasOwnProperty(l)&&(r[l]=this.clone(e[l]));return r}return e}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,i){return Math.pow(i,Math.floor(Math.log(e)/Math.log(i)))}},{key:"parseNumber",value:function(e){return e===null?e:parseFloat(e)}},{key:"stripNumber",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(e)?e:parseFloat(e.toPrecision(i))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var i=String(e).split(/[eE]/);if(i.length===1)return i[0];var n="",r=e<0?"-":"",l=i[0].replace(".",""),h=Number(i[1])+1;if(h<0){for(n=r+"0.";h++;)n+="0";return n+l.replace(/^-/,"")}for(h-=l.length;h--;)n+="0";return l+n}},{key:"elementExists",value:function(e){return!(!e||!e.isConnected)}},{key:"getDimensions",value:function(e){var i=getComputedStyle(e,null),n=e.clientHeight,r=e.clientWidth;return n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),[r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var i=e.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:e.clientWidth,height:e.clientHeight,x:i.left,y:i.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce(function(i,n){return Array.isArray(n)&&(n=n.reduce(function(r,l){return r.length>l.length?r:l})),i.length>n.length?i:n},0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;e.substring(0,1)!=="#"&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var r=0;r<n.length;r++)n[r]=parseInt(n[r].length===1?n[r]+n[r]:n[r],16);return i!==void 0&&n.push(i),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,i){for(var n=[],r=2*Math.PI/i,l=0;l<i;l++){var h={};h.x=e*Math.sin(l*r),h.y=-e*Math.cos(l*r),n.push(h)}return n}},{key:"polarToCartesian",value:function(e,i,n,r){var l=(r-90)*Math.PI/180;return{x:e+n*Math.cos(l),y:i+n*Math.sin(l)}}},{key:"escapeString",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",n=e.toString().slice();return n=n.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,i)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,i,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(i,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,i){for(;(e=e.parentElement)&&!e.classList.contains(i););return e}},{key:"setELstyles",value:function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e.style.key=i[n])}},{key:"preciseAddition",value:function(e,i){var n=(String(e).split(".")[1]||"").length,r=(String(i).split(".")[1]||"").length,l=Math.pow(10,Math.max(n,r));return(Math.round(e*l)+Math.round(i*l))/l}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isMsEdge",value:function(){var e=window.navigator.userAgent,i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)}},{key:"getGCD",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,i))));for(e=Math.round(Math.abs(e)*r),i=Math.round(Math.abs(i)*r);i;){var l=i;i=e%i,e=l}return e/r}},{key:"getPrimeFactors",value:function(e){for(var i=[],n=2;e>=2;)e%n==0?(i.push(n),e/=n):n++;return i}},{key:"mod",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,r=Math.pow(10,n-Math.floor(Math.log10(Math.max(e,i))));return(e=Math.round(Math.abs(e)*r))%(i=Math.round(Math.abs(i)*r))/r}}]),f}(),Z=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"animateLine",value:function(e,i,n,r){e.attr(i).animate(r).attr(n)}},{key:"animateMarker",value:function(e,i,n,r){e.attr({opacity:0}).animate(i).attr({opacity:1}).after(function(){r()})}},{key:"animateRect",value:function(e,i,n,r,l){e.attr(i).animate(r).attr(n).after(function(){return l()})}},{key:"animatePathsGradually",value:function(e){var i=e.el,n=e.realIndex,r=e.j,l=e.fill,h=e.pathFrom,u=e.pathTo,g=e.speed,m=e.delay,y=this.w,b=0;y.config.chart.animations.animateGradually.enabled&&(b=y.config.chart.animations.animateGradually.delay),y.config.chart.animations.dynamicAnimation.enabled&&y.globals.dataChanged&&y.config.chart.type!=="bar"&&(b=0),this.morphSVG(i,n,r,y.config.chart.type!=="line"||y.globals.comboCharts?l:"stroke",h,u,g,m*b)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(e){var i=e.el;i.classList.remove("apexcharts-element-hidden"),i.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(e){var i=this.w;i.globals.animationEnded||(i.globals.animationEnded=!0,this.showDelayedElements(),typeof i.config.chart.events.animationEnd=="function"&&i.config.chart.events.animationEnd(this.ctx,{el:e,w:i}))}},{key:"morphSVG",value:function(e,i,n,r,l,h,u,g){var m=this,y=this.w;l||(l=e.attr("pathFrom")),h||(h=e.attr("pathTo"));var b=function(v){return y.config.chart.type==="radar"&&(u=1),"M 0 ".concat(y.globals.gridHeight)};(!l||l.indexOf("undefined")>-1||l.indexOf("NaN")>-1)&&(l=b()),(!h.trim()||h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h=b()),y.globals.shouldAnimate||(u=1),e.plot(l).animate(1,g).plot(l).animate(u,g).plot(h).after(function(){X.isNumber(n)?n===y.globals.series[y.globals.maxValsInArrayIndex].length-2&&y.globals.shouldAnimate&&m.animationCompleted(e):r!=="none"&&y.globals.shouldAnimate&&(!y.globals.comboCharts&&i===y.globals.series.length-1||y.globals.comboCharts)&&m.animationCompleted(e),m.showDelayedElements()})}}]),f}();const se={},ee=[];function te(f,e){if(Array.isArray(f))for(const i of f)te(i,e);else if(typeof f!="object")ue(Object.getOwnPropertyNames(e)),se[f]=Object.assign(se[f]||{},e);else for(const i in f)te(i,f[i])}function de(f){return se[f]||{}}function ue(f){ee.push(...f)}function Fe(f,e){let i;const n=f.length,r=[];for(i=0;i<n;i++)r.push(e(f[i]));return r}function Pe(f){return f%360*Math.PI/180}function Ye(f){return f.charAt(0).toUpperCase()+f.slice(1)}function He(f,e,i,n){return e!=null&&i!=null||(n=n||f.bbox(),e==null?e=n.width/n.height*i:i==null&&(i=n.height/n.width*e)),{width:e,height:i}}function ei(f,e){const i=f.origin;let n=f.ox!=null?f.ox:f.originX!=null?f.originX:"center",r=f.oy!=null?f.oy:f.originY!=null?f.originY:"center";i!=null&&([n,r]=Array.isArray(i)?i:typeof i=="object"?[i.x,i.y]:[i,i]);const l=typeof n=="string",h=typeof r=="string";if(l||h){const{height:u,width:g,x:m,y}=e.bbox();l&&(n=n.includes("left")?m:n.includes("right")?m+g:m+g/2),h&&(r=r.includes("top")?y:r.includes("bottom")?y+u:y+u/2)}return[n,r]}const ns=new Set(["desc","metadata","title"]),li=f=>ns.has(f.nodeName),At=(f,e,i={})=>{const n={...e};for(const r in n)n[r].valueOf()===i[r]&&delete n[r];Object.keys(n).length?f.node.setAttribute("data-svgjs",JSON.stringify(n)):(f.node.removeAttribute("data-svgjs"),f.node.removeAttribute("svgjs:data"))},qe="http://www.w3.org/2000/svg",wt="http://www.w3.org/2000/xmlns/",Lt="http://www.w3.org/1999/xlink",he={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function Ee(){return he.window}let Mt=class{};const Pt={},hr="___SYMBOL___ROOT___";function Is(f,e=qe){return he.document.createElementNS(e,f)}function ut(f,e=!1){if(f instanceof Mt)return f;if(typeof f=="object")return dr(f);if(f==null)return new Pt[hr];if(typeof f=="string"&&f.charAt(0)!=="<")return dr(he.document.querySelector(f));const i=e?he.document.createElement("div"):Is("svg");return i.innerHTML=f,f=dr(i.firstChild),i.removeChild(i.firstChild),f}function Ne(f,e){return e&&(e instanceof he.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:Is(f)}function Nt(f){if(!f)return null;if(f.instance instanceof Mt)return f.instance;if(f.nodeName==="#document-fragment")return new Pt.Fragment(f);let e=Ye(f.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":Pt[e]||(e="Dom"),new Pt[e](f)}let dr=Nt;function Ce(f,e=f.name,i=!1){return Pt[e]=f,i&&(Pt[hr]=f),ue(Object.getOwnPropertyNames(f.prototype)),f}let Rd=1e3;function mo(f){return"Svgjs"+Ye(f)+Rd++}function xo(f){for(let e=f.children.length-1;e>=0;e--)xo(f.children[e]);return f.id&&(f.id=mo(f.nodeName)),f}function pe(f,e){let i,n;for(n=(f=Array.isArray(f)?f:[f]).length-1;n>=0;n--)for(i in e)f[n].prototype[i]=e[i]}function De(f){return function(...e){const i=e[e.length-1];return!i||i.constructor!==Object||i instanceof Array?f.apply(this,e):f.apply(this,e.slice(0,-1)).attr(i)}}te("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const f=this.position();return this.parent().add(this.remove(),f+1),this},backward:function(){const f=this.position();return this.parent().add(this.remove(),f?f-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(f){(f=ut(f)).remove();const e=this.position();return this.parent().add(f,e),this},after:function(f){(f=ut(f)).remove();const e=this.position();return this.parent().add(f,e+1),this},insertBefore:function(f){return(f=ut(f)).before(this),this},insertAfter:function(f){return(f=ut(f)).after(this),this}});const bo=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,zd=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Fd=/rgb\((\d+),(\d+),(\d+)\)/,Bd=/(#[a-z_][a-z0-9\-_]*)/i,Hd=/\)\s*,?\s*/,Xd=/\s/g,yo=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,vo=/^rgb\(/,wo=/^(\s+)?$/,ko=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yd=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,ti=/[\s,]+/,ur=/[MLHVCSQTAZ]/i;function Wd(f){const e=Math.round(f),i=Math.max(0,Math.min(255,e)).toString(16);return i.length===1?"0"+i:i}function rs(f,e){for(let i=e.length;i--;)if(f[e[i]]==null)return!1;return!0}function fr(f,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?f+6*(e-f)*i:i<.5?e:i<2/3?f+(e-f)*(2/3-i)*6:f}te("Dom",{classes:function(){const f=this.attr("class");return f==null?[]:f.trim().split(ti)},hasClass:function(f){return this.classes().indexOf(f)!==-1},addClass:function(f){if(!this.hasClass(f)){const e=this.classes();e.push(f),this.attr("class",e.join(" "))}return this},removeClass:function(f){return this.hasClass(f)&&this.attr("class",this.classes().filter(function(e){return e!==f}).join(" ")),this},toggleClass:function(f){return this.hasClass(f)?this.removeClass(f):this.addClass(f)}}),te("Dom",{css:function(f,e){const i={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(n){return!!n.length}).forEach(function(n){const r=n.split(/\s*:\s*/);i[r[0]]=r[1]}),i;if(arguments.length<2){if(Array.isArray(f)){for(const n of f){const r=n;i[n]=this.node.style.getPropertyValue(r)}return i}if(typeof f=="string")return this.node.style.getPropertyValue(f);if(typeof f=="object")for(const n in f)this.node.style.setProperty(n,f[n]==null||wo.test(f[n])?"":f[n])}return arguments.length===2&&this.node.style.setProperty(f,e==null||wo.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),te("Dom",{data:function(f,e,i){if(f==null)return this.data(Fe(function(n,r){let l;const h=n.length,u=[];for(l=0;l<h;l++)r(n[l])&&u.push(n[l]);return u}(this.node.attributes,n=>n.nodeName.indexOf("data-")===0),n=>n.nodeName.slice(5)));if(f instanceof Array){const n={};for(const r of f)n[r]=this.data(r);return n}if(typeof f=="object")for(e in f)this.data(e,f[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+f))}catch{return this.attr("data-"+f)}else this.attr("data-"+f,e===null?null:i===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}}),te("Dom",{remember:function(f,e){if(typeof arguments[0]=="object")for(const i in f)this.remember(i,f[i]);else{if(arguments.length===1)return this.memory()[f];this.memory()[f]=e}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let f=arguments.length-1;f>=0;f--)delete this.memory()[arguments[f]];return this},memory:function(){return this._memory=this._memory||{}}});class Ie{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof Ie||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",i){const{random:n,round:r,sin:l,PI:h}=Math;if(e==="vibrant"){const u=24*n()+57,g=38*n()+45,m=360*n();return new Ie(u,g,m,"lch")}if(e==="sine"){const u=r(80*l(2*h*(i=i??n())/.5+.01)+150),g=r(50*l(2*h*i/.5+4.6)+200),m=r(100*l(2*h*i/.5+2.3)+150);return new Ie(u,g,m)}if(e==="pastel"){const u=8*n()+86,g=17*n()+9,m=360*n();return new Ie(u,g,m,"lch")}if(e==="dark"){const u=10+10*n(),g=50*n()+86,m=360*n();return new Ie(u,g,m,"lch")}if(e==="rgb"){const u=255*n(),g=255*n(),m=255*n();return new Ie(u,g,m)}if(e==="lab"){const u=100*n(),g=256*n()-128,m=256*n()-128;return new Ie(u,g,m,"lab")}if(e==="grey"){const u=255*n();return new Ie(u,u,u)}throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(yo.test(e)||vo.test(e))}cmyk(){const{_a:e,_b:i,_c:n}=this.rgb(),[r,l,h]=[e,i,n].map(g=>g/255),u=Math.min(1-r,1-l,1-h);return u===1?new Ie(0,0,0,1,"cmyk"):new Ie((1-r-u)/(1-u),(1-l-u)/(1-u),(1-h-u)/(1-u),u,"cmyk")}hsl(){const{_a:e,_b:i,_c:n}=this.rgb(),[r,l,h]=[e,i,n].map(v=>v/255),u=Math.max(r,l,h),g=Math.min(r,l,h),m=(u+g)/2,y=u===g,b=u-g;return new Ie(360*(y?0:u===r?((l-h)/b+(l<h?6:0))/6:u===l?((h-r)/b+2)/6:u===h?((r-l)/b+4)/6:0),100*(y?0:m>.5?b/(2-u-g):b/(u+g)),100*m,"hsl")}init(e=0,i=0,n=0,r=0,l="rgb"){if(e=e||0,this.space)for(const b in this.space)delete this[this.space[b]];if(typeof e=="number")l=typeof r=="string"?r:l,r=typeof r=="string"?0:r,Object.assign(this,{_a:e,_b:i,_c:n,_d:r,space:l});else if(e instanceof Array)this.space=i||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const b=function(v,k){const A=rs(v,"rgb")?{_a:v.r,_b:v.g,_c:v.b,_d:0,space:"rgb"}:rs(v,"xyz")?{_a:v.x,_b:v.y,_c:v.z,_d:0,space:"xyz"}:rs(v,"hsl")?{_a:v.h,_b:v.s,_c:v.l,_d:0,space:"hsl"}:rs(v,"lab")?{_a:v.l,_b:v.a,_c:v.b,_d:0,space:"lab"}:rs(v,"lch")?{_a:v.l,_b:v.c,_c:v.h,_d:0,space:"lch"}:rs(v,"cmyk")?{_a:v.c,_b:v.m,_c:v.y,_d:v.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return A.space=k||A.space,A}(e,i);Object.assign(this,b)}else if(typeof e=="string")if(vo.test(e)){const b=e.replace(Xd,""),[v,k,A]=Fd.exec(b).slice(1,4).map(C=>parseInt(C));Object.assign(this,{_a:v,_b:k,_c:A,_d:0,space:"rgb"})}else{if(!yo.test(e))throw Error("Unsupported string format, can't construct Color");{const b=C=>parseInt(C,16),[,v,k,A]=zd.exec(function(C){return C.length===4?["#",C.substring(1,2),C.substring(1,2),C.substring(2,3),C.substring(2,3),C.substring(3,4),C.substring(3,4)].join(""):C}(e)).map(b);Object.assign(this,{_a:v,_b:k,_c:A,_d:0,space:"rgb"})}}const{_a:h,_b:u,_c:g,_d:m}=this,y=this.space==="rgb"?{r:h,g:u,b:g}:this.space==="xyz"?{x:h,y:u,z:g}:this.space==="hsl"?{h,s:u,l:g}:this.space==="lab"?{l:h,a:u,b:g}:this.space==="lch"?{l:h,c:u,h:g}:this.space==="cmyk"?{c:h,m:u,y:g,k:m}:{};Object.assign(this,y)}lab(){const{x:e,y:i,z:n}=this.xyz();return new Ie(116*i-16,500*(e-i),200*(i-n),"lab")}lch(){const{l:e,a:i,b:n}=this.lab(),r=Math.sqrt(i**2+n**2);let l=180*Math.atan2(n,i)/Math.PI;return l<0&&(l*=-1,l=360-l),new Ie(e,r,l,"lch")}rgb(){if(this.space==="rgb")return this;if((e=this.space)==="lab"||e==="xyz"||e==="lch"){let{x:i,y:n,z:r}=this;if(this.space==="lab"||this.space==="lch"){let{l:k,a:A,b:C}=this;if(this.space==="lch"){const{c:H,h:z}=this,B=Math.PI/180;A=H*Math.cos(B*z),C=H*Math.sin(B*z)}const T=(k+16)/116,O=A/500+T,L=T-C/200,P=16/116,F=.008856,N=7.787;i=.95047*(O**3>F?O**3:(O-P)/N),n=1*(T**3>F?T**3:(T-P)/N),r=1.08883*(L**3>F?L**3:(L-P)/N)}const l=3.2406*i+-1.5372*n+-.4986*r,h=-.9689*i+1.8758*n+.0415*r,u=.0557*i+-.204*n+1.057*r,g=Math.pow,m=.0031308,y=l>m?1.055*g(l,1/2.4)-.055:12.92*l,b=h>m?1.055*g(h,1/2.4)-.055:12.92*h,v=u>m?1.055*g(u,1/2.4)-.055:12.92*u;return new Ie(255*y,255*b,255*v)}if(this.space==="hsl"){let{h:i,s:n,l:r}=this;if(i/=360,n/=100,r/=100,n===0)return r*=255,new Ie(r,r,r);const l=r<.5?r*(1+n):r+n-r*n,h=2*r-l,u=255*fr(h,l,i+1/3),g=255*fr(h,l,i),m=255*fr(h,l,i-1/3);return new Ie(u,g,m)}if(this.space==="cmyk"){const{c:i,m:n,y:r,k:l}=this,h=255*(1-Math.min(1,i*(1-l)+l)),u=255*(1-Math.min(1,n*(1-l)+l)),g=255*(1-Math.min(1,r*(1-l)+l));return new Ie(h,u,g)}return this;var e}toArray(){const{_a:e,_b:i,_c:n,_d:r,space:l}=this;return[e,i,n,r,l]}toHex(){const[e,i,n]=this._clamped().map(Wd);return`#${e}${i}${n}`}toRgb(){const[e,i,n]=this._clamped();return`rgb(${e},${i},${n})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:i,_c:n}=this.rgb(),[r,l,h]=[e,i,n].map(T=>T/255),u=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,g=l>.04045?Math.pow((l+.055)/1.055,2.4):l/12.92,m=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,y=(.4124*u+.3576*g+.1805*m)/.95047,b=(.2126*u+.7152*g+.0722*m)/1,v=(.0193*u+.1192*g+.9505*m)/1.08883,k=y>.008856?Math.pow(y,1/3):7.787*y+16/116,A=b>.008856?Math.pow(b,1/3):7.787*b+16/116,C=v>.008856?Math.pow(v,1/3):7.787*v+16/116;return new Ie(k,A,C,"xyz")}_clamped(){const{_a:e,_b:i,_c:n}=this.rgb(),{max:r,min:l,round:h}=Math;return[e,i,n].map(u=>r(0,l(h(u),255)))}}class Te{constructor(...e){this.init(...e)}clone(){return new Te(this)}init(e,i){const l=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:i};return this.x=l.x==null?0:l.x,this.y=l.y==null?0:l.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){fe.isMatrixLike(e)||(e=new fe(e));const{x:i,y:n}=this;return this.x=e.a*i+e.c*n+e.e,this.y=e.b*i+e.d*n+e.f,this}}function as(f,e,i){return Math.abs(e-f)<1e-6}class fe{constructor(...e){this.init(...e)}static formatTransforms(e){const i=e.flip==="both"||e.flip===!0,n=e.flip&&(i||e.flip==="x")?-1:1,r=e.flip&&(i||e.flip==="y")?-1:1,l=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,h=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,u=e.scale&&e.scale.length?e.scale[0]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleX)?e.scaleX*n:n,g=e.scale&&e.scale.length?e.scale[1]*r:isFinite(e.scale)?e.scale*r:isFinite(e.scaleY)?e.scaleY*r:r,m=e.shear||0,y=e.rotate||e.theta||0,b=new Te(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),v=b.x,k=b.y,A=new Te(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),C=A.x,T=A.y,O=new Te(e.translate||e.tx||e.translateX,e.ty||e.translateY),L=O.x,P=O.y,F=new Te(e.relative||e.rx||e.relativeX,e.ry||e.relativeY);return{scaleX:u,scaleY:g,skewX:l,skewY:h,shear:m,theta:y,rx:F.x,ry:F.y,tx:L,ty:P,ox:v,oy:k,px:C,py:T}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,i,n){const r=e.a*i.a+e.c*i.b,l=e.b*i.a+e.d*i.b,h=e.a*i.c+e.c*i.d,u=e.b*i.c+e.d*i.d,g=e.e+e.a*i.e+e.c*i.f,m=e.f+e.b*i.e+e.d*i.f;return n.a=r,n.b=l,n.c=h,n.d=u,n.e=g,n.f=m,n}around(e,i,n){return this.clone().aroundO(e,i,n)}aroundO(e,i,n){const r=e||0,l=i||0;return this.translateO(-r,-l).lmultiplyO(n).translateO(r,l)}clone(){return new fe(this)}decompose(e=0,i=0){const n=this.a,r=this.b,l=this.c,h=this.d,u=this.e,g=this.f,m=n*h-r*l,y=m>0?1:-1,b=y*Math.sqrt(n*n+r*r),v=Math.atan2(y*r,y*n),k=180/Math.PI*v,A=Math.cos(v),C=Math.sin(v),T=(n*l+r*h)/m,O=l*b/(T*n-r)||h*b/(T*r+n);return{scaleX:b,scaleY:O,shear:T,rotate:k,translateX:u-e+e*A*b+i*(T*A*b-C*O),translateY:g-i+e*C*b+i*(T*C*b+A*O),originX:e,originY:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const i=new fe(e);return as(this.a,i.a)&&as(this.b,i.b)&&as(this.c,i.c)&&as(this.d,i.d)&&as(this.e,i.e)&&as(this.f,i.f)}flip(e,i){return this.clone().flipO(e,i)}flipO(e,i){return e==="x"?this.scaleO(-1,1,i,0):e==="y"?this.scaleO(1,-1,0,i):this.scaleO(-1,-1,e,i||e)}init(e){const i=fe.fromArray([1,0,0,1,0,0]);return e=e instanceof et?e.matrixify():typeof e=="string"?fe.fromArray(e.split(ti).map(parseFloat)):Array.isArray(e)?fe.fromArray(e):typeof e=="object"&&fe.isMatrixLike(e)?e:typeof e=="object"?new fe().transform(e):arguments.length===6?fe.fromArray([].slice.call(arguments)):i,this.a=e.a!=null?e.a:i.a,this.b=e.b!=null?e.b:i.b,this.c=e.c!=null?e.c:i.c,this.d=e.d!=null?e.d:i.d,this.e=e.e!=null?e.e:i.e,this.f=e.f!=null?e.f:i.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,i=this.b,n=this.c,r=this.d,l=this.e,h=this.f,u=e*r-i*n;if(!u)throw new Error("Cannot invert "+this);const g=r/u,m=-i/u,y=-n/u,b=e/u,v=-(g*l+y*h),k=-(m*l+b*h);return this.a=g,this.b=m,this.c=y,this.d=b,this.e=v,this.f=k,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const i=e instanceof fe?e:new fe(e);return fe.matrixMultiply(i,this,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const i=e instanceof fe?e:new fe(e);return fe.matrixMultiply(this,i,this)}rotate(e,i,n){return this.clone().rotateO(e,i,n)}rotateO(e,i=0,n=0){e=Pe(e);const r=Math.cos(e),l=Math.sin(e),{a:h,b:u,c:g,d:m,e:y,f:b}=this;return this.a=h*r-u*l,this.b=u*r+h*l,this.c=g*r-m*l,this.d=m*r+g*l,this.e=y*r-b*l+n*l-i*r+i,this.f=b*r+y*l-i*l-n*r+n,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,i=e,n=0,r=0){arguments.length===3&&(r=n,n=i,i=e);const{a:l,b:h,c:u,d:g,e:m,f:y}=this;return this.a=l*e,this.b=h*i,this.c=u*e,this.d=g*i,this.e=m*e-n*e+n,this.f=y*i-r*i+r,this}shear(e,i,n){return this.clone().shearO(e,i,n)}shearO(e,i=0,n=0){const{a:r,b:l,c:h,d:u,e:g,f:m}=this;return this.a=r+l*e,this.c=h+u*e,this.e=g+m*e-n*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,i=e,n=0,r=0){arguments.length===3&&(r=n,n=i,i=e),e=Pe(e),i=Pe(i);const l=Math.tan(e),h=Math.tan(i),{a:u,b:g,c:m,d:y,e:b,f:v}=this;return this.a=u+g*l,this.b=g+u*h,this.c=m+y*l,this.d=y+m*h,this.e=b+v*l-r*l,this.f=v+b*h-n*h,this}skewX(e,i,n){return this.skew(e,0,i,n)}skewY(e,i,n){return this.skew(0,e,i,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(fe.isMatrixLike(e))return new fe(e).multiplyO(this);const i=fe.formatTransforms(e),{x:n,y:r}=new Te(i.ox,i.oy).transform(this),l=new fe().translateO(i.rx,i.ry).lmultiplyO(this).translateO(-n,-r).scaleO(i.scaleX,i.scaleY).skewO(i.skewX,i.skewY).shearO(i.shear).rotateO(i.theta).translateO(n,r);if(isFinite(i.px)||isFinite(i.py)){const h=new Te(n,r).transform(l),u=isFinite(i.px)?i.px-h.x:0,g=isFinite(i.py)?i.py-h.y:0;l.translateO(u,g)}return l.translateO(i.tx,i.ty),l}translate(e,i){return this.clone().translateO(e,i)}translateO(e,i){return this.e+=e||0,this.f+=i||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function ci(){if(!ci.nodes){const f=ut().size(2,0);f.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),f.attr("focusable","false"),f.attr("aria-hidden","true");const e=f.path().node;ci.nodes={svg:f,path:e}}if(!ci.nodes.svg.node.parentNode){const f=he.document.body||he.document.documentElement;ci.nodes.svg.addTo(f)}return ci.nodes}function So(f){return!(f.width||f.height||f.x||f.y)}Ce(fe,"Matrix");class _e{constructor(...e){this.init(...e)}addOffset(){return this.x+=he.window.pageXOffset,this.y+=he.window.pageYOffset,new _e(this)}init(e){return e=typeof e=="string"?e.split(ti).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return So(this)}merge(e){const i=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width)-i,l=Math.max(this.y+this.height,e.y+e.height)-n;return new _e(i,n,r,l)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof fe||(e=new fe(e));let i=1/0,n=-1/0,r=1/0,l=-1/0;return[new Te(this.x,this.y),new Te(this.x2,this.y),new Te(this.x,this.y2),new Te(this.x2,this.y2)].forEach(function(h){h=h.transform(e),i=Math.min(i,h.x),n=Math.max(n,h.x),r=Math.min(r,h.y),l=Math.max(l,h.y)}),new _e(i,r,n-i,l-r)}}function Co(f,e,i){let n;try{if(n=e(f.node),So(n)&&(r=f.node)!==he.document&&!(he.document.documentElement.contains||function(l){for(;l.parentNode;)l=l.parentNode;return l===he.document}).call(he.document.documentElement,r))throw new Error("Element not in the dom")}catch{n=i(f)}var r;return n}te({viewbox:{viewbox(f,e,i,n){return f==null?new _e(this.attr("viewBox")):this.attr("viewBox",new _e(f,e,i,n))},zoom(f,e){let{width:i,height:n}=this.attr(["width","height"]);if((i||n)&&typeof i!="string"&&typeof n!="string"||(i=this.node.clientWidth,n=this.node.clientHeight),!i||!n)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),l=i/r.width,h=n/r.height,u=Math.min(l,h);if(f==null)return u;let g=u/f;g===1/0&&(g=Number.MAX_SAFE_INTEGER/100),e=e||new Te(i/2/l+r.x,n/2/h+r.y);const m=new _e(r).transform(new fe({scale:g,origin:e}));return this.viewbox(m)}}}),Ce(_e,"Box");class Di extends Array{constructor(e=[],...i){if(super(e,...i),typeof e=="number")return this;this.length=0,this.push(...e)}}pe([Di],{each(f,...e){return typeof f=="function"?this.map((i,n,r)=>f.call(i,i,n,r)):this.map(i=>i[f](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const _d=["toArray","constructor","each"];function Ri(f,e){return new Di(Fe((e||he.document).querySelectorAll(f),function(i){return Nt(i)}))}Di.extend=function(f){f=f.reduce((e,i)=>(_d.includes(i)||i[0]==="_"||(i in Array.prototype&&(e["$"+i]=Array.prototype[i]),e[i]=function(...n){return this.each(i,...n)}),e),{}),pe([Di],f)};let jd=0;const Ao={};function Mo(f){let e=f.getEventHolder();return e===he.window&&(e=Ao),e.events||(e.events={}),e.events}function pr(f){return f.getEventTarget()}function ii(f,e,i,n,r){const l=i.bind(n||f),h=ut(f),u=Mo(h),g=pr(h);e=Array.isArray(e)?e:e.split(ti),i._svgjsListenerId||(i._svgjsListenerId=++jd),e.forEach(function(m){const y=m.split(".")[0],b=m.split(".")[1]||"*";u[y]=u[y]||{},u[y][b]=u[y][b]||{},u[y][b][i._svgjsListenerId]=l,g.addEventListener(y,l,r||!1)})}function Dt(f,e,i,n){const r=ut(f),l=Mo(r),h=pr(r);(typeof i!="function"||(i=i._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(ti)).forEach(function(u){const g=u&&u.split(".")[0],m=u&&u.split(".")[1];let y,b;if(i)l[g]&&l[g][m||"*"]&&(h.removeEventListener(g,l[g][m||"*"][i],n||!1),delete l[g][m||"*"][i]);else if(g&&m){if(l[g]&&l[g][m]){for(b in l[g][m])Dt(h,[g,m].join("."),b);delete l[g][m]}}else if(m)for(u in l)for(y in l[u])m===y&&Dt(h,[u,m].join("."));else if(g){if(l[g]){for(y in l[g])Dt(h,[g,y].join("."));delete l[g]}}else{for(u in l)Dt(h,u);(function(v){let k=v.getEventHolder();k===he.window&&(k=Ao),k.events&&(k.events={})})(r)}})}class Ls extends Mt{addEventListener(){}dispatch(e,i,n){return function(r,l,h,u){const g=pr(r);return l instanceof he.window.Event||(l=new he.window.CustomEvent(l,{detail:h,cancelable:!0,...u})),g.dispatchEvent(l),l}(this,e,i,n)}dispatchEvent(e){const i=this.getEventHolder().events;if(!i)return!0;const n=i[e.type];for(const r in n)for(const l in n[r])n[r][l](e);return!e.defaultPrevented}fire(e,i,n){return this.dispatch(e,i,n),this}getEventHolder(){return this}getEventTarget(){return this}off(e,i,n){return Dt(this,e,i,n),this}on(e,i,n,r){return ii(this,e,i,n,r),this}removeEventListener(){}}function To(){}Ce(Ls,"EventTarget");const gr=400,Vd=">",Gd=0,qd={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class zi extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"||(this.length=0,this.push(...this.parse(e))),this}parse(e=[]){return e instanceof Array?e:e.trim().split(ti).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class ve{constructor(...e){this.init(...e)}convert(e){return new ve(this.value,e)}divide(e){return e=new ve(e),new ve(this/e,this.unit||e.unit)}init(e,i){return i=Array.isArray(e)?e[1]:i,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=i||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(i=e.match(bo))&&(this.value=parseFloat(i[1]),i[5]==="%"?this.value/=100:i[5]==="s"&&(this.value*=1e3),this.unit=i[5]):e instanceof ve&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new ve(e),new ve(this-e,this.unit||e.unit)}plus(e){return e=new ve(e),new ve(this+e,this.unit||e.unit)}times(e){return e=new ve(e),new ve(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const $d=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Oo=[];class hi extends Ls{constructor(e,i){super(),this.node=e,this.type=e.nodeName,i&&e!==i&&this.attr(i)}add(e,i){return(e=ut(e)).removeNamespace&&this.node instanceof he.window.SVGElement&&e.removeNamespace(),i==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[i]&&this.node.insertBefore(e.node,this.node.childNodes[i]),this}addTo(e,i){return ut(e).put(this,i)}children(){return new Di(Fe(this.node.children,function(e){return Nt(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,i=!0){this.writeDataToDom();let n=this.node.cloneNode(e);return i&&(n=xo(n)),new this.constructor(n)}each(e,i){const n=this.children();let r,l;for(r=0,l=n.length;r<l;r++)e.apply(n[r],[r,n]),i&&n[r].each(e,i);return this}element(e,i){return this.put(new hi(Is(e),i))}first(){return Nt(this.node.firstChild)}get(e){return Nt(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,i){return this.xml(e,i,"http://www.w3.org/1999/xhtml")}id(e){return e!==void 0||this.node.id||(this.node.id=mo(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return Nt(this.node.lastChild)}matches(e){const i=this.node,n=i.matches||i.matchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||null;return n&&n.call(i,e)}parent(e){let i=this;if(!i.node.parentNode)return null;if(i=Nt(i.node.parentNode),!e)return i;do if(typeof e=="string"?i.matches(e):i instanceof e)return i;while(i=Nt(i.node.parentNode));return i}put(e,i){return e=ut(e),this.add(e,i),e}putIn(e,i){return ut(e).add(this,i)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=ut(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,i=null){const n=10**e,r=this.attr(i);for(const l in r)typeof r[l]=="number"&&(r[l]=Math.round(r[l]*n)/n);return this.attr(r),this}svg(e,i){return this.xml(e,i,qe)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const i=this.parent();if(!i)return this.addTo(e);const n=i.index(this);return i.put(e,n).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,i,n){if(typeof e=="boolean"&&(n=i,i=e,e=null),e==null||typeof e=="function"){i=i==null||i,this.writeDataToDom();let u=this;if(e!=null){if(u=Nt(u.node.cloneNode(!0)),i){const g=e(u);if(u=g||u,g===!1)return""}u.each(function(){const g=e(this),m=g||this;g===!1?this.remove():g&&this!==m&&this.replace(m)},!0)}return i?u.node.outerHTML:u.node.innerHTML}i=i!=null&&i;const r=Is("wrapper",n),l=he.document.createDocumentFragment();r.innerHTML=e;for(let u=r.children.length;u--;)l.appendChild(r.firstElementChild);const h=this.parent();return i?this.replace(l)&&h:this.add(l)}}pe(hi,{attr:function(f,e,i){if(f==null){f={},e=this.node.attributes;for(const n of e)f[n.nodeName]=ko.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return f}if(f instanceof Array)return f.reduce((n,r)=>(n[r]=this.attr(r),n),{});if(typeof f=="object"&&f.constructor===Object)for(e in f)this.attr(e,f[e]);else if(e===null)this.node.removeAttribute(f);else{if(e==null)return(e=this.node.getAttribute(f))==null?qd[f]:ko.test(e)?parseFloat(e):e;typeof(e=Oo.reduce((n,r)=>r(f,n,this),e))=="number"?e=new ve(e):$d.has(f)&&Ie.isColor(e)?e=new Ie(e):e.constructor===Array&&(e=new zi(e)),f==="leading"?this.leading&&this.leading(e):typeof i=="string"?this.node.setAttributeNS(i,f,e.toString()):this.node.setAttribute(f,e.toString()),!this.rebuild||f!=="font-size"&&f!=="x"||this.rebuild()}return this},find:function(f){return Ri(f,this.node)},findOne:function(f){return Nt(this.node.querySelector(f))}}),Ce(hi,"Dom");class et extends hi{constructor(e,i){super(e,i),this.dom={},this.node.instance=this,(e.hasAttribute("data-svgjs")||e.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(e.getAttribute("data-svgjs"))??JSON.parse(e.getAttribute("svgjs:data"))??{})}center(e,i){return this.cx(e).cy(i)}cx(e){return e==null?this.x()+this.width()/2:this.x(e-this.width()/2)}cy(e){return e==null?this.y()+this.height()/2:this.y(e-this.height()/2)}defs(){const e=this.root();return e&&e.defs()}dmove(e,i){return this.dx(e).dy(i)}dx(e=0){return this.x(new ve(e).plus(this.x()))}dy(e=0){return this.y(new ve(e).plus(this.y()))}getEventHolder(){return this}height(e){return this.attr("height",e)}move(e,i){return this.x(e).y(i)}parents(e=this.root()){const i=typeof e=="string";i||(e=ut(e));const n=new Di;let r=this;for(;(r=r.parent())&&r.node!==he.document&&r.nodeName!=="#document-fragment"&&(n.push(r),i||r.node!==e.node)&&(!i||!r.matches(e));)if(r.node===this.root().node)return null;return n}reference(e){if(!(e=this.attr(e)))return null;const i=(e+"").match(Bd);return i?ut(i[1]):null}root(){const e=this.parent(function(i){return Pt[i]}(hr));return e&&e.root()}setData(e){return this.dom=e,this}size(e,i){const n=He(this,e,i);return this.width(new ve(n.width)).height(new ve(n.height))}width(e){return this.attr("width",e)}writeDataToDom(){return At(this,this.dom),super.writeDataToDom()}x(e){return this.attr("x",e)}y(e){return this.attr("y",e)}}pe(et,{bbox:function(){const f=Co(this,e=>e.getBBox(),e=>{try{const i=e.clone().addTo(ci().svg).show(),n=i.node.getBBox();return i.remove(),n}catch(i){throw new Error(`Getting bbox of element "${e.node.nodeName}" is not possible: ${i.toString()}`)}});return new _e(f)},rbox:function(f){const e=Co(this,n=>n.getBoundingClientRect(),n=>{throw new Error(`Getting rbox of element "${n.node.nodeName}" is not possible`)}),i=new _e(e);return f?i.transform(f.screenCTM().inverseO()):i.addOffset()},inside:function(f,e){const i=this.bbox();return f>i.x&&e>i.y&&f<i.x+i.width&&e<i.y+i.height},point:function(f,e){return new Te(f,e).transformO(this.screenCTM().inverseO())},ctm:function(){return new fe(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const f=this.rect(1,1),e=f.node.getScreenCTM();return f.remove(),new fe(e)}return new fe(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new fe}}}),Ce(et,"Element");const Ps={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(f,e){return e==="color"?f:f+"-"+e}};["fill","stroke"].forEach(function(f){const e={};let i;e[f]=function(n){if(n===void 0)return this.attr(f);if(typeof n=="string"||n instanceof Ie||Ie.isRgb(n)||n instanceof et)this.attr(f,n);else for(i=Ps[f].length-1;i>=0;i--)n[Ps[f][i]]!=null&&this.attr(Ps.prefix(f,Ps[f][i]),n[Ps[f][i]]);return this},te(["Element","Runner"],e)}),te(["Element","Runner"],{matrix:function(f,e,i,n,r,l){return f==null?new fe(this):this.attr("transform",new fe(f,e,i,n,r,l))},rotate:function(f,e,i){return this.transform({rotate:f,ox:e,oy:i},!0)},skew:function(f,e,i,n){return arguments.length===1||arguments.length===3?this.transform({skew:f,ox:e,oy:i},!0):this.transform({skew:[f,e],ox:i,oy:n},!0)},shear:function(f,e,i){return this.transform({shear:f,ox:e,oy:i},!0)},scale:function(f,e,i,n){return arguments.length===1||arguments.length===3?this.transform({scale:f,ox:e,oy:i},!0):this.transform({scale:[f,e],ox:i,oy:n},!0)},translate:function(f,e){return this.transform({translate:[f,e]},!0)},relative:function(f,e){return this.transform({relative:[f,e]},!0)},flip:function(f="both",e="center"){return"xybothtrue".indexOf(f)===-1&&(e=f,f="both"),this.transform({flip:f,origin:e},!0)},opacity:function(f){return this.attr("opacity",f)}}),te("radius",{radius:function(f,e=f){return(this._element||this).type==="radialGradient"?this.attr("r",new ve(f)):this.rx(f).ry(e)}}),te("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(f){return new Te(this.node.getPointAtLength(f))}}),te(["Element","Runner"],{font:function(f,e){if(typeof f=="object"){for(e in f)this.font(e,f[e]);return this}return f==="leading"?this.leading(e):f==="anchor"?this.attr("text-anchor",e):f==="size"||f==="family"||f==="weight"||f==="stretch"||f==="variant"||f==="style"?this.attr("font-"+f,e):this.attr(f,e)}}),te("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(f,e){return f[e]=function(i){return i===null?this.off(e):this.on(e,i),this},f},{})),te("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(Hd).slice(0,-1).map(function(e){const i=e.trim().split("(");return[i[0],i[1].split(ti).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(e,i){return i[0]==="matrix"?e.lmultiply(fe.fromArray(i[1])):e[i[0]].apply(e,i[1])},new fe)},toParent:function(f,e){if(this===f)return this;if(li(this.node))return this.addTo(f,e);const i=this.screenCTM(),n=f.screenCTM().inverse();return this.addTo(f,e).untransform().transform(n.multiply(i)),this},toRoot:function(f){return this.toParent(this.root(),f)},transform:function(f,e){if(f==null||typeof f=="string"){const n=new fe(this).decompose();return f==null?n:n[f]}fe.isMatrixLike(f)||(f={...f,origin:ei(f,this)});const i=new fe(e===!0?this:e||!1).transform(f);return this.attr("transform",i)}});class ft extends et{flatten(){return this.each(function(){if(this instanceof ft)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),i=e.index(this)){return i=i===-1?e.children().length:i,this.each(function(n,r){return r[r.length-n-1].toParent(e,i)}),this.remove()}}Ce(ft,"Container");class hn extends ft{constructor(e,i=e){super(Ne("defs",e),i)}flatten(){return this}ungroup(){return this}}Ce(hn,"Defs");class Tt extends et{}function mr(f){return this.attr("rx",f)}function xr(f){return this.attr("ry",f)}function Eo(f){return f==null?this.cx()-this.rx():this.cx(f+this.rx())}function Io(f){return f==null?this.cy()-this.ry():this.cy(f+this.ry())}function Lo(f){return this.attr("cx",f)}function Po(f){return this.attr("cy",f)}function No(f){return f==null?2*this.rx():this.rx(new ve(f).divide(2))}function Do(f){return f==null?2*this.ry():this.ry(new ve(f).divide(2))}Ce(Tt,"Shape");var Ud=Object.freeze({__proto__:null,cx:Lo,cy:Po,height:Do,rx:mr,ry:xr,width:No,x:Eo,y:Io});class dn extends Tt{constructor(e,i=e){super(Ne("ellipse",e),i)}size(e,i){const n=He(this,e,i);return this.rx(new ve(n.width).divide(2)).ry(new ve(n.height).divide(2))}}pe(dn,Ud),te("Container",{ellipse:De(function(f=0,e=f){return this.put(new dn).size(f,e).move(0,0)})}),Ce(dn,"Ellipse");class Ro extends hi{constructor(e=he.document.createDocumentFragment()){super(e)}xml(e,i,n){if(typeof e=="boolean"&&(n=i,i=e,e=null),e==null||typeof e=="function"){const r=new hi(Is("wrapper",n));return r.add(this.node.cloneNode(!0)),r.xml(!1,n)}return super.xml(e,!1,n)}}function zo(f,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new ve(f),fy:new ve(e)}):this.attr({x1:new ve(f),y1:new ve(e)})}function Fo(f,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new ve(f),cy:new ve(e)}):this.attr({x2:new ve(f),y2:new ve(e)})}Ce(Ro,"Fragment");var Jd=Object.freeze({__proto__:null,from:zo,to:Fo});class Ns extends ft{constructor(e,i){super(Ne(e+"Gradient",typeof e=="string"?null:e),i)}attr(e,i,n){return e==="transform"&&(e="gradientTransform"),super.attr(e,i,n)}bbox(){return new _e}targets(){return Ri("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}pe(Ns,Jd),te({Container:{gradient(...f){return this.defs().gradient(...f)}},Defs:{gradient:De(function(f,e){return this.put(new Ns(f)).update(e)})}}),Ce(Ns,"Gradient");class Ds extends ft{constructor(e,i=e){super(Ne("pattern",e),i)}attr(e,i,n){return e==="transform"&&(e="patternTransform"),super.attr(e,i,n)}bbox(){return new _e}targets(){return Ri("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}te({Container:{pattern(...f){return this.defs().pattern(...f)}},Defs:{pattern:De(function(f,e,i){return this.put(new Ds).update(i).attr({x:0,y:0,width:f,height:e,patternUnits:"userSpaceOnUse"})})}}),Ce(Ds,"Pattern");let un=class extends Tt{constructor(f,e=f){super(Ne("image",f),e)}load(f,e){if(!f)return this;const i=new he.window.Image;return ii(i,"load",function(n){const r=this.parent(Ds);this.width()===0&&this.height()===0&&this.size(i.width,i.height),r instanceof Ds&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof e=="function"&&e.call(this,n)},this),ii(i,"load error",function(){Dt(i)}),this.attr("href",i.src=f,Lt)}};var Bo;Bo=function(f,e,i){return f!=="fill"&&f!=="stroke"||Yd.test(e)&&(e=i.root().defs().image(e)),e instanceof un&&(e=i.root().defs().pattern(0,0,n=>{n.add(e)})),e},Oo.push(Bo),te({Container:{image:De(function(f,e){return this.put(new un).size(0,0).load(f,e)})}}),Ce(un,"Image");class di extends zi{bbox(){let e=-1/0,i=-1/0,n=1/0,r=1/0;return this.forEach(function(l){e=Math.max(l[0],e),i=Math.max(l[1],i),n=Math.min(l[0],n),r=Math.min(l[1],r)}),new _e(n,r,e-n,i-r)}move(e,i){const n=this.bbox();if(e-=n.x,i-=n.y,!isNaN(e)&&!isNaN(i))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+e,this[r][1]+i];return this}parse(e=[0,0]){const i=[];(e=e instanceof Array?Array.prototype.concat.apply([],e):e.trim().split(ti).map(parseFloat)).length%2!=0&&e.pop();for(let n=0,r=e.length;n<r;n+=2)i.push([e[n],e[n+1]]);return i}size(e,i){let n;const r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*e/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*i/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let i=0,n=this.length;i<n;i++)e.push(this[i].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){fe.isMatrixLike(e)||(e=new fe(e));for(let i=this.length;i--;){const[n,r]=this[i];this[i][0]=e.a*n+e.c*r+e.e,this[i][1]=e.b*n+e.d*r+e.f}return this}}var br=Object.freeze({__proto__:null,MorphArray:di,height:function(f){const e=this.bbox();return f==null?e.height:this.size(e.width,f)},width:function(f){const e=this.bbox();return f==null?e.width:this.size(f,e.height)},x:function(f){return f==null?this.bbox().x:this.move(f,this.bbox().y)},y:function(f){return f==null?this.bbox().y:this.move(this.bbox().x,f)}});let Fi=class extends Tt{constructor(f,e=f){super(Ne("line",f),e)}array(){return new di([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(f,e){return this.attr(this.array().move(f,e).toLine())}plot(f,e,i,n){return f==null?this.array():(f=e!==void 0?{x1:f,y1:e,x2:i,y2:n}:new di(f).toLine(),this.attr(f))}size(f,e){const i=He(this,f,e);return this.attr(this.array().size(i.width,i.height).toLine())}};pe(Fi,br),te({Container:{line:De(function(...f){return Fi.prototype.plot.apply(this.put(new Fi),f[0]!=null?f:[0,0,0,0])})}}),Ce(Fi,"Line");let fn=class extends ft{constructor(f,e=f){super(Ne("marker",f),e)}height(f){return this.attr("markerHeight",f)}orient(f){return this.attr("orient",f)}ref(f,e){return this.attr("refX",f).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(f){return this.clear(),typeof f=="function"&&f.call(this,this),this}width(f){return this.attr("markerWidth",f)}};function ls(f,e){return function(i){return i==null?this[f]:(this[f]=i,e&&e.call(this),this)}}te({Container:{marker(...f){return this.defs().marker(...f)}},Defs:{marker:De(function(f,e,i){return this.put(new fn).size(f,e).ref(f/2,e/2).viewbox(0,0,f,e).attr("orient","auto").update(i)})},marker:{marker(f,e,i,n){let r=["marker"];return f!=="all"&&r.push(f),r=r.join("-"),f=arguments[1]instanceof fn?arguments[1]:this.defs().marker(e,i,n),this.attr(r,f)}}}),Ce(fn,"Marker");const Zd={"-":function(f){return f},"<>":function(f){return-Math.cos(f*Math.PI)/2+.5},">":function(f){return Math.sin(f*Math.PI/2)},"<":function(f){return 1-Math.cos(f*Math.PI/2)},bezier:function(f,e,i,n){return function(r){return r<0?f>0?e/f*r:i>0?n/i*r:0:r>1?i<1?(1-n)/(1-i)*r+(n-i)/(1-i):f<1?(1-e)/(1-f)*r+(e-f)/(1-f):1:3*r*(1-r)**2*e+3*r**2*(1-r)*n+r**3}},steps:function(f,e="end"){e=e.split("-").reverse()[0];let i=f;return e==="none"?--i:e==="both"&&++i,(n,r=!1)=>{let l=Math.floor(n*f);const h=n*l%1==0;return e!=="start"&&e!=="both"||++l,r&&h&&--l,n>=0&&l<0&&(l=0),n<=1&&l>i&&(l=i),l/i}}};class yr{done(){return!1}}class vr extends yr{constructor(e=Vd){super(),this.ease=Zd[e]||e}step(e,i,n){return typeof e!="number"?n<1?e:i:e+(i-e)*this.ease(n)}}class pn extends yr{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,i,n,r){return this.stepper(e,i,n,r)}}function Ho(){const f=(this._duration||500)/1e3,e=this._overshoot||0,i=Math.PI,n=Math.log(e/100+1e-10),r=-n/Math.sqrt(i*i+n*n),l=3.9/(r*f);this.d=2*r*l,this.k=l*l}pe(class extends pn{constructor(f=500,e=0){super(),this.duration(f).overshoot(e)}step(f,e,i,n){if(typeof f=="string")return f;if(n.done=i===1/0,i===1/0)return e;if(i===0)return f;i>100&&(i=16),i/=1e3;const r=n.velocity||0,l=-this.d*r-this.k*(f-e),h=f+r*i+l*i*i/2;return n.velocity=r+l*i,n.done=Math.abs(e-h)+Math.abs(r)<.002,n.done?e:h}},{duration:ls("_duration",Ho),overshoot:ls("_overshoot",Ho)}),pe(class extends pn{constructor(f=.1,e=.01,i=0,n=1e3){super(),this.p(f).i(e).d(i).windup(n)}step(f,e,i,n){if(typeof f=="string")return f;if(n.done=i===1/0,i===1/0)return e;if(i===0)return f;const r=e-f;let l=(n.integral||0)+r*i;const h=(r-(n.error||0))/i,u=this._windup;return u!==!1&&(l=Math.max(-u,Math.min(l,u))),n.error=r,n.integral=l,n.done=Math.abs(r)<.001,n.done?e:f+(this.P*r+this.I*l+this.D*h)}},{windup:ls("_windup"),p:ls("P"),i:ls("I"),d:ls("D")});const Kd={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},wr={M:function(f,e,i){return e.x=i.x=f[0],e.y=i.y=f[1],["M",e.x,e.y]},L:function(f,e){return e.x=f[0],e.y=f[1],["L",f[0],f[1]]},H:function(f,e){return e.x=f[0],["H",f[0]]},V:function(f,e){return e.y=f[0],["V",f[0]]},C:function(f,e){return e.x=f[4],e.y=f[5],["C",f[0],f[1],f[2],f[3],f[4],f[5]]},S:function(f,e){return e.x=f[2],e.y=f[3],["S",f[0],f[1],f[2],f[3]]},Q:function(f,e){return e.x=f[2],e.y=f[3],["Q",f[0],f[1],f[2],f[3]]},T:function(f,e){return e.x=f[0],e.y=f[1],["T",f[0],f[1]]},Z:function(f,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(f,e){return e.x=f[5],e.y=f[6],["A",f[0],f[1],f[2],f[3],f[4],f[5],f[6]]}},kr="mlhvqtcsaz".split("");for(let f=0,e=kr.length;f<e;++f)wr[kr[f]]=function(i){return function(n,r,l){if(i==="H")n[0]=n[0]+r.x;else if(i==="V")n[0]=n[0]+r.y;else if(i==="A")n[5]=n[5]+r.x,n[6]=n[6]+r.y;else for(let h=0,u=n.length;h<u;++h)n[h]=n[h]+(h%2?r.y:r.x);return wr[i](n,r,l)}}(kr[f].toUpperCase());function Sr(f){return f.segment.length&&f.segment.length-1===Kd[f.segment[0].toUpperCase()]}function Qd(f,e){f.inNumber&&Bi(f,!1);const i=ur.test(e);if(i)f.segment=[e];else{const n=f.lastCommand,r=n.toLowerCase(),l=n===r;f.segment=[r==="m"?l?"l":"L":n]}return f.inSegment=!0,f.lastCommand=f.segment[0],i}function Bi(f,e){if(!f.inNumber)throw new Error("Parser Error");f.number&&f.segment.push(parseFloat(f.number)),f.inNumber=e,f.number="",f.pointSeen=!1,f.hasExponent=!1,Sr(f)&&Cr(f)}function Cr(f){f.inSegment=!1,f.absolute&&(f.segment=function(e){const i=e.segment[0];return wr[i](e.segment.slice(1),e.p,e.p0)}(f)),f.segments.push(f.segment)}function eu(f){if(!f.segment.length)return!1;const e=f.segment[0].toUpperCase()==="A",i=f.segment.length;return e&&(i===4||i===5)}function tu(f){return f.lastToken.toUpperCase()==="E"}const iu=new Set([" ",",","	",`
`,"\r","\f"]);class Yt extends zi{bbox(){return ci().path.setAttribute("d",this.toString()),new _e(ci.nodes.path.getBBox())}move(e,i){const n=this.bbox();if(e-=n.x,i-=n.y,!isNaN(e)&&!isNaN(i))for(let r,l=this.length-1;l>=0;l--)r=this[l][0],r==="M"||r==="L"||r==="T"?(this[l][1]+=e,this[l][2]+=i):r==="H"?this[l][1]+=e:r==="V"?this[l][1]+=i:r==="C"||r==="S"||r==="Q"?(this[l][1]+=e,this[l][2]+=i,this[l][3]+=e,this[l][4]+=i,r==="C"&&(this[l][5]+=e,this[l][6]+=i)):r==="A"&&(this[l][6]+=e,this[l][7]+=i);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),function(i,n=!0){let r=0,l="";const h={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:n,p0:new Te,p:new Te};for(;h.lastToken=l,l=i.charAt(r++);)if(h.inSegment||!Qd(h,l))if(l!==".")if(isNaN(parseInt(l)))if(iu.has(l))h.inNumber&&Bi(h,!1);else if(l!=="-"&&l!=="+")if(l.toUpperCase()!=="E"){if(ur.test(l)){if(h.inNumber)Bi(h,!1);else{if(!Sr(h))throw new Error("parser Error");Cr(h)}--r}}else h.number+=l,h.hasExponent=!0;else{if(h.inNumber&&!tu(h)){Bi(h,!1),--r;continue}h.number+=l,h.inNumber=!0}else{if(h.number==="0"||eu(h)){h.inNumber=!0,h.number=l,Bi(h,!0);continue}h.inNumber=!0,h.number+=l}else{if(h.pointSeen||h.hasExponent){Bi(h,!1),--r;continue}h.inNumber=!0,h.pointSeen=!0,h.number+=l}return h.inNumber&&Bi(h,!1),h.inSegment&&Sr(h)&&Cr(h),h.segments}(e)}size(e,i){const n=this.bbox();let r,l;for(n.width=n.width===0?1:n.width,n.height=n.height===0?1:n.height,r=this.length-1;r>=0;r--)l=this[r][0],l==="M"||l==="L"||l==="T"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*i/n.height+n.y):l==="H"?this[r][1]=(this[r][1]-n.x)*e/n.width+n.x:l==="V"?this[r][1]=(this[r][1]-n.y)*i/n.height+n.y:l==="C"||l==="S"||l==="Q"?(this[r][1]=(this[r][1]-n.x)*e/n.width+n.x,this[r][2]=(this[r][2]-n.y)*i/n.height+n.y,this[r][3]=(this[r][3]-n.x)*e/n.width+n.x,this[r][4]=(this[r][4]-n.y)*i/n.height+n.y,l==="C"&&(this[r][5]=(this[r][5]-n.x)*e/n.width+n.x,this[r][6]=(this[r][6]-n.y)*i/n.height+n.y)):l==="A"&&(this[r][1]=this[r][1]*e/n.width,this[r][2]=this[r][2]*i/n.height,this[r][6]=(this[r][6]-n.x)*e/n.width+n.x,this[r][7]=(this[r][7]-n.y)*i/n.height+n.y);return this}toString(){return function(e){let i="";for(let n=0,r=e.length;n<r;n++)i+=e[n][0],e[n][1]!=null&&(i+=e[n][1],e[n][2]!=null&&(i+=" ",i+=e[n][2],e[n][3]!=null&&(i+=" ",i+=e[n][3],i+=" ",i+=e[n][4],e[n][5]!=null&&(i+=" ",i+=e[n][5],i+=" ",i+=e[n][6],e[n][7]!=null&&(i+=" ",i+=e[n][7])))));return i+" "}(this)}}const Xo=f=>{const e=typeof f;return e==="number"?ve:e==="string"?Ie.isColor(f)?Ie:ti.test(f)?ur.test(f)?Yt:zi:bo.test(f)?ve:Ar:Mr.indexOf(f.constructor)>-1?f.constructor:Array.isArray(f)?zi:e==="object"?zs:Ar};class Hi{constructor(e){this._stepper=e||new vr("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(e,i){return e&&i},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(Xo(e));let i=new this._type(e);return this._type===Ie&&(i=this._to?i[this._to[4]]():this._from?i[this._from[4]]():i),this._type===zs&&(i=this._to?i.align(this._to):this._from?i.align(this._from):i),i=i.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(i.length)).map(Object).map(function(n){return n.done=!0,n}),i}}class Ar{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class Rs{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,Rs.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}Rs.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const su=(f,e)=>f[0]<e[0]?-1:f[0]>e[0]?1:0;class zs{constructor(...e){this.init(...e)}align(e){const i=this.values;for(let n=0,r=i.length;n<r;++n){if(i[n+1]===e[n+1]){if(i[n+1]===Ie&&e[n+7]!==i[n+7]){const u=e[n+7],g=new Ie(this.values.splice(n+3,5))[u]().toArray();this.values.splice(n+3,0,...g)}n+=i[n+2]+2;continue}if(!e[n+1])return this;const l=new e[n+1]().toArray(),h=i[n+2]+3;i.splice(n,h,e[n],e[n+1],e[n+2],...l),n+=i[n+2]+2}return this}init(e){if(this.values=[],Array.isArray(e))return void(this.values=e.slice());e=e||{};const i=[];for(const n in e){const r=Xo(e[n]),l=new r(e[n]).toArray();i.push([n,r,l.length,...l])}return i.sort(su),this.values=i.reduce((n,r)=>n.concat(r),[]),this}toArray(){return this.values}valueOf(){const e={},i=this.values;for(;i.length;){const n=i.shift(),r=i.shift(),l=i.shift(),h=i.splice(0,l);e[n]=new r(h)}return e}}const Mr=[Ar,Rs,zs];class cs extends Tt{constructor(e,i=e){super(Ne("path",e),i)}array(){return this._array||(this._array=new Yt(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,i){return this.attr("d",this.array().move(e,i))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new Yt(e))}size(e,i){const n=He(this,e,i);return this.attr("d",this.array().size(n.width,n.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}cs.prototype.MorphArray=Yt,te({Container:{path:De(function(f){return this.put(new cs).plot(f||new Yt)})}}),Ce(cs,"Path");var Yo=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new di(this.attr("points")))},clear:function(){return delete this._array,this},move:function(f,e){return this.attr("points",this.array().move(f,e))},plot:function(f){return f==null?this.array():this.clear().attr("points",typeof f=="string"?f:this._array=new di(f))},size:function(f,e){const i=He(this,f,e);return this.attr("points",this.array().size(i.width,i.height))}});class Xi extends Tt{constructor(e,i=e){super(Ne("polygon",e),i)}}te({Container:{polygon:De(function(f){return this.put(new Xi).plot(f||new di)})}}),pe(Xi,br),pe(Xi,Yo),Ce(Xi,"Polygon");class Yi extends Tt{constructor(e,i=e){super(Ne("polyline",e),i)}}te({Container:{polyline:De(function(f){return this.put(new Yi).plot(f||new di)})}}),pe(Yi,br),pe(Yi,Yo),Ce(Yi,"Polyline");class gn extends Tt{constructor(e,i=e){super(Ne("rect",e),i)}}pe(gn,{rx:mr,ry:xr}),te({Container:{rect:De(function(f,e){return this.put(new gn).size(f,e)})}}),Ce(gn,"Rect");class Tr{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const i=e.next!==void 0?e:{value:e,next:null,prev:null};return this._last?(i.prev=this._last,this._last.next=i,this._last=i):(this._last=i,this._first=i),i}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const Oe={nextDraw:null,frames:new Tr,timeouts:new Tr,immediates:new Tr,timer:()=>he.window.performance||he.window.Date,transforms:[],frame(f){const e=Oe.frames.push({run:f});return Oe.nextDraw===null&&(Oe.nextDraw=he.window.requestAnimationFrame(Oe._draw)),e},timeout(f,e){e=e||0;const i=Oe.timer().now()+e,n=Oe.timeouts.push({run:f,time:i});return Oe.nextDraw===null&&(Oe.nextDraw=he.window.requestAnimationFrame(Oe._draw)),n},immediate(f){const e=Oe.immediates.push(f);return Oe.nextDraw===null&&(Oe.nextDraw=he.window.requestAnimationFrame(Oe._draw)),e},cancelFrame(f){f!=null&&Oe.frames.remove(f)},clearTimeout(f){f!=null&&Oe.timeouts.remove(f)},cancelImmediate(f){f!=null&&Oe.immediates.remove(f)},_draw(f){let e=null;const i=Oe.timeouts.last();for(;(e=Oe.timeouts.shift())&&(f>=e.time?e.run():Oe.timeouts.push(e),e!==i););let n=null;const r=Oe.frames.last();for(;n!==r&&(n=Oe.frames.shift());)n.run(f);let l=null;for(;l=Oe.immediates.shift();)l();Oe.nextDraw=Oe.timeouts.first()||Oe.frames.first()?he.window.requestAnimationFrame(Oe._draw):null}},nu=function(f){const e=f.start,i=f.runner.duration();return{start:e,duration:i,end:e+i,runner:f.runner}},ru=function(){const f=he.window;return(f.performance||f.Date).now()};class Wo extends Ls{constructor(e=ru){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),i=e?e.runner.duration():0;return(e?e.start:this._time)+i}getEndTimeOfTimeline(){const e=this._runners.map(i=>i.start+i.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const i=this.speed();if(e==null)return this.speed(-i);const n=Math.abs(i);return this.speed(e?-n:n)}schedule(e,i,n){if(e==null)return this._runners.map(nu);let r=0;const l=this.getEndTime();if(i=i||0,n==null||n==="last"||n==="after")r=l;else if(n==="absolute"||n==="start")r=i,i=0;else if(n==="now")r=this._time;else if(n==="relative"){const g=this.getRunnerInfoById(e.id);g&&(r=g.start+i,i=0)}else{if(n!=="with-last")throw new Error('Invalid value for the "when" parameter');{const g=this.getLastRunnerInfo();r=g?g.start:this._time}}e.unschedule(),e.timeline(this);const h=e.persist(),u={persist:h===null?this._persist:h,start:r+i,runner:e};return this._lastRunnerId=e.id,this._runners.push(u),this._runners.sort((g,m)=>g.start-m.start),this._runnerIds=this._runners.map(g=>g.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const i=this._runnerIds.indexOf(e.id);return i<0||(this._runners.splice(i,1),this._runnerIds.splice(i,1),e.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return Oe.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():(this._paused||(this._nextFrame=Oe.frame(this._step)),this)}_stepFn(e=!1){const i=this._timeSource();let n=i-this._lastSourceTime;e&&(n=0);const r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=i,e||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let h=this._runners.length;h--;){const u=this._runners[h],g=u.runner;this._time-u.start<=0&&g.reset()}let l=!1;for(let h=0,u=this._runners.length;h<u;h++){const g=this._runners[h],m=g.runner;let y=r;const b=this._time-g.start;if(b<=0){l=!0;continue}b<y&&(y=b),m.active()&&(m.step(y).done?g.persist!==!0&&m.duration()-m.time()+this._time+g.persist<this._time&&(m.unschedule(),--h,--u):l=!0)}return l&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}te({Element:{timeline:function(f){return f==null?(this._timeline=this._timeline||new Wo,this._timeline):(this._timeline=f,this)}}});class Ot extends Ls{constructor(e){super(),this.id=Ot.id++,e=typeof(e=e??gr)=="function"?new pn(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof pn,this._stepper=this._isDeclarative?e:new vr,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new fe,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,i,n){let r=1,l=!1,h=0;return i=i??Gd,n=n||"last",typeof(e=e??gr)!="object"||e instanceof yr||(i=e.delay??i,n=e.when??n,l=e.swing||l,r=e.times??r,h=e.wait??h,e=e.duration??gr),{duration:e,delay:i,swing:l,times:r,wait:h,when:n}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,i,n){const r=Ot.sanitise(e,i,n),l=new Ot(r.duration);return this._timeline&&l.timeline(this._timeline),this._element&&l.element(this._element),l.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new fe,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new vr(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,i,n){return typeof e=="object"&&(i=e.swing,n=e.wait,e=e.times),this._times=e||1/0,this._swing=i||!1,this._wait=n||0,this._times===!0&&(this._times=1/0),this}loops(e){const i=this._duration+this._wait;if(e==null){const l=Math.floor(this._time/i),h=(this._time-l*i)/this._duration;return Math.min(l+h,this._times)}const n=e%1,r=i*Math.floor(e)+this._duration*n;return this.time(r)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const i=this._time,n=this._duration,r=this._wait,l=this._times,h=this._swing,u=this._reverse;let g;if(e==null){const b=function(k){const A=h*Math.floor(k%(2*(r+n))/(r+n)),C=A&&!u||!A&&u,T=Math.pow(-1,C)*(k%(r+n))/n+C;return Math.max(Math.min(T,1),0)},v=l*(r+n)-r;return g=i<=0?Math.round(b(1e-5)):i<v?b(i):Math.round(b(v-1e-5)),g}const m=Math.floor(this.loops()),y=h&&m%2==0;return g=m+(y&&!u||u&&y?e:1-e),this.loops(g)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,i,n,r){return this._queue.push({initialiser:e||To,runner:i||To,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,i,n){if(e instanceof Wo||(n=i,i=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,i,n),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const i=this.position(),n=this._lastPosition!==i&&this._time>=0;this._lastPosition=i;const r=this.duration(),l=this._lastTime<=0&&this._time>0,h=this._lastTime<r&&this._time>=r;this._lastTime=this._time,l&&this.fire("start",this);const u=this._isDeclarative;this.done=!u&&!h&&this._time>=r,this._reseted=!1;let g=!1;return(n||u)&&(this._initialise(n),this.transforms=new fe,g=this._run(u?e:i),this.fire("step",this)),this.done=this.done||g&&u,h&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const i=e-this._time;return this.step(i),this}timeline(e){return e===void 0?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let i=0,n=this._queue.length;i<n;++i){const r=this._queue[i],l=this._isDeclarative||!r.initialised&&e;e=!r.finished,l&&e&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(e,i){if(this._history[e]={morpher:i,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(e){let i=!0;for(let n=0,r=this._queue.length;n<r;++n){const l=this._queue[n],h=l.runner.call(this,e);l.finished=l.finished||h===!0,i=i&&l.finished}return i}_tryRetarget(e,i,n){if(this._history[e]){if(!this._history[e].caller.initialised){const l=this._queue.indexOf(this._history[e].caller);return this._queue.splice(l,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,i,n):this._history[e].morpher.to(i),this._history[e].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}Ot.id=0;class mn{constructor(e=new fe,i=-1,n=!0){this.transforms=e,this.id=i,this.done=n}clearTransformsFromQueue(){}}pe([Ot,mn],{mergeWith(f){return new mn(f.transforms.lmultiply(this.transforms),f.id)}});const _o=(f,e)=>f.lmultiplyO(e),jo=f=>f.transforms;function au(){const f=this._transformationRunners.runners.map(jo).reduce(_o,new fe);this.transform(f),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class ou{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const i=e.id+1;return this.runners.push(e),this.ids.push(i),this}clearBefore(e){const i=this.ids.indexOf(e+1)||1;return this.ids.splice(0,i,0),this.runners.splice(0,i,new mn).forEach(n=>n.clearTransformsFromQueue()),this}edit(e,i){const n=this.ids.indexOf(e+1);return this.ids.splice(n,1,e+1),this.runners.splice(n,1,i),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let i=0;i<this.runners.length;++i){const n=this.runners[i];if(e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(n.id);const r=n.mergeWith(e);this.edit(e.id,r),e=r,--i}else e=n}return this}remove(e){const i=this.ids.indexOf(e+1);return this.ids.splice(i,1),this.runners.splice(i,1),this}}te({Element:{animate(f,e,i){const n=Ot.sanitise(f,e,i),r=this.timeline();return new Ot(n.duration).loop(n).element(this).timeline(r.play()).schedule(n.delay,n.when)},delay(f,e){return this.animate(0,f,e)},_clearTransformRunnersBefore(f){this._transformationRunners.clearBefore(f.id)},_currentTransform(f){return this._transformationRunners.runners.filter(e=>e.id<=f.id).map(jo).reduce(_o,new fe)},_addRunner(f){this._transformationRunners.add(f),Oe.cancelImmediate(this._frameId),this._frameId=Oe.immediate(au.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new ou().add(new mn(new fe(this))))}}}),pe(Ot,{attr(f,e){return this.styleAttr("attr",f,e)},css(f,e){return this.styleAttr("css",f,e)},styleAttr(f,e,i){if(typeof e=="string")return this.styleAttr(f,{[e]:i});let n=e;if(this._tryRetarget(f,n))return this;let r=new Hi(this._stepper).to(n),l=Object.keys(n);return this.queue(function(){r=r.from(this.element()[f](l))},function(h){return this.element()[f](r.at(h).valueOf()),r.done()},function(h){const u=Object.keys(h),g=(m=l,u.filter(b=>!m.includes(b)));var m;if(g.length){const b=this.element()[f](g),v=new zs(r.from()).valueOf();Object.assign(v,b),r.from(v)}const y=new zs(r.to()).valueOf();Object.assign(y,h),r.to(y),l=u,n=h}),this._rememberMorpher(f,r),this},zoom(f,e){if(this._tryRetarget("zoom",f,e))return this;let i=new Hi(this._stepper).to(new ve(f));return this.queue(function(){i=i.from(this.element().zoom())},function(n){return this.element().zoom(i.at(n),e),i.done()},function(n,r){e=r,i.to(n)}),this._rememberMorpher("zoom",i),this},transform(f,e,i){if(e=f.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",f))return this;const n=fe.isMatrixLike(f);i=f.affine!=null?f.affine:i??!n;const r=new Hi(this._stepper).type(i?Rs:fe);let l,h,u,g,m;return this.queue(function(){h=h||this.element(),l=l||ei(f,h),m=new fe(e?void 0:h),h._addRunner(this),e||h._clearTransformRunnersBefore(this)},function(y){e||this.clearTransform();const{x:b,y:v}=new Te(l).transform(h._currentTransform(this));let k=new fe({...f,origin:[b,v]}),A=this._isDeclarative&&u?u:m;if(i){k=k.decompose(b,v),A=A.decompose(b,v);const T=k.rotate,O=A.rotate,L=[T-360,T,T+360],P=L.map(H=>Math.abs(H-O)),F=Math.min(...P),N=P.indexOf(F);k.rotate=L[N]}e&&(n||(k.rotate=f.rotate||0),this._isDeclarative&&g&&(A.rotate=g)),r.from(A),r.to(k);const C=r.at(y);return g=C.rotate,u=new fe(C),this.addTransform(u),h._addRunner(this),r.done()},function(y){(y.origin||"center").toString()!==(f.origin||"center").toString()&&(l=ei(y,h)),f={...y,origin:l}},!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(f){return this._queueNumber("x",f)},y(f){return this._queueNumber("y",f)},ax(f){return this._queueNumber("ax",f)},ay(f){return this._queueNumber("ay",f)},dx(f=0){return this._queueNumberDelta("x",f)},dy(f=0){return this._queueNumberDelta("y",f)},dmove(f,e){return this.dx(f).dy(e)},_queueNumberDelta(f,e){if(e=new ve(e),this._tryRetarget(f,e))return this;const i=new Hi(this._stepper).to(e);let n=null;return this.queue(function(){n=this.element()[f](),i.from(n),i.to(n+e)},function(r){return this.element()[f](i.at(r)),i.done()},function(r){i.to(n+new ve(r))}),this._rememberMorpher(f,i),this},_queueObject(f,e){if(this._tryRetarget(f,e))return this;const i=new Hi(this._stepper).to(e);return this.queue(function(){i.from(this.element()[f]())},function(n){return this.element()[f](i.at(n)),i.done()}),this._rememberMorpher(f,i),this},_queueNumber(f,e){return this._queueObject(f,new ve(e))},cx(f){return this._queueNumber("cx",f)},cy(f){return this._queueNumber("cy",f)},move(f,e){return this.x(f).y(e)},amove(f,e){return this.ax(f).ay(e)},center(f,e){return this.cx(f).cy(e)},size(f,e){let i;return f&&e||(i=this._element.bbox()),f||(f=i.width/i.height*e),e||(e=i.height/i.width*f),this.width(f).height(e)},width(f){return this._queueNumber("width",f)},height(f){return this._queueNumber("height",f)},plot(f,e,i,n){if(arguments.length===4)return this.plot([f,e,i,n]);if(this._tryRetarget("plot",f))return this;const r=new Hi(this._stepper).type(this._element.MorphArray).to(f);return this.queue(function(){r.from(this._element.array())},function(l){return this._element.plot(r.at(l)),r.done()}),this._rememberMorpher("plot",r),this},leading(f){return this._queueNumber("leading",f)},viewbox(f,e,i,n){return this._queueObject("viewbox",new _e(f,e,i,n))},update(f){return typeof f!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(f.opacity!=null&&this.attr("stop-opacity",f.opacity),f.color!=null&&this.attr("stop-color",f.color),f.offset!=null&&this.attr("offset",f.offset),this)}}),pe(Ot,{rx:mr,ry:xr,from:zo,to:Fo}),Ce(Ot,"Runner");class Or extends ft{constructor(e,i=e){super(Ne("svg",e),i),this.namespace()}defs(){return this.isRoot()?Nt(this.node.querySelector("defs"))||this.put(new hn):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof he.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:qe,version:"1.1"}).attr("xmlns:xlink",Lt,wt):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,wt).attr("xmlns:svgjs",null,wt)}root(){return this.isRoot()?this:super.root()}}te({Container:{nested:De(function(){return this.put(new Or)})}}),Ce(Or,"Svg",!0);let Er=class extends ft{constructor(f,e=f){super(Ne("symbol",f),e)}};te({Container:{symbol:De(function(){return this.put(new Er)})}}),Ce(Er,"Symbol");var Vo=Object.freeze({__proto__:null,amove:function(f,e){return this.ax(f).ay(e)},ax:function(f){return this.attr("x",f)},ay:function(f){return this.attr("y",f)},build:function(f){return this._build=!!f,this},center:function(f,e,i=this.bbox()){return this.cx(f,i).cy(e,i)},cx:function(f,e=this.bbox()){return f==null?e.cx:this.attr("x",this.attr("x")+f-e.cx)},cy:function(f,e=this.bbox()){return f==null?e.cy:this.attr("y",this.attr("y")+f-e.cy)},length:function(){return this.node.getComputedTextLength()},move:function(f,e,i=this.bbox()){return this.x(f,i).y(e,i)},plain:function(f){return this._build===!1&&this.clear(),this.node.appendChild(he.document.createTextNode(f)),this},x:function(f,e=this.bbox()){return f==null?e.x:this.attr("x",this.attr("x")+f-e.x)},y:function(f,e=this.bbox()){return f==null?e.y:this.attr("y",this.attr("y")+f-e.y)}});class Wt extends Tt{constructor(e,i=e){super(Ne("text",e),i),this.dom.leading=this.dom.leading??new ve(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new ve(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const i=this;let n=0;const r=this.dom.leading;this.each(function(l){if(li(this.node))return;const h=he.window.getComputedStyle(this.node).getPropertyValue("font-size"),u=r*new ve(h);this.dom.newLined&&(this.attr("x",i.attr("x")),this.text()===`
`?n+=u:(this.attr("dy",l?u+n:0),n=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new ve(e.leading||1.3),this}writeDataToDom(){return At(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const i=this.node.childNodes;let n=0;e="";for(let r=0,l=i.length;r<l;++r)i[r].nodeName==="textPath"||li(i[r])?r===0&&(n=r+1):(r!==n&&i[r].nodeType!==3&&Nt(i[r]).dom.newLined===!0&&(e+=`
`),e+=i[r].textContent);return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else for(let i=0,n=(e=(e+"").split(`
`)).length;i<n;i++)this.newLine(e[i]);return this.build(!1).rebuild()}}pe(Wt,Vo),te({Container:{text:De(function(f=""){return this.put(new Wt).text(f)}),plain:De(function(f=""){return this.put(new Wt).plain(f)})}}),Ce(Wt,"Text");class xn extends Tt{constructor(e,i=e){super(Ne("tspan",e),i),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof Wt))return this;const i=e.index(this),n=he.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=e.dom.leading*new ve(n);return this.dy(i?r:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}pe(xn,Vo),te({Tspan:{tspan:De(function(f=""){const e=new xn;return this._build||this.clear(),this.put(e).text(f)})},Text:{newLine:function(f=""){return this.tspan(f).newLine()}}}),Ce(xn,"Tspan");class Ir extends Tt{constructor(e,i=e){super(Ne("circle",e),i)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new ve(e).divide(2))}}pe(Ir,{x:Eo,y:Io,cx:Lo,cy:Po,width:No,height:Do}),te({Container:{circle:De(function(f=0){return this.put(new Ir).size(f).move(0,0)})}}),Ce(Ir,"Circle");class Lr extends ft{constructor(e,i=e){super(Ne("clipPath",e),i)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return Ri("svg [clip-path*="+this.id()+"]")}}te({Container:{clip:De(function(){return this.defs().put(new Lr)})},Element:{clipper(){return this.reference("clip-path")},clipWith(f){const e=f instanceof Lr?f:this.parent().clip().add(f);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}}),Ce(Lr,"ClipPath");class Go extends et{constructor(e,i=e){super(Ne("foreignObject",e),i)}}te({Container:{foreignObject:De(function(f,e){return this.put(new Go).size(f,e)})}}),Ce(Go,"ForeignObject");var qo=Object.freeze({__proto__:null,dmove:function(f,e){return this.children().forEach(i=>{let n;try{n=i.node instanceof Ee().SVGSVGElement?new _e(i.attr(["x","y","width","height"])):i.bbox()}catch{return}const r=new fe(i),l=r.translate(f,e).transform(r.inverse()),h=new Te(n.x,n.y).transform(l);i.move(h.x,h.y)}),this},dx:function(f){return this.dmove(f,0)},dy:function(f){return this.dmove(0,f)},height:function(f,e=this.bbox()){return f==null?e.height:this.size(e.width,f,e)},move:function(f=0,e=0,i=this.bbox()){const n=f-i.x,r=e-i.y;return this.dmove(n,r)},size:function(f,e,i=this.bbox()){const n=He(this,f,e,i),r=n.width/i.width,l=n.height/i.height;return this.children().forEach(h=>{const u=new Te(i).transform(new fe(h).inverse());h.scale(r,l,u.x,u.y)}),this},width:function(f,e=this.bbox()){return f==null?e.width:this.size(f,e.height,e)},x:function(f,e=this.bbox()){return f==null?e.x:this.move(f,e.y,e)},y:function(f,e=this.bbox()){return f==null?e.y:this.move(e.x,f,e)}});class ui extends ft{constructor(e,i=e){super(Ne("g",e),i)}}pe(ui,qo),te({Container:{group:De(function(){return this.put(new ui)})}}),Ce(ui,"G");class bn extends ft{constructor(e,i=e){super(Ne("a",e),i)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,Lt)}}pe(bn,qo),te({Container:{link:De(function(f){return this.put(new bn).to(f)})},Element:{unlink(){const f=this.linker();if(!f)return this;const e=f.parent();if(!e)return this.remove();const i=e.index(f);return e.add(this,i),f.remove(),this},linkTo(f){let e=this.linker();return e||(e=new bn,this.wrap(e)),typeof f=="function"?f.call(e,e):e.to(f),this},linker(){const f=this.parent();return f&&f.node.nodeName.toLowerCase()==="a"?f:null}}}),Ce(bn,"A");class Pr extends ft{constructor(e,i=e){super(Ne("mask",e),i)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return Ri("svg [mask*="+this.id()+"]")}}te({Container:{mask:De(function(){return this.defs().put(new Pr)})},Element:{masker(){return this.reference("mask")},maskWith(f){const e=f instanceof Pr?f:this.parent().mask().add(f);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}}),Ce(Pr,"Mask");class $o extends et{constructor(e,i=e){super(Ne("stop",e),i)}update(e){return(typeof e=="number"||e instanceof ve)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new ve(e.offset)),this}}te({Gradient:{stop:function(f,e,i){return this.put(new $o).update(f,e,i)}}}),Ce($o,"Stop");class Nr extends et{constructor(e,i=e){super(Ne("style",e),i)}addText(e=""){return this.node.textContent+=e,this}font(e,i,n={}){return this.rule("@font-face",{fontFamily:e,src:i,...n})}rule(e,i){return this.addText(function(n,r){if(!n)return"";if(!r)return n;let l=n+"{";for(const h in r)l+=h.replace(/([A-Z])/g,function(u,g){return"-"+g.toLowerCase()})+":"+r[h]+";";return l+="}",l}(e,i))}}te("Dom",{style(f,e){return this.put(new Nr).rule(f,e)},fontface(f,e,i){return this.put(new Nr).font(f,e,i)}}),Ce(Nr,"Style");class Dr extends Wt{constructor(e,i=e){super(Ne("textPath",e),i)}array(){const e=this.track();return e?e.array():null}plot(e){const i=this.track();let n=null;return i&&(n=i.plot(e)),e==null?n:this}track(){return this.reference("href")}}te({Container:{textPath:De(function(f,e){return f instanceof Wt||(f=this.text(f)),f.path(e)})},Text:{path:De(function(f,e=!0){const i=new Dr;let n;if(f instanceof cs||(f=this.defs().path(f)),i.attr("href","#"+f,Lt),e)for(;n=this.node.firstChild;)i.node.appendChild(n);return this.put(i)}),textPath(){return this.findOne("textPath")}},Path:{text:De(function(f){return f instanceof Wt||(f=new Wt().addTo(this.parent()).text(f)),f.path(this)}),targets(){return Ri("svg textPath").filter(f=>(f.attr("href")||"").includes(this.id()))}}}),Dr.prototype.MorphArray=Yt,Ce(Dr,"TextPath");class Uo extends Tt{constructor(e,i=e){super(Ne("use",e),i)}use(e,i){return this.attr("href",(i||"")+"#"+e,Lt)}}te({Container:{use:De(function(f,e){return this.put(new Uo).use(f,e)})}}),Ce(Uo,"Use");const lu=ut;pe([Or,Er,un,Ds,fn],de("viewbox")),pe([Fi,Yi,Xi,cs],de("marker")),pe(Wt,de("Text")),pe(cs,de("Path")),pe(hn,de("Defs")),pe([Wt,xn],de("Tspan")),pe([gn,dn,Ns,Ot],de("radius")),pe(Ls,de("EventTarget")),pe(hi,de("Dom")),pe(et,de("Element")),pe(Tt,de("Shape")),pe([ft,Ro],de("Container")),pe(Ns,de("Gradient")),pe(Ot,de("Runner")),Di.extend([...new Set(ee)]),function(f=[]){Mr.push(...[].concat(f))}([ve,Ie,_e,fe,zi,di,Yt,Te]),pe(Mr,{to(f){return new Hi().type(this.constructor).from(this.toArray()).to(f)},fromArray(f){return this.init(f),this},toConsumable(){return this.toArray()},morph(f,e,i,n,r){return this.fromArray(f.map(function(l,h){return n.step(l,e[h],i,r[h],r)}))}});class Be extends et{constructor(e){super(Ne("filter",e),e),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(e,i){return!(e=super.put(e,i)).attr("in")&&this.$autoSetIn&&e.attr("in",this.$source),e.attr("result")||e.attr("result",e.id()),e}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Ri('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class Rr extends et{constructor(e,i){super(e,i),this.result(this.id())}in(e){if(e==null){const i=this.attr("in");return this.parent()&&this.parent().find(`[result="${i}"]`)[0]||i}return this.attr("in",e)}result(e){return this.attr("result",e)}toString(){return this.result()}}const Rt=f=>function(...e){for(let i=f.length;i--;)e[i]!=null&&this.attr(f[i],e[i])},cu={blend:Rt(["in","in2","mode"]),colorMatrix:Rt(["type","values"]),composite:Rt(["in","in2","operator"]),convolveMatrix:function(f){f=new zi(f).toString(),this.attr({order:Math.sqrt(f.split(" ").length),kernelMatrix:f})},diffuseLighting:Rt(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:Rt(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:Rt(["in","dx","dy","stdDeviation"]),flood:Rt(["flood-color","flood-opacity"]),gaussianBlur:function(f=0,e=f){this.attr("stdDeviation",f+" "+e)},image:function(f){this.attr("href",f,Lt)},morphology:Rt(["operator","radius"]),offset:Rt(["dx","dy"]),specularLighting:Rt(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:Rt([]),turbulence:Rt(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(f=>{const e=Ye(f),i=cu[f];Be[e+"Effect"]=class extends Rr{constructor(n){super(Ne("fe"+e,n),n)}update(n){return i.apply(this,n),this}},Be.prototype[f]=De(function(n,...r){const l=new Be[e+"Effect"];return n==null?this.put(l):(typeof n=="function"?n.call(l,l):r.unshift(n),this.put(l).update(r))})}),pe(Be,{merge(f){const e=this.put(new Be.MergeEffect);return typeof f=="function"?(f.call(e,e),e):((f instanceof Array?f:[...arguments]).forEach(i=>{i instanceof Be.MergeNode?e.put(i):e.mergeNode(i)}),e)},componentTransfer(f={}){const e=this.put(new Be.ComponentTransferEffect);if(typeof f=="function")return f.call(e,e),e;f.r||f.g||f.b||f.a||(f={r:f,g:f,b:f,a:f});for(const i in f)e.add(new Be["Func"+i.toUpperCase()](f[i]));return e}}),["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(f=>{const e=Ye(f);Be[e]=class extends Rr{constructor(i){super(Ne("fe"+e,i),i)}}}),["funcR","funcG","funcB","funcA"].forEach(function(f){const e=Be[Ye(f)],i=De(function(){return this.put(new e)});Be.ComponentTransferEffect.prototype[f]=i}),["distantLight","pointLight","spotLight"].forEach(f=>{const e=Be[Ye(f)],i=De(function(){return this.put(new e)});Be.DiffuseLightingEffect.prototype[f]=i,Be.SpecularLightingEffect.prototype[f]=i}),pe(Be.MergeEffect,{mergeNode(f){return this.put(new Be.MergeNode).attr("in",f)}}),pe(hn,{filter:function(f){const e=this.put(new Be);return typeof f=="function"&&f.call(e,e),e}}),pe(ft,{filter:function(f){return this.defs().filter(f)}}),pe(et,{filterWith:function(f){const e=f instanceof Be?f:this.defs().filter(f);return this.attr("filter",e)},unfilter:function(f){return this.attr("filter",null)},filterer(){return this.reference("filter")}}),pe(Rr,{blend:function(f,e){return this.parent()&&this.parent().blend(this,f,e)},colorMatrix:function(f,e){return this.parent()&&this.parent().colorMatrix(f,e).in(this)},componentTransfer:function(f){return this.parent()&&this.parent().componentTransfer(f).in(this)},composite:function(f,e){return this.parent()&&this.parent().composite(this,f,e)},convolveMatrix:function(f){return this.parent()&&this.parent().convolveMatrix(f).in(this)},diffuseLighting:function(f,e,i,n){return this.parent()&&this.parent().diffuseLighting(f,i,n).in(this)},displacementMap:function(f,e,i,n){return this.parent()&&this.parent().displacementMap(this,f,e,i,n)},dropShadow:function(f,e,i){return this.parent()&&this.parent().dropShadow(this,f,e,i).in(this)},flood:function(f,e){return this.parent()&&this.parent().flood(f,e)},gaussianBlur:function(f,e){return this.parent()&&this.parent().gaussianBlur(f,e).in(this)},image:function(f){return this.parent()&&this.parent().image(f)},merge:function(f){return f=f instanceof Array?f:[...f],this.parent()&&this.parent().merge(this,...f)},morphology:function(f,e){return this.parent()&&this.parent().morphology(f,e).in(this)},offset:function(f,e){return this.parent()&&this.parent().offset(f,e).in(this)},specularLighting:function(f,e,i,n,r){return this.parent()&&this.parent().specularLighting(f,i,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(f,e,i,n,r){return this.parent()&&this.parent().turbulence(f,e,i,n,r).in(this)}}),pe(Be.MergeEffect,{in:function(f){return f instanceof Be.MergeNode?this.add(f,0):this.add(new Be.MergeNode().in(f),0),this}}),pe([Be.CompositeEffect,Be.BlendEffect,Be.DisplacementMapEffect],{in2:function(f){if(f==null){const e=this.attr("in2");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in2",f)}}),Be.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var tt=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"getDefaultFilter",value:function(e,i){var n=this.w;e.unfilter(!0),new Be().size("120%","180%","-5%","-40%"),n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,i)}},{key:"applyFilter",value:function(e,i,n){var r,l=this,h=this.w;if(e.unfilter(!0),n!=="none"){var u,g,m=h.config.chart.dropShadow,y=n==="lighten"?2:.3;e.filterWith(function(b){b.colorMatrix({type:"matrix",values:`
          `.concat(y,` 0 0 0 0
          0 `).concat(y,` 0 0 0
          0 0 `).concat(y,` 0 0
          0 0 0 1 0
        `),in:"SourceGraphic",result:"brightness"}),m.enabled&&l.addShadow(b,i,m,"brightness")}),!m.noUserSpaceOnUse&&((u=e.filterer())===null||u===void 0||(g=u.node)===null||g===void 0||g.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node)}else this.getDefaultFilter(e,i)}},{key:"addShadow",value:function(e,i,n,r){var l,h=this.w,u=n.blur,g=n.top,m=n.left,y=n.color,b=n.opacity;if(y=Array.isArray(y)?y[i]:y,((l=h.config.chart.dropShadow.enabledOnSeries)===null||l===void 0?void 0:l.length)>0&&h.config.chart.dropShadow.enabledOnSeries.indexOf(i)===-1)return e;e.offset({in:r,dx:m,dy:g,result:"offset"}),e.gaussianBlur({in:"offset",stdDeviation:u,result:"blur"}),e.flood({"flood-color":y,"flood-opacity":b,result:"flood"}),e.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),e.merge(["shadow",r])}},{key:"dropShadow",value:function(e,i){var n,r,l,h,u,g=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=this.w;return e.unfilter(!0),X.isMsEdge()&&y.config.chart.type==="radialBar"||((n=y.config.chart.dropShadow.enabledOnSeries)===null||n===void 0?void 0:n.length)>0&&((l=y.config.chart.dropShadow.enabledOnSeries)===null||l===void 0?void 0:l.indexOf(m))===-1?e:(e.filterWith(function(b){g.addShadow(b,m,i,"SourceGraphic")}),i.noUserSpaceOnUse||(h=e.filterer())===null||h===void 0||(u=h.node)===null||u===void 0||u.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize((r=e.filterer())===null||r===void 0?void 0:r.node),e)}},{key:"setSelectionFilter",value:function(e,i,n){var r=this.w;if(r.globals.selectedDataPoints[i]!==void 0&&r.globals.selectedDataPoints[i].indexOf(n)>-1){e.node.setAttribute("selected",!0);var l=r.config.states.active.filter;l!=="none"&&this.applyFilter(e,i,l.type)}}},{key:"_scaleFilterSize",value:function(e){e&&function(i){for(var n in i)i.hasOwnProperty(n)&&e.setAttribute(n,i[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),f}(),Q=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"roundPathCorners",value:function(e,i){function n(B,W,V){var G=W.x-B.x,q=W.y-B.y,U=Math.sqrt(G*G+q*q);return r(B,W,Math.min(1,V/U))}function r(B,W,V){return{x:B.x+(W.x-B.x)*V,y:B.y+(W.y-B.y)*V}}function l(B,W){B.length>2&&(B[B.length-2]=W.x,B[B.length-1]=W.y)}function h(B){return{x:parseFloat(B[B.length-2]),y:parseFloat(B[B.length-1])}}e.indexOf("NaN")>-1&&(e="");var u=e.split(/[,\s]/).reduce(function(B,W){var V=W.match("([a-zA-Z])(.+)");return V?(B.push(V[1]),B.push(V[2])):B.push(W),B},[]).reduce(function(B,W){return parseFloat(W)==W&&B.length?B[B.length-1].push(W):B.push([W]),B},[]),g=[];if(u.length>1){var m=h(u[0]),y=null;u[u.length-1][0]=="Z"&&u[0].length>2&&(y=["L",m.x,m.y],u[u.length-1]=y),g.push(u[0]);for(var b=1;b<u.length;b++){var v=g[g.length-1],k=u[b],A=k==y?u[1]:u[b+1];if(A&&v&&v.length>2&&k[0]=="L"&&A.length>2&&A[0]=="L"){var C,T,O=h(v),L=h(k),P=h(A);C=n(L,O,i),T=n(L,P,i),l(k,C),k.origPoint=L,g.push(k);var F=r(C,L,.5),N=r(L,T,.5),H=["C",F.x,F.y,N.x,N.y,T.x,T.y];H.origPoint=L,g.push(H)}else g.push(k)}if(y){var z=h(g[g.length-1]);g.push(["Z"]),l(g[0],z)}}else g=u;return g.reduce(function(B,W){return B+W.join(" ")+" "},"")}},{key:"drawLine",value:function(e,i,n,r){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:i,x2:n,y2:r,stroke:l,"stroke-dasharray":h,"stroke-width":u,"stroke-linecap":g})}},{key:"drawRect",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,g=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,b=this.w.globals.dom.Paper.rect();return b.attr({x:e,y:i,width:n>0?n:0,height:r>0?r:0,rx:l,ry:l,opacity:u,"stroke-width":g!==null?g:0,stroke:m!==null?m:"none","stroke-dasharray":y}),b.node.setAttribute("fill",h),b}},{key:"drawPolygon",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:r,stroke:i,"stroke-width":n})}},{key:"drawCircle",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e<0&&(e=0);var n=this.w.globals.dom.Paper.circle(2*e);return i!==null&&n.attr(i),n}},{key:"drawPath",value:function(e){var i=e.d,n=i===void 0?"":i,r=e.stroke,l=r===void 0?"#a8a8a8":r,h=e.strokeWidth,u=h===void 0?1:h,g=e.fill,m=e.fillOpacity,y=m===void 0?1:m,b=e.strokeOpacity,v=b===void 0?1:b,k=e.classes,A=e.strokeLinecap,C=A===void 0?null:A,T=e.strokeDashArray,O=T===void 0?0:T,L=this.w;return C===null&&(C=L.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(L.globals.gridHeight)),L.globals.dom.Paper.path(n).attr({fill:g,"fill-opacity":y,stroke:l,"stroke-opacity":v,"stroke-linecap":C,"stroke-width":u,"stroke-dasharray":O,class:k})}},{key:"group",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.w.globals.dom.Paper.group();return e!==null&&i.attr(e),i}},{key:"move",value:function(e,i){var n=["M",e,i].join(" ");return n}},{key:"line",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=null;return n===null?r=[" L",e,i].join(" "):n==="H"?r=[" H",e].join(" "):n==="V"&&(r=[" V",i].join(" ")),r}},{key:"curve",value:function(e,i,n,r,l,h){var u=["C",e,i,n,r,l,h].join(" ");return u}},{key:"quadraticCurve",value:function(e,i,n,r){return["Q",e,i,n,r].join(" ")}},{key:"arc",value:function(e,i,n,r,l,h,u){var g="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(g="a");var m=[g,e,i,n,r,l,h,u].join(" ");return m}},{key:"renderPaths",value:function(e){var i,n=e.j,r=e.realIndex,l=e.pathFrom,h=e.pathTo,u=e.stroke,g=e.strokeWidth,m=e.strokeLinecap,y=e.fill,b=e.animationDelay,v=e.initialSpeed,k=e.dataChangeSpeed,A=e.className,C=e.chartType,T=e.shouldClipToGrid,O=T===void 0||T,L=e.bindEventsOnPaths,P=L===void 0||L,F=e.drawShadow,N=F===void 0||F,H=this.w,z=new tt(this.ctx),B=new Z(this.ctx),W=this.w.config.chart.animations.enabled,V=W&&this.w.config.chart.animations.dynamicAnimation.enabled,G=!!(W&&!H.globals.resized||V&&H.globals.dataChanged&&H.globals.shouldAnimate);G?i=l:(i=h,H.globals.animationEnded=!0);var q=H.config.stroke.dashArray,U=0;U=Array.isArray(q)?q[r]:H.config.stroke.dashArray;var K=this.drawPath({d:i,stroke:u,strokeWidth:g,fill:y,fillOpacity:1,classes:A,strokeLinecap:m,strokeDashArray:U});K.attr("index",r),O&&(C==="bar"&&!H.globals.isHorizontal||H.globals.comboCharts?K.attr({"clip-path":"url(#gridRectBarMask".concat(H.globals.cuid,")")}):K.attr({"clip-path":"url(#gridRectMask".concat(H.globals.cuid,")")})),H.config.chart.dropShadow.enabled&&N&&z.dropShadow(K,H.config.chart.dropShadow,r),P&&(K.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,K)),K.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,K)),K.node.addEventListener("mousedown",this.pathMouseDown.bind(this,K))),K.attr({pathTo:h,pathFrom:l});var re={el:K,j:n,realIndex:r,pathFrom:l,pathTo:h,fill:y,strokeWidth:g,delay:b};return!W||H.globals.resized||H.globals.dataChanged?!H.globals.resized&&H.globals.dataChanged||B.showDelayedElements():B.animatePathsGradually(I(I({},re),{},{speed:v})),H.globals.dataChanged&&V&&G&&B.animatePathsGradually(I(I({},re),{},{speed:k})),K}},{key:"drawPattern",value:function(e,i,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(i,n,function(h){e==="horizontalLines"?h.line(0,0,n,0).stroke({color:r,width:l+1}):e==="verticalLines"?h.line(0,0,0,i).stroke({color:r,width:l+1}):e==="slantedLines"?h.line(0,0,i,n).stroke({color:r,width:l}):e==="squares"?h.rect(i,n).fill("none").stroke({color:r,width:l}):e==="circles"&&h.circle(i).fill("none").stroke({color:r,width:l})})}},{key:"drawGradient",value:function(e,i,n,r,l){var h,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,g=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,m=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],y=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,b=this.w;i.length<9&&i.indexOf("#")===0&&(i=X.hexToRgba(i,r)),n.length<9&&n.indexOf("#")===0&&(n=X.hexToRgba(n,l));var v=0,k=1,A=1,C=null;g!==null&&(v=g[0]!==void 0?g[0]/100:0,k=g[1]!==void 0?g[1]/100:1,A=g[2]!==void 0?g[2]/100:1,C=g[3]!==void 0?g[3]/100:null);var T=!(b.config.chart.type!=="donut"&&b.config.chart.type!=="pie"&&b.config.chart.type!=="polarArea"&&b.config.chart.type!=="bubble");if(h=m&&m.length!==0?b.globals.dom.Paper.gradient(T?"radial":"linear",function(P){(Array.isArray(m[y])?m[y]:m).forEach(function(F){P.stop(F.offset/100,F.color,F.opacity)})}):b.globals.dom.Paper.gradient(T?"radial":"linear",function(P){P.stop(v,i,r),P.stop(k,n,l),P.stop(A,n,l),C!==null&&P.stop(C,i,r)}),T){var O=b.globals.gridWidth/2,L=b.globals.gridHeight/2;b.config.chart.type!=="bubble"?h.attr({gradientUnits:"userSpaceOnUse",cx:O,cy:L,r:u}):h.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else e==="vertical"?h.from(0,0).to(0,1):e==="diagonal"?h.from(0,0).to(1,1):e==="horizontal"?h.from(0,1).to(1,1):e==="diagonal2"&&h.from(1,0).to(0,1);return h}},{key:"getTextBasedOnMaxWidth",value:function(e){var i=e.text,n=e.maxWidth,r=e.fontSize,l=e.fontFamily,h=this.getTextRects(i,r,l),u=h.width/i.length,g=Math.floor(n/u);return n<h.width?i.slice(0,g-3)+"...":i}},{key:"drawText",value:function(e){var i=this,n=e.x,r=e.y,l=e.text,h=e.textAnchor,u=e.fontSize,g=e.fontFamily,m=e.fontWeight,y=e.foreColor,b=e.opacity,v=e.maxWidth,k=e.cssClass,A=k===void 0?"":k,C=e.isPlainText,T=C===void 0||C,O=e.dominantBaseline,L=O===void 0?"auto":O,P=this.w;l===void 0&&(l="");var F=l;h||(h="start"),y&&y.length||(y=P.config.chart.foreColor),g=g||P.config.chart.fontFamily,m=m||"regular";var N,H={maxWidth:v,fontSize:u=u||"11px",fontFamily:g};return Array.isArray(l)?N=P.globals.dom.Paper.text(function(z){for(var B=0;B<l.length;B++)F=l[B],v&&(F=i.getTextBasedOnMaxWidth(I({text:l[B]},H))),B===0?z.tspan(F):z.tspan(F).newLine()}):(v&&(F=this.getTextBasedOnMaxWidth(I({text:l},H))),N=T?P.globals.dom.Paper.plain(l):P.globals.dom.Paper.text(function(z){return z.tspan(F)})),N.attr({x:n,y:r,"text-anchor":h,"dominant-baseline":L,"font-size":u,"font-family":g,"font-weight":m,fill:y,class:"apexcharts-text "+A}),N.node.style.fontFamily=g,N.node.style.opacity=b,N}},{key:"getMarkerPath",value:function(e,i,n,r){var l="";switch(n){case"cross":l="M ".concat(e-(r/=1.4)," ").concat(i-r," L ").concat(e+r," ").concat(i+r,"  M ").concat(e-r," ").concat(i+r," L ").concat(e+r," ").concat(i-r);break;case"plus":l="M ".concat(e-(r/=1.12)," ").concat(i," L ").concat(e+r," ").concat(i,"  M ").concat(e," ").concat(i-r," L ").concat(e," ").concat(i+r);break;case"star":case"sparkle":var h=5;r*=1.15,n==="sparkle"&&(r/=1.1,h=4);for(var u=Math.PI/h,g=0;g<=2*h;g++){var m=g*u,y=g%2==0?r:r/2;l+=(g===0?"M":"L")+(e+y*Math.sin(m))+","+(i-y*Math.cos(m))}l+="Z";break;case"triangle":l="M ".concat(e," ").concat(i-r,` 
             L `).concat(e+r," ").concat(i+r,` 
             L `).concat(e-r," ").concat(i+r,` 
             Z`);break;case"square":case"rect":l="M ".concat(e-(r/=1.125)," ").concat(i-r,` 
           L `).concat(e+r," ").concat(i-r,` 
           L `).concat(e+r," ").concat(i+r,` 
           L `).concat(e-r," ").concat(i+r,` 
           Z`);break;case"diamond":r*=1.05,l="M ".concat(e," ").concat(i-r,` 
             L `).concat(e+r," ").concat(i,` 
             L `).concat(e," ").concat(i+r,` 
             L `).concat(e-r," ").concat(i,` 
            Z`);break;case"line":l="M ".concat(e-(r/=1.1)," ").concat(i,` 
           L `).concat(e+r," ").concat(i);break;default:r*=2,l="M ".concat(e,", ").concat(i,` 
           m -`).concat(r/2,`, 0 
           a `).concat(r/2,",").concat(r/2," 0 1,0 ").concat(r,`,0 
           a `).concat(r/2,",").concat(r/2," 0 1,0 -").concat(r,",0")}return l}},{key:"drawMarkerShape",value:function(e,i,n,r,l){var h=this.drawPath({d:this.getMarkerPath(e,i,n,r,l),stroke:l.pointStrokeColor,strokeDashArray:l.pointStrokeDashArray,strokeWidth:l.pointStrokeWidth,fill:l.pointFillColor,fillOpacity:l.pointFillOpacity,strokeOpacity:l.pointStrokeOpacity});return h.attr({cx:e,cy:i,shape:l.shape,class:l.class?l.class:""}),h}},{key:"drawMarker",value:function(e,i,n){e=e||0;var r=n.pSize||0;return X.isNumber(i)||(r=0,i=0),this.drawMarkerShape(e,i,n==null?void 0:n.shape,r,I(I({},n),n.shape==="line"||n.shape==="plus"||n.shape==="cross"?{pointStrokeColor:n.pointFillColor,pointStrokeOpacity:n.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(e,i){var n=this.w,r=new tt(this.ctx),l=parseInt(e.node.getAttribute("index"),10),h=parseInt(e.node.getAttribute("j"),10);if(typeof n.config.chart.events.dataPointMouseEnter=="function"&&n.config.chart.events.dataPointMouseEnter(i,this.ctx,{seriesIndex:l,dataPointIndex:h,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[i,this.ctx,{seriesIndex:l,dataPointIndex:h,w:n}]),(n.config.states.active.filter.type==="none"||e.node.getAttribute("selected")!=="true")&&n.config.states.hover.filter.type!=="none"&&!n.globals.isTouchDevice){var u=n.config.states.hover.filter;r.applyFilter(e,l,u.type)}}},{key:"pathMouseLeave",value:function(e,i){var n=this.w,r=new tt(this.ctx),l=parseInt(e.node.getAttribute("index"),10),h=parseInt(e.node.getAttribute("j"),10);typeof n.config.chart.events.dataPointMouseLeave=="function"&&n.config.chart.events.dataPointMouseLeave(i,this.ctx,{seriesIndex:l,dataPointIndex:h,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[i,this.ctx,{seriesIndex:l,dataPointIndex:h,w:n}]),n.config.states.active.filter.type!=="none"&&e.node.getAttribute("selected")==="true"||n.config.states.hover.filter.type!=="none"&&r.getDefaultFilter(e,l)}},{key:"pathMouseDown",value:function(e,i){var n=this.w,r=new tt(this.ctx),l=parseInt(e.node.getAttribute("index"),10),h=parseInt(e.node.getAttribute("j"),10),u="false";if(e.node.getAttribute("selected")==="true"){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[l].indexOf(h)>-1){var g=n.globals.selectedDataPoints[l].indexOf(h);n.globals.selectedDataPoints[l].splice(g,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var m=n.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),y=n.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),b=function(A){Array.prototype.forEach.call(A,function(C){C.node.setAttribute("selected","false"),r.getDefaultFilter(C,l)})};b(m),b(y)}e.node.setAttribute("selected","true"),u="true",n.globals.selectedDataPoints[l]===void 0&&(n.globals.selectedDataPoints[l]=[]),n.globals.selectedDataPoints[l].push(h)}if(u==="true"){var v=n.config.states.active.filter;if(v!=="none")r.applyFilter(e,l,v.type);else if(n.config.states.hover.filter!=="none"&&!n.globals.isTouchDevice){var k=n.config.states.hover.filter;r.applyFilter(e,l,k.type)}}else n.config.states.active.filter.type!=="none"&&(n.config.states.hover.filter.type==="none"||n.globals.isTouchDevice?r.getDefaultFilter(e,l):(k=n.config.states.hover.filter,r.applyFilter(e,l,k.type)));typeof n.config.chart.events.dataPointSelection=="function"&&n.config.chart.events.dataPointSelection(i,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:l,dataPointIndex:h,w:n}),i&&this.ctx.events.fireEvent("dataPointSelection",[i,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:l,dataPointIndex:h,w:n}])}},{key:"rotateAroundCenter",value:function(e){var i={};return e&&typeof e.getBBox=="function"&&(i=e.getBBox()),{x:i.x+i.width/2,y:i.y+i.height/2}}},{key:"getTextRects",value:function(e,i,n,r){var l=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],h=this.w,u=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:i,fontFamily:n,foreColor:"#fff",opacity:0});r&&u.attr("transform",r),h.globals.dom.Paper.add(u);var g=u.bbox();return l||(g=u.node.getBoundingClientRect()),u.remove(),{width:g.width,height:g.height}}},{key:"placeTextWithEllipsis",value:function(e,i,n){if(typeof e.getComputedTextLength=="function"&&(e.textContent=i,i.length>0&&e.getComputedTextLength()>=n/1.1)){for(var r=i.length-3;r>0;r-=3)if(e.getSubStringLength(0,r)<=n/1.1)return void(e.textContent=i.substring(0,r)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,i){for(var n in i)i.hasOwnProperty(n)&&e.setAttribute(n,i[n])}}]),f}(),je=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"getStackedSeriesTotals",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=this.w,n=[];if(i.globals.series.length===0)return n;for(var r=0;r<i.globals.series[i.globals.maxValsInArrayIndex].length;r++){for(var l=0,h=0;h<i.globals.series.length;h++)i.globals.series[h][r]!==void 0&&e.indexOf(h)===-1&&(l+=i.globals.series[h][r]);n.push(l)}return n}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e===null?this.w.config.series.reduce(function(i,n){return i+n},0):this.w.globals.series[e].reduce(function(i,n){return i+n},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var e=this,i=this.w,n=[];return i.globals.seriesGroups.forEach(function(r){var l=[];i.config.series.forEach(function(u,g){r.indexOf(i.globals.seriesNames[g])>-1&&l.push(g)});var h=i.globals.series.map(function(u,g){return l.indexOf(g)===-1?g:-1}).filter(function(u){return u!==-1});n.push(e.getStackedSeriesTotals(h))}),n}},{key:"setSeriesYAxisMappings",value:function(){var e=this.w.globals,i=this.w.config,n=[],r=[],l=[],h=e.series.length>i.yaxis.length||i.yaxis.some(function(b){return Array.isArray(b.seriesName)});i.series.forEach(function(b,v){l.push(v),r.push(null)}),i.yaxis.forEach(function(b,v){n[v]=[]});var u=[];i.yaxis.forEach(function(b,v){var k=!1;if(b.seriesName){var A=[];Array.isArray(b.seriesName)?A=b.seriesName:A.push(b.seriesName),A.forEach(function(C){i.series.forEach(function(T,O){if(T.name===C){var L=O;v===O||h?!h||l.indexOf(O)>-1?n[v].push([v,O]):console.warn("Series '"+T.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(n[O].push([O,v]),L=v),k=!0,(L=l.indexOf(L))!==-1&&l.splice(L,1)}})})}k||u.push(v)}),n=n.map(function(b,v){var k=[];return b.forEach(function(A){r[A[1]]=A[0],k.push(A[1])}),k});for(var g=i.yaxis.length-1,m=0;m<u.length&&(g=u[m],n[g]=[],l);m++){var y=l[0];l.shift(),n[g].push(y),r[y]=g}l.forEach(function(b){n[g].push(b),r[b]=g}),e.seriesYAxisMap=n.map(function(b){return b}),e.seriesYAxisReverseMap=r.map(function(b){return b}),e.seriesYAxisMap.forEach(function(b,v){b.forEach(function(k){i.series[k]&&i.series[k].group===void 0&&(i.series[k].group="apexcharts-axis-".concat(v.toString()))})})}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(e===null?this.w.config.series.filter(function(i){return i!==null}):this.w.config.series[e].data.filter(function(i){return i!==null})).length===0}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every(function(i,n,r){return i===r[0]})}},{key:"getCategoryLabels",value:function(e){var i=this.w,n=e.slice();return i.config.xaxis.convertedCatToNumeric&&(n=e.map(function(r,l){return i.config.xaxis.labels.formatter(r-i.globals.minX+1)})),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map(function(i){return i.length}).indexOf(Math.max.apply(Math,e.globals.series.map(function(i){return i.length})))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,i=0;return e.globals.markers.size.forEach(function(n){i=Math.max(i,n)}),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach(function(n){i=Math.max(i,n.size)}),i>0&&(e.config.markers.hover.size>0?i=e.config.markers.hover.size:i+=e.config.markers.hover.sizeOffset),e.globals.markers.largestSize=i,i}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map(function(i,n){var r=0;if(Array.isArray(i))for(var l=0;l<i.length;l++)r+=i[l];else r+=i;return r})}},{key:"getSeriesTotalsXRange",value:function(e,i){var n=this.w;return n.globals.series.map(function(r,l){for(var h=0,u=0;u<r.length;u++)n.globals.seriesX[l][u]>e&&n.globals.seriesX[l][u]<i&&(h+=r[u]);return h})}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map(function(i,n){var r=[];if(Array.isArray(i))for(var l=0;l<i.length;l++){var h=e.globals.stackedSeriesTotals[l],u=0;h&&(u=100*i[l]/h),r.push(u)}else{var g=100*i/e.globals.seriesTotals.reduce(function(m,y){return m+y},0);r.push(g)}return r})}},{key:"getCalculatedRatios",value:function(){var e,i,n,r=this,l=this.w,h=l.globals,u=[],g=0,m=[],y=.1,b=0;if(h.yRange=[],h.isMultipleYAxis)for(var v=0;v<h.minYArr.length;v++)h.yRange.push(Math.abs(h.minYArr[v]-h.maxYArr[v])),m.push(0);else h.yRange.push(Math.abs(h.minY-h.maxY));h.xRange=Math.abs(h.maxX-h.minX),h.zRange=Math.abs(h.maxZ-h.minZ);for(var k=0;k<h.yRange.length;k++)u.push(h.yRange[k]/h.gridHeight);if(i=h.xRange/h.gridWidth,e=h.yRange/h.gridWidth,n=h.xRange/h.gridHeight,(g=h.zRange/h.gridHeight*16)||(g=1),h.minY!==Number.MIN_VALUE&&Math.abs(h.minY)!==0&&(h.hasNegs=!0),l.globals.seriesYAxisReverseMap.length>0){var A=function(T,O){var L=l.config.yaxis[l.globals.seriesYAxisReverseMap[O]],P=T<0?-1:1;return T=Math.abs(T),L.logarithmic&&(T=r.getBaseLog(L.logBase,T)),-P*T/u[O]};if(h.isMultipleYAxis){m=[];for(var C=0;C<u.length;C++)m.push(A(h.minYArr[C],C))}else(m=[]).push(A(h.minY,0)),h.minY!==Number.MIN_VALUE&&Math.abs(h.minY)!==0&&(y=-h.minY/e,b=h.minX/i)}else(m=[]).push(0),y=0,b=0;return{yRatio:u,invertedYRatio:e,zRatio:g,xRatio:i,invertedXRatio:n,baseLineInvertedY:y,baseLineY:m,baseLineX:b}}},{key:"getLogSeries",value:function(e){var i=this,n=this.w;return n.globals.seriesLog=e.map(function(r,l){var h=n.globals.seriesYAxisReverseMap[l];return n.config.yaxis[h]&&n.config.yaxis[h].logarithmic?r.map(function(u){return u===null?null:i.getLogVal(n.config.yaxis[h].logBase,u,l)}):r}),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(e,i){if(e===null)return null;var n=this.w,r=n.globals.seriesYAxisReverseMap[i];return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?this.getLogVal(n.config.yaxis[r].logBase,e,i):e}},{key:"getBaseLog",value:function(e,i){return Math.log(i)/Math.log(e)}},{key:"getLogVal",value:function(e,i,n){if(i<=0)return 0;var r=this.w,l=r.globals.minYArr[n]===0?-1:this.getBaseLog(e,r.globals.minYArr[n]),h=(r.globals.maxYArr[n]===0?0:this.getBaseLog(e,r.globals.maxYArr[n]))-l;return i<1?i/h:(this.getBaseLog(e,i)-l)/h}},{key:"getLogYRatios",value:function(e){var i=this,n=this.w,r=this.w.globals;return r.yLogRatio=e.slice(),r.logYRange=r.yRange.map(function(l,h){var u=n.globals.seriesYAxisReverseMap[h];if(n.config.yaxis[u]&&i.w.config.yaxis[u].logarithmic){var g,m=-Number.MAX_VALUE,y=Number.MIN_VALUE;return r.seriesLog.forEach(function(b,v){b.forEach(function(k){n.config.yaxis[v]&&n.config.yaxis[v].logarithmic&&(m=Math.max(k,m),y=Math.min(k,y))})}),g=Math.pow(r.yRange[h],Math.abs(y-m)/r.yRange[h]),r.yLogRatio[h]=g/r.gridHeight,g}}),r.invalidLogScale?e.slice():r.yLogRatio}},{key:"drawSeriesByGroup",value:function(e,i,n,r){var l=this.w,h=[];return e.series.length>0&&i.forEach(function(u){var g=[],m=[];e.i.forEach(function(y,b){l.config.series[y].group===u&&(g.push(e.series[b]),m.push(y))}),g.length>0&&h.push(r.draw(g,n,m))}),h}}],[{key:"checkComboSeries",value:function(e,i){var n=!1,r=0,l=0;return i===void 0&&(i="line"),e.length&&e[0].type!==void 0&&e.forEach(function(h){h.type!=="bar"&&h.type!=="column"&&h.type!=="candlestick"&&h.type!=="boxPlot"||r++,h.type!==void 0&&h.type!==i&&l++}),l>0&&(n=!0),{comboBarCount:r,comboCharts:n}}},{key:"extendArrayProps",value:function(e,i,n){var r,l,h,u,g,m;return(r=i)!==null&&r!==void 0&&r.yaxis&&(i=e.extendYAxis(i,n)),(l=i)!==null&&l!==void 0&&l.annotations&&(i.annotations.yaxis&&(i=e.extendYAxisAnnotations(i)),(h=i)!==null&&h!==void 0&&(u=h.annotations)!==null&&u!==void 0&&u.xaxis&&(i=e.extendXAxisAnnotations(i)),(g=i)!==null&&g!==void 0&&(m=g.annotations)!==null&&m!==void 0&&m.points&&(i=e.extendPointAnnotations(i))),i}}]),f}(),yn=function(){function f(e){s(this,f),this.w=e.w,this.annoCtx=e}return c(f,[{key:"setOrientations",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.w;if(e.label.orientation==="vertical"){var r=i!==null?i:0,l=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(r,"']"));if(l!==null){var h=l.getBoundingClientRect();l.setAttribute("x",parseFloat(l.getAttribute("x"))-h.height+4);var u=e.label.position==="top"?h.width:-h.width;l.setAttribute("y",parseFloat(l.getAttribute("y"))+u);var g=this.annoCtx.graphics.rotateAroundCenter(l),m=g.x,y=g.y;l.setAttribute("transform","rotate(-90 ".concat(m," ").concat(y,")"))}}}},{key:"addBackgroundToAnno",value:function(e,i){var n=this.w;if(!e||!i.label.text||!String(i.label.text).trim())return null;var r=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),l=e.getBoundingClientRect(),h=i.label.style.padding,u=h.left,g=h.right,m=h.top,y=h.bottom;if(i.label.orientation==="vertical"){var b=[u,g,m,y];m=b[0],y=b[1],u=b[2],g=b[3]}var v=l.left-r.left-u,k=l.top-r.top-m,A=this.annoCtx.graphics.drawRect(v-n.globals.barPadForNumericAxis,k,l.width+u+g,l.height+m+y,i.label.borderRadius,i.label.style.background,1,i.label.borderWidth,i.label.borderColor,0);return i.id&&A.node.classList.add(i.id),A}},{key:"annotationsBackground",value:function(){var e=this,i=this.w,n=function(r,l,h){var u=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(h,"-annotations .apexcharts-").concat(h,"-annotation-label[rel='").concat(l,"']"));if(u){var g=u.parentNode,m=e.addBackgroundToAnno(u,r);m&&(g.insertBefore(m.node,u),r.label.mouseEnter&&m.node.addEventListener("mouseenter",r.label.mouseEnter.bind(e,r)),r.label.mouseLeave&&m.node.addEventListener("mouseleave",r.label.mouseLeave.bind(e,r)),r.label.click&&m.node.addEventListener("click",r.label.click.bind(e,r)))}};i.config.annotations.xaxis.forEach(function(r,l){return n(r,l,"xaxis")}),i.config.annotations.yaxis.forEach(function(r,l){return n(r,l,"yaxis")}),i.config.annotations.points.forEach(function(r,l){return n(r,l,"point")})}},{key:"getY1Y2",value:function(e,i){var n,r=this.w,l=e==="y1"?i.y:i.y2,h=!1;if(this.annoCtx.invertAxis){var u=r.config.xaxis.convertedCatToNumeric?r.globals.categoryLabels:r.globals.labels,g=u.indexOf(l),m=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(g+1,")"));n=m?parseFloat(m.getAttribute("y")):(r.globals.gridHeight/u.length-1)*(g+1)-r.globals.barHeight,i.seriesIndex!==void 0&&r.globals.barHeight&&(n-=r.globals.barHeight/2*(r.globals.series.length-1)-r.globals.barHeight*i.seriesIndex)}else{var y,b=r.globals.seriesYAxisMap[i.yAxisIndex][0],v=r.config.yaxis[i.yAxisIndex].logarithmic?new je(this.annoCtx.ctx).getLogVal(r.config.yaxis[i.yAxisIndex].logBase,l,b)/r.globals.yLogRatio[b]:(l-r.globals.minYArr[b])/(r.globals.yRange[b]/r.globals.gridHeight);n=r.globals.gridHeight-Math.min(Math.max(v,0),r.globals.gridHeight),h=v>r.globals.gridHeight||v<0,!i.marker||i.y!==void 0&&i.y!==null||(n=0),(y=r.config.yaxis[i.yAxisIndex])!==null&&y!==void 0&&y.reversed&&(n=v)}return typeof l=="string"&&l.includes("px")&&(n=parseFloat(l)),{yP:n,clipped:h}}},{key:"getX1X2",value:function(e,i){var n=this.w,r=e==="x1"?i.x:i.x2,l=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,h=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,u=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,g=!1,m=this.annoCtx.inversedReversedAxis?(h-r)/(u/n.globals.gridWidth):(r-l)/(u/n.globals.gridWidth);return n.config.xaxis.type!=="category"&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||n.config.chart.sparkline.enabled||(m=this.getStringX(r)),typeof r=="string"&&r.includes("px")&&(m=parseFloat(r)),r==null&&i.marker&&(m=n.globals.gridWidth),i.seriesIndex!==void 0&&n.globals.barWidth&&!this.annoCtx.invertAxis&&(m-=n.globals.barWidth/2*(n.globals.series.length-1)-n.globals.barWidth*i.seriesIndex),m>n.globals.gridWidth?(m=n.globals.gridWidth,g=!0):m<0&&(m=0,g=!0),{x:m,clipped:g}}},{key:"getStringX",value:function(e){var i=this.w,n=e;i.config.xaxis.convertedCatToNumeric&&i.globals.categoryLabels.length&&(e=i.globals.categoryLabels.indexOf(e)+1);var r=i.globals.labels.map(function(h){return Array.isArray(h)?h.join(" "):h}).indexOf(e),l=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(r+1,")"));return l&&(n=parseFloat(l.getAttribute("x"))),n}}]),f}(),hu=function(){function f(e){s(this,f),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new yn(this.annoCtx)}return c(f,[{key:"addXaxisAnnotation",value:function(e,i,n){var r,l=this.w,h=this.helpers.getX1X2("x1",e),u=h.x,g=h.clipped,m=!0,y=e.label.text,b=e.strokeDashArray;if(X.isNumber(u)){if(e.x2===null||e.x2===void 0){if(!g){var v=this.annoCtx.graphics.drawLine(u+e.offsetX,0+e.offsetY,u+e.offsetX,l.globals.gridHeight+e.offsetY,e.borderColor,b,e.borderWidth);i.appendChild(v.node),e.id&&v.node.classList.add(e.id)}}else{var k=this.helpers.getX1X2("x2",e);if(r=k.x,m=k.clipped,!g||!m){if(r<u){var A=u;u=r,r=A}var C=this.annoCtx.graphics.drawRect(u+e.offsetX,0+e.offsetY,r-u,l.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,b);C.node.classList.add("apexcharts-annotation-rect"),C.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),i.appendChild(C.node),e.id&&C.node.classList.add(e.id)}}if(!g||!m){var T=this.annoCtx.graphics.getTextRects(y,parseFloat(e.label.style.fontSize)),O=e.label.position==="top"?4:e.label.position==="center"?l.globals.gridHeight/2+(e.label.orientation==="vertical"?T.width/2:0):l.globals.gridHeight,L=this.annoCtx.graphics.drawText({x:u+e.label.offsetX,y:O+e.label.offsetY-(e.label.orientation==="vertical"?e.label.position==="top"?T.width/2-12:-T.width/2:0),text:y,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});L.attr({rel:n}),i.appendChild(L.node),this.annoCtx.helpers.setOrientations(e,n)}}}},{key:"drawXAxisAnnotations",value:function(){var e=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return i.config.annotations.xaxis.map(function(r,l){e.addXaxisAnnotation(r,n.node,l)}),n}}]),f}(),it=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return c(f,[{key:"isValidDate",value:function(e){return typeof e!="number"&&!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var i=Date.parse(e);if(!isNaN(i))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return n=this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,i){var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,l=["\0"].concat(Y(n.months)),h=[""].concat(Y(n.shortMonths)),u=[""].concat(Y(n.days)),g=[""].concat(Y(n.shortDays));function m(B,W){var V=B+"";for(W=W||2;V.length<W;)V="0"+V;return V}var y=r?e.getUTCFullYear():e.getFullYear();i=(i=(i=i.replace(/(^|[^\\])yyyy+/g,"$1"+y)).replace(/(^|[^\\])yy/g,"$1"+y.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+y);var b=(r?e.getUTCMonth():e.getMonth())+1;i=(i=(i=(i=i.replace(/(^|[^\\])MMMM+/g,"$1"+l[0])).replace(/(^|[^\\])MMM/g,"$1"+h[0])).replace(/(^|[^\\])MM/g,"$1"+m(b))).replace(/(^|[^\\])M/g,"$1"+b);var v=r?e.getUTCDate():e.getDate();i=(i=(i=(i=i.replace(/(^|[^\\])dddd+/g,"$1"+u[0])).replace(/(^|[^\\])ddd/g,"$1"+g[0])).replace(/(^|[^\\])dd/g,"$1"+m(v))).replace(/(^|[^\\])d/g,"$1"+v);var k=r?e.getUTCHours():e.getHours(),A=k>12?k-12:k===0?12:k;i=(i=(i=(i=i.replace(/(^|[^\\])HH+/g,"$1"+m(k))).replace(/(^|[^\\])H/g,"$1"+k)).replace(/(^|[^\\])hh+/g,"$1"+m(A))).replace(/(^|[^\\])h/g,"$1"+A);var C=r?e.getUTCMinutes():e.getMinutes();i=(i=i.replace(/(^|[^\\])mm+/g,"$1"+m(C))).replace(/(^|[^\\])m/g,"$1"+C);var T=r?e.getUTCSeconds():e.getSeconds();i=(i=i.replace(/(^|[^\\])ss+/g,"$1"+m(T))).replace(/(^|[^\\])s/g,"$1"+T);var O=r?e.getUTCMilliseconds():e.getMilliseconds();i=i.replace(/(^|[^\\])fff+/g,"$1"+m(O,3)),O=Math.round(O/10),i=i.replace(/(^|[^\\])ff/g,"$1"+m(O)),O=Math.round(O/10);var L=k<12?"AM":"PM";i=(i=(i=i.replace(/(^|[^\\])f/g,"$1"+O)).replace(/(^|[^\\])TT+/g,"$1"+L)).replace(/(^|[^\\])T/g,"$1"+L.charAt(0));var P=L.toLowerCase();i=(i=i.replace(/(^|[^\\])tt+/g,"$1"+P)).replace(/(^|[^\\])t/g,"$1"+P.charAt(0));var F=-e.getTimezoneOffset(),N=r||!F?"Z":F>0?"+":"-";if(!r){var H=(F=Math.abs(F))%60;N+=m(Math.floor(F/60))+":"+m(H)}i=i.replace(/(^|[^\\])K/g,"$1"+N);var z=(r?e.getUTCDay():e.getDay())+1;return i=(i=(i=(i=(i=i.replace(new RegExp(u[0],"g"),u[z])).replace(new RegExp(g[0],"g"),g[z])).replace(new RegExp(l[0],"g"),l[b])).replace(new RegExp(h[0],"g"),h[b])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,i,n){var r=this.w;r.config.xaxis.min!==void 0&&(e=r.config.xaxis.min),r.config.xaxis.max!==void 0&&(i=r.config.xaxis.max);var l=this.getDate(e),h=this.getDate(i),u=this.formatDate(l,"yyyy MM dd HH mm ss fff").split(" "),g=this.formatDate(h,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(u[6],10),maxMillisecond:parseInt(g[6],10),minSecond:parseInt(u[5],10),maxSecond:parseInt(g[5],10),minMinute:parseInt(u[4],10),maxMinute:parseInt(g[4],10),minHour:parseInt(u[3],10),maxHour:parseInt(g[3],10),minDate:parseInt(u[2],10),maxDate:parseInt(g[2],10),minMonth:parseInt(u[1],10)-1,maxMonth:parseInt(g[1],10)-1,minYear:parseInt(u[0],10),maxYear:parseInt(g[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,i,n){return this.determineDaysOfMonths(e,i)-n}},{key:"determineDaysOfYear",value:function(e){var i=365;return this.isLeapYear(e)&&(i=366),i}},{key:"determineRemainingDaysOfYear",value:function(e,i,n){var r=this.daysCntOfYear[i]+n;return i>1&&this.isLeapYear()&&r++,r}},{key:"determineDaysOfMonths",value:function(e,i){var n=30;switch(e=X.monthMod(e),!0){case this.months30.indexOf(e)>-1:e===2&&(n=this.isLeapYear(i)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),f}(),Fs=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return c(f,[{key:"xLabelFormat",value:function(e,i,n,r){var l=this.w;if(l.config.xaxis.type==="datetime"&&l.config.xaxis.labels.formatter===void 0&&l.config.tooltip.x.formatter===void 0){var h=new it(this.ctx);return h.formatDate(h.getDate(i),l.config.tooltip.x.format)}return e(i,n,r)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map(function(i){return i}):e}},{key:"defaultYFormatter",value:function(e,i,n){var r=this.w;if(X.isNumber(e))if(r.globals.yValueDecimal!==0)e=e.toFixed(i.decimalsInFloat!==void 0?i.decimalsInFloat:r.globals.yValueDecimal);else{var l=e.toFixed(0);e=e==l?l:e.toFixed(1)}return e}},{key:"setLabelFormatters",value:function(){var e=this,i=this.w;return i.globals.xaxisTooltipFormatter=function(n){return e.defaultGeneralFormatter(n)},i.globals.ttKeyFormatter=function(n){return e.defaultGeneralFormatter(n)},i.globals.ttZFormatter=function(n){return n},i.globals.legendFormatter=function(n){return e.defaultGeneralFormatter(n)},i.config.xaxis.labels.formatter!==void 0?i.globals.xLabelFormatter=i.config.xaxis.labels.formatter:i.globals.xLabelFormatter=function(n){if(X.isNumber(n)){if(!i.config.xaxis.convertedCatToNumeric&&i.config.xaxis.type==="numeric"){if(X.isNumber(i.config.xaxis.decimalsInFloat))return n.toFixed(i.config.xaxis.decimalsInFloat);var r=i.globals.maxX-i.globals.minX;return r>0&&r<100?n.toFixed(1):n.toFixed(0)}return i.globals.isBarHorizontal&&i.globals.maxY-i.globals.minYArr<4?n.toFixed(1):n.toFixed(0)}return n},typeof i.config.tooltip.x.formatter=="function"?i.globals.ttKeyFormatter=i.config.tooltip.x.formatter:i.globals.ttKeyFormatter=i.globals.xLabelFormatter,typeof i.config.xaxis.tooltip.formatter=="function"&&(i.globals.xaxisTooltipFormatter=i.config.xaxis.tooltip.formatter),(Array.isArray(i.config.tooltip.y)||i.config.tooltip.y.formatter!==void 0)&&(i.globals.ttVal=i.config.tooltip.y),i.config.tooltip.z.formatter!==void 0&&(i.globals.ttZFormatter=i.config.tooltip.z.formatter),i.config.legend.formatter!==void 0&&(i.globals.legendFormatter=i.config.legend.formatter),i.config.yaxis.forEach(function(n,r){n.labels.formatter!==void 0?i.globals.yLabelFormatters[r]=n.labels.formatter:i.globals.yLabelFormatters[r]=function(l){return i.globals.xyCharts?Array.isArray(l)?l.map(function(h){return e.defaultYFormatter(h,n,r)}):e.defaultYFormatter(l,n,r):l}}),i.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if(e.config.chart.type==="heatmap"){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var i=e.globals.seriesNames.reduce(function(n,r){return n.length>r.length?n:r},0);e.globals.yAxisScale[0].niceMax=i,e.globals.yAxisScale[0].niceMin=i}}}]),f}(),fi=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"getLabel",value:function(e,i,n,r){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",u=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],g=this.w,m=e[r]===void 0?"":e[r],y=m,b=g.globals.xLabelFormatter,v=g.config.xaxis.labels.formatter,k=!1,A=new Fs(this.ctx),C=m;u&&(y=A.xLabelFormat(b,m,C,{i:r,dateFormatter:new it(this.ctx).formatDate,w:g}),v!==void 0&&(y=v(m,e[r],{i:r,dateFormatter:new it(this.ctx).formatDate,w:g})));var T,O;i.length>0?(T=i[r].unit,O=null,i.forEach(function(N){N.unit==="month"?O="year":N.unit==="day"?O="month":N.unit==="hour"?O="day":N.unit==="minute"&&(O="hour")}),k=O===T,n=i[r].position,y=i[r].value):g.config.xaxis.type==="datetime"&&v===void 0&&(y=""),y===void 0&&(y=""),y=Array.isArray(y)?y:y.toString();var L=new Q(this.ctx),P={};P=g.globals.rotateXLabels&&u?L.getTextRects(y,parseInt(h,10),null,"rotate(".concat(g.config.xaxis.labels.rotate," 0 0)"),!1):L.getTextRects(y,parseInt(h,10));var F=!g.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(y)&&(String(y)==="NaN"||l.indexOf(y)>=0&&F)&&(y=""),{x:n,text:y,textRect:P,isBold:k}}},{key:"checkLabelBasedOnTickamount",value:function(e,i,n){var r=this.w,l=r.config.xaxis.tickAmount;return l==="dataPoints"&&(l=Math.round(r.globals.gridWidth/120)),l>n||e%Math.round(n/(l+1))==0||(i.text=""),i}},{key:"checkForOverflowingLabels",value:function(e,i,n,r,l){var h=this.w;if(e===0&&h.globals.skipFirstTimelinelabel&&(i.text=""),e===n-1&&h.globals.skipLastTimelinelabel&&(i.text=""),h.config.xaxis.labels.hideOverlappingLabels&&r.length>0){var u=l[l.length-1];i.x<u.textRect.width/(h.globals.rotateXLabels?Math.abs(h.config.xaxis.labels.rotate)/12:1.01)+u.x&&(i.text="")}return i}},{key:"checkForReversedLabels",value:function(e,i){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&i.reverse(),i}},{key:"yAxisAllSeriesCollapsed",value:function(e){var i=this.w.globals;return!i.seriesYAxisMap[e].some(function(n){return i.collapsedSeriesIndices.indexOf(n)===-1})}},{key:"translateYAxisIndex",value:function(e){var i=this.w,n=i.globals,r=i.config.yaxis;return n.series.length>r.length||r.some(function(l){return Array.isArray(l.seriesName)})?e:n.seriesYAxisReverseMap[e]}},{key:"isYAxisHidden",value:function(e){var i=this.w,n=i.config.yaxis[e];if(!n.show||this.yAxisAllSeriesCollapsed(e))return!0;if(!n.showForNullSeries){var r=i.globals.seriesYAxisMap[e],l=new je(this.ctx);return r.every(function(h){return l.isSeriesNull(h)})}return!1}},{key:"getYAxisForeColor",value:function(e,i){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[i]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[i].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,i,n,r,l,h,u){var g=this.w,m=new Q(this.ctx),y=g.globals.translateY+g.config.yaxis[l].labels.offsetY;if(g.globals.isBarHorizontal?y=0:g.config.chart.type==="heatmap"&&(y+=h/2),r.show&&i>0){g.config.yaxis[l].opposite===!0&&(e+=r.width);for(var b=i;b>=0;b--){var v=m.drawLine(e+n.offsetX-r.width+r.offsetX,y+r.offsetY,e+n.offsetX+r.offsetX,y+r.offsetY,r.color);u.add(v),y+=h}}}}]),f}(),du=function(){function f(e){s(this,f),this.w=e.w,this.annoCtx=e,this.helpers=new yn(this.annoCtx),this.axesUtils=new fi(this.annoCtx)}return c(f,[{key:"addYaxisAnnotation",value:function(e,i,n){var r,l=this.w,h=e.strokeDashArray,u=this.helpers.getY1Y2("y1",e),g=u.yP,m=u.clipped,y=!0,b=!1,v=e.label.text;if(e.y2===null||e.y2===void 0){if(!m){b=!0;var k=this.annoCtx.graphics.drawLine(0+e.offsetX,g+e.offsetY,this._getYAxisAnnotationWidth(e),g+e.offsetY,e.borderColor,h,e.borderWidth);i.appendChild(k.node),e.id&&k.node.classList.add(e.id)}}else{if(r=(u=this.helpers.getY1Y2("y2",e)).yP,y=u.clipped,r>g){var A=g;g=r,r=A}if(!m||!y){b=!0;var C=this.annoCtx.graphics.drawRect(0+e.offsetX,r+e.offsetY,this._getYAxisAnnotationWidth(e),g-r,0,e.fillColor,e.opacity,1,e.borderColor,h);C.node.classList.add("apexcharts-annotation-rect"),C.attr("clip-path","url(#gridRectMask".concat(l.globals.cuid,")")),i.appendChild(C.node),e.id&&C.node.classList.add(e.id)}}if(b){var T=e.label.position==="right"?l.globals.gridWidth:e.label.position==="center"?l.globals.gridWidth/2:0,O=this.annoCtx.graphics.drawText({x:T+e.label.offsetX,y:(r??g)+e.label.offsetY-3,text:v,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});O.attr({rel:n}),i.appendChild(O.node)}}},{key:"_getYAxisAnnotationWidth",value:function(e){var i=this.w;return i.globals.gridWidth,(e.width.indexOf("%")>-1?i.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return i.config.annotations.yaxis.forEach(function(r,l){r.yAxisIndex=e.axesUtils.translateYAxisIndex(r.yAxisIndex),e.axesUtils.isYAxisHidden(r.yAxisIndex)&&e.axesUtils.yAxisAllSeriesCollapsed(r.yAxisIndex)||e.addYaxisAnnotation(r,n.node,l)}),n}}]),f}(),uu=function(){function f(e){s(this,f),this.w=e.w,this.annoCtx=e,this.helpers=new yn(this.annoCtx)}return c(f,[{key:"addPointAnnotation",value:function(e,i,n){if(!(this.w.globals.collapsedSeriesIndices.indexOf(e.seriesIndex)>-1)){var r=this.helpers.getX1X2("x1",e),l=r.x,h=r.clipped,u=(r=this.helpers.getY1Y2("y1",e)).yP,g=r.clipped;if(X.isNumber(l)&&!g&&!h){var m={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},y=this.annoCtx.graphics.drawMarker(l+e.marker.offsetX,u+e.marker.offsetY,m);i.appendChild(y.node);var b=e.label.text?e.label.text:"",v=this.annoCtx.graphics.drawText({x:l+e.label.offsetX,y:u+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:b,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(v.attr({rel:n}),i.appendChild(v.node),e.customSVG.SVG){var k=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});k.attr({transform:"translate(".concat(l+e.customSVG.offsetX,", ").concat(u+e.customSVG.offsetY,")")}),k.node.innerHTML=e.customSVG.SVG,i.appendChild(k.node)}if(e.image.path){var A=e.image.width?e.image.width:20,C=e.image.height?e.image.height:20;y=this.annoCtx.addImage({x:l+e.image.offsetX-A/2,y:u+e.image.offsetY-C/2,width:A,height:C,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&y.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&y.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e)),e.click&&y.node.addEventListener("click",e.click.bind(this,e))}}}},{key:"drawPointAnnotations",value:function(){var e=this,i=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return i.config.annotations.points.map(function(r,l){e.addPointAnnotation(r,n.node,l)}),n}}]),f}(),Jo={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Wi=function(){function f(){s(this,f),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return c(f,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[Jo],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(i,n){return i+n},0)/e.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(e){return e},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce(function(i,n){return i+n},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return e!==null?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),f}(),fu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.graphics=new Q(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new yn(this),this.xAxisAnnotations=new hu(this),this.yAxisAnnotations=new du(this),this.pointsAnnotations=new uu(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return c(f,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts&&e.globals.dataPoints){for(var i=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),r=this.pointsAnnotations.drawPointAnnotations(),l=e.config.chart.animations.enabled,h=[i,n,r],u=[n.node,i.node,r.node],g=0;g<3;g++)e.globals.dom.elGraphical.add(h[g]),!l||e.globals.resized||e.globals.dataChanged||e.config.chart.type!=="scatter"&&e.config.chart.type!=="bubble"&&e.globals.dataPoints>1&&u[g].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:u[g],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map(function(i,n){e.addImage(i,n)})}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map(function(i,n){e.addText(i,n)})}},{key:"addXaxisAnnotation",value:function(e,i,n){this.xAxisAnnotations.addXaxisAnnotation(e,i,n)}},{key:"addYaxisAnnotation",value:function(e,i,n){this.yAxisAnnotations.addYaxisAnnotation(e,i,n)}},{key:"addPointAnnotation",value:function(e,i,n){this.pointsAnnotations.addPointAnnotation(e,i,n)}},{key:"addText",value:function(e,i){var n=e.x,r=e.y,l=e.text,h=e.textAnchor,u=e.foreColor,g=e.fontSize,m=e.fontFamily,y=e.fontWeight,b=e.cssClass,v=e.backgroundColor,k=e.borderWidth,A=e.strokeDashArray,C=e.borderRadius,T=e.borderColor,O=e.appendTo,L=O===void 0?".apexcharts-svg":O,P=e.paddingLeft,F=P===void 0?4:P,N=e.paddingRight,H=N===void 0?4:N,z=e.paddingBottom,B=z===void 0?2:z,W=e.paddingTop,V=W===void 0?2:W,G=this.w,q=this.graphics.drawText({x:n,y:r,text:l,textAnchor:h||"start",fontSize:g||"12px",fontWeight:y||"regular",fontFamily:m||G.config.chart.fontFamily,foreColor:u||G.config.chart.foreColor,cssClass:b}),U=G.globals.dom.baseEl.querySelector(L);U&&U.appendChild(q.node);var K=q.bbox();if(l){var re=this.graphics.drawRect(K.x-F,K.y-V,K.width+F+H,K.height+B+V,C,v||"transparent",1,k,T,A);U.insertBefore(re.node,q.node)}}},{key:"addImage",value:function(e,i){var n=this.w,r=e.path,l=e.x,h=l===void 0?0:l,u=e.y,g=u===void 0?0:u,m=e.width,y=m===void 0?20:m,b=e.height,v=b===void 0?20:b,k=e.appendTo,A=k===void 0?".apexcharts-svg":k,C=n.globals.dom.Paper.image(r);C.size(y,v).move(h,g);var T=n.globals.dom.baseEl.querySelector(A);return T&&T.appendChild(C.node),C}},{key:"addXaxisAnnotationExternal",value:function(e,i,n){return this.addAnnotationExternal({params:e,pushToMemory:i,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,i,n){return this.addAnnotationExternal({params:e,pushToMemory:i,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,i,n){return this.invertAxis===void 0&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:i,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var i=e.params,n=e.pushToMemory,r=e.context,l=e.type,h=e.contextMethod,u=r,g=u.w,m=g.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-annotations")),y=m.childNodes.length+1,b=new Wi,v=Object.assign({},l==="xaxis"?b.xAxisAnnotation:l==="yaxis"?b.yAxisAnnotation:b.pointAnnotation),k=X.extend(v,i);switch(l){case"xaxis":this.addXaxisAnnotation(k,m,y);break;case"yaxis":this.addYaxisAnnotation(k,m,y);break;case"point":this.addPointAnnotation(k,m,y)}var A=g.globals.dom.baseEl.querySelector(".apexcharts-".concat(l,"-annotations .apexcharts-").concat(l,"-annotation-label[rel='").concat(y,"']")),C=this.helpers.addBackgroundToAnno(A,k);return C&&m.insertBefore(C.node,A),n&&g.globals.memory.methodsToExec.push({context:u,id:k.id?k.id:X.randomId(),method:h,label:"addAnnotation",params:i}),r}},{key:"clearAnnotations",value:function(e){for(var i=e.w,n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),r=i.globals.memory.methodsToExec.length-1;r>=0;r--)i.globals.memory.methodsToExec[r].label!=="addText"&&i.globals.memory.methodsToExec[r].label!=="addAnnotation"||i.globals.memory.methodsToExec.splice(r,1);n=X.listToArray(n),Array.prototype.forEach.call(n,function(l){for(;l.firstChild;)l.removeChild(l.firstChild)})}},{key:"removeAnnotation",value:function(e,i){var n=e.w,r=n.globals.dom.baseEl.querySelectorAll(".".concat(i));r&&(n.globals.memory.methodsToExec.map(function(l,h){l.id===i&&n.globals.memory.methodsToExec.splice(h,1)}),Array.prototype.forEach.call(r,function(l){l.parentElement.removeChild(l)}))}}]),f}(),zr=function(f){var e,i=f.isTimeline,n=f.ctx,r=f.seriesIndex,l=f.dataPointIndex,h=f.y1,u=f.y2,g=f.w,m=g.globals.seriesRangeStart[r][l],y=g.globals.seriesRangeEnd[r][l],b=g.globals.labels[l],v=g.config.series[r].name?g.config.series[r].name:"",k=g.globals.ttKeyFormatter,A=g.config.tooltip.y.title.formatter,C={w:g,seriesIndex:r,dataPointIndex:l,start:m,end:y};typeof A=="function"&&(v=A(v,C)),(e=g.config.series[r].data[l])!==null&&e!==void 0&&e.x&&(b=g.config.series[r].data[l].x),i||g.config.xaxis.type==="datetime"&&(b=new Fs(n).xLabelFormat(g.globals.ttKeyFormatter,b,b,{i:void 0,dateFormatter:new it(n).formatDate,w:g})),typeof k=="function"&&(b=k(b,C)),Number.isFinite(h)&&Number.isFinite(u)&&(m=h,y=u);var T="",O="",L=g.globals.colors[r];if(g.config.tooltip.x.formatter===void 0)if(g.config.xaxis.type==="datetime"){var P=new it(n);T=P.formatDate(P.getDate(m),g.config.tooltip.x.format),O=P.formatDate(P.getDate(y),g.config.tooltip.x.format)}else T=m,O=y;else T=g.config.tooltip.x.formatter(m),O=g.config.tooltip.x.formatter(y);return{start:m,end:y,startVal:T,endVal:O,ylabel:b,color:L,seriesName:v}},Fr=function(f){var e=f.color,i=f.seriesName,n=f.ylabel,r=f.start,l=f.end,h=f.seriesIndex,u=f.dataPointIndex,g=f.ctx.tooltip.tooltipLabels.getFormatters(h);r=g.yLbFormatter(r),l=g.yLbFormatter(l);var m=g.yLbFormatter(f.w.globals.series[h][u]),y=`<span class="value start-value">
  `.concat(r,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(l,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(i||"")+'</span></div><div> <span class="category">'+n+": </span> "+(f.w.globals.comboCharts?f.w.config.series[h].type==="rangeArea"||f.w.config.series[h].type==="rangeBar"?y:"<span>".concat(m,"</span>"):y)+" </div></div>"},Bs=function(){function f(e){s(this,f),this.opts=e}return c(f,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.hideYAxis(),X.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(e,i){var n=i.w.config.series[i.seriesIndex].name;return e!==null?n+": "+e:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),I(I({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(i){var n=i.seriesIndex,r=i.dataPointIndex,l=i.w;return e._getBoxTooltip(l,n,r,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(i){var n=i.seriesIndex,r=i.dataPointIndex,l=i.w;return e._getBoxTooltip(l,n,r,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,i){i.ctx;var n=i.seriesIndex,r=i.dataPointIndex,l=i.w,h=function(){var u=l.globals.seriesRangeStart[n][r];return l.globals.seriesRangeEnd[n][r]-u};return l.globals.comboCharts?l.config.series[n].type==="rangeBar"||l.config.series[n].type==="rangeArea"?h():e:h()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(i){var n=zr(I(I({},i),{},{isTimeline:!0})),r=n.color,l=n.seriesName,h=n.ylabel,u=n.startVal,g=n.endVal;return Fr(I(I({},i),{},{color:r,seriesName:l,ylabel:h,start:u,end:g}))}(e):function(i){var n=zr(i),r=n.color,l=n.seriesName,h=n.ylabel,u=n.start,g=n.end;return Fr(I(I({},i),{},{color:r,seriesName:l,ylabel:h,start:u,end:g}))}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(e){var i,n;return(i=e.plotOptions.bar)!==null&&i!==void 0&&i.barHeight||(e.plotOptions.bar.barHeight=2),(n=e.plotOptions.bar)!==null&&n!==void 0&&n.columnWidth||(e.plotOptions.bar.columnWidth=2),e}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(e){return function(i){var n=zr(i),r=n.color,l=n.seriesName,h=n.ylabel,u=n.start,g=n.end;return Fr(I(I({},i),{},{color:r,seriesName:l,ylabel:h,start:u,end:g}))}(e)}}}}},{key:"brush",value:function(e){return X.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var i=e.dataLabels.formatter;return e.yaxis.forEach(function(n,r){e.yaxis[r].min=0,e.yaxis[r].max=100}),e.chart.type==="bar"&&(e.dataLabels.formatter=i||function(n){return typeof n=="number"&&n?n.toFixed(0)+"%":n}),e}},{key:"stackedBars",value:function(){var e=this.bar();return I(I({},e),{},{plotOptions:I(I({},e.plotOptions),{},{bar:I(I({},e.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,i,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(h){return X.isNumber(h)?Math.floor(h):h};var r=e.xaxis.labels.formatter,l=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(l=n.map(function(h){return Array.isArray(h)?h:String(h)})),l&&l.length&&(e.xaxis.labels.formatter=function(h){return X.isNumber(h)?r(l[Math.floor(h)-1]):r(h)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(e,i,n,r,l){var h=e.globals.seriesCandleO[i][n],u=e.globals.seriesCandleH[i][n],g=e.globals.seriesCandleM[i][n],m=e.globals.seriesCandleL[i][n],y=e.globals.seriesCandleC[i][n];return e.config.series[i].type&&e.config.series[i].type!==l?`<div class="apexcharts-custom-tooltip">
          `.concat(e.config.series[i].name?e.config.series[i].name:"series-"+(i+1),": <strong>").concat(e.globals.series[i][n],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(r[0],': <span class="value">')+h+"</span></div>"+"<div>".concat(r[1],': <span class="value">')+u+"</span></div>"+(g?"<div>".concat(r[2],': <span class="value">')+g+"</span></div>":"")+"<div>".concat(r[3],': <span class="value">')+m+"</span></div>"+"<div>".concat(r[4],': <span class="value">')+y+"</span></div></div>"}}]),f}(),Hs=function(){function f(e){s(this,f),this.opts=e}return c(f,[{key:"init",value:function(e){var i=e.responsiveOverride,n=this.opts,r=new Wi,l=new Bs(n);this.chartType=n.chart.type,n=this.extendYAxis(n),n=this.extendAnnotations(n);var h=r.init(),u={};if(n&&$(n)==="object"){var g,m,y,b,v,k,A,C,T,O,L={};L=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)!==-1?l[n.chart.type]():l.line(),(g=n.plotOptions)!==null&&g!==void 0&&(m=g.bar)!==null&&m!==void 0&&m.isFunnel&&(L=l.funnel()),n.chart.stacked&&n.chart.type==="bar"&&(L=l.stackedBars()),(y=n.chart.brush)!==null&&y!==void 0&&y.enabled&&(L=l.brush(L)),(b=n.plotOptions)!==null&&b!==void 0&&(v=b.line)!==null&&v!==void 0&&v.isSlopeChart&&(L=l.slope()),n.chart.stacked&&n.chart.stackType==="100%"&&(n=l.stacked100(n)),(k=n.plotOptions)!==null&&k!==void 0&&(A=k.bar)!==null&&A!==void 0&&A.isDumbbell&&(n=l.dumbbell(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},i||(n.xaxis.convertedCatToNumeric=!1),((C=(n=this.checkForCatToNumericXAxis(this.chartType,L,n)).chart.sparkline)!==null&&C!==void 0&&C.enabled||(T=window.Apex.chart)!==null&&T!==void 0&&(O=T.sparkline)!==null&&O!==void 0&&O.enabled)&&(L=l.sparkline(L)),u=X.extend(h,L)}var P=X.extend(u,window.Apex);return h=X.extend(P,n),h=this.handleUserInputErrors(h)}},{key:"checkForCatToNumericXAxis",value:function(e,i,n){var r,l,h=new Bs(n),u=(e==="bar"||e==="boxPlot")&&((r=n.plotOptions)===null||r===void 0||(l=r.bar)===null||l===void 0?void 0:l.horizontal),g=e==="pie"||e==="polarArea"||e==="donut"||e==="radar"||e==="radialBar"||e==="heatmap",m=n.xaxis.type!=="datetime"&&n.xaxis.type!=="numeric",y=n.xaxis.tickPlacement?n.xaxis.tickPlacement:i.xaxis&&i.xaxis.tickPlacement;return u||g||!m||y==="between"||(n=h.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,i){var n=new Wi;(e.yaxis===void 0||!e.yaxis||Array.isArray(e.yaxis)&&e.yaxis.length===0)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=X.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[X.extend(n.yAxis,e.yaxis)]:e.yaxis=X.extendArray(e.yaxis,n.yAxis);var r=!1;e.yaxis.forEach(function(h){h.logarithmic&&(r=!0)});var l=e.series;return i&&!l&&(l=i.config.series),r&&l.length!==e.yaxis.length&&l.length&&(e.yaxis=l.map(function(h,u){if(h.name||(l[u].name="series-".concat(u+1)),e.yaxis[u])return e.yaxis[u].seriesName=l[u].name,e.yaxis[u];var g=X.extend(n.yAxis,e.yaxis[0]);return g.show=!1,g})),r&&l.length>1&&l.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),e}},{key:"extendAnnotations",value:function(e){return e.annotations===void 0&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),e=this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var i=new Wi;return e.annotations.yaxis=X.extendArray(e.annotations.yaxis!==void 0?e.annotations.yaxis:[],i.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var i=new Wi;return e.annotations.xaxis=X.extendArray(e.annotations.xaxis!==void 0?e.annotations.xaxis:[],i.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var i=new Wi;return e.annotations.points=X.extendArray(e.annotations.points!==void 0?e.annotations.points:[],i.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&e.theme.mode==="dark"&&(e.tooltip||(e.tooltip={}),e.tooltip.theme!=="light"&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var i=e;if(i.tooltip.shared&&i.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(i.chart.type==="bar"&&i.plotOptions.bar.horizontal){if(i.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");i.yaxis[0].reversed&&(i.yaxis[0].opposite=!0),i.xaxis.tooltip.enabled=!1,i.yaxis[0].tooltip.enabled=!1,i.chart.zoom.enabled=!1}return i.chart.type!=="bar"&&i.chart.type!=="rangeBar"||i.tooltip.shared&&i.xaxis.crosshairs.width==="barWidth"&&i.series.length>1&&(i.xaxis.crosshairs.width="tickWidth"),i.chart.type!=="candlestick"&&i.chart.type!=="boxPlot"||i.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(i.chart.type," chart is not supported.")),i.yaxis[0].reversed=!1),i}}]),f}(),Zo=function(){function f(){s(this,f)}return c(f,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRange=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasXaxisGroups=!1,e.groups=[],e.barGroups=[],e.lineGroups=[],e.areaGroups=[],e.hasSeriesGroups=!1,e.seriesGroups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.lastWheelExecution=0,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0,e.multiAxisTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:e.chart.toolbar.autoSelected==="zoom"&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:e.chart.toolbar.autoSelected==="pan"&&e.chart.toolbar.tools.pan,selectionEnabled:e.chart.toolbar.autoSelected==="selection"&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:e.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(e){var i=this.globalVars(e);return this.initGlobalVars(i),i.initialConfig=X.extend({},e),i.initialSeries=X.clone(e.series),i.lastXAxis=X.clone(i.initialConfig.xaxis),i.lastYAxis=X.clone(i.initialConfig.yaxis),i}}]),f}(),pu=function(){function f(e){s(this,f),this.opts=e}return c(f,[{key:"init",value:function(){var e=new Hs(this.opts).init({responsiveOverride:!1});return{config:e,globals:new Zo().init(e)}}}]),f}(),_t=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return c(f,[{key:"clippedImgArea",value:function(e){var i=this.w,n=i.config,r=parseInt(i.globals.gridWidth,10),l=parseInt(i.globals.gridHeight,10),h=r>l?r:l,u=e.image,g=0,m=0;e.width===void 0&&e.height===void 0?n.fill.image.width!==void 0&&n.fill.image.height!==void 0?(g=n.fill.image.width+1,m=n.fill.image.height):(g=h+1,m=h):(g=e.width,m=e.height);var y=document.createElementNS(i.globals.SVGNS,"pattern");Q.setAttrs(y,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:g+"px",height:m+"px"});var b=document.createElementNS(i.globals.SVGNS,"image");y.appendChild(b),b.setAttributeNS(window.SVG.xlink,"href",u),Q.setAttrs(b,{x:0,y:0,preserveAspectRatio:"none",width:g+"px",height:m+"px"}),b.style.opacity=e.opacity,i.globals.dom.elDefs.node.appendChild(y)}},{key:"getSeriesIndex",value:function(e){var i=this.w,n=i.config.chart.type;return(n==="bar"||n==="rangeBar")&&i.config.plotOptions.bar.distributed||n==="heatmap"||n==="treemap"?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%i.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(e,i){var n,r=this.w,l=null,h=null,u=d(e);try{for(u.s();!(n=u.n()).done;){var g=n.value;g>=i.threshold?(l===null||g>l)&&(l=g):(h===null||g<h)&&(h=g)}}catch(b){u.e(b)}finally{u.f()}l===null&&(l=i.threshold),h===null&&(h=i.threshold);var m=l-i.threshold+(i.threshold-h);m===0&&(m=1);var y=100-(i.threshold-h)/m*100;return[{offset:y=Math.max(0,Math.min(y,100)),color:i.colorAboveThreshold,opacity:r.config.fill.opacity},{offset:0,color:i.colorBelowThreshold,opacity:r.config.fill.opacity}]}},{key:"fillPath",value:function(e){var i,n,r,l=this.w;this.opts=e;var h,u,g,m=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var y=m.plotOptions.line.colors.colorAboveThreshold&&m.plotOptions.line.colors.colorBelowThreshold,b=this.getFillColors()[this.seriesIndex];l.globals.seriesColors[this.seriesIndex]!==void 0&&(b=l.globals.seriesColors[this.seriesIndex]),typeof b=="function"&&(b=b({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:l}));var v,k,A,C=e.fillType?e.fillType:this.getFillType(this.seriesIndex),T=Array.isArray(m.fill.opacity)?m.fill.opacity[this.seriesIndex]:m.fill.opacity,O=C==="gradient"||y;e.color&&(b=e.color),(i=l.config.series[this.seriesIndex])!==null&&i!==void 0&&(n=i.data)!==null&&n!==void 0&&(r=n[e.dataPointIndex])!==null&&r!==void 0&&r.fillColor&&(b=(v=l.config.series[this.seriesIndex])===null||v===void 0||(k=v.data)===null||k===void 0||(A=k[e.dataPointIndex])===null||A===void 0?void 0:A.fillColor),b||(b="#fff",console.warn("undefined color - ApexCharts"));var L=b;if(b.indexOf("rgb")===-1?b.indexOf("#")===-1?L=b:b.length<9&&(L=X.hexToRgba(b,T)):b.indexOf("rgba")>-1?T=X.getOpacityFromRGBA(b):L=X.hexToRgba(X.rgb2hex(b),T),e.opacity&&(T=e.opacity),C==="pattern"&&(u=this.handlePatternFill({fillConfig:e.fillConfig,patternFill:u,fillColor:b,fillOpacity:T,defaultColor:L})),O){var P=Y(m.fill.gradient.colorStops)||[],F=m.fill.gradient.type;y&&(P[this.seriesIndex]=this.computeColorStops(l.globals.series[this.seriesIndex],m.plotOptions.line.colors),F="vertical"),g=this.handleGradientFill({type:F,fillConfig:e.fillConfig,fillColor:b,fillOpacity:T,colorStops:P,i:this.seriesIndex})}if(C==="image"){var N=m.fill.image.src,H=e.patternID?e.patternID:"",z="pattern".concat(l.globals.cuid).concat(e.seriesNumber+1).concat(H);this.patternIDs.indexOf(z)===-1&&(this.clippedImgArea({opacity:T,image:Array.isArray(N)?e.seriesNumber<N.length?N[e.seriesNumber]:N[0]:N,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:z}),this.patternIDs.push(z)),h="url(#".concat(z,")")}else h=O?g:C==="pattern"?u:L;return e.solid&&(h=L),h}},{key:"getFillType",value:function(e){var i=this.w;return Array.isArray(i.config.fill.type)?i.config.fill.type[e]:i.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,i=e.config,n=this.opts,r=[];return e.globals.comboCharts?e.config.series[this.seriesIndex].type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors):i.chart.type==="line"?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors),n.fillColors!==void 0&&(r=[],Array.isArray(n.fillColors)?r=n.fillColors.slice():r.push(n.fillColors)),r}},{key:"handlePatternFill",value:function(e){var i=e.fillConfig,n=e.patternFill,r=e.fillColor,l=e.fillOpacity,h=e.defaultColor,u=this.w.config.fill;i&&(u=i);var g=this.opts,m=new Q(this.ctx),y=Array.isArray(u.pattern.strokeWidth)?u.pattern.strokeWidth[this.seriesIndex]:u.pattern.strokeWidth,b=r;return Array.isArray(u.pattern.style)?n=u.pattern.style[g.seriesNumber]!==void 0?m.drawPattern(u.pattern.style[g.seriesNumber],u.pattern.width,u.pattern.height,b,y,l):h:n=m.drawPattern(u.pattern.style,u.pattern.width,u.pattern.height,b,y,l),n}},{key:"handleGradientFill",value:function(e){var i=e.type,n=e.fillColor,r=e.fillOpacity,l=e.fillConfig,h=e.colorStops,u=e.i,g=this.w.config.fill;l&&(g=I(I({},g),l));var m=this.opts,y=new Q(this.ctx),b=new X;i=i||g.gradient.type;var v,k=n,A=g.gradient.opacityFrom===void 0?r:Array.isArray(g.gradient.opacityFrom)?g.gradient.opacityFrom[u]:g.gradient.opacityFrom;k.indexOf("rgba")>-1&&(A=X.getOpacityFromRGBA(k));var C=g.gradient.opacityTo===void 0?r:Array.isArray(g.gradient.opacityTo)?g.gradient.opacityTo[u]:g.gradient.opacityTo;if(g.gradient.gradientToColors===void 0||g.gradient.gradientToColors.length===0)v=g.gradient.shade==="dark"?b.shadeColor(-1*parseFloat(g.gradient.shadeIntensity),n.indexOf("rgb")>-1?X.rgb2hex(n):n):b.shadeColor(parseFloat(g.gradient.shadeIntensity),n.indexOf("rgb")>-1?X.rgb2hex(n):n);else if(g.gradient.gradientToColors[m.seriesNumber]){var T=g.gradient.gradientToColors[m.seriesNumber];v=T,T.indexOf("rgba")>-1&&(C=X.getOpacityFromRGBA(T))}else v=n;if(g.gradient.gradientFrom&&(k=g.gradient.gradientFrom),g.gradient.gradientTo&&(v=g.gradient.gradientTo),g.gradient.inverseColors){var O=k;k=v,v=O}return k.indexOf("rgb")>-1&&(k=X.rgb2hex(k)),v.indexOf("rgb")>-1&&(v=X.rgb2hex(v)),y.drawGradient(i,k,v,A,C,m.size,g.gradient.stops,h,u)}}]),f}(),hs=function(){function f(e,i){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var i=0;i<=e.globals.series.length;i++)e.globals.markers.size[i]===void 0&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map(function(n){return e.config.markers.size})}},{key:"plotChartMarkers",value:function(e,i,n,r){var l=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=this.w,u=i,g=e,m=null,y=new Q(this.ctx),b=h.config.markers.discrete&&h.config.markers.discrete.length;if(Array.isArray(g.x))for(var v=0;v<g.x.length;v++){var k=void 0,A=n,C=!X.isNumber(g.y[v]);n===1&&v===0&&(A=0),n===1&&v===1&&(A=1);var T="apexcharts-marker";if(h.config.chart.type!=="line"&&h.config.chart.type!=="area"||h.globals.comboCharts||h.config.tooltip.intersect||(T+=" no-pointer-events"),(Array.isArray(h.config.markers.size)?h.globals.markers.size[i]>0:h.config.markers.size>0)||l||b){C||(T+=" w".concat(X.randomId()));var O=this.getMarkerConfig({cssClass:T,seriesIndex:i,dataPointIndex:A});h.config.series[u].data[A]&&(h.config.series[u].data[A].fillColor&&(O.pointFillColor=h.config.series[u].data[A].fillColor),h.config.series[u].data[A].strokeColor&&(O.pointStrokeColor=h.config.series[u].data[A].strokeColor)),r!==void 0&&(O.pSize=r),(g.x[v]<-h.globals.markers.largestSize||g.x[v]>h.globals.gridWidth+h.globals.markers.largestSize||g.y[v]<-h.globals.markers.largestSize||g.y[v]>h.globals.gridHeight+h.globals.markers.largestSize)&&(O.pSize=0),!C&&((h.globals.markers.size[i]>0||l||b)&&!m&&(m=y.group({class:l||b?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(h.globals.cuid,")")),(k=y.drawMarker(g.x[v],g.y[v],O)).attr("rel",A),k.attr("j",A),k.attr("index",i),k.node.setAttribute("default-marker-size",O.pSize),new tt(this.ctx).setSelectionFilter(k,i,A),this.addEvents(k),m&&m.add(k))}else h.globals.pointsArray[i]===void 0&&(h.globals.pointsArray[i]=[]),h.globals.pointsArray[i].push([g.x[v],g.y[v]])}return m}},{key:"getMarkerConfig",value:function(e){var i=e.cssClass,n=e.seriesIndex,r=e.dataPointIndex,l=r===void 0?null:r,h=e.radius,u=h===void 0?null:h,g=e.size,m=g===void 0?null:g,y=e.strokeWidth,b=y===void 0?null:y,v=this.w,k=this.getMarkerStyle(n),A=m===null?v.globals.markers.size[n]:m,C=v.config.markers;return l!==null&&C.discrete.length&&C.discrete.map(function(T){T.seriesIndex===n&&T.dataPointIndex===l&&(k.pointStrokeColor=T.strokeColor,k.pointFillColor=T.fillColor,A=T.size,k.pointShape=T.shape)}),{pSize:u===null?A:u,pRadius:u!==null?u:C.radius,pointStrokeWidth:b!==null?b:Array.isArray(C.strokeWidth)?C.strokeWidth[n]:C.strokeWidth,pointStrokeColor:k.pointStrokeColor,pointFillColor:k.pointFillColor,shape:k.pointShape||(Array.isArray(C.shape)?C.shape[n]:C.shape),class:i,pointStrokeOpacity:Array.isArray(C.strokeOpacity)?C.strokeOpacity[n]:C.strokeOpacity,pointStrokeDashArray:Array.isArray(C.strokeDashArray)?C.strokeDashArray[n]:C.strokeDashArray,pointFillOpacity:Array.isArray(C.fillOpacity)?C.fillOpacity[n]:C.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var i=this.w,n=new Q(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",i.config.markers.onClick),e.node.addEventListener("dblclick",i.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var i=this.w,n=i.globals.markers.colors,r=i.config.markers.strokeColor||i.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(r)?r[e]:r,pointFillColor:Array.isArray(n)?n[e]:n}}}]),f}(),Ko=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled}return c(f,[{key:"draw",value:function(e,i,n){var r=this.w,l=new Q(this.ctx),h=n.realIndex,u=n.pointsPos,g=n.zRatio,m=n.elParent,y=l.group({class:"apexcharts-series-markers apexcharts-series-".concat(r.config.chart.type)});if(y.attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(u.x))for(var b=0;b<u.x.length;b++){var v=i+1,k=!0;i===0&&b===0&&(v=0),i===0&&b===1&&(v=1);var A=r.globals.markers.size[h];if(g!==1/0){var C=r.config.plotOptions.bubble;A=r.globals.seriesZ[h][v],C.zScaling&&(A/=g),C.minBubbleRadius&&A<C.minBubbleRadius&&(A=C.minBubbleRadius),C.maxBubbleRadius&&A>C.maxBubbleRadius&&(A=C.maxBubbleRadius)}var T=u.x[b],O=u.y[b];if(A=A||0,O!==null&&r.globals.series[h][v]!==void 0||(k=!1),k){var L=this.drawPoint(T,O,A,h,v,i);y.add(L)}m.add(y)}}},{key:"drawPoint",value:function(e,i,n,r,l,h){var u=this.w,g=r,m=new Z(this.ctx),y=new tt(this.ctx),b=new _t(this.ctx),v=new hs(this.ctx),k=new Q(this.ctx),A=v.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:g,dataPointIndex:l,radius:u.config.chart.type==="bubble"||u.globals.comboCharts&&u.config.series[r]&&u.config.series[r].type==="bubble"?n:null}),C=b.fillPath({seriesNumber:r,dataPointIndex:l,color:A.pointFillColor,patternUnits:"objectBoundingBox",value:u.globals.series[r][h]}),T=k.drawMarker(e,i,A);if(u.config.series[g].data[l]&&u.config.series[g].data[l].fillColor&&(C=u.config.series[g].data[l].fillColor),T.attr({fill:C}),u.config.chart.dropShadow.enabled){var O=u.config.chart.dropShadow;y.dropShadow(T,O,r)}if(!this.initialAnim||u.globals.dataChanged||u.globals.resized)u.globals.animationEnded=!0;else{var L=u.config.chart.animations.speed;m.animateMarker(T,L,u.globals.easing,function(){window.setTimeout(function(){m.animationCompleted(T)},100)})}return T.attr({rel:l,j:l,index:r,"default-marker-size":A.pSize}),y.setSelectionFilter(T,r,l),v.addEvents(T),T.node.classList.add("apexcharts-marker"),T}},{key:"centerTextInBubble",value:function(e){var i=this.w;return{y:e+=parseInt(i.config.dataLabels.style.fontSize,10)/4}}}]),f}(),ds=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"dataLabelsCorrection",value:function(e,i,n,r,l,h,u){var g=this.w,m=!1,y=new Q(this.ctx).getTextRects(n,u),b=y.width,v=y.height;i<0&&(i=0),i>g.globals.gridHeight+v&&(i=g.globals.gridHeight+v/2),g.globals.dataLabelsRects[r]===void 0&&(g.globals.dataLabelsRects[r]=[]),g.globals.dataLabelsRects[r].push({x:e,y:i,width:b,height:v});var k=g.globals.dataLabelsRects[r].length-2,A=g.globals.lastDrawnDataLabelsIndexes[r]!==void 0?g.globals.lastDrawnDataLabelsIndexes[r][g.globals.lastDrawnDataLabelsIndexes[r].length-1]:0;if(g.globals.dataLabelsRects[r][k]!==void 0){var C=g.globals.dataLabelsRects[r][A];(e>C.x+C.width||i>C.y+C.height||i+v<C.y||e+b<C.x)&&(m=!0)}return(l===0||h)&&(m=!0),{x:e,y:i,textRects:y,drawnextLabel:m}}},{key:"drawDataLabel",value:function(e){var i=this,n=e.type,r=e.pos,l=e.i,h=e.j,u=e.isRangeStart,g=e.strokeWidth,m=g===void 0?2:g,y=this.w,b=new Q(this.ctx),v=y.config.dataLabels,k=0,A=0,C=h,T=null;if(y.globals.collapsedSeriesIndices.indexOf(l)!==-1||!v.enabled||!Array.isArray(r.x))return T;T=b.group({class:"apexcharts-data-labels"});for(var O=0;O<r.x.length;O++)if(k=r.x[O]+v.offsetX,A=r.y[O]+v.offsetY+m,!isNaN(k)){h===1&&O===0&&(C=0),h===1&&O===1&&(C=1);var L=y.globals.series[l][C];n==="rangeArea"&&(L=u?y.globals.seriesRangeStart[l][C]:y.globals.seriesRangeEnd[l][C]);var P="",F=function(H){return y.config.dataLabels.formatter(H,{ctx:i.ctx,seriesIndex:l,dataPointIndex:C,w:y})};y.config.chart.type==="bubble"?(P=F(L=y.globals.seriesZ[l][C]),A=r.y[O],A=new Ko(this.ctx).centerTextInBubble(A,l,C).y):L!==void 0&&(P=F(L));var N=y.config.dataLabels.textAnchor;y.globals.isSlopeChart&&(N=C===0?"end":C===y.config.series[l].data.length-1?"start":"middle"),this.plotDataLabelsText({x:k,y:A,text:P,i:l,j:C,parent:T,offsetCorrection:!0,dataLabelsConfig:y.config.dataLabels,textAnchor:N})}return T}},{key:"plotDataLabelsText",value:function(e){var i=this.w,n=new Q(this.ctx),r=e.x,l=e.y,h=e.i,u=e.j,g=e.text,m=e.textAnchor,y=e.fontSize,b=e.parent,v=e.dataLabelsConfig,k=e.color,A=e.alwaysDrawDataLabel,C=e.offsetCorrection,T=e.className,O=null;if(Array.isArray(i.config.dataLabels.enabledOnSeries)&&i.config.dataLabels.enabledOnSeries.indexOf(h)<0)return O;var L={x:r,y:l,drawnextLabel:!0,textRects:null};C&&(L=this.dataLabelsCorrection(r,l,g,h,u,A,parseInt(v.style.fontSize,10))),i.globals.zoomed||(r=L.x,l=L.y),L.textRects&&(r<-20-L.textRects.width||r>i.globals.gridWidth+L.textRects.width+30)&&(g="");var P=i.globals.dataLabels.style.colors[h];((i.config.chart.type==="bar"||i.config.chart.type==="rangeBar")&&i.config.plotOptions.bar.distributed||i.config.dataLabels.distributed)&&(P=i.globals.dataLabels.style.colors[u]),typeof P=="function"&&(P=P({series:i.globals.series,seriesIndex:h,dataPointIndex:u,w:i})),k&&(P=k);var F=v.offsetX,N=v.offsetY;if(i.config.chart.type!=="bar"&&i.config.chart.type!=="rangeBar"||(F=0,N=0),i.globals.isSlopeChart&&(u!==0&&(F=-2*v.offsetX+5),u!==0&&u!==i.config.series[h].data.length-1&&(F=0)),L.drawnextLabel){if((O=n.drawText({width:100,height:parseInt(v.style.fontSize,10),x:r+F,y:l+N,foreColor:P,textAnchor:m||v.textAnchor,text:g,fontSize:y||v.style.fontSize,fontFamily:v.style.fontFamily,fontWeight:v.style.fontWeight||"normal"})).attr({class:T||"apexcharts-datalabel",cx:r,cy:l}),v.dropShadow.enabled){var H=v.dropShadow;new tt(this.ctx).dropShadow(O,H)}b.add(O),i.globals.lastDrawnDataLabelsIndexes[h]===void 0&&(i.globals.lastDrawnDataLabelsIndexes[h]=[]),i.globals.lastDrawnDataLabelsIndexes[h].push(u)}return O}},{key:"addBackgroundToDataLabel",value:function(e,i){var n=this.w,r=n.config.dataLabels.background,l=r.padding,h=r.padding/2,u=i.width,g=i.height,m=new Q(this.ctx).drawRect(i.x-l,i.y-h/2,u+2*l,g+h,r.borderRadius,n.config.chart.background!=="transparent"&&n.config.chart.background?n.config.chart.background:"#fff",r.opacity,r.borderWidth,r.borderColor);return r.dropShadow.enabled&&new tt(this.ctx).dropShadow(m,r.dropShadow),m}},{key:"dataLabelsBackground",value:function(){var e=this.w;if(e.config.chart.type!=="bubble")for(var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<i.length;n++){var r=i[n],l=r.getBBox(),h=null;if(l.width&&l.height&&(h=this.addBackgroundToDataLabel(r,l)),h){r.parentNode.insertBefore(h.node,r);var u=r.getAttribute("fill");e.config.chart.animations.enabled&&!e.globals.resized&&!e.globals.dataChanged?h.animate().attr({fill:u}):h.attr({fill:u}),r.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),r=0;r<i.length;r++)n&&n.insertBefore(i[r],n.nextSibling)}}]),f}(),zt=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return c(f,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(X.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var i=this.getSeriesByName(e),n=parseInt(i.getAttribute("data:realIndex"),10);return{isHidden:i.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,i){var n=this.w;function r(l){for(var h=0;h<l.length;h++)l[h].index===i&&e.node.classList.add("apexcharts-series-collapsed")}r(n.globals.collapsedSeries),r(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var i=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,i.isHidden),i.isHidden}},{key:"showSeries",value:function(e){var i=this.isSeriesHidden(e);i.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,!0)}},{key:"hideSeries",value:function(e){var i=this.isSeriesHidden(e);i.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(i.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w,l=X.clone(r.globals.initialSeries);r.globals.previousPaths=[],n?(r.globals.collapsedSeries=[],r.globals.ancillaryCollapsedSeries=[],r.globals.collapsedSeriesIndices=[],r.globals.ancillaryCollapsedSeriesIndices=[]):l=this.emptyCollapsedSeries(l),r.config.series=l,e&&(i&&(r.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(l,r.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var i=this.w,n=0;n<e.length;n++)i.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"highlightSeries",value:function(e){var i=this.w,n=this.getSeriesByName(e),r=parseInt(n==null?void 0:n.getAttribute("data:realIndex"),10),l=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),h=null,u=null,g=null;if(i.globals.axisCharts||i.config.chart.type==="radialBar")if(i.globals.axisCharts){h=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),u=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"));var m=i.globals.seriesYAxisReverseMap[r];g=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(m,"']"))}else h=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']"));else h=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var y=0;y<l.length;y++)l[y].classList.add(this.legendInactiveClass);if(h)i.globals.axisCharts||h.parentNode.classList.remove(this.legendInactiveClass),h.classList.remove(this.legendInactiveClass),u!==null&&u.classList.remove(this.legendInactiveClass),g!==null&&g.classList.remove(this.legendInactiveClass);else for(var b=0;b<l.length;b++)l[b].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(e,i){var n=this.w;i||(i=e.target);var r=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(e.type==="mousemove"){var l=parseInt(i.getAttribute("rel"),10)-1;this.highlightSeries(n.globals.seriesNames[l])}else if(e.type==="mouseout")for(var h=0;h<r.length;h++)r[h].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,i){var n=this,r=this.w,l=r.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),h=function(m){for(var y=0;y<l.length;y++)l[y].classList[m](n.legendInactiveClass)};if(e.type==="mousemove"){var u=parseInt(i.getAttribute("rel"),10)-1;h("add");var g=r.config.plotOptions.heatmap.colorScale.ranges;(function(m,y){for(var b=0;b<l.length;b++){var v=Number(l[b].getAttribute("val"));v>=m.from&&(v<m.to||m.to===y&&v===y)&&l[b].classList.remove(n.legendInactiveClass)}})(g[u],g.reduce(function(m,y){return Math.max(m,y.to)},0))}else e.type==="mouseout"&&h("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=this.w,r=0;if(n.config.series.length>1){for(var l=n.config.series.map(function(u,g){return u.data&&u.data.length>0&&n.globals.collapsedSeriesIndices.indexOf(g)===-1&&(!n.globals.comboCharts||i.length===0||i.length&&i.indexOf(n.config.series[g].type)>-1)?g:-1}),h=e==="asc"?0:l.length-1;e==="asc"?h<l.length:h>=0;e==="asc"?h++:h--)if(l[h]!==-1){r=l[h];break}}return r}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(e,i){return e.type==="bar"||e.type==="column"?i:-1}).filter(function(e){return e!==-1}):this.w.config.series.map(function(e,i){return i})}},{key:"getPreviousPaths",value:function(){var e=this.w;function i(h,u,g){for(var m=h[u].childNodes,y={type:g,paths:[],realIndex:h[u].getAttribute("data:realIndex")},b=0;b<m.length;b++)if(m[b].hasAttribute("pathTo")){var v=m[b].getAttribute("pathTo");y.paths.push({d:v})}e.globals.previousPaths.push(y)}e.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(h){for(var u,g=(u=h,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(u,"-series .apexcharts-series"))),m=0;m<g.length;m++)i(g,m,h)});var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var r=function(h){for(var u=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(h,"'] rect")),g=[],m=function(b){var v=function(A){return u[b].getAttribute(A)},k={x:parseFloat(v("x")),y:parseFloat(v("y")),width:parseFloat(v("width")),height:parseFloat(v("height"))};g.push({rect:k,color:u[b].getAttribute("color")})},y=0;y<u.length;y++)m(y);e.globals.previousPaths.push(g)},l=0;l<n.length;l++)r(l);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,i=e.config.noData,n=new Q(this.ctx),r=e.globals.svgWidth/2,l=e.globals.svgHeight/2,h="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,i.align==="left"?(r=10,h="start"):i.align==="right"&&(r=e.globals.svgWidth-10,h="end"),i.verticalAlign==="top"?l=50:i.verticalAlign==="bottom"&&(l=e.globals.svgHeight-50),r+=i.offsetX,l=l+parseInt(i.style.fontSize,10)+2+i.offsetY,i.text!==void 0&&i.text!==""){var u=n.drawText({x:r,y:l,text:i.text,textAnchor:h,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,foreColor:i.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(u)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var i=this.w,n=0;n<e.length;n++)if(e[n].length===0)for(var r=0;r<e[i.globals.maxValsInArrayIndex].length;r++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,i=this.w,n=this.filteredSeriesX(),r=0;r<n.length-1;r++)if(n[r][0]!==n[r+1][0]){e=!1;break}return i.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){var e=this.w.globals.seriesX.map(function(i){return i.length>0?i:[]});return e}}]),f}(),Br=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new je(this.ctx)}return c(f,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),i=new zt(this.ctx);if(this.activeSeriesIndex=i.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].x!==void 0&&e[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),i=new zt(this.ctx);if(this.activeSeriesIndex=i.getActiveConfigSeriesIndex(),e[this.activeSeriesIndex].data!==void 0&&e[this.activeSeriesIndex].data.length>0&&e[this.activeSeriesIndex].data[0]!==void 0&&e[this.activeSeriesIndex].data[0]!==null&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,i){for(var n=this.w.config,r=this.w.globals,l=n.chart.type==="boxPlot"||n.series[i].type==="boxPlot",h=0;h<e[i].data.length;h++)if(e[i].data[h][1]!==void 0&&(Array.isArray(e[i].data[h][1])&&e[i].data[h][1].length===4&&!l?this.twoDSeries.push(X.parseNumber(e[i].data[h][1][3])):e[i].data[h].length>=5?this.twoDSeries.push(X.parseNumber(e[i].data[h][4])):this.twoDSeries.push(X.parseNumber(e[i].data[h][1])),r.dataFormatXNumeric=!0),n.xaxis.type==="datetime"){var u=new Date(e[i].data[h][0]);u=new Date(u).getTime(),this.twoDSeriesX.push(u)}else this.twoDSeriesX.push(e[i].data[h][0]);for(var g=0;g<e[i].data.length;g++)e[i].data[g][2]!==void 0&&(this.threeDSeries.push(e[i].data[g][2]),r.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,i){var n=this.w.config,r=this.w.globals,l=new it(this.ctx),h=i;r.collapsedSeriesIndices.indexOf(i)>-1&&(h=this.activeSeriesIndex);for(var u=0;u<e[i].data.length;u++)e[i].data[u].y!==void 0&&(Array.isArray(e[i].data[u].y)?this.twoDSeries.push(X.parseNumber(e[i].data[u].y[e[i].data[u].y.length-1])):this.twoDSeries.push(X.parseNumber(e[i].data[u].y))),e[i].data[u].goals!==void 0&&Array.isArray(e[i].data[u].goals)?(this.seriesGoals[i]===void 0&&(this.seriesGoals[i]=[]),this.seriesGoals[i].push(e[i].data[u].goals)):(this.seriesGoals[i]===void 0&&(this.seriesGoals[i]=[]),this.seriesGoals[i].push(null));for(var g=0;g<e[h].data.length;g++){var m=typeof e[h].data[g].x=="string",y=Array.isArray(e[h].data[g].x),b=!y&&!!l.isValidDate(e[h].data[g].x);if(m||b)if(m||n.xaxis.convertedCatToNumeric){var v=r.isBarHorizontal&&r.isRangeData;n.xaxis.type!=="datetime"||v?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[h].data[g].x),isNaN(e[h].data[g].x)||this.w.config.xaxis.type==="category"||typeof e[h].data[g].x=="string"||(r.isXNumeric=!0)):this.twoDSeriesX.push(l.parseDate(e[h].data[g].x))}else n.xaxis.type==="datetime"?this.twoDSeriesX.push(l.parseDate(e[h].data[g].x.toString())):(r.dataFormatXNumeric=!0,r.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[h].data[g].x)));else y?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[h].data[g].x)):(r.isXNumeric=!0,r.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[h].data[g].x))}if(e[i].data[0]&&e[i].data[0].z!==void 0){for(var k=0;k<e[i].data.length;k++)this.threeDSeries.push(e[i].data[k].z);r.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,i){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",e,i):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",e,i)),n.seriesRangeStart.push(r.start===void 0?[]:r.start),n.seriesRangeEnd.push(r.end===void 0?[]:r.end),n.seriesRange.push(r.rangeUniques),n.seriesRange.forEach(function(l,h){l&&l.forEach(function(u,g){u.y.forEach(function(m,y){for(var b=0;b<u.y.length;b++)if(y!==b){var v=m.y1,k=m.y2,A=u.y[b].y1;v<=u.y[b].y2&&A<=k&&(u.overlaps.indexOf(m.rangeName)<0&&u.overlaps.push(m.rangeName),u.overlaps.indexOf(u.y[b].rangeName)<0&&u.overlaps.push(u.y[b].rangeName))}})})}),r}},{key:"handleCandleStickBoxData",value:function(e,i){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleCandleStickBoxDataFormat("array",e,i):this.isFormatXY()&&(r=this.handleCandleStickBoxDataFormat("xy",e,i)),n.seriesCandleO[i]=r.o,n.seriesCandleH[i]=r.h,n.seriesCandleM[i]=r.m,n.seriesCandleL[i]=r.l,n.seriesCandleC[i]=r.c,r}},{key:"handleRangeDataFormat",value:function(e,i,n){var r=[],l=[],h=i[n].data.filter(function(y,b,v){return b===v.findIndex(function(k){return k.x===y.x})}).map(function(y,b){return{x:y.x,overlaps:[],y:[]}});if(e==="array")for(var u=0;u<i[n].data.length;u++)Array.isArray(i[n].data[u])?(r.push(i[n].data[u][1][0]),l.push(i[n].data[u][1][1])):(r.push(i[n].data[u]),l.push(i[n].data[u]));else if(e==="xy")for(var g=function(y){var b=Array.isArray(i[n].data[y].y),v=X.randomId(),k=i[n].data[y].x,A={y1:b?i[n].data[y].y[0]:i[n].data[y].y,y2:b?i[n].data[y].y[1]:i[n].data[y].y,rangeName:v};i[n].data[y].rangeName=v;var C=h.findIndex(function(T){return T.x===k});h[C].y.push(A),r.push(A.y1),l.push(A.y2)},m=0;m<i[n].data.length;m++)g(m);return{start:r,end:l,rangeUniques:h}}},{key:"handleCandleStickBoxDataFormat",value:function(e,i,n){var r=this.w,l=r.config.chart.type==="boxPlot"||r.config.series[n].type==="boxPlot",h=[],u=[],g=[],m=[],y=[];if(e==="array")if(l&&i[n].data[0].length===6||!l&&i[n].data[0].length===5)for(var b=0;b<i[n].data.length;b++)h.push(i[n].data[b][1]),u.push(i[n].data[b][2]),l?(g.push(i[n].data[b][3]),m.push(i[n].data[b][4]),y.push(i[n].data[b][5])):(m.push(i[n].data[b][3]),y.push(i[n].data[b][4]));else for(var v=0;v<i[n].data.length;v++)Array.isArray(i[n].data[v][1])&&(h.push(i[n].data[v][1][0]),u.push(i[n].data[v][1][1]),l?(g.push(i[n].data[v][1][2]),m.push(i[n].data[v][1][3]),y.push(i[n].data[v][1][4])):(m.push(i[n].data[v][1][2]),y.push(i[n].data[v][1][3])));else if(e==="xy")for(var k=0;k<i[n].data.length;k++)Array.isArray(i[n].data[k].y)&&(h.push(i[n].data[k].y[0]),u.push(i[n].data[k].y[1]),l?(g.push(i[n].data[k].y[2]),m.push(i[n].data[k].y[3]),y.push(i[n].data[k].y[4])):(m.push(i[n].data[k].y[2]),y.push(i[n].data[k].y[3])));return{o:h,h:u,m:g,l:m,c:y}}},{key:"parseDataAxisCharts",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,r=this.w.config,l=this.w.globals,h=new it(n),u=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();l.isRangeBar=r.chart.type==="rangeBar"&&l.isBarHorizontal,l.hasXaxisGroups=r.xaxis.type==="category"&&r.xaxis.group.groups.length>0,l.hasXaxisGroups&&(l.groups=r.xaxis.group.groups),e.forEach(function(k,A){k.name!==void 0?l.seriesNames.push(k.name):l.seriesNames.push("series-"+parseInt(A+1,10))}),this.coreUtils.setSeriesYAxisMappings();var g=[],m=Y(new Set(r.series.map(function(k){return k.group})));r.series.forEach(function(k,A){var C=m.indexOf(k.group);g[C]||(g[C]=[]),g[C].push(l.seriesNames[A])}),l.seriesGroups=g;for(var y=function(){for(var k=0;k<u.length;k++)if(typeof u[k]=="string"){if(!h.isValidDate(u[k]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");i.twoDSeriesX.push(h.parseDate(u[k]))}else i.twoDSeriesX.push(u[k])},b=0;b<e.length;b++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],e[b].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(r.chart.type!=="rangeBar"&&r.chart.type!=="rangeArea"&&e[b].type!=="rangeBar"&&e[b].type!=="rangeArea"||(l.isRangeData=!0,r.chart.type!=="rangeBar"&&r.chart.type!=="rangeArea"||this.handleRangeData(e,b)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,b):this.isFormatXY()&&this.handleFormatXY(e,b),r.chart.type!=="candlestick"&&e[b].type!=="candlestick"&&r.chart.type!=="boxPlot"&&e[b].type!=="boxPlot"||this.handleCandleStickBoxData(e,b),l.series.push(this.twoDSeries),l.labels.push(this.twoDSeriesX),l.seriesX.push(this.twoDSeriesX),l.seriesGoals=this.seriesGoals,b!==this.activeSeriesIndex||this.fallbackToCategory||(l.isXNumeric=!0);else{r.xaxis.type==="datetime"?(l.isXNumeric=!0,y(),l.seriesX.push(this.twoDSeriesX)):r.xaxis.type==="numeric"&&(l.isXNumeric=!0,u.length>0&&(this.twoDSeriesX=u,l.seriesX.push(this.twoDSeriesX))),l.labels.push(this.twoDSeriesX);var v=e[b].data.map(function(k){return X.parseNumber(k)});l.series.push(v)}l.seriesZ.push(this.threeDSeries),e[b].color!==void 0?l.seriesColors.push(e[b].color):l.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var i=this.w.globals,n=this.w.config;i.series=e.slice(),i.seriesNames=n.labels.slice();for(var r=0;r<i.series.length;r++)i.seriesNames[r]===void 0&&i.seriesNames.push("series-"+(r+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var i=this.w.config,n=this.w.globals;i.xaxis.categories.length>0?n.labels=i.xaxis.categories:i.labels.length>0?n.labels=i.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRange.length&&(n.seriesRange.map(function(r){r.forEach(function(l){n.labels.indexOf(l.x)<0&&l.x&&n.labels.push(l.x)})}),n.labels=Array.from(new Set(n.labels.map(JSON.stringify)),JSON.parse)),i.xaxis.convertedCatToNumeric&&(new Bs(i).convertCatToNumericXaxis(i,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var i=this.w.globals,n=this.w.config,r=[];if(i.axisCharts){if(i.series.length>0)if(this.isFormatXY())for(var l=n.series.map(function(b,v){return b.data.filter(function(k,A,C){return C.findIndex(function(T){return T.x===k.x})===A})}),h=l.reduce(function(b,v,k,A){return A[b].length>v.length?b:k},0),u=0;u<l[h].length;u++)r.push(u+1);else for(var g=0;g<i.series[i.maxValsInArrayIndex].length;g++)r.push(g+1);i.seriesX=[];for(var m=0;m<e.length;m++)i.seriesX.push(r);this.w.globals.isBarHorizontal||(i.isXNumeric=!0)}if(r.length===0){r=i.axisCharts?[]:i.series.map(function(b,v){return v+1});for(var y=0;y<e.length;y++)i.seriesX.push(r)}i.labels=r,n.xaxis.convertedCatToNumeric&&(i.categoryLabels=r.map(function(b){return n.xaxis.labels.formatter(b)})),i.noLabelsProvided=!0}},{key:"parseData",value:function(e){var i=this.w,n=i.config,r=i.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),r.axisCharts?(this.parseDataAxisCharts(e),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(e),n.chart.stacked){var l=new zt(this.ctx);r.series=l.setNullSeriesToZeroValues(r.series)}this.coreUtils.getSeriesTotals(),r.axisCharts&&(r.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),r.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),r.dataFormatXNumeric||r.isXNumeric&&(n.xaxis.type!=="numeric"||n.labels.length!==0||n.xaxis.categories.length!==0)||this.handleExternalLabelsData(e);for(var h=this.coreUtils.getCategoryLabels(r.labels),u=0;u<h.length;u++)if(Array.isArray(h[u])){r.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this.w,i=[];e.globals.seriesYAxisMap.forEach(function(n,r){var l=0;n.forEach(function(h){e.globals.collapsedSeriesIndices.indexOf(h)!==-1&&l++}),l>0&&l==n.length&&i.push(r)}),e.globals.ignoreYAxisIndexes=i.map(function(n){return n})}}]),f}(),vn=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"scaleSvgNode",value:function(e,i){var n=parseFloat(e.getAttributeNS(null,"width")),r=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*i),e.setAttributeNS(null,"height",r*i),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+r)}},{key:"getSvgString",value:function(){var e=this;return new Promise(function(i){var n=e.w,r=n.config.chart.toolbar.export.width,l=n.config.chart.toolbar.export.scale||r/n.globals.svgWidth;l||(l=1);var h=e.w.globals.dom.Paper.svg(),u=e.w.globals.dom.Paper.node.cloneNode(!0);l!==1&&e.scaleSvgNode(u,l),e.convertImagesToBase64(u).then(function(){h=new XMLSerializer().serializeToString(u),i(h.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(e){var i=this,n=e.getElementsByTagName("image"),r=Array.from(n).map(function(l){var h=l.getAttributeNS("http://www.w3.org/1999/xlink","href");return h&&!h.startsWith("data:")?i.getBase64FromUrl(h).then(function(u){l.setAttributeNS("http://www.w3.org/1999/xlink","href",u)}).catch(function(u){console.error("Error converting image to base64:",u)}):Promise.resolve()});return Promise.all(r)}},{key:"getBase64FromUrl",value:function(e){return new Promise(function(i,n){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var l=document.createElement("canvas");l.width=r.width,l.height=r.height,l.getContext("2d").drawImage(r,0,0),i(l.toDataURL())},r.onerror=n,r.src=e})}},{key:"cleanup",value:function(){var e=this.w,i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(r,function(l){l.setAttribute("width",0)}),i&&i[0]&&(i[0].setAttribute("x",-500),i[0].setAttribute("x1",-500),i[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){var e=this;return new Promise(function(i){e.cleanup(),e.getSvgString().then(function(n){var r=new Blob([n],{type:"image/svg+xml;charset=utf-8"});i(URL.createObjectURL(r))})})}},{key:"dataURI",value:function(e){var i=this;return new Promise(function(n){var r=i.w,l=e?e.scale||e.width/r.globals.svgWidth:1;i.cleanup();var h=document.createElement("canvas");h.width=r.globals.svgWidth*l,h.height=parseInt(r.globals.dom.elWrap.style.height,10)*l;var u=r.config.chart.background!=="transparent"&&r.config.chart.background?r.config.chart.background:"#fff",g=h.getContext("2d");g.fillStyle=u,g.fillRect(0,0,h.width*l,h.height*l),i.getSvgString().then(function(m){var y="data:image/svg+xml,"+encodeURIComponent(m),b=new Image;b.crossOrigin="anonymous",b.onload=function(){if(g.drawImage(b,0,0),h.msToBlob){var v=h.msToBlob();n({blob:v})}else{var k=h.toDataURL("image/png");n({imgURI:k})}},b.src=y})})}},{key:"exportToSVG",value:function(){var e=this;this.svgUrl().then(function(i){e.triggerDownload(i,e.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var e=this,i=this.w.config.chart.toolbar.export.scale,n=this.w.config.chart.toolbar.export.width,r=i?{scale:i}:n?{width:n}:void 0;this.dataURI(r).then(function(l){var h=l.imgURI,u=l.blob;u?navigator.msSaveOrOpenBlob(u,e.w.globals.chartID+".png"):e.triggerDownload(h,e.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(e){var i=this,n=e.series,r=e.fileName,l=e.columnDelimiter,h=l===void 0?",":l,u=e.lineDelimiter,g=u===void 0?`
`:u,m=this.w;n||(n=m.config.series);var y=[],b=[],v="",k=m.globals.series.map(function(N,H){return m.globals.collapsedSeriesIndices.indexOf(H)===-1?N:[]}),A=function(N){return typeof m.config.chart.toolbar.export.csv.categoryFormatter=="function"?m.config.chart.toolbar.export.csv.categoryFormatter(N):m.config.xaxis.type==="datetime"&&String(N).length>=10?new Date(N).toDateString():X.isNumber(N)?N:N.split(h).join("")},C=function(N){return typeof m.config.chart.toolbar.export.csv.valueFormatter=="function"?m.config.chart.toolbar.export.csv.valueFormatter(N):N},T=Math.max.apply(Math,Y(n.map(function(N){return N.data?N.data.length:0}))),O=new Br(this.ctx),L=new fi(this.ctx),P=function(N){var H="";if(m.globals.axisCharts){if(m.config.xaxis.type==="category"||m.config.xaxis.convertedCatToNumeric)if(m.globals.isBarHorizontal){var z=m.globals.yLabelFormatters[0],B=new zt(i.ctx).getActiveConfigSeriesIndex();H=z(m.globals.labels[N],{seriesIndex:B,dataPointIndex:N,w:m})}else H=L.getLabel(m.globals.labels,m.globals.timescaleLabels,0,N).text;m.config.xaxis.type==="datetime"&&(m.config.xaxis.categories.length?H=m.config.xaxis.categories[N]:m.config.labels.length&&(H=m.config.labels[N]))}else H=m.config.labels[N];return H===null?"nullvalue":(Array.isArray(H)&&(H=H.join(" ")),X.isNumber(H)?H:H.split(h).join(""))},F=function(N,H){if(y.length&&H===0&&b.push(y.join(h)),N.data){N.data=N.data.length&&N.data||Y(Array(T)).map(function(){return""});for(var z=0;z<N.data.length;z++){y=[];var B=P(z);if(B!=="nullvalue"){if(B||(O.isFormatXY()?B=n[H].data[z].x:O.isFormat2DArray()&&(B=n[H].data[z]?n[H].data[z][0]:"")),H===0){y.push(A(B));for(var W=0;W<m.globals.series.length;W++){var V,G=O.isFormatXY()?(V=n[W].data[z])===null||V===void 0?void 0:V.y:k[W][z];y.push(C(G))}}(m.config.chart.type==="candlestick"||N.type&&N.type==="candlestick")&&(y.pop(),y.push(m.globals.seriesCandleO[H][z]),y.push(m.globals.seriesCandleH[H][z]),y.push(m.globals.seriesCandleL[H][z]),y.push(m.globals.seriesCandleC[H][z])),(m.config.chart.type==="boxPlot"||N.type&&N.type==="boxPlot")&&(y.pop(),y.push(m.globals.seriesCandleO[H][z]),y.push(m.globals.seriesCandleH[H][z]),y.push(m.globals.seriesCandleM[H][z]),y.push(m.globals.seriesCandleL[H][z]),y.push(m.globals.seriesCandleC[H][z])),m.config.chart.type==="rangeBar"&&(y.pop(),y.push(m.globals.seriesRangeStart[H][z]),y.push(m.globals.seriesRangeEnd[H][z])),y.length&&b.push(y.join(h))}}}};y.push(m.config.chart.toolbar.export.csv.headerCategory),m.config.chart.type==="boxPlot"?(y.push("minimum"),y.push("q1"),y.push("median"),y.push("q3"),y.push("maximum")):m.config.chart.type==="candlestick"?(y.push("open"),y.push("high"),y.push("low"),y.push("close")):m.config.chart.type==="rangeBar"?(y.push("minimum"),y.push("maximum")):n.map(function(N,H){var z=(N.name?N.name:"series-".concat(H))+"";m.globals.axisCharts&&y.push(z.split(h).join("")?z.split(h).join(""):"series-".concat(H))}),m.globals.axisCharts||(y.push(m.config.chart.toolbar.export.csv.headerValue),b.push(y.join(h))),m.globals.allSeriesHasEqualX||!m.globals.axisCharts||m.config.xaxis.categories.length||m.config.labels.length?n.map(function(N,H){m.globals.axisCharts?F(N,H):((y=[]).push(A(m.globals.labels[H])),y.push(C(k[H])),b.push(y.join(h)))}):function(){var N=new Set,H={};n.forEach(function(z,B){z==null||z.data.forEach(function(W){var V,G;if(O.isFormatXY())V=W.x,G=W.y;else{if(!O.isFormat2DArray())return;V=W[0],G=W[1]}H[V]||(H[V]=Array(n.length).fill("")),H[V][B]=C(G),N.add(V)})}),y.length&&b.push(y.join(h)),Array.from(N).sort().forEach(function(z){b.push([A(z),H[z].join(h)])})}(),v+=b.join(g),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+v),r||m.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,i,n){var r=document.createElement("a");r.href=e,r.download=(i||this.w.globals.chartID)+n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),f}(),Xs=function(){function f(e,i){s(this,f),this.ctx=e,this.elgrid=i,this.w=e.w;var n=this.w;this.axesUtils=new fi(e),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],n.config.xaxis.position==="top"?this.offY=0:this.offY=n.globals.gridHeight,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return c(f,[{key:"drawXaxis",value:function(){var e=this.w,i=new Q(this.ctx),n=i.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),r=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);for(var l=[],h=0;h<this.xaxisLabels.length;h++)l.push(this.xaxisLabels[h]);if(this.drawXAxisLabelAndGroup(!0,i,r,l,e.globals.isXNumeric,function(A,C){return C}),e.globals.hasXaxisGroups){var u=e.globals.groups;l=[];for(var g=0;g<u.length;g++)l.push(u[g].title);var m={};e.config.xaxis.group.style&&(m.xaxisFontSize=e.config.xaxis.group.style.fontSize,m.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,m.xaxisForeColors=e.config.xaxis.group.style.colors,m.fontWeight=e.config.xaxis.group.style.fontWeight,m.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,i,r,l,!1,function(A,C){return u[A].cols*C},m)}if(e.config.xaxis.title.text!==void 0){var y=i.group({class:"apexcharts-xaxis-title"}),b=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(e.config.xaxis.position==="bottom"?e.globals.xAxisLabelsHeight:-e.globals.xAxisLabelsHeight-10)+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});y.add(b),n.add(y)}if(e.config.xaxis.axisBorder.show){var v=e.globals.barPadForNumericAxis,k=i.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-v,this.offY,this.xaxisBorderWidth+v,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(k):n.add(k)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,i,n,r,l,h){var u,g=this,m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},y=[],b=[],v=this.w,k=m.xaxisFontSize||this.xaxisFontSize,A=m.xaxisFontFamily||this.xaxisFontFamily,C=m.xaxisForeColors||this.xaxisForeColors,T=m.fontWeight||v.config.xaxis.labels.style.fontWeight,O=m.cssClass||v.config.xaxis.labels.style.cssClass,L=v.globals.padHorizontal,P=r.length,F=v.config.xaxis.type==="category"?v.globals.dataPoints:P;if(F===0&&P>F&&(F=P),l){var N=F>1?F-1:F;u=v.globals.gridWidth/Math.min(N,P-1),L=L+h(0,u)/2+v.config.xaxis.labels.offsetX}else u=v.globals.gridWidth/F,L=L+h(0,u)+v.config.xaxis.labels.offsetX;for(var H=function(B){var W=L-h(B,u)/2+v.config.xaxis.labels.offsetX;B===0&&P===1&&u/2===L&&F===1&&(W=v.globals.gridWidth/2);var V=g.axesUtils.getLabel(r,v.globals.timescaleLabels,W,B,y,k,e),G=28;if(v.globals.rotateXLabels&&e&&(G=22),v.config.xaxis.title.text&&v.config.xaxis.position==="top"&&(G+=parseFloat(v.config.xaxis.title.style.fontSize)+2),e||(G=G+parseFloat(k)+(v.globals.xAxisLabelsHeight-v.globals.xAxisGroupLabelsHeight)+(v.globals.rotateXLabels?10:0)),V=v.config.xaxis.tickAmount!==void 0&&v.config.xaxis.tickAmount!=="dataPoints"&&v.config.xaxis.type!=="datetime"?g.axesUtils.checkLabelBasedOnTickamount(B,V,P):g.axesUtils.checkForOverflowingLabels(B,V,P,y,b),v.config.xaxis.labels.show){var q=i.drawText({x:V.x,y:g.offY+v.config.xaxis.labels.offsetY+G-(v.config.xaxis.position==="top"?v.globals.xAxisHeight+v.config.xaxis.axisTicks.height-2:0),text:V.text,textAnchor:"middle",fontWeight:V.isBold?600:T,fontSize:k,fontFamily:A,foreColor:Array.isArray(C)?e&&v.config.xaxis.convertedCatToNumeric?C[v.globals.minX+B-1]:C[B]:C,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+O});if(n.add(q),q.on("click",function(K){if(typeof v.config.chart.events.xAxisLabelClick=="function"){var re=Object.assign({},v,{labelIndex:B});v.config.chart.events.xAxisLabelClick(K,g.ctx,re)}}),e){var U=document.createElementNS(v.globals.SVGNS,"title");U.textContent=Array.isArray(V.text)?V.text.join(" "):V.text,q.node.appendChild(U),V.text!==""&&(y.push(V.text),b.push(V))}}B<P-1&&(L+=h(B+1,u))},z=0;z<=P-1;z++)H(z)}},{key:"drawXaxisInversed",value:function(e){var i,n,r=this,l=this.w,h=new Q(this.ctx),u=l.config.yaxis[0].opposite?l.globals.translateYAxisX[e]:0,g=h.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),m=h.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+u+", 0)"});g.add(m);var y=[];if(l.config.yaxis[e].show)for(var b=0;b<this.xaxisLabels.length;b++)y.push(this.xaxisLabels[b]);i=l.globals.gridHeight/y.length,n=-i/2.2;var v=l.globals.yLabelFormatters[0],k=l.config.yaxis[0].labels;if(k.show)for(var A=function(N){var H=y[N]===void 0?"":y[N];H=v(H,{seriesIndex:e,dataPointIndex:N,w:l});var z=r.axesUtils.getYAxisForeColor(k.style.colors,e),B=0;Array.isArray(H)&&(B=H.length/2*parseInt(k.style.fontSize,10));var W=k.offsetX-15,V="end";r.yaxis.opposite&&(V="start"),l.config.yaxis[0].labels.align==="left"?(W=k.offsetX,V="start"):l.config.yaxis[0].labels.align==="center"?(W=k.offsetX,V="middle"):l.config.yaxis[0].labels.align==="right"&&(V="end");var G=h.drawText({x:W,y:n+i+k.offsetY-B,text:H,textAnchor:V,foreColor:Array.isArray(z)?z[N]:z,fontSize:k.style.fontSize,fontFamily:k.style.fontFamily,fontWeight:k.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+k.style.cssClass,maxWidth:k.maxWidth});m.add(G),G.on("click",function(K){if(typeof l.config.chart.events.xAxisLabelClick=="function"){var re=Object.assign({},l,{labelIndex:N});l.config.chart.events.xAxisLabelClick(K,r.ctx,re)}});var q=document.createElementNS(l.globals.SVGNS,"title");if(q.textContent=Array.isArray(H)?H.join(" "):H,G.node.appendChild(q),l.config.yaxis[e].labels.rotate!==0){var U=h.rotateAroundCenter(G.node);G.node.setAttribute("transform","rotate(".concat(l.config.yaxis[e].labels.rotate," 0 ").concat(U.y,")"))}n+=i},C=0;C<=y.length-1;C++)A(C);if(l.config.yaxis[0].title.text!==void 0){var T=h.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+u+", 0)"}),O=h.drawText({x:l.config.yaxis[0].title.offsetX,y:l.globals.gridHeight/2+l.config.yaxis[0].title.offsetY,text:l.config.yaxis[0].title.text,textAnchor:"middle",foreColor:l.config.yaxis[0].title.style.color,fontSize:l.config.yaxis[0].title.style.fontSize,fontWeight:l.config.yaxis[0].title.style.fontWeight,fontFamily:l.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+l.config.yaxis[0].title.style.cssClass});T.add(O),g.add(T)}var L=0;this.isCategoryBarHorizontal&&l.config.yaxis[0].opposite&&(L=l.globals.gridWidth);var P=l.config.xaxis.axisBorder;if(P.show){var F=h.drawLine(l.globals.padHorizontal+P.offsetX+L,1+P.offsetY,l.globals.padHorizontal+P.offsetX+L,l.globals.gridHeight+P.offsetY,P.color,0);this.elgrid&&this.elgrid.elGridBorders&&l.config.grid.show?this.elgrid.elGridBorders.add(F):g.add(F)}return l.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(L,y.length,l.config.yaxis[0].axisBorder,l.config.yaxis[0].axisTicks,0,i,g),g}},{key:"drawXaxisTicks",value:function(e,i,n){var r=this.w,l=e;if(!(e<0||e-2>r.globals.gridWidth)){var h=this.offY+r.config.xaxis.axisTicks.offsetY;if(i=i+h+r.config.xaxis.axisTicks.height,r.config.xaxis.position==="top"&&(i=h-r.config.xaxis.axisTicks.height),r.config.xaxis.axisTicks.show){var u=new Q(this.ctx).drawLine(e+r.config.xaxis.axisTicks.offsetX,h+r.config.xaxis.offsetY,l+r.config.xaxis.axisTicks.offsetX,i+r.config.xaxis.offsetY,r.config.xaxis.axisTicks.color);n.add(u),u.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,i=[],n=this.xaxisLabels.length,r=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var l=0;l<n;l++)r=this.xaxisLabels[l].position,i.push(r);else for(var h=n,u=0;u<h;u++){var g=h;e.globals.isXNumeric&&e.config.chart.type!=="bar"&&(g-=1),r+=e.globals.gridWidth/g,i.push(r)}return i}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,i=new Q(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),l=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var u=0;u<r.length;u++){var g=i.rotateAroundCenter(r[u]);g.y=g.y-1,g.x=g.x+1,r[u].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(g.x," ").concat(g.y,")")),r[u].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var m=r[u].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(m,function(k){i.placeTextWithEllipsis(k,k.textContent,e.globals.xAxisLabelsHeight-(e.config.legend.position==="bottom"?20:10))})}else(function(){for(var k=e.globals.gridWidth/(e.globals.labels.length+1),A=0;A<r.length;A++){var C=r[A].childNodes;e.config.xaxis.labels.trim&&e.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(C,function(T){i.placeTextWithEllipsis(T,T.textContent,k)})}})();if(l.length>0){var y=l[l.length-1].getBBox(),b=l[0].getBBox();y.x<-20&&l[l.length-1].parentNode.removeChild(l[l.length-1]),b.x+b.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&l[0].parentNode.removeChild(l[0]);for(var v=0;v<h.length;v++)i.placeTextWithEllipsis(h[v],h[v].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),f}(),Qo=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new fi(e),this.isRangeBar=i.globals.seriesRange.length&&i.globals.isBarHorizontal,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return c(f,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.w,n=new Q(this.ctx);e||(e=n.group({class:"apexcharts-grid"}));var r=n.drawLine(i.globals.padHorizontal,1,i.globals.padHorizontal,i.globals.gridHeight,"transparent"),l=n.drawLine(i.globals.padHorizontal,i.globals.gridHeight,i.globals.gridWidth,i.globals.gridHeight,"transparent");return e.add(l),e.add(r),e}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var e=this.renderGrid();return this.drawGridArea(e.el),e}return null}},{key:"createGridMask",value:function(){var e=this.w,i=e.globals,n=new Q(this.ctx),r=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,Y(e.config.stroke.width)):e.config.stroke.width,l=function(y){var b=document.createElementNS(i.SVGNS,"clipPath");return b.setAttribute("id",y),b};i.dom.elGridRectMask=l("gridRectMask".concat(i.cuid)),i.dom.elGridRectBarMask=l("gridRectBarMask".concat(i.cuid)),i.dom.elGridRectMarkerMask=l("gridRectMarkerMask".concat(i.cuid)),i.dom.elForecastMask=l("forecastMask".concat(i.cuid)),i.dom.elNonForecastMask=l("nonForecastMask".concat(i.cuid));var h=0,u=0;(["bar","rangeBar","candlestick","boxPlot"].includes(e.config.chart.type)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(h=Math.max(e.config.grid.padding.left,i.barPadForNumericAxis),u=Math.max(e.config.grid.padding.right,i.barPadForNumericAxis)),i.dom.elGridRect=n.drawRect(0,0,i.gridWidth,i.gridHeight,0,"#fff"),i.dom.elGridRectBar=n.drawRect(-r/2-h-2,-r/2-2,i.gridWidth+r+u+h+4,i.gridHeight+r+4,0,"#fff");var g=e.globals.markers.largestSize;i.dom.elGridRectMarker=n.drawRect(-g,-g,i.gridWidth+2*g,i.gridHeight+2*g,0,"#fff"),i.dom.elGridRectMask.appendChild(i.dom.elGridRect.node),i.dom.elGridRectBarMask.appendChild(i.dom.elGridRectBar.node),i.dom.elGridRectMarkerMask.appendChild(i.dom.elGridRectMarker.node);var m=i.dom.baseEl.querySelector("defs");m.appendChild(i.dom.elGridRectMask),m.appendChild(i.dom.elGridRectBarMask),m.appendChild(i.dom.elGridRectMarkerMask),m.appendChild(i.dom.elForecastMask),m.appendChild(i.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(e){var i=e.i,n=e.x1,r=e.y1,l=e.x2,h=e.y2,u=e.xCount,g=e.parent,m=this.w;if(!(i===0&&m.globals.skipFirstTimelinelabel||i===u-1&&m.globals.skipLastTimelinelabel&&!m.config.xaxis.labels.formatter||m.config.chart.type==="radar")){m.config.grid.xaxis.lines.show&&this._drawGridLine({i,x1:n,y1:r,x2:l,y2:h,xCount:u,parent:g});var y=0;if(m.globals.hasXaxisGroups&&m.config.xaxis.tickPlacement==="between"){var b=m.globals.groups;if(b){for(var v=0,k=0;v<i&&k<b.length;k++)v+=b[k].cols;v===i&&(y=.6*m.globals.xAxisLabelsHeight)}}new Xs(this.ctx).drawXaxisTicks(n,y,m.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(e){var i=e.i,n=e.x1,r=e.y1,l=e.x2,h=e.y2,u=e.xCount,g=e.parent,m=this.w,y=g.node.classList.contains("apexcharts-gridlines-horizontal"),b=m.globals.barPadForNumericAxis,v=r===0&&h===0||n===0&&l===0||r===m.globals.gridHeight&&h===m.globals.gridHeight||m.globals.isBarHorizontal&&(i===0||i===u-1),k=new Q(this).drawLine(n-(y?b:0),r,l+(y?b:0),h,m.config.grid.borderColor,m.config.grid.strokeDashArray);k.node.classList.add("apexcharts-gridline"),v&&m.config.grid.show?this.elGridBorders.add(k):g.add(k)}},{key:"_drawGridBandRect",value:function(e){var i=e.c,n=e.x1,r=e.y1,l=e.x2,h=e.y2,u=e.type,g=this.w,m=new Q(this.ctx),y=g.globals.barPadForNumericAxis,b=g.config.grid[u].colors[i],v=m.drawRect(n-(u==="row"?y:0),r,l+(u==="row"?2*y:0),h,0,b,g.config.grid[u].opacity);this.elg.add(v),v.attr("clip-path","url(#gridRectMask".concat(g.globals.cuid,")")),v.node.classList.add("apexcharts-grid-".concat(u))}},{key:"_drawXYLines",value:function(e){var i=this,n=e.xCount,r=e.tickAmount,l=this.w;if(l.config.grid.xaxis.lines.show||l.config.xaxis.axisTicks.show){var h,u=l.globals.padHorizontal,g=l.globals.gridHeight;l.globals.timescaleLabels.length?function(A){for(var C=A.xC,T=A.x1,O=A.y1,L=A.x2,P=A.y2,F=0;F<C;F++)T=i.xaxisLabels[F].position,L=i.xaxisLabels[F].position,i._drawGridLines({i:F,x1:T,y1:O,x2:L,y2:P,xCount:n,parent:i.elgridLinesV})}({xC:n,x1:u,y1:0,x2:h,y2:g}):(l.globals.isXNumeric&&(n=l.globals.xAxisScale.result.length),function(A){for(var C=A.xC,T=A.x1,O=A.y1,L=A.x2,P=A.y2,F=0;F<C+(l.globals.isXNumeric?0:1);F++)F===0&&C===1&&l.globals.dataPoints===1&&(L=T=l.globals.gridWidth/2),i._drawGridLines({i:F,x1:T,y1:O,x2:L,y2:P,xCount:n,parent:i.elgridLinesV}),L=T+=l.globals.gridWidth/(l.globals.isXNumeric?C-1:C)}({xC:n,x1:u,y1:0,x2:h,y2:g}))}if(l.config.grid.yaxis.lines.show){var m=0,y=0,b=l.globals.gridWidth,v=r+1;this.isRangeBar&&(v=l.globals.labels.length);for(var k=0;k<v+(this.isRangeBar?1:0);k++)this._drawGridLine({i:k,xCount:v+(this.isRangeBar?1:0),x1:0,y1:m,x2:b,y2:y,parent:this.elgridLinesH}),y=m+=l.globals.gridHeight/(this.isRangeBar?v:r)}}},{key:"_drawInvertedXYLines",value:function(e){var i=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var r,l=n.globals.padHorizontal,h=n.globals.gridHeight,u=0;u<i+1;u++)n.config.grid.xaxis.lines.show&&this._drawGridLine({i:u,xCount:i+1,x1:l,y1:0,x2:r,y2:h,parent:this.elgridLinesV}),new Xs(this.ctx).drawXaxisTicks(l,0,n.globals.dom.elGraphical),r=l+=n.globals.gridWidth/i;if(n.config.grid.yaxis.lines.show)for(var g=0,m=0,y=n.globals.gridWidth,b=0;b<n.globals.dataPoints+1;b++)this._drawGridLine({i:b,xCount:n.globals.dataPoints+1,x1:0,y1:g,x2:y,y2:m,parent:this.elgridLinesH}),m=g+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,i=e.globals,n=new Q(this.ctx);this.elg=n.group({class:"apexcharts-grid"}),this.elgridLinesH=n.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=n.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=n.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var r=0;r<i.seriesYAxisMap.length&&i.ignoreYAxisIndexes.includes(r);)r++;r===i.seriesYAxisMap.length&&(r=0);var l,h=i.yAxisScale[r].result.length-1;if(!i.isBarHorizontal||this.isRangeBar){var u,g,m;l=this.xaxisLabels.length,this.isRangeBar&&(h=i.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(l=e.config.xaxis.tickAmount),((u=i.yAxisScale)===null||u===void 0||(g=u[r])===null||g===void 0||(m=g.result)===null||m===void 0?void 0:m.length)>0&&e.config.xaxis.type!=="datetime"&&(l=i.yAxisScale[r].result.length-1)),this._drawXYLines({xCount:l,tickAmount:h})}else l=h,h=i.xTickAmount,this._drawInvertedXYLines({xCount:l,tickAmount:h});return this.drawGridBands(l,h),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:i.gridWidth/l}}},{key:"drawGridBands",value:function(e,i){var n,r,l=this,h=this.w;if(((n=h.config.grid.row.colors)===null||n===void 0?void 0:n.length)>0&&function(A,C,T,O,L,P){for(var F=0,N=0;F<C;F++,N++)N>=h.config.grid[A].colors.length&&(N=0),l._drawGridBandRect({c:N,x1:T,y1:O,x2:L,y2:P,type:A}),O+=h.globals.gridHeight/i}("row",i,0,0,h.globals.gridWidth,h.globals.gridHeight/i),((r=h.config.grid.column.colors)===null||r===void 0?void 0:r.length)>0){var u=h.globals.isBarHorizontal||h.config.xaxis.tickPlacement!=="on"||h.config.xaxis.type!=="category"&&!h.config.xaxis.convertedCatToNumeric?e:e-1;h.globals.isXNumeric&&(u=h.globals.xAxisScale.result.length-1);for(var g=h.globals.padHorizontal,m=h.globals.padHorizontal+h.globals.gridWidth/u,y=h.globals.gridHeight,b=0,v=0;b<e;b++,v++){var k;v>=h.config.grid.column.colors.length&&(v=0),h.config.xaxis.type==="datetime"&&(g=this.xaxisLabels[b].position,m=(((k=this.xaxisLabels[b+1])===null||k===void 0?void 0:k.position)||h.globals.gridWidth)-this.xaxisLabels[b].position),this._drawGridBandRect({c:v,x1:g,y1:0,x2:m,y2:y,type:"column"}),g+=h.globals.gridWidth/u}}}}]),f}(),el=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.coreUtils=new je(this.ctx)}return c(f,[{key:"niceScale",value:function(e,i){var n,r,l,h,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,g=1e-11,m=this.w,y=m.globals;y.isBarHorizontal?(n=m.config.xaxis,r=Math.max((y.svgWidth-100)/25,2)):(n=m.config.yaxis[u],r=Math.max((y.svgHeight-100)/15,2)),X.isNumber(r)||(r=10),l=n.min!==void 0&&n.min!==null,h=n.max!==void 0&&n.min!==null;var b=n.stepSize!==void 0&&n.stepSize!==null,v=n.tickAmount!==void 0&&n.tickAmount!==null,k=v?n.tickAmount:y.niceScaleDefaultTicks[Math.min(Math.round(r/2),y.niceScaleDefaultTicks.length-1)];if(y.isMultipleYAxis&&!v&&y.multiAxisTickAmount>0&&(k=y.multiAxisTickAmount,v=!0),k=k==="dataPoints"?y.dataPoints-1:Math.abs(Math.round(k)),(e===Number.MIN_VALUE&&i===0||!X.isNumber(e)&&!X.isNumber(i)||e===Number.MIN_VALUE&&i===-Number.MAX_VALUE)&&(e=X.isNumber(n.min)?n.min:0,i=X.isNumber(n.max)?n.max:e+k,y.allSeriesCollapsed=!1),e>i){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var A=i;i=e,e=A}else e===i&&(e=e===0?0:e-1,i=i===0?2:i+1);var C=[];k<1&&(k=1);var T=k,O=Math.abs(i-e);!l&&e>0&&e/O<.15&&(e=0,l=!0),!h&&i<0&&-i/O<.15&&(i=0,h=!0);var L=(O=Math.abs(i-e))/T,P=L,F=Math.floor(Math.log10(P)),N=Math.pow(10,F),H=Math.ceil(P/N);if(L=P=(H=y.niceScaleAllowedMagMsd[y.yValueDecimal===0?0:1][H])*N,y.isBarHorizontal&&n.stepSize&&n.type!=="datetime"?(L=n.stepSize,b=!0):b&&(L=n.stepSize),b&&n.forceNiceScale){var z=Math.floor(Math.log10(L));L*=Math.pow(10,F-z)}if(l&&h){var B=O/T;if(v)if(b)if(X.mod(O,L)!=0){var W=X.getGCD(L,B);L=B/W<10?W:B}else X.mod(L,B)==0?L=B:(B=L,v=!1);else L=B;else if(b)X.mod(O,L)==0?B=L:L=B;else if(X.mod(O,L)==0)B=L;else{B=O/(T=Math.ceil(O/L));var V=X.getGCD(O,L);O/V<r&&(B=V),L=B}T=Math.round(O/L)}else{if(l||h){if(h)if(v)e=i-L*T;else{var G=e;e=L*Math.floor(e/L),Math.abs(i-e)/X.getGCD(O,L)>r&&(e=i-L*k,e+=L*Math.floor((G-e)/L))}else if(l)if(v)i=e+L*T;else{var q=i;i=L*Math.ceil(i/L),Math.abs(i-e)/X.getGCD(O,L)>r&&(i=e+L*k,i+=L*Math.ceil((q-i)/L))}}else if(y.isMultipleYAxis&&v){var U=L*Math.floor(e/L),K=U+L*T;K<i&&(L*=2),K=i,i=(e=U)+L*T,O=Math.abs(i-e),e>0&&e<Math.abs(K-i)&&(e=0,i=L*T),i<0&&-i<Math.abs(U-e)&&(i=0,e=-L*T)}else e=L*Math.floor(e/L),i=L*Math.ceil(i/L);O=Math.abs(i-e),L=X.getGCD(O,L),T=Math.round(O/L)}if(v||l||h||(T=Math.ceil((O-g)/(L+g)))>16&&X.getPrimeFactors(T).length<2&&T++,!v&&n.forceNiceScale&&y.yValueDecimal===0&&T>O&&(T=O,L=Math.round(O/T)),T>r&&(!v&&!b||n.forceNiceScale)){var re=X.getPrimeFactors(T),ae=re.length-1,ce=T;e:for(var xe=0;xe<ae;xe++)for(var me=0;me<=ae-xe;me++){for(var ye=Math.min(me+xe,ae),be=ce,Xe=1,We=me;We<=ye;We++)Xe*=re[We];if((be/=Xe)<r){ce=be;break e}}L=ce===T?O:O/ce,T=Math.round(O/L)}y.isMultipleYAxis&&y.multiAxisTickAmount==0&&y.ignoreYAxisIndexes.indexOf(u)<0&&(y.multiAxisTickAmount=T);var Re=e-L,at=L*g;do Re+=L,C.push(X.stripNumber(Re,7));while(i-Re>at);return{result:C,niceMin:C[0],niceMax:C[C.length-1]}}},{key:"linearScale",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,h=Math.abs(i-e),u=[];if(e===i)return{result:u=[e],niceMin:u[0],niceMax:u[u.length-1]};(n=this._adjustTicksForSmallRange(n,r,h))==="dataPoints"&&(n=this.w.globals.dataPoints-1),l||(l=h/n),l=Math.round(10*(l+Number.EPSILON))/10,n===Number.MAX_VALUE&&(n=5,l=1);for(var g=e;n>=0;)u.push(g),g=X.preciseAddition(g,l),n-=1;return{result:u,niceMin:u[0],niceMax:u[u.length-1]}}},{key:"logarithmicScaleNice",value:function(e,i,n){i<=0&&(i=Math.max(e,n)),e<=0&&(e=Math.min(i,n));for(var r=[],l=Math.ceil(Math.log(i)/Math.log(n)+1),h=Math.floor(Math.log(e)/Math.log(n));h<l;h++)r.push(Math.pow(n,h));return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(e,i,n){i<=0&&(i=Math.max(e,n)),e<=0&&(e=Math.min(i,n));for(var r=[],l=Math.log(i)/Math.log(n),h=Math.log(e)/Math.log(n),u=l-h,g=Math.round(u),m=u/g,y=0,b=h;y<g;y++,b+=m)r.push(Math.pow(n,b));return r.push(Math.pow(n,l)),{result:r,niceMin:e,niceMax:i}}},{key:"_adjustTicksForSmallRange",value:function(e,i,n){var r=e;if(i!==void 0&&this.w.config.yaxis[i].labels.formatter&&this.w.config.yaxis[i].tickAmount===void 0){var l=Number(this.w.config.yaxis[i].labels.formatter(1));X.isNumber(l)&&this.w.globals.yValueDecimal===0&&(r=Math.ceil(n))}return r<e?r:e}},{key:"setYScaleForIndex",value:function(e,i,n){var r=this.w.globals,l=this.w.config,h=r.isBarHorizontal?l.xaxis:l.yaxis[e];r.yAxisScale[e]===void 0&&(r.yAxisScale[e]=[]);var u=Math.abs(n-i);h.logarithmic&&u<=5&&(r.invalidLogScale=!0),h.logarithmic&&u>5?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=h.forceNiceScale?this.logarithmicScaleNice(i,n,h.logBase):this.logarithmicScale(i,n,h.logBase)):n!==-Number.MAX_VALUE&&X.isNumber(n)&&i!==Number.MAX_VALUE&&X.isNumber(i)?(r.allSeriesCollapsed=!1,r.yAxisScale[e]=this.niceScale(i,n,e)):r.yAxisScale[e]=this.niceScale(Number.MIN_VALUE,0,e)}},{key:"setXScale",value:function(e,i){var n=this.w,r=n.globals,l=Math.abs(i-e);if(i!==-Number.MAX_VALUE&&X.isNumber(i)){var h=r.xTickAmount+1;l<10&&l>1&&(h=l),r.xAxisScale=this.linearScale(e,i,h,0,n.config.xaxis.stepSize)}else r.xAxisScale=this.linearScale(0,10,10);return r.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var e=this,i=this.w.config,n=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var r=n.seriesYAxisMap,l=n.minYArr,h=n.maxYArr;n.allSeriesCollapsed=!0,n.barGroups=[],r.forEach(function(u,g){var m=[];u.forEach(function(y){var b=i.series[y].group;m.indexOf(b)<0&&m.push(b)}),u.length>0?function(){var y,b,v=Number.MAX_VALUE,k=-Number.MAX_VALUE,A=v,C=k;if(i.chart.stacked)(function(){var L=new Array(n.dataPoints).fill(0),P=[],F=[],N=[];m.forEach(function(){P.push(L.map(function(){return Number.MIN_VALUE})),F.push(L.map(function(){return Number.MIN_VALUE})),N.push(L.map(function(){return Number.MIN_VALUE}))});for(var H=function(B){!y&&i.series[u[B]].type&&(y=i.series[u[B]].type);var W=u[B];b=i.series[W].group?i.series[W].group:"axis-".concat(g),!(n.collapsedSeriesIndices.indexOf(W)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(W)<0)||(n.allSeriesCollapsed=!1,m.forEach(function(V,G){if(i.series[W].group===V)for(var q=0;q<n.series[W].length;q++){var U=n.series[W][q];U>=0?F[G][q]+=U:N[G][q]+=U,P[G][q]+=U,A=Math.min(A,U),C=Math.max(C,U)}})),y!=="bar"&&y!=="column"||n.barGroups.push(b)},z=0;z<u.length;z++)H(z);y||(y=i.chart.type),y==="bar"||y==="column"?m.forEach(function(B,W){v=Math.min(v,Math.min.apply(null,N[W])),k=Math.max(k,Math.max.apply(null,F[W]))}):(m.forEach(function(B,W){A=Math.min(A,Math.min.apply(null,P[W])),C=Math.max(C,Math.max.apply(null,P[W]))}),v=A,k=C),v===Number.MIN_VALUE&&k===Number.MIN_VALUE&&(k=-Number.MAX_VALUE)})();else for(var T=0;T<u.length;T++){var O=u[T];v=Math.min(v,l[O]),k=Math.max(k,h[O]),!(n.collapsedSeriesIndices.indexOf(O)<0&&n.ancillaryCollapsedSeriesIndices.indexOf(O)<0)||(n.allSeriesCollapsed=!1)}i.yaxis[g].min!==void 0&&(v=typeof i.yaxis[g].min=="function"?i.yaxis[g].min(v):i.yaxis[g].min),i.yaxis[g].max!==void 0&&(k=typeof i.yaxis[g].max=="function"?i.yaxis[g].max(k):i.yaxis[g].max),n.barGroups=n.barGroups.filter(function(L,P,F){return F.indexOf(L)===P}),e.setYScaleForIndex(g,v,k),u.forEach(function(L){l[L]=n.yAxisScale[g].niceMin,h[L]=n.yAxisScale[g].niceMax})}():e.setYScaleForIndex(g,0,-Number.MAX_VALUE)})}}]),f}(),Hr=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.scales=new el(e)}return c(f,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,l=this.w.config,h=this.w.globals,u=-Number.MAX_VALUE,g=Number.MIN_VALUE;r===null&&(r=e+1);var m=h.series,y=m,b=m;l.chart.type==="candlestick"?(y=h.seriesCandleL,b=h.seriesCandleH):l.chart.type==="boxPlot"?(y=h.seriesCandleO,b=h.seriesCandleC):h.isRangeData&&(y=h.seriesRangeStart,b=h.seriesRangeEnd);var v=!1;if(h.seriesX.length>=r){var k,A=(k=h.brushSource)===null||k===void 0?void 0:k.w.config.chart.brush;(l.chart.zoom.enabled&&l.chart.zoom.autoScaleYaxis||A!=null&&A.enabled&&A!=null&&A.autoScaleYaxis)&&(v=!0)}for(var C=e;C<r;C++){h.dataPoints=Math.max(h.dataPoints,m[C].length);var T=l.series[C].type;h.categoryLabels.length&&(h.dataPoints=h.categoryLabels.filter(function(N){return N!==void 0}).length),h.labels.length&&l.xaxis.type!=="datetime"&&h.series.reduce(function(N,H){return N+H.length},0)!==0&&(h.dataPoints=Math.max(h.dataPoints,h.labels.length));var O=0,L=m[C].length-1;if(v){if(l.xaxis.min)for(;O<L&&h.seriesX[C][O]<l.xaxis.min;O++);if(l.xaxis.max)for(;L>O&&h.seriesX[C][L]>l.xaxis.max;L--);}for(var P=O;P<=L&&P<h.series[C].length;P++){var F=m[C][P];if(F!==null&&X.isNumber(F)){switch(b[C][P]!==void 0&&(u=Math.max(u,b[C][P]),i=Math.min(i,b[C][P])),y[C][P]!==void 0&&(i=Math.min(i,y[C][P]),n=Math.max(n,y[C][P])),T){case"candlestick":h.seriesCandleC[C][P]!==void 0&&(u=Math.max(u,h.seriesCandleH[C][P]),i=Math.min(i,h.seriesCandleL[C][P]));break;case"boxPlot":h.seriesCandleC[C][P]!==void 0&&(u=Math.max(u,h.seriesCandleC[C][P]),i=Math.min(i,h.seriesCandleO[C][P]))}T&&T!=="candlestick"&&T!=="boxPlot"&&T!=="rangeArea"&&T!=="rangeBar"&&(u=Math.max(u,h.series[C][P]),i=Math.min(i,h.series[C][P])),h.seriesGoals[C]&&h.seriesGoals[C][P]&&Array.isArray(h.seriesGoals[C][P])&&h.seriesGoals[C][P].forEach(function(N){u=Math.max(u,N.value),i=Math.min(i,N.value)}),n=u,X.isFloat(F)&&(F=X.noExponents(F),h.yValueDecimal=Math.max(h.yValueDecimal,F.toString().split(".")[1].length)),g>y[C][P]&&y[C][P]<0&&(g=y[C][P])}else h.hasNullValues=!0}T!=="bar"&&T!=="column"||(g<0&&u<0&&(u=0,n=Math.max(n,0)),g===Number.MIN_VALUE&&(g=0,i=Math.min(i,0)))}return l.chart.type==="rangeBar"&&h.seriesRangeStart.length&&h.isBarHorizontal&&(g=i),l.chart.type==="bar"&&(g<0&&u<0&&(u=0),g===Number.MIN_VALUE&&(g=0)),{minY:g,maxY:u,lowestY:i,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,i=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n,r=Number.MAX_VALUE;if(e.isMultipleYAxis){r=Number.MAX_VALUE;for(var l=0;l<e.series.length;l++)n=this.getMinYMaxY(l),e.minYArr[l]=n.lowestY,e.maxYArr[l]=n.highestY,r=Math.min(r,n.lowestY)}return n=this.getMinYMaxY(0,r,null,e.series.length),i.chart.type==="bar"?(e.minY=n.minY,e.maxY=n.maxY):(e.minY=n.lowestY,e.maxY=n.highestY),r=n.lowestY,i.chart.stacked&&this._setStackedMinMax(),i.chart.type==="line"||i.chart.type==="area"||i.chart.type==="scatter"||i.chart.type==="candlestick"||i.chart.type==="boxPlot"||i.chart.type==="rangeBar"&&!e.isBarHorizontal?e.minY===Number.MIN_VALUE&&r!==-Number.MAX_VALUE&&r!==e.maxY&&(e.minY=r):e.minY=e.minY!==Number.MIN_VALUE?Math.min(n.minY,e.minY):n.minY,i.yaxis.forEach(function(h,u){h.max!==void 0&&(typeof h.max=="number"?e.maxYArr[u]=h.max:typeof h.max=="function"&&(e.maxYArr[u]=h.max(e.isMultipleYAxis?e.maxYArr[u]:e.maxY)),e.maxY=e.maxYArr[u]),h.min!==void 0&&(typeof h.min=="number"?e.minYArr[u]=h.min:typeof h.min=="function"&&(e.minYArr[u]=h.min(e.isMultipleYAxis?e.minYArr[u]===Number.MIN_VALUE?0:e.minYArr[u]:e.minY)),e.minY=e.minYArr[u])}),e.isBarHorizontal&&["min","max"].forEach(function(h){i.xaxis[h]!==void 0&&typeof i.xaxis[h]=="number"&&(h==="min"?e.minY=i.xaxis[h]:e.maxY=i.xaxis[h])}),e.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),e.minY=r):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.minY,e.maxYArr[0]=e.maxY),e.barGroups=[],e.lineGroups=[],e.areaGroups=[],i.series.forEach(function(h){switch(h.type||i.chart.type){case"bar":case"column":e.barGroups.push(h.group);break;case"line":e.lineGroups.push(h.group);break;case"area":e.areaGroups.push(h.group)}}),e.barGroups=e.barGroups.filter(function(h,u,g){return g.indexOf(h)===u}),e.lineGroups=e.lineGroups.filter(function(h,u,g){return g.indexOf(h)===u}),e.areaGroups=e.areaGroups.filter(function(h,u,g){return g.indexOf(h)===u}),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,i=this.w.config,n=i.xaxis.type==="numeric"||i.xaxis.type==="datetime"||i.xaxis.type==="category"&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var g=0;g<e.series.length;g++)if(e.labels[g])for(var m=0;m<e.labels[g].length;m++)e.labels[g][m]!==null&&X.isNumber(e.labels[g][m])&&(e.maxX=Math.max(e.maxX,e.labels[g][m]),e.initialMaxX=Math.max(e.maxX,e.labels[g][m]),e.minX=Math.min(e.minX,e.labels[g][m]),e.initialMinX=Math.min(e.minX,e.labels[g][m]))}(),e.noLabelsProvided&&i.xaxis.categories.length===0&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var r=10;if(i.xaxis.tickAmount===void 0)r=Math.round(e.svgWidth/150),i.xaxis.type==="numeric"&&e.dataPoints<30&&(r=e.dataPoints-1),r>e.dataPoints&&e.dataPoints!==0&&(r=e.dataPoints-1);else if(i.xaxis.tickAmount==="dataPoints"){if(e.series.length>1&&(r=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric){var l=e.maxX-e.minX;l<30&&(r=l-1)}}else r=i.xaxis.tickAmount;if(e.xTickAmount=r,i.xaxis.max!==void 0&&typeof i.xaxis.max=="number"&&(e.maxX=i.xaxis.max),i.xaxis.min!==void 0&&typeof i.xaxis.min=="number"&&(e.minX=i.xaxis.min),i.xaxis.range!==void 0&&(e.minX=e.maxX-i.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(i.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var h=[],u=e.minX-1;u<e.maxX;u++)h.push(u+1);e.xAxisScale={result:h,niceMin:h[0],niceMax:h[h.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(0,r,r,0,i.xaxis.stepSize),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,r-1,0,i.xaxis.stepSize),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ){for(var i=0;i<e.series.length;i++)if(e.seriesZ[i]!==void 0)for(var n=0;n<e.seriesZ[i].length;n++)e.seriesZ[i][n]!==null&&X.isNumber(e.seriesZ[i][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[i][n]),e.minZ=Math.min(e.minZ,e.seriesZ[i][n]))}}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,i=this.w.config;if(e.minX===e.maxX){var n=new it(this.ctx);if(i.xaxis.type==="datetime"){var r=n.getDate(e.minX);i.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()-2):r.setDate(r.getDate()-2),e.minX=new Date(r).getTime();var l=n.getDate(e.maxX);i.xaxis.labels.datetimeUTC?l.setUTCDate(l.getUTCDate()+2):l.setDate(l.getDate()+2),e.maxX=new Date(l).getTime()}else(i.xaxis.type==="numeric"||i.xaxis.type==="category"&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach(function(i,n){i.length===1&&i.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var r=i.slice();r.sort(function(l,h){return l-h}),r.forEach(function(l,h){if(h>0){var u=l-r[h-1];u>0&&(e.minXDiff=Math.min(u,e.minXDiff))}}),e.dataPoints!==1&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var e=this,i=this.w.globals;if(i.series.length){var n=i.seriesGroups;n.length||(n=[this.w.globals.seriesNames.map(function(h){return h})]);var r={},l={};n.forEach(function(h){r[h]=[],l[h]=[],e.w.config.series.map(function(u,g){return h.indexOf(i.seriesNames[g])>-1?g:null}).filter(function(u){return u!==null}).forEach(function(u){for(var g=0;g<i.series[i.maxValsInArrayIndex].length;g++){var m,y,b,v;r[h][g]===void 0&&(r[h][g]=0,l[h][g]=0),(e.w.config.chart.stacked&&!i.comboCharts||e.w.config.chart.stacked&&i.comboCharts&&(!e.w.config.chart.stackOnlyBar||((m=e.w.config.series)===null||m===void 0||(y=m[u])===null||y===void 0?void 0:y.type)==="bar"||((b=e.w.config.series)===null||b===void 0||(v=b[u])===null||v===void 0?void 0:v.type)==="column"))&&i.series[u][g]!==null&&X.isNumber(i.series[u][g])&&(i.series[u][g]>0?r[h][g]+=parseFloat(i.series[u][g])+1e-4:l[h][g]+=parseFloat(i.series[u][g]))}})}),Object.entries(r).forEach(function(h){var u=R(h,1)[0];r[u].forEach(function(g,m){i.maxY=Math.max(i.maxY,r[u][m]),i.minY=Math.min(i.minY,l[u][m])})})}}}]),f}(),Xr=function(){function f(e,i){s(this,f),this.ctx=e,this.elgrid=i,this.w=e.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=n.config.chart.type==="bar"&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=n.config.xaxis.position==="bottom"?n.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new fi(e)}return c(f,[{key:"drawYaxis",value:function(e){var i=this.w,n=new Q(this.ctx),r=i.config.yaxis[e].labels.style,l=r.fontSize,h=r.fontFamily,u=r.fontWeight,g=n.group({class:"apexcharts-yaxis",rel:e,transform:"translate(".concat(i.globals.translateYAxisX[e],", 0)")});if(this.axesUtils.isYAxisHidden(e))return g;var m=n.group({class:"apexcharts-yaxis-texts-g"});g.add(m);var y=i.globals.yAxisScale[e].result.length-1,b=i.globals.gridHeight/y,v=i.globals.yLabelFormatters[e],k=this.axesUtils.checkForReversedLabels(e,i.globals.yAxisScale[e].result.slice());if(i.config.yaxis[e].labels.show){var A=i.globals.translateY+i.config.yaxis[e].labels.offsetY;i.globals.isBarHorizontal?A=0:i.config.chart.type==="heatmap"&&(A-=b/2),A+=parseInt(l,10)/3;for(var C=y;C>=0;C--){var T=v(k[C],C,i),O=i.config.yaxis[e].labels.padding;i.config.yaxis[e].opposite&&i.config.yaxis.length!==0&&(O*=-1);var L=this.getTextAnchor(i.config.yaxis[e].labels.align,i.config.yaxis[e].opposite),P=this.axesUtils.getYAxisForeColor(r.colors,e),F=Array.isArray(P)?P[C]:P,N=X.listToArray(i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-label tspan"))).map(function(z){return z.textContent}),H=n.drawText({x:O,y:A,text:N.includes(T)&&!i.config.yaxis[e].labels.showDuplicates?"":T,textAnchor:L,fontSize:l,fontFamily:h,fontWeight:u,maxWidth:i.config.yaxis[e].labels.maxWidth,foreColor:F,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(r.cssClass)});m.add(H),this.addTooltip(H,T),i.config.yaxis[e].labels.rotate!==0&&this.rotateLabel(n,H,firstLabel,i.config.yaxis[e].labels.rotate),A+=b}}return this.addYAxisTitle(n,g,e),this.addAxisBorder(n,g,e,y,b),g}},{key:"getTextAnchor",value:function(e,i){return e==="left"?"start":e==="center"?"middle":e==="right"?"end":i?"start":"end"}},{key:"addTooltip",value:function(e,i){var n=document.createElementNS(this.w.globals.SVGNS,"title");n.textContent=Array.isArray(i)?i.join(" "):i,e.node.appendChild(n)}},{key:"rotateLabel",value:function(e,i,n,r){var l=e.rotateAroundCenter(n.node),h=e.rotateAroundCenter(i.node);i.node.setAttribute("transform","rotate(".concat(r," ").concat(l.x," ").concat(h.y,")"))}},{key:"addYAxisTitle",value:function(e,i,n){var r=this.w;if(r.config.yaxis[n].title.text!==void 0){var l=e.group({class:"apexcharts-yaxis-title"}),h=r.config.yaxis[n].opposite?r.globals.translateYAxisX[n]:0,u=e.drawText({x:h,y:r.globals.gridHeight/2+r.globals.translateY+r.config.yaxis[n].title.offsetY,text:r.config.yaxis[n].title.text,textAnchor:"end",foreColor:r.config.yaxis[n].title.style.color,fontSize:r.config.yaxis[n].title.style.fontSize,fontWeight:r.config.yaxis[n].title.style.fontWeight,fontFamily:r.config.yaxis[n].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(r.config.yaxis[n].title.style.cssClass)});l.add(u),i.add(l)}}},{key:"addAxisBorder",value:function(e,i,n,r,l){var h=this.w,u=h.config.yaxis[n].axisBorder,g=31+u.offsetX;if(h.config.yaxis[n].opposite&&(g=-31-u.offsetX),u.show){var m=e.drawLine(g,h.globals.translateY+u.offsetY-2,g,h.globals.gridHeight+h.globals.translateY+u.offsetY+2,u.color,0,u.width);i.add(m)}h.config.yaxis[n].axisTicks.show&&this.axesUtils.drawYAxisTicks(g,r,u,h.config.yaxis[n].axisTicks,n,l,i)}},{key:"drawYaxisInversed",value:function(e){var i=this.w,n=new Q(this.ctx),r=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),l=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(i.globals.translateXAxisX,", ").concat(i.globals.translateXAxisY,")")});r.add(l);var h=i.globals.yAxisScale[e].result.length-1,u=i.globals.gridWidth/h+.1,g=u+i.config.xaxis.labels.offsetX,m=i.globals.xLabelFormatter,y=this.axesUtils.checkForReversedLabels(e,i.globals.yAxisScale[e].result.slice()),b=i.globals.timescaleLabels;if(b.length>0&&(this.xaxisLabels=b.slice(),h=(y=b.slice()).length),i.config.xaxis.labels.show)for(var v=b.length?0:h;b.length?v<b.length:v>=0;b.length?v++:v--){var k=m(y[v],v,i),A=i.globals.gridWidth+i.globals.padHorizontal-(g-u+i.config.xaxis.labels.offsetX);if(b.length){var C=this.axesUtils.getLabel(y,b,A,v,this.drawnLabels,this.xaxisFontSize);A=C.x,k=C.text,this.drawnLabels.push(C.text),v===0&&i.globals.skipFirstTimelinelabel&&(k=""),v===y.length-1&&i.globals.skipLastTimelinelabel&&(k="")}var T=n.drawText({x:A,y:this.xAxisoffX+i.config.xaxis.labels.offsetY+30-(i.config.xaxis.position==="top"?i.globals.xAxisHeight+i.config.xaxis.axisTicks.height-2:0),text:k,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:i.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(i.config.xaxis.labels.style.cssClass)});l.add(T),T.tspan(k),this.addTooltip(T,k),g+=u}return this.inversedYAxisTitleText(r),this.inversedYAxisBorder(r),r}},{key:"inversedYAxisBorder",value:function(e){var i=this.w,n=new Q(this.ctx),r=i.config.xaxis.axisBorder;if(r.show){var l=0;i.config.chart.type==="bar"&&i.globals.isXNumeric&&(l-=15);var h=n.drawLine(i.globals.padHorizontal+l+r.offsetX,this.xAxisoffX,i.globals.gridWidth,this.xAxisoffX,r.color,0,r.height);this.elgrid&&this.elgrid.elGridBorders&&i.config.grid.show?this.elgrid.elGridBorders.add(h):e.add(h)}}},{key:"inversedYAxisTitleText",value:function(e){var i=this.w,n=new Q(this.ctx);if(i.config.xaxis.title.text!==void 0){var r=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),l=n.drawText({x:i.globals.gridWidth/2+i.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(i.config.xaxis.title.style.fontSize)+i.config.xaxis.title.offsetY+20,text:i.config.xaxis.title.text,textAnchor:"middle",fontSize:i.config.xaxis.title.style.fontSize,fontFamily:i.config.xaxis.title.style.fontFamily,fontWeight:i.config.xaxis.title.style.fontWeight,foreColor:i.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(i.config.xaxis.title.style.cssClass)});r.add(l),e.add(r)}}},{key:"yAxisTitleRotate",value:function(e,i){var n=this.w,r=new Q(this.ctx),l=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g")),h=l?l.getBoundingClientRect():{width:0,height:0},u=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text")),g=u?u.getBoundingClientRect():{width:0,height:0};if(u){var m=this.xPaddingForYAxisTitle(e,h,g,i);u.setAttribute("x",m.xPos-(i?10:0));var y=r.rotateAroundCenter(u);u.setAttribute("transform","rotate(".concat(i?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(y.x," ").concat(y.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,i,n,r){var l=this.w,h=0,u=10;return l.config.yaxis[e].title.text===void 0||e<0?{xPos:h,padd:0}:(r?h=i.width+l.config.yaxis[e].title.offsetX+n.width/2+u/2:(h=-1*i.width+l.config.yaxis[e].title.offsetX+u/2+n.width/2,l.globals.isBarHorizontal&&(u=25,h=-1*i.width-l.config.yaxis[e].title.offsetX-u)),{xPos:h,padd:u})}},{key:"setYAxisXPosition",value:function(e,i){var n=this.w,r=0,l=0,h=18,u=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.forEach(function(g,m){var y=n.globals.ignoreYAxisIndexes.includes(m)||!g.show||g.floating||e[m].width===0,b=e[m].width+i[m].width;g.opposite?n.globals.isBarHorizontal?(l=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[m]=l-g.labels.offsetX):(l=n.globals.gridWidth+n.globals.translateX+u,y||(u+=b+20),n.globals.translateYAxisX[m]=l-g.labels.offsetX+20):(r=n.globals.translateX-h,y||(h+=b+20),n.globals.translateYAxisX[m]=r+g.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var e=this.w;X.listToArray(e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(i,n){var r=e.config.yaxis[n];if(r&&!r.floating&&r.labels.align!==void 0){var l=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),h=X.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"))),u=l.getBoundingClientRect();h.forEach(function(g){g.setAttribute("text-anchor",r.labels.align)}),r.labels.align!=="left"||r.opposite?r.labels.align==="center"?l.setAttribute("transform","translate(".concat(u.width/2*(r.opposite?1:-1),", 0)")):r.labels.align==="right"&&r.opposite&&l.setAttribute("transform","translate(".concat(u.width,", 0)")):l.setAttribute("transform","translate(-".concat(u.width,", 0)"))}})}}]),f}(),gu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.documentEvent=X.bind(this.documentEvent,this)}return c(f,[{key:"addEventListener",value:function(e,i){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(i):n.globals.events[e]=[i]}},{key:"removeEventListener",value:function(e,i){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var r=n.globals.events[e].indexOf(i);r!==-1&&n.globals.events[e].splice(r,1)}}},{key:"fireEvent",value:function(e,i){var n=this.w;if(n.globals.events.hasOwnProperty(e)){i&&i.length||(i=[]);for(var r=n.globals.events[e],l=r.length,h=0;h<l;h++)r[h].apply(null,i)}}},{key:"setupEventHandlers",value:function(){var e=this,i=this.w,n=this.ctx,r=i.globals.dom.baseEl.querySelector(i.globals.chartClass);this.ctx.eventList.forEach(function(l){r.addEventListener(l,function(h){var u=Object.assign({},i,{seriesIndex:i.globals.axisCharts?i.globals.capturedSeriesIndex:0,dataPointIndex:i.globals.capturedDataPointIndex});h.type==="mousemove"||h.type==="touchmove"?typeof i.config.chart.events.mouseMove=="function"&&i.config.chart.events.mouseMove(h,n,u):h.type==="mouseleave"||h.type==="touchleave"?typeof i.config.chart.events.mouseLeave=="function"&&i.config.chart.events.mouseLeave(h,n,u):(h.type==="mouseup"&&h.which===1||h.type==="touchend")&&(typeof i.config.chart.events.click=="function"&&i.config.chart.events.click(h,n,u),n.ctx.events.fireEvent("click",[h,n,u]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(l){i.globals.dom.baseEl.addEventListener(l,e.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var i=this.w,n=e.target.className;if(e.type==="click"){var r=i.globals.dom.baseEl.querySelector(".apexcharts-menu");r&&r.classList.contains("apexcharts-menu-open")&&n!=="apexcharts-menu-icon"&&r.classList.remove("apexcharts-menu-open")}i.globals.clientX=e.type==="touchmove"?e.touches[0].clientX:e.clientX,i.globals.clientY=e.type==="touchmove"?e.touches[0].clientY:e.clientY}}]),f}(),mu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"setCurrentLocaleValues",value:function(e){var i=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(i=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=i.filter(function(l){return l.name===e})[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var r=X.extend(Jo,n);this.w.globals.locale=r.options}}]),f}(),xu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"drawAxis",value:function(e,i){var n,r,l=this,h=this.w.globals,u=this.w.config,g=new Xs(this.ctx,i),m=new Xr(this.ctx,i);h.axisCharts&&e!=="radar"&&(h.isBarHorizontal?(r=m.drawYaxisInversed(0),n=g.drawXaxisInversed(0),h.dom.elGraphical.add(n),h.dom.elGraphical.add(r)):(n=g.drawXaxis(),h.dom.elGraphical.add(n),u.yaxis.map(function(y,b){if(h.ignoreYAxisIndexes.indexOf(b)===-1&&(r=m.drawYaxis(b),h.dom.Paper.add(r),l.w.config.grid.position==="back")){var v=h.dom.Paper.children()[1];v.remove(),h.dom.Paper.add(v)}})))}}]),f}(),Yr=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"drawXCrosshairs",value:function(){var e=this.w,i=new Q(this.ctx),n=new tt(this.ctx),r=e.config.xaxis.crosshairs.fill.gradient,l=e.config.xaxis.crosshairs.dropShadow,h=e.config.xaxis.crosshairs.fill.type,u=r.colorFrom,g=r.colorTo,m=r.opacityFrom,y=r.opacityTo,b=r.stops,v=l.enabled,k=l.left,A=l.top,C=l.blur,T=l.color,O=l.opacity,L=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){h==="gradient"&&(L=i.drawGradient("vertical",u,g,m,y,null,b,null));var P=i.drawRect();e.config.xaxis.crosshairs.width===1&&(P=i.drawLine());var F=e.globals.gridHeight;(!X.isNumber(F)||F<0)&&(F=0);var N=e.config.xaxis.crosshairs.width;(!X.isNumber(N)||N<0)&&(N=0),P.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:F,width:N,height:F,fill:L,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),v&&(P=n.dropShadow(P,{left:k,top:A,blur:C,color:T,opacity:O})),e.globals.dom.elGraphical.add(P)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,i=new Q(this.ctx),n=e.config.yaxis[0].crosshairs,r=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var l=i.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);l.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(l)}var h=i.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,0,0);h.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(h)}}]),f}(),bu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"checkResponsiveConfig",value:function(e){var i=this,n=this.w,r=n.config;if(r.responsive.length!==0){var l=r.responsive.slice();l.sort(function(m,y){return m.breakpoint>y.breakpoint?1:y.breakpoint>m.breakpoint?-1:0}).reverse();var h=new Hs({}),u=function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=l[0].breakpoint,b=window.innerWidth>0?window.innerWidth:screen.width;if(b>y){var v=X.clone(n.globals.initialConfig);v.series=X.clone(n.config.series);var k=je.extendArrayProps(h,v,n);m=X.extend(k,m),m=X.extend(n.config,m),i.overrideResponsiveOptions(m)}else for(var A=0;A<l.length;A++)b<l[A].breakpoint&&(m=je.extendArrayProps(h,l[A].options,n),m=X.extend(n.config,m),i.overrideResponsiveOptions(m))};if(e){var g=je.extendArrayProps(h,e,n);g=X.extend(n.config,g),u(g=X.extend(g,e))}else u({})}}},{key:"overrideResponsiveOptions",value:function(e){var i=new Hs(e).init({responsiveOverride:!0});this.w.config=i}}]),f}(),yu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return c(f,[{key:"checkHeatmapDistributed",value:function(){var e=this.w.config,i=e.chart,n=e.plotOptions;return i.type==="treemap"&&n.treemap&&n.treemap.distributed||i.type==="heatmap"&&n.heatmap&&n.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var e=this.w.config,i=e.chart,n=e.plotOptions;return n.bar&&n.bar.distributed&&(i.type==="bar"||i.type==="rangeBar")}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this.w,i=new X;e.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(e.config.theme.mode));var n=Y(e.config.colors||e.config.fill.colors||[]);e.globals.colors=this.getColors(n),this.applySeriesColors(e.globals.seriesColors,e.globals.colors),e.config.theme.monochrome.enabled&&(e.globals.colors=this.getMonochromeColors(e.config.theme.monochrome,e.globals.series,i));var r=e.globals.colors.slice();this.pushExtraColors(e.globals.colors),this.applyColorTypes(["fill","stroke"],r),this.applyDataLabelsColors(r),this.applyRadarPolygonsColors(),this.applyMarkersColors(r)}},{key:"getColors",value:function(e){var i=this,n=this.w;return e&&e.length!==0?Array.isArray(e)&&e.length>0&&typeof e[0]=="function"?(this.isColorFn=!0,n.config.series.map(function(r,l){var h=e[l]||e[0];return typeof h=="function"?h({value:n.globals.axisCharts?n.globals.series[l][0]||0:n.globals.series[l],seriesIndex:l,dataPointIndex:l,w:i.w}):h})):e:this.predefined()}},{key:"applySeriesColors",value:function(e,i){e.forEach(function(n,r){n&&(i[r]=n)})}},{key:"getMonochromeColors",value:function(e,i,n){var r=e.color,l=e.shadeIntensity,h=e.shadeTo,u=this.isBarDistributed||this.isHeatmapDistributed?i[0].length*i.length:i.length,g=1/(u/l),m=0;return Array.from({length:u},function(){var y=h==="dark"?n.shadeColor(-1*m,r):n.shadeColor(m,r);return m+=g,y})}},{key:"applyColorTypes",value:function(e,i){var n=this,r=this.w;e.forEach(function(l){r.globals[l].colors=r.config[l].colors===void 0?n.isColorFn?r.config.colors:i:r.config[l].colors.slice(),n.pushExtraColors(r.globals[l].colors)})}},{key:"applyDataLabelsColors",value:function(e){var i=this.w;i.globals.dataLabels.style.colors=i.config.dataLabels.style.colors===void 0?e:i.config.dataLabels.style.colors.slice(),this.pushExtraColors(i.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var e=this.w;e.globals.radarPolygons.fill.colors=e.config.plotOptions.radar.polygons.fill.colors===void 0?[e.config.theme.mode==="dark"?"#424242":"none"]:e.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(e.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(e){var i=this.w;i.globals.markers.colors=i.config.markers.colors===void 0?e:i.config.markers.colors.slice(),this.pushExtraColors(i.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,l=i||r.globals.series.length;if(n===null&&(n=this.isBarDistributed||this.isHeatmapDistributed||r.config.chart.type==="heatmap"&&r.config.plotOptions.heatmap&&r.config.plotOptions.heatmap.colorScale.inverse),n&&r.globals.series.length&&(l=r.globals.series[r.globals.maxValsInArrayIndex].length*r.globals.series.length),e.length<l)for(var h=l-e.length,u=0;u<h;u++)e.push(e[u])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var i=e.theme.mode,n=i==="dark"?"palette4":i==="light"?"palette1":e.theme.palette||"palette1",r=i==="dark"?"#f6f7f8":i==="light"?"#373d3f":e.chart.foreColor||"#373d3f";return e.tooltip.theme=i||"light",e.chart.foreColor=r,e.theme.palette=n,e}},{key:"predefined",value:function(){var e={palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"],palette3:["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"],palette4:["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"],palette5:["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"],default:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"]};return e[this.w.config.theme.palette]||e.default}}]),f}(),vu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var i=this.w,n=e==="title"?i.config.title:i.config.subtitle,r=i.globals.svgWidth/2,l=n.offsetY,h="middle";if(n.align==="left"?(r=10,h="start"):n.align==="right"&&(r=i.globals.svgWidth-10,h="end"),r+=n.offsetX,l=l+parseInt(n.style.fontSize,10)+n.margin/2,n.text!==void 0){var u=new Q(this.ctx).drawText({x:r,y:l,text:n.text,textAnchor:h,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});u.node.setAttribute("class","apexcharts-".concat(e,"-text")),i.globals.dom.Paper.add(u)}}}]),f}(),wu=function(){function f(e){s(this,f),this.w=e.w,this.dCtx=e}return c(f,[{key:"getTitleSubtitleCoords",value:function(e){var i=this.w,n=0,r=0,l=e==="title"?i.config.title.floating:i.config.subtitle.floating,h=i.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(h!==null&&!l){var u=h.getBoundingClientRect();n=u.width,r=i.globals.axisCharts?u.height+5:u.height}return{width:n,height:r}}},{key:"getLegendsRect",value:function(){var e=this.w,i=e.globals.dom.elLegendWrap;e.config.legend.height||e.config.legend.position!=="top"&&e.config.legend.position!=="bottom"||(i.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},X.getBoundingClientRect(i));return i!==null&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:n.height===0?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},e.config.legend.position!=="left"&&e.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var e=this,i=this.w,n=[];i.config.series.forEach(function(g,m){g.data.forEach(function(y,b){var v;v=i.globals.series[m][b],r=i.config.dataLabels.formatter(v,{ctx:e.dCtx.ctx,seriesIndex:m,dataPointIndex:b,w:i}),n.push(r)})});var r=X.getLargestStringFromArr(n),l=new Q(this.dCtx.ctx),h=i.config.dataLabels.style,u=l.getTextRects(r,parseInt(h.fontSize),h.fontFamily);return{width:1.05*u.width,height:u.height}}},{key:"getLargestStringFromMultiArr",value:function(e,i){var n=e;if(this.w.globals.isMultiLineX){var r=i.map(function(h,u){return Array.isArray(h)?h.length:1}),l=Math.max.apply(Math,Y(r));n=i[r.indexOf(l)]}return n}}]),f}(),ku=function(){function f(e){s(this,f),this.w=e.w,this.dCtx=e}return c(f,[{key:"getxAxisLabelsCoords",value:function(){var e,i=this.w,n=i.globals.labels.slice();if(i.config.xaxis.convertedCatToNumeric&&n.length===0&&(n=i.globals.categoryLabels),i.globals.timescaleLabels.length>0){var r=this.getxAxisTimeScaleLabelsCoords();e={width:r.width,height:r.height},i.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=i.config.legend.position!=="left"&&i.config.legend.position!=="right"||i.config.legend.floating?0:this.dCtx.lgRect.width;var l=i.globals.xLabelFormatter,h=X.getLargestStringFromArr(n),u=this.dCtx.dimHelpers.getLargestStringFromMultiArr(h,n);i.globals.isBarHorizontal&&(u=h=i.globals.yAxisScale[0].result.reduce(function(A,C){return A.length>C.length?A:C},0));var g=new Fs(this.dCtx.ctx),m=h;h=g.xLabelFormat(l,h,m,{i:void 0,dateFormatter:new it(this.dCtx.ctx).formatDate,w:i}),u=g.xLabelFormat(l,u,m,{i:void 0,dateFormatter:new it(this.dCtx.ctx).formatDate,w:i}),(i.config.xaxis.convertedCatToNumeric&&h===void 0||String(h).trim()==="")&&(u=h="1");var y=new Q(this.dCtx.ctx),b=y.getTextRects(h,i.config.xaxis.labels.style.fontSize),v=b;if(h!==u&&(v=y.getTextRects(u,i.config.xaxis.labels.style.fontSize)),(e={width:b.width>=v.width?b.width:v.width,height:b.height>=v.height?b.height:v.height}).width*n.length>i.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&i.config.xaxis.labels.rotate!==0||i.config.xaxis.labels.rotateAlways){if(!i.globals.isBarHorizontal){i.globals.rotateXLabels=!0;var k=function(A){return y.getTextRects(A,i.config.xaxis.labels.style.fontSize,i.config.xaxis.labels.style.fontFamily,"rotate(".concat(i.config.xaxis.labels.rotate," 0 0)"),!1)};b=k(h),h!==u&&(v=k(u)),e.height=(b.height>v.height?b.height:v.height)/1.5,e.width=b.width>v.width?b.width:v.width}}else i.globals.rotateXLabels=!1}return i.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,i=this.w;if(!i.globals.hasXaxisGroups)return{width:0,height:0};var n,r=((e=i.config.xaxis.group.style)===null||e===void 0?void 0:e.fontSize)||i.config.xaxis.labels.style.fontSize,l=i.globals.groups.map(function(b){return b.title}),h=X.getLargestStringFromArr(l),u=this.dCtx.dimHelpers.getLargestStringFromMultiArr(h,l),g=new Q(this.dCtx.ctx),m=g.getTextRects(h,r),y=m;return h!==u&&(y=g.getTextRects(u,r)),n={width:m.width>=y.width?m.width:y.width,height:m.height>=y.height?m.height:y.height},i.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,i=0,n=0;if(e.config.xaxis.title.text!==void 0){var r=new Q(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);i=r.width,n=r.height}return{width:i,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,i=this.w;this.dCtx.timescaleLabels=i.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map(function(l){return l.value}),r=n.reduce(function(l,h){return l===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):l.length>h.length?l:h},0);return 1.05*(e=new Q(this.dCtx.ctx).getTextRects(r,i.config.xaxis.labels.style.fontSize)).width*n.length>i.globals.gridWidth&&i.config.xaxis.labels.rotate!==0&&(i.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var i=this,n=this.w,r=n.globals,l=n.config,h=l.xaxis.type,u=e.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var g=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,m=function(y,b){l.yaxis.length>1&&function(v){return r.collapsedSeriesIndices.indexOf(v)!==-1}(b)||function(v){if(i.dCtx.timescaleLabels&&i.dCtx.timescaleLabels.length){var k=i.dCtx.timescaleLabels[0],A=i.dCtx.timescaleLabels[i.dCtx.timescaleLabels.length-1].position+u/1.75-i.dCtx.yAxisWidthRight,C=k.position-u/1.75+i.dCtx.yAxisWidthLeft,T=n.config.legend.position==="right"&&i.dCtx.lgRect.width>0?i.dCtx.lgRect.width:0;A>r.svgWidth-r.translateX-T&&(r.skipLastTimelinelabel=!0),C<-(v.show&&!v.floating||l.chart.type!=="bar"&&l.chart.type!=="candlestick"&&l.chart.type!=="rangeBar"&&l.chart.type!=="boxPlot"?10:u/1.75)&&(r.skipFirstTimelinelabel=!0)}else h==="datetime"?i.dCtx.gridPad.right<u&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):h!=="datetime"&&i.dCtx.gridPad.right<u/2-i.dCtx.yAxisWidthRight&&!r.rotateXLabels&&!n.config.xaxis.labels.trim&&(i.dCtx.xPadRight=u/2+1)}(y)};l.yaxis.forEach(function(y,b){g?(i.dCtx.gridPad.left<u&&(i.dCtx.xPadLeft=u/2+1),i.dCtx.xPadRight=u/2+1):m(y,b)})}}]),f}(),Su=function(){function f(e){s(this,f),this.w=e.w,this.dCtx=e}return c(f,[{key:"getyAxisLabelsCoords",value:function(){var e=this,i=this.w,n=[],r=10,l=new fi(this.dCtx.ctx);return i.config.yaxis.map(function(h,u){var g={seriesIndex:u,dataPointIndex:-1,w:i},m=i.globals.yAxisScale[u],y=0;if(!l.isYAxisHidden(u)&&h.labels.show&&h.labels.minWidth!==void 0&&(y=h.labels.minWidth),!l.isYAxisHidden(u)&&h.labels.show&&m.result.length){var b=i.globals.yLabelFormatters[u],v=m.niceMin===Number.MIN_VALUE?0:m.niceMin,k=m.result.reduce(function(F,N){var H,z;return((H=String(b(F,g)))===null||H===void 0?void 0:H.length)>((z=String(b(N,g)))===null||z===void 0?void 0:z.length)?F:N},v),A=k=b(k,g);if(k!==void 0&&k.length!==0||(k=m.niceMax),i.globals.isBarHorizontal){r=0;var C=i.globals.labels.slice();k=X.getLargestStringFromArr(C),k=b(k,{seriesIndex:u,dataPointIndex:-1,w:i}),A=e.dCtx.dimHelpers.getLargestStringFromMultiArr(k,C)}var T=new Q(e.dCtx.ctx),O="rotate(".concat(h.labels.rotate," 0 0)"),L=T.getTextRects(k,h.labels.style.fontSize,h.labels.style.fontFamily,O,!1),P=L;k!==A&&(P=T.getTextRects(A,h.labels.style.fontSize,h.labels.style.fontFamily,O,!1)),n.push({width:(y>P.width||y>L.width?y:P.width>L.width?P.width:L.width)+r,height:P.height>L.height?P.height:L.height})}else n.push({width:0,height:0})}),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,i=this.w,n=[];return i.config.yaxis.map(function(r,l){if(r.show&&r.title.text!==void 0){var h=new Q(e.dCtx.ctx),u="rotate(".concat(r.title.rotate," 0 0)"),g=h.getTextRects(r.title.text,r.title.style.fontSize,r.title.style.fontFamily,u,!1);n.push({width:g.width,height:g.height})}else n.push({width:0,height:0})}),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,i=0,n=0,r=0,l=e.globals.yAxisScale.length>1?10:0,h=new fi(this.dCtx.ctx),u=function(g,m){var y=e.config.yaxis[m].floating,b=0;g.width>0&&!y?(b=g.width+l,function(v){return e.globals.ignoreYAxisIndexes.indexOf(v)>-1}(m)&&(b=b-g.width-l)):b=y||h.isYAxisHidden(m)?0:5,e.config.yaxis[m].opposite?r+=b:n+=b,i+=b};return e.globals.yLabelsCoords.map(function(g,m){u(g,m)}),e.globals.yTitleCoords.map(function(g,m){u(g,m)}),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(i=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=r,i}}]),f}(),Cu=function(){function f(e){s(this,f),this.w=e.w,this.dCtx=e}return c(f,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var i=this.w,n=i.config,r=i.globals;if(r.noData||r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.series.length)return 0;var l=function(k){return["bar","rangeBar","candlestick","boxPlot"].includes(k)},h=n.chart.type,u=0,g=l(h)?n.series.length:1;r.comboBarCount>0&&(g=r.comboBarCount),r.collapsedSeries.forEach(function(k){l(k.type)&&(g-=1)}),n.chart.stacked&&(g=1);var m=l(h)||r.comboBarCount>0,y=Math.abs(r.initialMaxX-r.initialMinX);if(m&&r.isXNumeric&&!r.isBarHorizontal&&g>0&&y!==0){y<=3&&(y=r.dataPoints);var b=y/e,v=r.minXDiff&&r.minXDiff/b>0?r.minXDiff/b:0;v>e/2&&(v/=2),(u=v*parseInt(n.plotOptions.bar.columnWidth,10)/100)<1&&(u=1),r.barPadForNumericAxis=u}return u}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,i=this.w,n=i.globals,r=this.dCtx.isSparkline||!n.axisCharts?0:10;["title","subtitle"].forEach(function(u){i.config[u].text!==void 0?r+=i.config[u].margin:r+=e.dCtx.isSparkline||!n.axisCharts?0:5}),!i.config.legend.show||i.config.legend.position!=="bottom"||i.config.legend.floating||n.axisCharts||(r+=10);var l=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),h=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight-=l.height+h.height+r,n.translateY+=l.height+h.height+r}},{key:"setGridXPosForDualYAxis",value:function(e,i){var n=this.w,r=new fi(this.dCtx.ctx);n.config.yaxis.forEach(function(l,h){n.globals.ignoreYAxisIndexes.indexOf(h)!==-1||l.floating||r.isYAxisHidden(h)||(l.opposite&&(n.globals.translateX-=i[h].width+e[h].width+parseInt(l.labels.style.fontSize,10)/1.2+12),n.globals.translateX<2&&(n.globals.translateX=2))})}}]),f}(),wn=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new wu(this),this.dimYAxis=new Su(this),this.dimXAxis=new ku(this),this.dimGrid=new Cu(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return c(f,[{key:"plotCoords",value:function(){var e=this,i=this.w,n=i.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var r=Array.isArray(i.config.stroke.width)?Math.max.apply(Math,Y(i.config.stroke.width)):i.config.stroke.width;this.isSparkline&&((i.config.markers.discrete.length>0||i.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(h){var u=R(h,2),g=u[0],m=u[1];e.gridPad[g]=Math.max(m,e.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(r/2,this.gridPad.top),this.gridPad.bottom=Math.max(r/2,this.gridPad.bottom)),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var l=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*l,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(l>0?l:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,i=this.w,n=i.globals,r=this.dimYAxis.getyAxisLabelsCoords(),l=this.dimYAxis.getyAxisTitleCoords();n.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),i.globals.yLabelsCoords=[],i.globals.yTitleCoords=[],i.config.yaxis.map(function(k,A){i.globals.yLabelsCoords.push({width:r[A].width,index:A}),i.globals.yTitleCoords.push({width:l[A].width,index:A})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var h=this.dimXAxis.getxAxisLabelsCoords(),u=this.dimXAxis.getxAxisGroupLabelsCoords(),g=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(h,g,u),n.translateXAxisY=i.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=i.globals.rotateXLabels&&i.globals.isXNumeric&&i.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,i.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(i.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+i.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+i.config.xaxis.labels.offsetX;var m=this.yAxisWidth,y=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-g.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-h.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var b=10;(i.config.chart.type==="radar"||this.isSparkline)&&(m=0,y=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||i.config.chart.type==="treemap")&&(m=0,y=0,b=0),this.isSparkline||i.config.chart.type==="treemap"||this.dimXAxis.additionalPaddingXLabels(h);var v=function(){n.translateX=m+e.datalabelsCoords.width,n.gridHeight=n.svgHeight-e.lgRect.height-y-(e.isSparkline||i.config.chart.type==="treemap"?0:i.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-m-2*e.datalabelsCoords.width};switch(i.config.xaxis.position==="top"&&(b=n.xAxisHeight-i.config.xaxis.axisTicks.height-5),i.config.legend.position){case"bottom":n.translateY=b,v();break;case"top":n.translateY=this.lgRect.height+b,v();break;case"left":n.translateY=b,n.translateX=this.lgRect.width+m+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-y-12,n.gridWidth=n.svgWidth-this.lgRect.width-m-2*this.datalabelsCoords.width;break;case"right":n.translateY=b,n.translateX=m+this.datalabelsCoords.width,n.gridHeight=n.svgHeight-y-12,n.gridWidth=n.svgWidth-this.lgRect.width-m-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(l,r),new Xr(this.ctx).setYAxisXPosition(r,l)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,i=e.globals,n=e.config,r=0;e.config.legend.show&&!e.config.legend.floating&&(r=20);var l=n.chart.type==="pie"||n.chart.type==="polarArea"||n.chart.type==="donut"?"pie":"radialBar",h=n.plotOptions[l].offsetY,u=n.plotOptions[l].offsetX;if(!n.legend.show||n.legend.floating){i.gridHeight=i.svgHeight;var g=i.dom.elWrap.getBoundingClientRect().width;return i.gridWidth=Math.min(g,i.gridHeight),i.translateY=h,void(i.translateX=u+(i.svgWidth-i.gridWidth)/2)}switch(n.legend.position){case"bottom":i.gridHeight=i.svgHeight-this.lgRect.height,i.gridWidth=i.svgWidth,i.translateY=h-10,i.translateX=u+(i.svgWidth-i.gridWidth)/2;break;case"top":i.gridHeight=i.svgHeight-this.lgRect.height,i.gridWidth=i.svgWidth,i.translateY=this.lgRect.height+h+10,i.translateX=u+(i.svgWidth-i.gridWidth)/2;break;case"left":i.gridWidth=i.svgWidth-this.lgRect.width-r,i.gridHeight=n.chart.height!=="auto"?i.svgHeight:i.gridWidth,i.translateY=h,i.translateX=u+this.lgRect.width+r;break;case"right":i.gridWidth=i.svgWidth-this.lgRect.width-r-5,i.gridHeight=n.chart.height!=="auto"?i.svgHeight:i.gridWidth,i.translateY=h,i.translateX=u+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,i,n){var r=this.w,l=r.globals.hasXaxisGroups?2:1,h=n.height+e.height+i.height,u=r.globals.isMultiLineX?1.2:r.globals.LINE_HEIGHT_RATIO,g=r.globals.rotateXLabels?22:10,m=r.globals.rotateXLabels&&r.config.legend.position==="bottom"?10:0;this.xAxisHeight=h*u+l*g+m,this.xAxisWidth=e.width,this.xAxisHeight-i.height>r.config.xaxis.labels.maxHeight&&(this.xAxisHeight=r.config.xaxis.labels.maxHeight),r.config.xaxis.labels.minHeight&&this.xAxisHeight<r.config.xaxis.labels.minHeight&&(this.xAxisHeight=r.config.xaxis.labels.minHeight),r.config.xaxis.floating&&(this.xAxisHeight=0);var y=0,b=0;r.config.yaxis.forEach(function(v){y+=v.labels.minWidth,b+=v.labels.maxWidth}),this.yAxisWidth<y&&(this.yAxisWidth=y),this.yAxisWidth>b&&(this.yAxisWidth=b)}}]),f}(),Au=function(){function f(e){s(this,f),this.w=e.w,this.lgCtx=e}return c(f,[{key:"getLegendStyles",value:function(){var e,i,n,r=document.createElement("style");r.setAttribute("type","text/css");var l=((e=this.lgCtx.ctx)===null||e===void 0||(i=e.opts)===null||i===void 0||(n=i.chart)===null||n===void 0?void 0:n.nonce)||this.w.config.chart.nonce;l&&r.setAttribute("nonce",l);var h=document.createTextNode(`
      .apexcharts-flip-y {
        transform: scaleY(-1) translateY(-100%);
        transform-origin: top;
        transform-box: fill-box;
      }
      .apexcharts-flip-x {
        transform: scaleX(-1);
        transform-origin: center;
        transform-box: fill-box;
      }
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apexcharts-legend-group-horizontal {
        flex-direction: column;
      }
      .apexcharts-legend-group {
        display: flex;
      }
      .apexcharts-legend-group-vertical {
        flex-direction: column-reverse;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
        align-items: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
        align-items: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
        align-items: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 1px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }

    `);return r.appendChild(h),r}},{key:"getLegendDimensions",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),i=e.width;return{clwh:e.height,clww:i}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(e,i){var n=this,r=this.w;if(r.globals.axisCharts||r.config.chart.type==="radialBar"){r.globals.resized=!0;var l=null,h=null;r.globals.risingSeries=[],r.globals.axisCharts?(l=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),h=parseInt(l.getAttribute("data:realIndex"),10)):(l=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),h=parseInt(l.getAttribute("rel"),10)-1),i?[{cs:r.globals.collapsedSeries,csi:r.globals.collapsedSeriesIndices},{cs:r.globals.ancillaryCollapsedSeries,csi:r.globals.ancillaryCollapsedSeriesIndices}].forEach(function(y){n.riseCollapsedSeries(y.cs,y.csi,h)}):this.hideSeries({seriesEl:l,realIndex:h})}else{var u=r.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(e+1,"'] path")),g=r.config.chart.type;if(g==="pie"||g==="polarArea"||g==="donut"){var m=r.config.plotOptions.pie.donut.labels;new Q(this.lgCtx.ctx).pathMouseDown(u,null),this.lgCtx.ctx.pie.printDataLabelsInner(u.node,m)}u.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(e){var i=e.realIndex,n=this.w,r=n.globals,l=X.clone(n.config.series);if(r.axisCharts){var h=n.config.yaxis[r.seriesYAxisReverseMap[i]],u={index:i,data:l[i].data.slice(),type:l[i].type||n.config.chart.type};if(h&&h.show&&h.showAlways)r.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(r.ancillaryCollapsedSeries.push(u),r.ancillaryCollapsedSeriesIndices.push(i));else if(r.collapsedSeriesIndices.indexOf(i)<0){r.collapsedSeries.push(u),r.collapsedSeriesIndices.push(i);var g=r.risingSeries.indexOf(i);r.risingSeries.splice(g,1)}}else r.collapsedSeries.push({index:i,data:l[i]}),r.collapsedSeriesIndices.push(i);return r.allSeriesCollapsed=r.collapsedSeries.length+r.ancillaryCollapsedSeries.length===n.config.series.length,this._getSeriesBasedOnCollapsedState(l)}},{key:"hideSeries",value:function(e){for(var i=e.seriesEl,n=e.realIndex,r=this.w,l=this.getSeriesAfterCollapsing({realIndex:n}),h=i.childNodes,u=0;u<h.length;u++)h[u].classList.contains("apexcharts-series-markers-wrap")&&(h[u].classList.contains("apexcharts-hide")?h[u].classList.remove("apexcharts-hide"):h[u].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(l,r.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,i,n){var r=this.w,l=X.clone(r.config.series);if(e.length>0){for(var h=0;h<e.length;h++)e[h].index===n&&(r.globals.axisCharts?l[n].data=e[h].data.slice():l[n]=e[h].data,typeof l[n]!="number"&&(l[n].hidden=!1),e.splice(h,1),i.splice(h,1),r.globals.risingSeries.push(n));l=this._getSeriesBasedOnCollapsedState(l),this.lgCtx.ctx.updateHelpers._updateSeries(l,r.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var i=this.w,n=0;return i.globals.axisCharts?e.forEach(function(r,l){i.globals.collapsedSeriesIndices.indexOf(l)<0&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(l)<0||(e[l].data=[],n++)}):e.forEach(function(r,l){!i.globals.collapsedSeriesIndices.indexOf(l)<0&&(e[l]=0,n++)}),i.globals.allSeriesCollapsed=n===e.length,e}}]),f}(),tl=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new Au(this)}return c(f,[{key:"init",value:function(){var e=this.w,i=e.globals,n=e.config,r=n.legend.showForSingleSeries&&i.series.length===1||this.isBarsDistributed||i.series.length>1;if(this.legendHelpers.appendToForeignObject(),(r||!i.axisCharts)&&n.legend.show){for(;i.dom.elLegendWrap.firstChild;)i.dom.elLegendWrap.removeChild(i.dom.elLegendWrap.firstChild);this.drawLegends(),n.legend.position==="bottom"||n.legend.position==="top"?this.legendAlignHorizontal():n.legend.position!=="right"&&n.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(e){var i=e.i,n=e.fillcolor,r=this.w,l=document.createElement("span");l.classList.add("apexcharts-legend-marker");var h=r.config.legend.markers.shape||r.config.markers.shape,u=h;Array.isArray(h)&&(u=h[i]);var g=Array.isArray(r.config.legend.markers.size)?parseFloat(r.config.legend.markers.size[i]):parseFloat(r.config.legend.markers.size),m=Array.isArray(r.config.legend.markers.offsetX)?parseFloat(r.config.legend.markers.offsetX[i]):parseFloat(r.config.legend.markers.offsetX),y=Array.isArray(r.config.legend.markers.offsetY)?parseFloat(r.config.legend.markers.offsetY[i]):parseFloat(r.config.legend.markers.offsetY),b=Array.isArray(r.config.legend.markers.strokeWidth)?parseFloat(r.config.legend.markers.strokeWidth[i]):parseFloat(r.config.legend.markers.strokeWidth),v=l.style;if(v.height=2*(g+b)+"px",v.width=2*(g+b)+"px",v.left=m+"px",v.top=y+"px",r.config.legend.markers.customHTML)v.background="transparent",v.color=n[i],Array.isArray(r.config.legend.markers.customHTML)?r.config.legend.markers.customHTML[i]&&(l.innerHTML=r.config.legend.markers.customHTML[i]()):l.innerHTML=r.config.legend.markers.customHTML();else{var k=new hs(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(u),seriesIndex:i,strokeWidth:b,size:g}),A=window.SVG().addTo(l).size("100%","100%"),C=new Q(this.ctx).drawMarker(0,0,I(I({},k),{},{pointFillColor:Array.isArray(n)?n[i]:k.pointFillColor,shape:u}));r.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(T){T.node.classList.contains("apexcharts-marker-triangle")?T.node.style.transform="translate(50%, 45%)":T.node.style.transform="translate(50%, 50%)"}),A.add(C)}return l}},{key:"drawLegends",value:function(){var e=this,i=this,n=this.w,r=n.config.legend.fontFamily,l=n.globals.seriesNames,h=n.config.legend.markers.fillColors?n.config.legend.markers.fillColors.slice():n.globals.colors.slice();if(n.config.chart.type==="heatmap"){var u=n.config.plotOptions.heatmap.colorScale.ranges;l=u.map(function(k){return k.name?k.name:k.from+" - "+k.to}),h=u.map(function(k){return k.color})}else this.isBarsDistributed&&(l=n.globals.labels.slice());n.config.legend.customLegendItems.length&&(l=n.config.legend.customLegendItems);var g=n.globals.legendFormatter,m=n.config.legend.inverseOrder,y=[];n.globals.seriesGroups.length>1&&n.config.legend.clusterGroupedSeries&&n.globals.seriesGroups.forEach(function(k,A){y[A]=document.createElement("div"),y[A].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(A)),n.config.legend.clusterGroupedSeriesOrientation==="horizontal"?n.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):y[A].classList.add("apexcharts-legend-group-vertical")});for(var b=function(k){var A,C=g(l[k],{seriesIndex:k,w:n}),T=!1,O=!1;if(n.globals.collapsedSeries.length>0)for(var L=0;L<n.globals.collapsedSeries.length;L++)n.globals.collapsedSeries[L].index===k&&(T=!0);if(n.globals.ancillaryCollapsedSeriesIndices.length>0)for(var P=0;P<n.globals.ancillaryCollapsedSeriesIndices.length;P++)n.globals.ancillaryCollapsedSeriesIndices[P]===k&&(O=!0);var F=e.createLegendMarker({i:k,fillcolor:h});Q.setAttrs(F,{rel:k+1,"data:collapsed":T||O}),(T||O)&&F.classList.add("apexcharts-inactive-legend");var N=document.createElement("div"),H=document.createElement("span");H.classList.add("apexcharts-legend-text"),H.innerHTML=Array.isArray(C)?C.join(" "):C;var z=n.config.legend.labels.useSeriesColors?n.globals.colors[k]:Array.isArray(n.config.legend.labels.colors)?(A=n.config.legend.labels.colors)===null||A===void 0?void 0:A[k]:n.config.legend.labels.colors;z||(z=n.config.chart.foreColor),H.style.color=z,H.style.fontSize=parseFloat(n.config.legend.fontSize)+"px",H.style.fontWeight=n.config.legend.fontWeight,H.style.fontFamily=r||n.config.chart.fontFamily,Q.setAttrs(H,{rel:k+1,i:k,"data:default-text":encodeURIComponent(C),"data:collapsed":T||O}),N.appendChild(F),N.appendChild(H);var B=new je(e.ctx);n.config.legend.showForZeroSeries||B.getSeriesTotalByIndex(k)===0&&B.seriesHaveSameValues(k)&&!B.isSeriesNull(k)&&n.globals.collapsedSeriesIndices.indexOf(k)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(k)===-1&&N.classList.add("apexcharts-hidden-zero-series"),n.config.legend.showForNullSeries||B.isSeriesNull(k)&&n.globals.collapsedSeriesIndices.indexOf(k)===-1&&n.globals.ancillaryCollapsedSeriesIndices.indexOf(k)===-1&&N.classList.add("apexcharts-hidden-null-series"),y.length?n.globals.seriesGroups.forEach(function(W,V){var G;W.includes((G=n.config.series[k])===null||G===void 0?void 0:G.name)&&(n.globals.dom.elLegendWrap.appendChild(y[V]),y[V].appendChild(N))}):n.globals.dom.elLegendWrap.appendChild(N),n.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(n.config.legend.horizontalAlign)),n.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+n.config.legend.position),N.classList.add("apexcharts-legend-series"),N.style.margin="".concat(n.config.legend.itemMargin.vertical,"px ").concat(n.config.legend.itemMargin.horizontal,"px"),n.globals.dom.elLegendWrap.style.width=n.config.legend.width?n.config.legend.width+"px":"",n.globals.dom.elLegendWrap.style.height=n.config.legend.height?n.config.legend.height+"px":"",Q.setAttrs(N,{rel:k+1,seriesName:X.escapeString(l[k]),"data:collapsed":T||O}),(T||O)&&N.classList.add("apexcharts-inactive-legend"),n.config.legend.onItemClick.toggleDataSeries||N.classList.add("apexcharts-no-click")},v=m?l.length-1:0;m?v>=0:v<=l.length-1;m?v--:v++)b(v);n.globals.dom.elWrap.addEventListener("click",i.onLegendClick,!0),n.config.legend.onItemHover.highlightDataSeries&&n.config.legend.customLegendItems.length===0&&(n.globals.dom.elWrap.addEventListener("mousemove",i.onLegendHovered,!0),n.globals.dom.elWrap.addEventListener("mouseout",i.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,i){var n=this.w,r=n.globals.dom.elLegendWrap,l=r.clientHeight,h=0,u=0;if(n.config.legend.position==="bottom")u=n.globals.svgHeight-Math.min(l,n.globals.svgHeight/2)-5;else if(n.config.legend.position==="top"){var g=new wn(this.ctx),m=g.dimHelpers.getTitleSubtitleCoords("title").height,y=g.dimHelpers.getTitleSubtitleCoords("subtitle").height;u=(m>0?m-10:0)+(y>0?y-10:0)}r.style.position="absolute",h=h+e+n.config.legend.offsetX,u=u+i+n.config.legend.offsetY,r.style.left=h+"px",r.style.top=u+"px",n.config.legend.position==="right"&&(r.style.left="auto",r.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach(function(b){r.style[b]&&(r.style[b]=parseInt(n.config.legend[b],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.elLegendWrap.style.right=0;var i=new wn(this.ctx),n=i.dimHelpers.getTitleSubtitleCoords("title"),r=i.dimHelpers.getTitleSubtitleCoords("subtitle"),l=0;e.config.legend.position==="top"&&(l=n.height+r.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,l)}},{key:"legendAlignVertical",value:function(){var e=this.w,i=this.legendHelpers.getLegendDimensions(),n=0;e.config.legend.position==="left"&&(n=20),e.config.legend.position==="right"&&(n=e.globals.svgWidth-i.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var i=this.w,n=e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if(i.config.chart.type==="heatmap"||this.isBarsDistributed){if(n){var r=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,r,this.w]),new zt(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new zt(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var i=this.w;if(!i.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-series")||e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,r=e.target.getAttribute("data:collapsed")==="true",l=this.w.config.chart.events.legendClick;typeof l=="function"&&l(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var h=this.w.config.legend.markers.onClick;typeof h=="function"&&e.target.classList.contains("apexcharts-legend-marker")&&(h(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),i.config.chart.type!=="treemap"&&i.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&i.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,r)}}}]),f}(),il=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return c(f,[{key:"createToolbar",value:function(){var e=this,i=this.w,n=function(){return document.createElement("div")},r=n();if(r.setAttribute("class","apexcharts-toolbar"),r.style.top=i.config.chart.toolbar.offsetY+"px",r.style.right=3-i.config.chart.toolbar.offsetX+"px",i.globals.dom.elWrap.appendChild(r),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=i.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var l=0;l<this.t.customIcons.length;l++)this.elCustomIcons.push(n());var h=[],u=function(b,v,k){var A=b.toLowerCase();e.t[A]&&i.config.chart.zoom.enabled&&h.push({el:v,icon:typeof e.t[A]=="string"?e.t[A]:k,title:e.localeValues[b],class:"apexcharts-".concat(A,"-icon")})};u("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),u("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var g=function(b){e.t[b]&&i.config.chart[b].enabled&&h.push({el:b==="zoom"?e.elZoom:e.elSelection,icon:typeof e.t[b]=="string"?e.t[b]:b==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:e.localeValues[b==="zoom"?"selectionZoom":"selection"],class:i.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(b,"-icon")})};g("zoom"),g("selection"),this.t.pan&&i.config.chart.zoom.enabled&&h.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:i.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),u("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&h.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var m=0;m<this.elCustomIcons.length;m++)h.push({el:this.elCustomIcons[m],icon:this.t.customIcons[m].icon,title:this.t.customIcons[m].title,index:this.t.customIcons[m].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[m].class});h.forEach(function(b,v){b.index&&X.moveIndexInArray(h,v,b.index)});for(var y=0;y<h.length;y++)Q.setAttrs(h[y].el,{class:h[y].class,title:h[y].title}),h[y].el.innerHTML=h[y].icon,r.appendChild(h[y].el);this._createHamburgerMenu(r),i.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):i.globals.panEnabled?this.elPan.classList.add(this.selectedClass):i.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),Q.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var i=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],n=0;n<i.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=i[n].title,Q.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(i[n].name),title:i[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(n){n.classList.contains("exportSVG")?n.addEventListener("click",e.handleDownload.bind(e,"svg")):n.classList.contains("exportPNG")?n.addEventListener("click",e.handleDownload.bind(e,"png")):n.classList.contains("exportCSV")&&n.addEventListener("click",e.handleDownload.bind(e,"csv"))});for(var i=0;i<this.t.customIcons.length;i++)this.elCustomIcons[i].addEventListener("click",this.t.customIcons[i].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach(function(i){i.ctx.toolbar.toggleOtherControls();var n=e==="selection"?i.ctx.toolbar.elSelection:i.ctx.toolbar.elZoom,r=e==="selection"?"selectionEnabled":"zoomEnabled";i.w.globals[r]=!i.w.globals[r],n.classList.contains(i.ctx.toolbar.selectedClass)?n.classList.remove(i.ctx.toolbar.selectedClass):n.classList.add(i.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),e==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var i=e==="pan"?this.elPan:this.elZoom,n=e==="pan"?this.elZoom:this.elPan;i&&i.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var e=this,i=this.w;i.globals.panEnabled=!1,i.globals.zoomEnabled=!1,i.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(n){n&&n.classList.remove(e.selectedClass)})}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var i=(this.minX+this.maxX)/2,n=(this.minX+i)/2,r=(this.maxX+i)/2,l=this._getNewMinXMaxX(n,r);e.globals.disableZoomIn||this.zoomUpdateOptions(l.minX,l.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!(e.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var i=(this.minX+this.maxX)/2,n=this.minX-(i-this.minX),r=this.maxX-(i-this.maxX),l=this._getNewMinXMaxX(n,r);e.globals.disableZoomOut||this.zoomUpdateOptions(l.minX,l.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,i){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(i):i}}},{key:"zoomUpdateOptions",value:function(e,i){var n=this.w;if(e!==void 0||i!==void 0){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,i=n.globals.dataPoints),i-e<2))){var r={min:e,max:i},l=this.getBeforeZoomRange(r);l&&(r=l.xaxis);var h={xaxis:r},u=X.clone(n.globals.initialConfig.yaxis);n.config.chart.group||(h.yaxis=u),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(h,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(r,u)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,i){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:i})}},{key:"getBeforeZoomRange",value:function(e,i){var n=null;return typeof this.ev.beforeZoom=="function"&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:i})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout(function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(e){var i=this.w,n=new vn(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:i.config.series,columnDelimiter:i.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach(function(i){var n=i.w;if(n.globals.lastXAxis.min=n.globals.initialConfig.xaxis.min,n.globals.lastXAxis.max=n.globals.initialConfig.xaxis.max,i.updateHelpers.revertDefaultAxisMinMax(),typeof n.config.chart.events.beforeResetZoom=="function"){var r=n.config.chart.events.beforeResetZoom(i,n);r&&i.updateHelpers.revertDefaultAxisMinMax(r)}typeof n.config.chart.events.zoomed=="function"&&i.ctx.toolbar.zoomCallback({min:n.config.xaxis.min,max:n.config.xaxis.max}),n.globals.zoomed=!1;var l=i.ctx.series.emptyCollapsedSeries(X.clone(n.globals.initialSeries));i.updateHelpers._updateSeries(l,n.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),f}(),Mu=function(f){S(i,il);var e=p(i);function i(n){var r;return s(this,i),(r=e.call(this,n)).ctx=n,r.w=n.w,r.dragged=!1,r.graphics=new Q(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r.debounceTimer=null,r.debounceDelay=100,r.wheelDelay=400,r}return c(i,[{key:"init",value:function(n){var r=this,l=n.xyRatios,h=this.w,u=this;this.xyRatios=l,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=h.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new _e(0,0,h.globals.gridWidth,h.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),h.globals.dom.Paper.add(this.zoomRect),h.globals.dom.Paper.add(this.selectionRect),h.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:h.globals.gridWidth,maxY:h.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):h.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:h.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=h.globals.dom.baseEl.querySelector("".concat(h.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(g){r.hoverArea.addEventListener(g,u.svgMouseEvents.bind(u,l),{capture:!1,passive:!0})}),h.config.chart.zoom.enabled&&h.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",u.mouseWheelEvent.bind(u),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(n,r){var l=this.w,h=this.ctx.toolbar,u=l.globals.zoomEnabled?l.config.chart.zoom.type:l.config.chart.selection.type,g=l.config.chart.toolbar.autoSelected;if(r.shiftKey?(this.shiftWasPressed=!0,h.enableZoomPanFromToolbar(g==="pan"?"zoom":"pan")):this.shiftWasPressed&&(h.enableZoomPanFromToolbar(g),this.shiftWasPressed=!1),r.target){var m,y=r.target.classList;if(r.target.parentNode&&r.target.parentNode!==null&&(m=r.target.parentNode.classList),!(y.contains("apexcharts-legend-marker")||y.contains("apexcharts-legend-text")||m&&m.contains("apexcharts-toolbar"))){if(this.clientX=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientX:r.type==="touchend"?r.changedTouches[0].clientX:r.clientX,this.clientY=r.type==="touchmove"||r.type==="touchstart"?r.touches[0].clientY:r.type==="touchend"?r.changedTouches[0].clientY:r.clientY,r.type==="mousedown"&&r.which===1||r.type==="touchstart"){var b=this.gridRect.getBoundingClientRect();this.startX=this.clientX-b.left-l.globals.barPadForNumericAxis,this.startY=this.clientY-b.top,this.dragged=!1,this.w.globals.mousedown=!0}(r.type==="mousemove"&&r.which===1||r.type==="touchmove")&&(this.dragged=!0,l.globals.panEnabled?(l.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:u,xyRatios:n})):(this.w.globals.mousedown&&l.globals.zoomEnabled||this.w.globals.mousedown&&l.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:u}))),r.type!=="mouseup"&&r.type!=="touchend"&&r.type!=="mouseleave"||this.handleMouseUp({zoomtype:u}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(n){var r,l=n.zoomtype,h=n.isResized,u=this.w,g=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();g&&(this.w.globals.mousedown||h)&&(this.endX=this.clientX-g.left-u.globals.barPadForNumericAxis,this.endY=this.clientY-g.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(u.globals.zoomEnabled||u.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:l}),u.globals.panEnabled&&u.config.xaxis.convertedCatToNumeric&&this.delayedPanScrolled()),u.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(n){var r=this,l=this.w;n.preventDefault();var h=Date.now();h-l.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(n),l.globals.lastWheelExecution=h),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){h-l.globals.lastWheelExecution>r.wheelDelay&&(r.executeMouseWheelZoom(n),l.globals.lastWheelExecution=h)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(n){var r,l=this.w;this.minX=l.globals.isRangeBar?l.globals.minY:l.globals.minX,this.maxX=l.globals.isRangeBar?l.globals.maxY:l.globals.maxX;var h=(r=this.gridRect)===null||r===void 0?void 0:r.getBoundingClientRect();if(h){var u,g,m,y=(n.clientX-h.left)/h.width,b=this.minX,v=this.maxX,k=v-b;if(n.deltaY<0){var A=b+y*k;g=A-(u=.5*k)/2,m=A+u/2}else g=b-(u=1.5*k)/2,m=v+u/2;if(!l.globals.isRangeBar){g=Math.max(g,l.globals.initialMinX),m=Math.min(m,l.globals.initialMaxX);var C=.01*(l.globals.initialMaxX-l.globals.initialMinX);if(m-g<C){var T=(g+m)/2;g=T-C/2,m=T+C/2}}var O=this._getNewMinXMaxX(g,m);isNaN(O.minX)||isNaN(O.maxX)||this.zoomUpdateOptions(O.minX,O.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var n=this,r=this.w;if(this.selectionRect){var l=this.selectionRect.node.getBoundingClientRect();l.width>0&&l.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(h,u,g,m,y){return y==="l"||y==="r"?h.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):h.circle(0)},updateHandle:function(h,u){return h.center(u[0],u[1])}}).resize().on("resize",function(){var h=r.globals.zoomEnabled?r.config.chart.zoom.type:r.config.chart.selection.type;n.handleMouseUp({zoomtype:h,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var n=this.w,r=this.xyRatios;if(!n.globals.zoomEnabled){if(n.globals.selection!==void 0&&n.globals.selection!==null)this.drawSelectionRect(I(I({},n.globals.selection),{},{translateX:n.globals.translateX,translateY:n.globals.translateY}));else if(n.config.chart.selection.xaxis.min!==void 0&&n.config.chart.selection.xaxis.max!==void 0){var l=(n.config.chart.selection.xaxis.min-n.globals.minX)/r.xRatio,h=n.globals.gridWidth-(n.globals.maxX-n.config.chart.selection.xaxis.max)/r.xRatio-l;n.globals.isRangeBar&&(l=(n.config.chart.selection.xaxis.min-n.globals.yAxisScale[0].niceMin)/r.invertedYRatio,h=(n.config.chart.selection.xaxis.max-n.config.chart.selection.xaxis.min)/r.invertedYRatio);var u={x:l,y:0,width:h,height:n.globals.gridHeight,translateX:n.globals.translateX,translateY:n.globals.translateY,selectionEnabled:!0};this.drawSelectionRect(u),this.makeSelectionRectDraggable(),typeof n.config.chart.events.selection=="function"&&n.config.chart.events.selection(this.ctx,{xaxis:{min:n.config.chart.selection.xaxis.min,max:n.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(n){var r=n.x,l=n.y,h=n.width,u=n.height,g=n.translateX,m=g===void 0?0:g,y=n.translateY,b=y===void 0?0:y,v=this.w,k=this.zoomRect,A=this.selectionRect;if(this.dragged||v.globals.selection!==null){var C={transform:"translate("+m+", "+b+")"};v.globals.zoomEnabled&&this.dragged&&(h<0&&(h=1),k.attr({x:r,y:l,width:h,height:u,fill:v.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":v.config.chart.zoom.zoomedArea.fill.opacity,stroke:v.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":v.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":v.config.chart.zoom.zoomedArea.stroke.opacity}),Q.setAttrs(k.node,C)),v.globals.selectionEnabled&&(A.attr({x:r,y:l,width:h>0?h:0,height:u>0?u:0,fill:v.config.chart.selection.fill.color,"fill-opacity":v.config.chart.selection.fill.opacity,stroke:v.config.chart.selection.stroke.color,"stroke-width":v.config.chart.selection.stroke.width,"stroke-dasharray":v.config.chart.selection.stroke.dashArray,"stroke-opacity":v.config.chart.selection.stroke.opacity}),Q.setAttrs(A.node,C))}}},{key:"hideSelectionRect",value:function(n){n&&n.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(n){var r=n.context,l=n.zoomtype,h=this.w,u=r,g=this.gridRect.getBoundingClientRect(),m=u.startX-1,y=u.startY,b=!1,v=!1,k=u.clientX-g.left-h.globals.barPadForNumericAxis,A=u.clientY-g.top,C=k-m,T=A-y,O={translateX:h.globals.translateX,translateY:h.globals.translateY};return Math.abs(C+m)>h.globals.gridWidth?C=h.globals.gridWidth-m:k<0&&(C=m),m>k&&(b=!0,C=Math.abs(C)),y>A&&(v=!0,T=Math.abs(T)),O=I(I({},O=l==="x"?{x:b?m-C:m,y:0,width:C,height:h.globals.gridHeight}:l==="y"?{x:0,y:v?y-T:y,width:h.globals.gridWidth,height:T}:{x:b?m-C:m,y:v?y-T:y,width:C,height:T}),{},{translateX:h.globals.translateX,translateY:h.globals.translateY}),u.drawSelectionRect(O),u.selectionDragging("resizing"),O}},{key:"selectionDragging",value:function(n,r){var l=this,h=this.w;if(r){r.preventDefault();var u=r.detail,g=u.handler,m=u.box,y=m.x,b=m.y;y<this.constraints.x&&(y=this.constraints.x),b<this.constraints.y&&(b=this.constraints.y),m.x2>this.constraints.x2&&(y=this.constraints.x2-m.w),m.y2>this.constraints.y2&&(b=this.constraints.y2-m.h),g.move(y,b);var v=this.xyRatios,k=this.selectionRect,A=0;n==="resizing"&&(A=30);var C=function(O){return parseFloat(k.node.getAttribute(O))},T={x:C("x"),y:C("y"),width:C("width"),height:C("height")};h.globals.selection=T,typeof h.config.chart.events.selection=="function"&&h.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var O,L,P,F,N=l.gridRect.getBoundingClientRect(),H=k.node.getBoundingClientRect();h.globals.isRangeBar?(O=h.globals.yAxisScale[0].niceMin+(H.left-N.left)*v.invertedYRatio,L=h.globals.yAxisScale[0].niceMin+(H.right-N.left)*v.invertedYRatio,P=0,F=1):(O=h.globals.xAxisScale.niceMin+(H.left-N.left)*v.xRatio,L=h.globals.xAxisScale.niceMin+(H.right-N.left)*v.xRatio,P=h.globals.yAxisScale[0].niceMin+(N.bottom-H.bottom)*v.yRatio[0],F=h.globals.yAxisScale[0].niceMax-(H.top-N.top)*v.yRatio[0]);var z={xaxis:{min:O,max:L},yaxis:{min:P,max:F}};h.config.chart.events.selection(l.ctx,z),h.config.chart.brush.enabled&&h.config.chart.events.brushScrolled!==void 0&&h.config.chart.events.brushScrolled(l.ctx,z)},A))}}},{key:"selectionDrawn",value:function(n){var r=n.context,l=n.zoomtype,h=this.w,u=r,g=this.xyRatios,m=this.ctx.toolbar;if(u.startX>u.endX){var y=u.startX;u.startX=u.endX,u.endX=y}if(u.startY>u.endY){var b=u.startY;u.startY=u.endY,u.endY=b}var v=void 0,k=void 0;h.globals.isRangeBar?(v=h.globals.yAxisScale[0].niceMin+u.startX*g.invertedYRatio,k=h.globals.yAxisScale[0].niceMin+u.endX*g.invertedYRatio):(v=h.globals.xAxisScale.niceMin+u.startX*g.xRatio,k=h.globals.xAxisScale.niceMin+u.endX*g.xRatio);var A=[],C=[];if(h.config.yaxis.forEach(function(H,z){var B=h.globals.seriesYAxisMap[z][0];A.push(h.globals.yAxisScale[z].niceMax-g.yRatio[B]*u.startY),C.push(h.globals.yAxisScale[z].niceMax-g.yRatio[B]*u.endY)}),u.dragged&&(u.dragX>10||u.dragY>10)&&v!==k){if(h.globals.zoomEnabled){var T=X.clone(h.globals.initialConfig.yaxis),O=X.clone(h.globals.initialConfig.xaxis);if(h.globals.zoomed=!0,h.config.xaxis.convertedCatToNumeric&&(v=Math.floor(v),k=Math.floor(k),v<1&&(v=1,k=h.globals.dataPoints),k-v<2&&(k=v+1)),l!=="xy"&&l!=="x"||(O={min:v,max:k}),l!=="xy"&&l!=="y"||T.forEach(function(H,z){T[z].min=C[z],T[z].max=A[z]}),m){var L=m.getBeforeZoomRange(O,T);L&&(O=L.xaxis?L.xaxis:O,T=L.yaxis?L.yaxis:T)}var P={xaxis:O};h.config.chart.group||(P.yaxis=T),u.ctx.updateHelpers._updateOptions(P,!1,u.w.config.chart.animations.dynamicAnimation.enabled),typeof h.config.chart.events.zoomed=="function"&&m.zoomCallback(O,T)}else if(h.globals.selectionEnabled){var F,N=null;F={min:v,max:k},l!=="xy"&&l!=="y"||(N=X.clone(h.config.yaxis)).forEach(function(H,z){N[z].min=C[z],N[z].max=A[z]}),h.globals.selection=u.selection,typeof h.config.chart.events.selection=="function"&&h.config.chart.events.selection(u.ctx,{xaxis:F,yaxis:N})}}}},{key:"panDragging",value:function(n){var r=n.context,l=this.w,h=r;if(l.globals.lastClientPosition.x!==void 0){var u=l.globals.lastClientPosition.x-h.clientX,g=l.globals.lastClientPosition.y-h.clientY;Math.abs(u)>Math.abs(g)&&u>0?this.moveDirection="left":Math.abs(u)>Math.abs(g)&&u<0?this.moveDirection="right":Math.abs(g)>Math.abs(u)&&g>0?this.moveDirection="up":Math.abs(g)>Math.abs(u)&&g<0&&(this.moveDirection="down")}l.globals.lastClientPosition={x:h.clientX,y:h.clientY};var m=l.globals.isRangeBar?l.globals.minY:l.globals.minX,y=l.globals.isRangeBar?l.globals.maxY:l.globals.maxX;l.config.xaxis.convertedCatToNumeric||h.panScrolled(m,y)}},{key:"delayedPanScrolled",value:function(){var n=this.w,r=n.globals.minX,l=n.globals.maxX,h=(n.globals.maxX-n.globals.minX)/2;this.moveDirection==="left"?(r=n.globals.minX+h,l=n.globals.maxX+h):this.moveDirection==="right"&&(r=n.globals.minX-h,l=n.globals.maxX-h),r=Math.floor(r),l=Math.floor(l),this.updateScrolledChart({xaxis:{min:r,max:l}},r,l)}},{key:"panScrolled",value:function(n,r){var l=this.w,h=this.xyRatios,u=X.clone(l.globals.initialConfig.yaxis),g=h.xRatio,m=l.globals.minX,y=l.globals.maxX;l.globals.isRangeBar&&(g=h.invertedYRatio,m=l.globals.minY,y=l.globals.maxY),this.moveDirection==="left"?(n=m+l.globals.gridWidth/15*g,r=y+l.globals.gridWidth/15*g):this.moveDirection==="right"&&(n=m-l.globals.gridWidth/15*g,r=y-l.globals.gridWidth/15*g),l.globals.isRangeBar||(n<l.globals.initialMinX||r>l.globals.initialMaxX)&&(n=m,r=y);var b={xaxis:{min:n,max:r}};l.config.chart.group||(b.yaxis=u),this.updateScrolledChart(b,n,r)}},{key:"updateScrolledChart",value:function(n,r,l){var h=this.w;this.ctx.updateHelpers._updateOptions(n,!1,!1),typeof h.config.chart.events.scrolled=="function"&&h.config.chart.events.scrolled(this.ctx,{xaxis:{min:r,max:l}})}}]),i}(),sl=function(){function f(e){s(this,f),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return c(f,[{key:"getNearestValues",value:function(e){var i=e.hoverArea,n=e.elGrid,r=e.clientX,l=e.clientY,h=this.w,u=n.getBoundingClientRect(),g=u.width,m=u.height,y=g/(h.globals.dataPoints-1),b=m/h.globals.dataPoints,v=this.hasBars();!h.globals.comboCharts&&!v||h.config.xaxis.convertedCatToNumeric||(y=g/h.globals.dataPoints);var k=r-u.left-h.globals.barPadForNumericAxis,A=l-u.top;k<0||A<0||k>g||A>m?(i.classList.remove("hovering-zoom"),i.classList.remove("hovering-pan")):h.globals.zoomEnabled?(i.classList.remove("hovering-pan"),i.classList.add("hovering-zoom")):h.globals.panEnabled&&(i.classList.remove("hovering-zoom"),i.classList.add("hovering-pan"));var C=Math.round(k/y),T=Math.floor(A/b);v&&!h.config.xaxis.convertedCatToNumeric&&(C=Math.ceil(k/y),C-=1);var O=null,L=null,P=h.globals.seriesXvalues.map(function(B){return B.filter(function(W){return X.isNumber(W)})}),F=h.globals.seriesYvalues.map(function(B){return B.filter(function(W){return X.isNumber(W)})});if(h.globals.isXNumeric){var N=this.ttCtx.getElGrid().getBoundingClientRect(),H=k*(N.width/g),z=A*(N.height/m);O=(L=this.closestInMultiArray(H,z,P,F)).index,C=L.j,O!==null&&(P=h.globals.seriesXvalues[O],C=(L=this.closestInArray(H,P)).index)}return h.globals.capturedSeriesIndex=O===null?-1:O,(!C||C<1)&&(C=0),h.globals.isBarHorizontal?h.globals.capturedDataPointIndex=T:h.globals.capturedDataPointIndex=C,{capturedSeries:O,j:h.globals.isBarHorizontal?T:C,hoverX:k,hoverY:A}}},{key:"closestInMultiArray",value:function(e,i,n,r){var l=this.w,h=0,u=null,g=-1;l.globals.series.length>1?h=this.getFirstActiveXArray(n):u=0;var m=n[h][0],y=Math.abs(e-m);if(n.forEach(function(k){k.forEach(function(A,C){var T=Math.abs(e-A);T<=y&&(y=T,g=C)})}),g!==-1){var b=r[h][g],v=Math.abs(i-b);u=h,r.forEach(function(k,A){var C=Math.abs(i-k[g]);C<=v&&(v=C,u=A)})}return{index:u,j:g}}},{key:"getFirstActiveXArray",value:function(e){for(var i=this.w,n=0,r=e.map(function(h,u){return h.length>0?u:-1}),l=0;l<r.length;l++)if(r[l]!==-1&&i.globals.collapsedSeriesIndices.indexOf(l)===-1&&i.globals.ancillaryCollapsedSeriesIndices.indexOf(l)===-1){n=r[l];break}return n}},{key:"closestInArray",value:function(e,i){for(var n=i[0],r=null,l=Math.abs(e-n),h=0;h<i.length;h++){var u=Math.abs(e-i[h]);u<l&&(l=u,r=h)}return{index:r}}},{key:"isXoverlap",value:function(e){var i=[],n=this.w.globals.seriesX.filter(function(l){return l[0]!==void 0});if(n.length>0)for(var r=0;r<n.length-1;r++)n[r][e]!==void 0&&n[r+1][e]!==void 0&&n[r][e]!==n[r+1][e]&&i.push("unEqual");return i.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,i=this.w.globals.initialSeries,n=0;n<i.length-1;n++)if(i[n].data.length!==i[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return Y(e).reduce(function(i,n){return i+n.getBBox().height},0)}},{key:"getElMarkers",value:function(e){return typeof e=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=Y(e)).sort(function(n,r){var l=Number(n.getAttribute("data:realIndex")),h=Number(r.getAttribute("data:realIndex"));return h<l?1:h>l?-1:0});var i=[];return e.forEach(function(n){i.push(n.querySelector(".apexcharts-marker"))}),i}},{key:"hasMarkers",value:function(e){return this.getElMarkers(e).length>0}},{key:"getPathFromPoint",value:function(e,i){var n=Number(e.getAttribute("cx")),r=Number(e.getAttribute("cy")),l=e.getAttribute("shape");return new Q(this.ctx).getMarkerPath(n,r,l,i)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var i=this.w,n=i.config.markers.hover.size;return n===void 0&&(n=i.globals.markers.size[e]+i.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var i=this.w,n=this.ttCtx;n.allTooltipSeriesGroups.length===0&&(n.allTooltipSeriesGroups=i.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var r=n.allTooltipSeriesGroups,l=0;l<r.length;l++)e==="enable"?(r[l].classList.add("apexcharts-active"),r[l].style.display=i.config.tooltip.items.display):(r[l].classList.remove("apexcharts-active"),r[l].style.display="none")}}]),f}(),Tu=function(){function f(e){s(this,f),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new sl(e)}return c(f,[{key:"drawSeriesTexts",value:function(e){var i=e.shared,n=i===void 0||i,r=e.ttItems,l=e.i,h=l===void 0?0:l,u=e.j,g=u===void 0?null:u,m=e.y1,y=e.y2,b=e.e,v=this.w;v.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:h,j:g,y1:m,y2:y,w:v}):this.toggleActiveInactiveSeries(n,h);var k=this.getValuesToPrint({i:h,j:g});this.printLabels({i:h,j:g,values:k,ttItems:r,shared:n,e:b});var A=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=A.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=A.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var i,n=this,r=e.i,l=e.j,h=e.values,u=e.ttItems,g=e.shared,m=e.e,y=this.w,b=[],v=function(N){return y.globals.seriesGoals[N]&&y.globals.seriesGoals[N][l]&&Array.isArray(y.globals.seriesGoals[N][l])},k=h.xVal,A=h.zVal,C=h.xAxisTTVal,T="",O=y.globals.colors[r];l!==null&&y.config.plotOptions.bar.distributed&&(O=y.globals.colors[l]);for(var L=function(N,H){var z=n.getFormatters(r);T=n.getSeriesName({fn:z.yLbTitleFormatter,index:r,seriesIndex:r,j:l}),y.config.chart.type==="treemap"&&(T=z.yLbTitleFormatter(String(y.config.series[r].data[l].x),{series:y.globals.series,seriesIndex:r,dataPointIndex:l,w:y}));var B=y.config.tooltip.inverseOrder?H:N;if(y.globals.axisCharts){var W=function(q){var U,K,re,ae;return y.globals.isRangeData?z.yLbFormatter((U=y.globals.seriesRangeStart)===null||U===void 0||(K=U[q])===null||K===void 0?void 0:K[l],{series:y.globals.seriesRangeStart,seriesIndex:q,dataPointIndex:l,w:y})+" - "+z.yLbFormatter((re=y.globals.seriesRangeEnd)===null||re===void 0||(ae=re[q])===null||ae===void 0?void 0:ae[l],{series:y.globals.seriesRangeEnd,seriesIndex:q,dataPointIndex:l,w:y}):z.yLbFormatter(y.globals.series[q][l],{series:y.globals.series,seriesIndex:q,dataPointIndex:l,w:y})};if(g)z=n.getFormatters(B),T=n.getSeriesName({fn:z.yLbTitleFormatter,index:B,seriesIndex:r,j:l}),O=y.globals.colors[B],i=W(B),v(B)&&(b=y.globals.seriesGoals[B][l].map(function(q){return{attrs:q,val:z.yLbFormatter(q.value,{seriesIndex:B,dataPointIndex:l,w:y})}}));else{var V,G=m==null||(V=m.target)===null||V===void 0?void 0:V.getAttribute("fill");G&&(G.indexOf("url")!==-1?G.indexOf("Pattern")!==-1&&(O=y.globals.dom.baseEl.querySelector(G.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):O=G),i=W(r),v(r)&&Array.isArray(y.globals.seriesGoals[r][l])&&(b=y.globals.seriesGoals[r][l].map(function(q){return{attrs:q,val:z.yLbFormatter(q.value,{seriesIndex:r,dataPointIndex:l,w:y})}}))}}l===null&&(i=z.yLbFormatter(y.globals.series[r],I(I({},y),{},{seriesIndex:r,dataPointIndex:r}))),n.DOMHandling({i:r,t:B,j:l,ttItems:u,values:{val:i,goalVals:b,xVal:k,xAxisTTVal:C,zVal:A},seriesName:T,shared:g,pColor:O})},P=0,F=y.globals.series.length-1;P<y.globals.series.length;P++,F--)L(P,F)}},{key:"getFormatters",value:function(e){var i,n=this.w,r=n.globals.yLabelFormatters[e];return n.globals.ttVal!==void 0?Array.isArray(n.globals.ttVal)?(r=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,i=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(r=n.globals.ttVal.formatter,typeof n.globals.ttVal.title.formatter=="function"&&(i=n.globals.ttVal.title.formatter)):i=n.config.tooltip.y.title.formatter,typeof r!="function"&&(r=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(l){return l}),typeof i!="function"&&(i=function(l){return l?l+": ":""}),{yLbFormatter:r,yLbTitleFormatter:i}}},{key:"getSeriesName",value:function(e){var i=e.fn,n=e.index,r=e.seriesIndex,l=e.j,h=this.w;return i(String(h.globals.seriesNames[n]),{series:h.globals.series,seriesIndex:r,dataPointIndex:l,w:h})}},{key:"DOMHandling",value:function(e){e.i;var i=e.t,n=e.j,r=e.ttItems,l=e.values,h=e.seriesName,u=e.shared,g=e.pColor,m=this.w,y=this.ttCtx,b=l.val,v=l.goalVals,k=l.xVal,A=l.xAxisTTVal,C=l.zVal,T=null;T=r[i].children,m.config.tooltip.fillSeriesColor&&(r[i].style.backgroundColor=g,T[0].style.display="none"),y.showTooltipTitle&&(y.tooltipTitle===null&&(y.tooltipTitle=m.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),y.tooltipTitle.innerHTML=k),y.isXAxisTooltipEnabled&&(y.xaxisTooltipText.innerHTML=A!==""?A:k);var O=r[i].querySelector(".apexcharts-tooltip-text-y-label");O&&(O.innerHTML=h||"");var L=r[i].querySelector(".apexcharts-tooltip-text-y-value");L&&(L.innerHTML=b!==void 0?b:""),T[0]&&T[0].classList.contains("apexcharts-tooltip-marker")&&(m.config.tooltip.marker.fillColors&&Array.isArray(m.config.tooltip.marker.fillColors)&&(g=m.config.tooltip.marker.fillColors[i]),T[0].style.backgroundColor=g),m.config.tooltip.marker.show||(T[0].style.display="none");var P=r[i].querySelector(".apexcharts-tooltip-text-goals-label"),F=r[i].querySelector(".apexcharts-tooltip-text-goals-value");if(v.length&&m.globals.seriesGoals[i]){var N=function(){var B="<div >",W="<div>";v.forEach(function(V,G){B+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(V.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(V.attrs.name,"</div>"),W+="<div>".concat(V.val,"</div>")}),P.innerHTML=B+"</div>",F.innerHTML=W+"</div>"};u?m.globals.seriesGoals[i][n]&&Array.isArray(m.globals.seriesGoals[i][n])?N():(P.innerHTML="",F.innerHTML=""):N()}else P.innerHTML="",F.innerHTML="";if(C!==null&&(r[i].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=m.config.tooltip.z.title,r[i].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=C!==void 0?C:""),u&&T[0]){if(m.config.tooltip.hideEmptySeries){var H=r[i].querySelector(".apexcharts-tooltip-marker"),z=r[i].querySelector(".apexcharts-tooltip-text");parseFloat(b)==0?(H.style.display="none",z.style.display="none"):(H.style.display="block",z.style.display="block")}b==null||m.globals.ancillaryCollapsedSeriesIndices.indexOf(i)>-1||m.globals.collapsedSeriesIndices.indexOf(i)>-1||Array.isArray(y.tConfig.enabledOnSeries)&&y.tConfig.enabledOnSeries.indexOf(i)===-1?T[0].parentNode.style.display="none":T[0].parentNode.style.display=m.config.tooltip.items.display}else Array.isArray(y.tConfig.enabledOnSeries)&&y.tConfig.enabledOnSeries.indexOf(i)===-1&&(T[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(e,i){var n=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var r=n.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(i));r&&(r.classList.add("apexcharts-active"),r.style.display=n.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var i=e.i,n=e.j,r=this.w,l=this.ctx.series.filteredSeriesX(),h="",u="",g=null,m=null,y={series:r.globals.series,seriesIndex:i,dataPointIndex:n,w:r},b=r.globals.ttZFormatter;n===null?m=r.globals.series[i]:r.globals.isXNumeric&&r.config.chart.type!=="treemap"?(h=l[i][n],l[i].length===0&&(h=l[this.tooltipUtil.getFirstActiveXArray(l)][n])):h=new Br(this.ctx).isFormatXY()?r.config.series[i].data[n]!==void 0?r.config.series[i].data[n].x:"":r.globals.labels[n]!==void 0?r.globals.labels[n]:"";var v=h;return r.globals.isXNumeric&&r.config.xaxis.type==="datetime"?h=new Fs(this.ctx).xLabelFormat(r.globals.ttKeyFormatter,v,v,{i:void 0,dateFormatter:new it(this.ctx).formatDate,w:this.w}):h=r.globals.isBarHorizontal?r.globals.yLabelFormatters[0](v,y):r.globals.xLabelFormatter(v,y),r.config.tooltip.x.formatter!==void 0&&(h=r.globals.ttKeyFormatter(v,y)),r.globals.seriesZ.length>0&&r.globals.seriesZ[i].length>0&&(g=b(r.globals.seriesZ[i][n],r)),u=typeof r.config.xaxis.tooltip.formatter=="function"?r.globals.xaxisTooltipFormatter(v,y):h,{val:Array.isArray(m)?m.join(" "):m,xVal:Array.isArray(h)?h.join(" "):h,xAxisTTVal:Array.isArray(u)?u.join(" "):u,zVal:g}}},{key:"handleCustomTooltip",value:function(e){var i=e.i,n=e.j,r=e.y1,l=e.y2,h=e.w,u=this.ttCtx.getElTooltip(),g=h.config.tooltip.custom;Array.isArray(g)&&g[i]&&(g=g[i]),u.innerHTML=g({ctx:this.ctx,series:h.globals.series,seriesIndex:i,dataPointIndex:n,y1:r,y2:l,w:h})}}]),f}(),nl=function(){function f(e){s(this,f),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return c(f,[{key:"moveXCrosshairs",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=this.ttCtx,r=this.w,l=n.getElXCrosshairs(),h=e-n.xcrosshairsWidth/2,u=r.globals.labels.slice().length;if(i!==null&&(h=r.globals.gridWidth/u*i),l===null||r.globals.isBarHorizontal||(l.setAttribute("x",h),l.setAttribute("x1",h),l.setAttribute("x2",h),l.setAttribute("y2",r.globals.gridHeight),l.classList.add("apexcharts-active")),h<0&&(h=0),h>r.globals.gridWidth&&(h=r.globals.gridWidth),n.isXAxisTooltipEnabled){var g=h;r.config.xaxis.crosshairs.width!=="tickWidth"&&r.config.xaxis.crosshairs.width!=="barWidth"||(g=h+n.xcrosshairsWidth/2),this.moveXAxisTooltip(g)}}},{key:"moveYCrosshairs",value:function(e){var i=this.ttCtx;i.ycrosshairs!==null&&Q.setAttrs(i.ycrosshairs,{y1:e,y2:e}),i.ycrosshairsHidden!==null&&Q.setAttrs(i.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var i=this.w,n=this.ttCtx;if(n.xaxisTooltip!==null&&n.xcrosshairsWidth!==0){n.xaxisTooltip.classList.add("apexcharts-active");var r=n.xaxisOffY+i.config.xaxis.tooltip.offsetY+i.globals.translateY+1+i.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e)){e+=i.globals.translateX;var l;l=new Q(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=l.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=r+"px"}}}},{key:"moveYAxisTooltip",value:function(e){var i=this.w,n=this.ttCtx;n.yaxisTTEls===null&&(n.yaxisTTEls=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var r=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),l=i.globals.translateY+r,h=n.yaxisTTEls[e].getBoundingClientRect().height,u=i.globals.translateYAxisX[e]-2;i.config.yaxis[e].opposite&&(u-=26),l-=h/2,i.globals.ignoreYAxisIndexes.indexOf(e)===-1?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=l+"px",n.yaxisTTEls[e].style.left=u+i.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.w,l=this.ttCtx,h=l.getElTooltip(),u=l.tooltipRect,g=n!==null?parseFloat(n):1,m=parseFloat(e)+g+5,y=parseFloat(i)+g/2;if(m>r.globals.gridWidth/2&&(m=m-u.ttWidth-g-10),m>r.globals.gridWidth-u.ttWidth-10&&(m=r.globals.gridWidth-u.ttWidth),m<-20&&(m=-20),r.config.tooltip.followCursor){var b=l.getElGrid().getBoundingClientRect();(m=l.e.clientX-b.left)>r.globals.gridWidth/2&&(m-=l.tooltipRect.ttWidth),(y=l.e.clientY+r.globals.translateY-b.top)>r.globals.gridHeight/2&&(y-=l.tooltipRect.ttHeight)}else r.globals.isBarHorizontal||u.ttHeight/2+y>r.globals.gridHeight&&(y=r.globals.gridHeight-u.ttHeight+r.globals.translateY);isNaN(m)||(m+=r.globals.translateX,h.style.left=m+"px",h.style.top=y+"px")}},{key:"moveMarkers",value:function(e,i){var n=this.w,r=this.ttCtx;if(n.globals.markers.size[e]>0)for(var l=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),h=0;h<l.length;h++)parseInt(l[h].getAttribute("rel"),10)===i&&(r.marker.resetPointsSize(),r.marker.enlargeCurrentPoint(i,l[h]));else r.marker.resetPointsSize(),this.moveDynamicPointOnHover(i,e)}},{key:"moveDynamicPointOnHover",value:function(e,i){var n,r,l,h,u=this.w,g=this.ttCtx,m=new Q(this.ctx),y=u.globals.pointsArray,b=g.tooltipUtil.getHoverMarkerSize(i),v=u.config.series[i].type;if(!v||v!=="column"&&v!=="candlestick"&&v!=="boxPlot"){l=(n=y[i][e])===null||n===void 0?void 0:n[0],h=((r=y[i][e])===null||r===void 0?void 0:r[1])||0;var k=u.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(i,"'] .apexcharts-series-markers path"));if(k&&h<u.globals.gridHeight&&h>0){var A=k.getAttribute("shape"),C=m.getMarkerPath(l,h,A,1.5*b);k.setAttribute("d",C)}this.moveXCrosshairs(l),g.fixedTooltip||this.moveTooltip(l,h,b)}}},{key:"moveDynamicPointsOnHover",value:function(e){var i,n=this.ttCtx,r=n.w,l=0,h=0,u=r.globals.pointsArray,g=new zt(this.ctx),m=new Q(this.ctx);i=g.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var y=n.tooltipUtil.getHoverMarkerSize(i);u[i]&&(l=u[i][e][0],h=u[i][e][1]);var b=n.tooltipUtil.getAllMarkers();if(b!==null)for(var v=0;v<r.globals.series.length;v++){var k=u[v];if(r.globals.comboCharts&&k===void 0&&b.splice(v,0,null),k&&k.length){var A=u[v][e][1],C=void 0;b[v].setAttribute("cx",l);var T=b[v].getAttribute("shape");if(r.config.chart.type==="rangeArea"&&!r.globals.comboCharts){var O=e+r.globals.series[v].length;C=u[v][O][1],A-=Math.abs(A-C)/2}if(A!==null&&!isNaN(A)&&A<r.globals.gridHeight+y&&A+y>0){var L=m.getMarkerPath(l,A,T,y);b[v].setAttribute("d",L)}else b[v].setAttribute("d","")}}this.moveXCrosshairs(l),n.fixedTooltip||this.moveTooltip(l,h||r.globals.gridHeight,y)}},{key:"moveStickyTooltipOverBars",value:function(e,i){var n=this.w,r=this.ttCtx,l=n.globals.columnSeries?n.globals.columnSeries.length:n.globals.series.length,h=l>=2&&l%2==0?Math.floor(l/2):Math.floor(l/2)+1;n.globals.isBarHorizontal&&(h=new zt(this.ctx).getActiveConfigSeriesIndex("desc")+1);var u=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(h,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(h,"'] path[j='").concat(e,"']"));u||typeof i!="number"||(u=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(i,"'] path[j='").concat(e,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(i,"'] path[j='").concat(e,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(i,"'] path[j='").concat(e,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(i,"'] path[j='").concat(e,"']")));var g=u?parseFloat(u.getAttribute("cx")):0,m=u?parseFloat(u.getAttribute("cy")):0,y=u?parseFloat(u.getAttribute("barWidth")):0,b=r.getElGrid().getBoundingClientRect(),v=u&&(u.classList.contains("apexcharts-candlestick-area")||u.classList.contains("apexcharts-boxPlot-area"));n.globals.isXNumeric?(u&&!v&&(g-=l%2!=0?y/2:0),u&&v&&(g-=y/2)):n.globals.isBarHorizontal||(g=r.xAxisTicksPositions[e-1]+r.dataPointsDividedWidth/2,isNaN(g)&&(g=r.xAxisTicksPositions[e]-r.dataPointsDividedWidth/2)),n.globals.isBarHorizontal?m-=r.tooltipRect.ttHeight:n.config.tooltip.followCursor?m=r.e.clientY-b.top-r.tooltipRect.ttHeight/2:m+r.tooltipRect.ttHeight+15>n.globals.gridHeight&&(m=n.globals.gridHeight),n.globals.isBarHorizontal||this.moveXCrosshairs(g),r.fixedTooltip||this.moveTooltip(g,m||n.globals.gridHeight)}}]),f}(),Ou=function(){function f(e){s(this,f),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new nl(e)}return c(f,[{key:"drawDynamicPoints",value:function(){var e=this.w,i=new Q(this.ctx),n=new hs(this.ctx),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");r=Y(r),e.config.chart.stacked&&r.sort(function(b,v){return parseFloat(b.getAttribute("data:realIndex"))-parseFloat(v.getAttribute("data:realIndex"))});for(var l=0;l<r.length;l++){var h=r[l].querySelector(".apexcharts-series-markers-wrap");if(h!==null){var u=void 0,g="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));e.config.chart.type!=="line"&&e.config.chart.type!=="area"||e.globals.comboCharts||e.config.tooltip.intersect||(g+=" no-pointer-events");var m=n.getMarkerConfig({cssClass:g,seriesIndex:Number(h.getAttribute("data:realIndex"))});(u=i.drawMarker(0,0,m)).node.setAttribute("default-marker-size",0);var y=document.createElementNS(e.globals.SVGNS,"g");y.classList.add("apexcharts-series-markers"),y.appendChild(u.node),h.appendChild(y)}}}},{key:"enlargeCurrentPoint",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,l=this.w;l.config.chart.type!=="bubble"&&this.newPointSize(e,i);var h=i.getAttribute("cx"),u=i.getAttribute("cy");if(n!==null&&r!==null&&(h=n,u=r),this.tooltipPosition.moveXCrosshairs(h),!this.fixedTooltip){if(l.config.chart.type==="radar"){var g=this.ttCtx.getElGrid().getBoundingClientRect();h=this.ttCtx.e.clientX-g.left}this.tooltipPosition.moveTooltip(h,u,l.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var i=this.w,n=this,r=this.ttCtx,l=e,h=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),u=i.config.markers.hover.size,g=0;g<h.length;g++){var m=h[g].getAttribute("rel"),y=h[g].getAttribute("index");if(u===void 0&&(u=i.globals.markers.size[y]+i.config.markers.hover.sizeOffset),l===parseInt(m,10)){n.newPointSize(l,h[g]);var b=h[g].getAttribute("cx"),v=h[g].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(b),r.fixedTooltip||n.tooltipPosition.moveTooltip(b,v,u)}else n.oldPointSize(h[g])}}},{key:"newPointSize",value:function(e,i){var n=this.w,r=n.config.markers.hover.size,l=e===0?i.parentNode.firstChild:i.parentNode.lastChild;if(l.getAttribute("default-marker-size")!=="0"){var h=parseInt(l.getAttribute("index"),10);r===void 0&&(r=n.globals.markers.size[h]+n.config.markers.hover.sizeOffset),r<0&&(r=0);var u=this.ttCtx.tooltipUtil.getPathFromPoint(i,r);i.setAttribute("d",u)}}},{key:"oldPointSize",value:function(e){var i=parseFloat(e.getAttribute("default-marker-size")),n=this.ttCtx.tooltipUtil.getPathFromPoint(e,i);e.setAttribute("d",n)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),i=0;i<e.length;i++){var n=parseFloat(e[i].getAttribute("default-marker-size"));if(X.isNumber(n)&&n>0){var r=this.ttCtx.tooltipUtil.getPathFromPoint(e[i],n);e[i].setAttribute("d",r)}else e[i].setAttribute("d","M0,0")}}}]),f}(),Eu=function(){function f(e){s(this,f),this.w=e.w;var i=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.config.chart.type==="rangeBar"&&i.config.plotOptions.bar.rangeBarGroupRows}return c(f,[{key:"getAttr",value:function(e,i){return parseFloat(e.target.getAttribute(i))}},{key:"handleHeatTreeTooltip",value:function(e){var i=e.e,n=e.opt,r=e.x,l=e.y,h=e.type,u=this.ttCtx,g=this.w;if(i.target.classList.contains("apexcharts-".concat(h,"-rect"))){var m=this.getAttr(i,"i"),y=this.getAttr(i,"j"),b=this.getAttr(i,"cx"),v=this.getAttr(i,"cy"),k=this.getAttr(i,"width"),A=this.getAttr(i,"height");if(u.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:m,j:y,shared:!1,e:i}),g.globals.capturedSeriesIndex=m,g.globals.capturedDataPointIndex=y,r=b+u.tooltipRect.ttWidth/2+k,l=v+u.tooltipRect.ttHeight/2-A/2,u.tooltipPosition.moveXCrosshairs(b+k/2),r>g.globals.gridWidth/2&&(r=b-u.tooltipRect.ttWidth/2+k),u.w.config.tooltip.followCursor){var C=g.globals.dom.elWrap.getBoundingClientRect();r=g.globals.clientX-C.left-(r>g.globals.gridWidth/2?u.tooltipRect.ttWidth:0),l=g.globals.clientY-C.top-(l>g.globals.gridHeight/2?u.tooltipRect.ttHeight:0)}}return{x:r,y:l}}},{key:"handleMarkerTooltip",value:function(e){var i,n,r=e.e,l=e.opt,h=e.x,u=e.y,g=this.w,m=this.ttCtx;if(r.target.classList.contains("apexcharts-marker")){var y=parseInt(l.paths.getAttribute("cx"),10),b=parseInt(l.paths.getAttribute("cy"),10),v=parseFloat(l.paths.getAttribute("val"));if(n=parseInt(l.paths.getAttribute("rel"),10),i=parseInt(l.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,m.intersect){var k=X.findAncestor(l.paths,"apexcharts-series");k&&(i=parseInt(k.getAttribute("data:realIndex"),10))}if(m.tooltipLabels.drawSeriesTexts({ttItems:l.ttItems,i,j:n,shared:!m.showOnIntersect&&g.config.tooltip.shared,e:r}),r.type==="mouseup"&&m.markerClick(r,i,n),g.globals.capturedSeriesIndex=i,g.globals.capturedDataPointIndex=n,h=y,u=b+g.globals.translateY-1.4*m.tooltipRect.ttHeight,m.w.config.tooltip.followCursor){var A=m.getElGrid().getBoundingClientRect();u=m.e.clientY+g.globals.translateY-A.top}v<0&&(u=b),m.marker.enlargeCurrentPoint(n,l.paths,h,u)}return{x:h,y:u}}},{key:"handleBarTooltip",value:function(e){var i,n,r=e.e,l=e.opt,h=this.w,u=this.ttCtx,g=u.getElTooltip(),m=0,y=0,b=0,v=this.getBarTooltipXY({e:r,opt:l});if(v.j!==null||v.barHeight!==0||v.barWidth!==0){i=v.i;var k=v.j;if(h.globals.capturedSeriesIndex=i,h.globals.capturedDataPointIndex=k,h.globals.isBarHorizontal&&u.tooltipUtil.hasBars()||!h.config.tooltip.shared?(y=v.x,b=v.y,n=Array.isArray(h.config.stroke.width)?h.config.stroke.width[i]:h.config.stroke.width,m=y):h.globals.comboCharts||h.config.tooltip.shared||(m/=2),isNaN(b)&&(b=h.globals.svgHeight-u.tooltipRect.ttHeight),parseInt(l.paths.parentNode.getAttribute("data:realIndex"),10),y+u.tooltipRect.ttWidth>h.globals.gridWidth?y-=u.tooltipRect.ttWidth:y<0&&(y=0),u.w.config.tooltip.followCursor){var A=u.getElGrid().getBoundingClientRect();b=u.e.clientY-A.top}u.tooltip===null&&(u.tooltip=h.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),h.config.tooltip.shared||(h.globals.comboBarCount>0?u.tooltipPosition.moveXCrosshairs(m+n/2):u.tooltipPosition.moveXCrosshairs(m)),!u.fixedTooltip&&(!h.config.tooltip.shared||h.globals.isBarHorizontal&&u.tooltipUtil.hasBars())&&(b=b+h.globals.translateY-u.tooltipRect.ttHeight/2,g.style.left=y+h.globals.translateX+"px",g.style.top=b+"px")}}},{key:"getBarTooltipXY",value:function(e){var i=this,n=e.e,r=e.opt,l=this.w,h=null,u=this.ttCtx,g=0,m=0,y=0,b=0,v=0,k=n.target.classList;if(k.contains("apexcharts-bar-area")||k.contains("apexcharts-candlestick-area")||k.contains("apexcharts-boxPlot-area")||k.contains("apexcharts-rangebar-area")){var A=n.target,C=A.getBoundingClientRect(),T=r.elGrid.getBoundingClientRect(),O=C.height;v=C.height;var L=C.width,P=parseInt(A.getAttribute("cx"),10),F=parseInt(A.getAttribute("cy"),10);b=parseFloat(A.getAttribute("barWidth"));var N=n.type==="touchmove"?n.touches[0].clientX:n.clientX;h=parseInt(A.getAttribute("j"),10),g=parseInt(A.parentNode.getAttribute("rel"),10)-1;var H=A.getAttribute("data-range-y1"),z=A.getAttribute("data-range-y2");l.globals.comboCharts&&(g=parseInt(A.parentNode.getAttribute("data:realIndex"),10));var B=function(V){return l.globals.isXNumeric?P-L/2:i.isVerticalGroupedRangeBar?P+L/2:P-u.dataPointsDividedWidth+L/2},W=function(){return F-u.dataPointsDividedHeight+O/2-u.tooltipRect.ttHeight/2};u.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:g,j:h,y1:H?parseInt(H,10):null,y2:z?parseInt(z,10):null,shared:!u.showOnIntersect&&l.config.tooltip.shared,e:n}),l.config.tooltip.followCursor?l.globals.isBarHorizontal?(m=N-T.left+15,y=W()):(m=B(),y=n.clientY-T.top-u.tooltipRect.ttHeight/2-15):l.globals.isBarHorizontal?((m=P)<u.xyRatios.baseLineInvertedY&&(m=P-u.tooltipRect.ttWidth),y=W()):(m=B(),y=F)}return{x:m,y,barHeight:v,barWidth:b,i:g,j:h}}}]),f}(),Iu=function(){function f(e){s(this,f),this.w=e.w,this.ttCtx=e}return c(f,[{key:"drawXaxisTooltip",value:function(){var e=this.w,i=this.ttCtx,n=e.config.xaxis.position==="bottom";i.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var r=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",l=e.globals.dom.elWrap;i.isXAxisTooltipEnabled&&e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(i.xaxisTooltip=document.createElement("div"),i.xaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),l.appendChild(i.xaxisTooltip),i.xaxisTooltipText=document.createElement("div"),i.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),i.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,i.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,i.xaxisTooltip.appendChild(i.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,i=this.ttCtx,n=0;n<e.config.yaxis.length;n++){var r=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;i.yaxisOffX=r?e.globals.gridWidth+1:1;var l="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,r?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),h=e.globals.dom.elWrap;e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))===null&&(i.yaxisTooltip=document.createElement("div"),i.yaxisTooltip.setAttribute("class",l+" apexcharts-theme-"+e.config.tooltip.theme),h.appendChild(i.yaxisTooltip),n===0&&(i.yaxisTooltipText=[]),i.yaxisTooltipText[n]=document.createElement("div"),i.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),i.yaxisTooltip.appendChild(i.yaxisTooltipText[n]))}}},{key:"setXCrosshairWidth",value:function(){var e=this.w,i=this.ttCtx,n=i.getElXCrosshairs();if(i.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(r!==null&&e.config.xaxis.crosshairs.width==="barWidth"){var l=parseFloat(r.getAttribute("barWidth"));i.xcrosshairsWidth=l}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var h=e.globals.labels.length;i.xcrosshairsWidth=e.globals.gridWidth/h}}else if(e.config.xaxis.crosshairs.width==="tickWidth"){var u=e.globals.labels.length;i.xcrosshairsWidth=e.globals.gridWidth/u}else if(e.config.xaxis.crosshairs.width==="barWidth"){var g=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(g!==null){var m=parseFloat(g.getAttribute("barWidth"));i.xcrosshairsWidth=m}else i.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(i.xcrosshairsWidth=0),n!==null&&i.xcrosshairsWidth>0&&n.setAttribute("width",i.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,i=this.ttCtx;i.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),i.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,i,n){var r=this.ttCtx,l=this.w,h=l.globals,u=h.seriesYAxisMap[e];if(r.yaxisTooltips[e]&&u.length>0){var g=h.yLabelFormatters[e],m=r.getElGrid().getBoundingClientRect(),y=u[0],b=0;n.yRatio.length>1&&(b=y);var v=(i-m.top)*n.yRatio[b],k=h.maxYArr[y]-h.minYArr[y],A=h.minYArr[y]+(k-v);l.config.yaxis[e].reversed&&(A=h.maxYArr[y]-(k-v)),r.tooltipPosition.moveYCrosshairs(i-m.top),r.yaxisTooltipText[e].innerHTML=g(A),r.tooltipPosition.moveYAxisTooltip(e)}}}]),f}(),rl=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new sl(this),this.tooltipLabels=new Tu(this),this.tooltipPosition=new nl(this),this.marker=new Ou(this),this.intersect=new Eu(this),this.axesTooltip=new Iu(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return c(f,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var i=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=i.config.xaxis.tooltip.enabled&&i.globals.axisCharts,this.yaxisTooltips=i.config.yaxis.map(function(h,u){return!!(h.show&&h.tooltip.enabled&&i.globals.axisCharts)}),this.allTooltipSeriesGroups=[],i.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),i.config.tooltip.cssClass&&n.classList.add(i.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),i.globals.dom.elWrap.appendChild(n),i.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var r=new Xs(this.ctx);this.xAxisTicksPositions=r.getXAxisTicksPositions()}if(!i.globals.comboCharts&&!this.tConfig.intersect&&i.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),i.config.markers.size!==0&&i.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),i.globals.collapsedSeries.length!==i.globals.series.length){this.dataPointsDividedHeight=i.globals.gridHeight/i.globals.dataPoints,this.dataPointsDividedWidth=i.globals.gridWidth/i.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||i.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var l=i.globals.series.length;(i.globals.xyCharts||i.globals.comboCharts)&&this.tConfig.shared&&(l=this.showOnIntersect?1:i.globals.series.length),this.legendLabels=i.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(l),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var i=this,n=this.w,r=[],l=this.getElTooltip(),h=function(g){var m=document.createElement("div");m.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(g)),m.style.order=n.config.tooltip.inverseOrder?e-g:g+1;var y=document.createElement("span");y.classList.add("apexcharts-tooltip-marker"),y.style.backgroundColor=n.globals.colors[g],m.appendChild(y);var b=document.createElement("div");b.classList.add("apexcharts-tooltip-text"),b.style.fontFamily=i.tConfig.style.fontFamily||n.config.chart.fontFamily,b.style.fontSize=i.tConfig.style.fontSize,["y","goals","z"].forEach(function(v){var k=document.createElement("div");k.classList.add("apexcharts-tooltip-".concat(v,"-group"));var A=document.createElement("span");A.classList.add("apexcharts-tooltip-text-".concat(v,"-label")),k.appendChild(A);var C=document.createElement("span");C.classList.add("apexcharts-tooltip-text-".concat(v,"-value")),k.appendChild(C),b.appendChild(k)}),m.appendChild(b),l.appendChild(m),r.push(m)},u=0;u<e;u++)h(u);return r}},{key:"addSVGEvents",value:function(){var e=this.w,i=e.config.chart.type,n=this.getElTooltip(),r=!(i!=="bar"&&i!=="candlestick"&&i!=="boxPlot"&&i!=="rangeBar"),l=i==="area"||i==="line"||i==="scatter"||i==="bubble"||i==="radar",h=e.globals.dom.Paper.node,u=this.getElGrid();u&&(this.seriesBound=u.getBoundingClientRect());var g,m=[],y=[],b={hoverArea:h,elGrid:u,tooltipEl:n,tooltipY:m,tooltipX:y,ttItems:this.ttItems};if(e.globals.axisCharts&&(l?g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):r?g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):i!=="heatmap"&&i!=="treemap"||(g=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),g&&g.length))for(var v=0;v<g.length;v++)m.push(g[v].getAttribute("cy")),y.push(g[v].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||r&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([h],b);else if(r&&!e.globals.comboCharts||l&&this.showOnIntersect)this.addDatapointEventsListeners(b);else if(!e.globals.axisCharts||i==="heatmap"||i==="treemap"){var k=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(k,b)}if(this.showOnIntersect){var A=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");A.length>0&&this.addPathsEventListeners(A,b),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(b)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,i=this.getElTooltip(),n=i.getBoundingClientRect(),r=n.width+10,l=n.height+10,h=this.tConfig.fixed.offsetX,u=this.tConfig.fixed.offsetY,g=this.tConfig.fixed.position.toLowerCase();return g.indexOf("right")>-1&&(h=h+e.globals.svgWidth-r+10),g.indexOf("bottom")>-1&&(u=u+e.globals.svgHeight-l-10),i.style.left=h+"px",i.style.top=u+"px",{x:h,y:u,ttWidth:r,ttHeight:l}}},{key:"addDatapointEventsListeners",value:function(e){var i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(i,e)}},{key:"addPathsEventListeners",value:function(e,i){for(var n=this,r=function(h){var u={paths:e[h],tooltipEl:i.tooltipEl,tooltipY:i.tooltipY,tooltipX:i.tooltipX,elGrid:i.elGrid,hoverArea:i.hoverArea,ttItems:i.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(g){return e[h].addEventListener(g,n.onSeriesHover.bind(n,u),{capture:!1,passive:!0})})},l=0;l<e.length;l++)r(l)}},{key:"onSeriesHover",value:function(e,i){var n=this,r=Date.now()-this.lastHoverTime;r>=20?this.seriesHover(e,i):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){n.seriesHover(e,i)},20-r))}},{key:"seriesHover",value:function(e,i){var n=this;this.lastHoverTime=Date.now();var r=[],l=this.w;l.config.chart.group&&(r=this.ctx.getGroupedCharts()),l.globals.axisCharts&&(l.globals.minX===-1/0&&l.globals.maxX===1/0||l.globals.dataPoints===0)||(r.length?r.forEach(function(h){var u=n.getElTooltip(h),g={paths:e.paths,tooltipEl:u,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:h.w.globals.tooltip.ttItems};h.w.globals.minX===n.w.globals.minX&&h.w.globals.maxX===n.w.globals.maxX&&h.w.globals.tooltip.seriesHoverByContext({chartCtx:h,ttCtx:h.w.globals.tooltip,opt:g,e:i})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:i}))}},{key:"seriesHoverByContext",value:function(e){var i=e.chartCtx,n=e.ttCtx,r=e.opt,l=e.e,h=i.w,u=this.getElTooltip(i);u&&(n.tooltipRect={x:0,y:0,ttWidth:u.getBoundingClientRect().width,ttHeight:u.getBoundingClientRect().height},n.e=l,n.tooltipUtil.hasBars()&&!h.globals.comboCharts&&!n.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new zt(i).toggleSeriesOnHover(l,l.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),h.globals.axisCharts?n.axisChartsTooltips({e:l,opt:r,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:l,opt:r,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var i,n,r=e.e,l=e.opt,h=this.w,u=l.elGrid.getBoundingClientRect(),g=r.type==="touchmove"?r.touches[0].clientX:r.clientX,m=r.type==="touchmove"?r.touches[0].clientY:r.clientY;if(this.clientY=m,this.clientX=g,h.globals.capturedSeriesIndex=-1,h.globals.capturedDataPointIndex=-1,m<u.top||m>u.top+u.height)this.handleMouseOut(l);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!h.config.tooltip.shared){var y=parseInt(l.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(y)<0)return void this.handleMouseOut(l)}var b=this.getElTooltip(),v=this.getElXCrosshairs(),k=[];h.config.chart.group&&(k=this.ctx.getSyncedCharts());var A=h.globals.xyCharts||h.config.chart.type==="bar"&&!h.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||h.globals.comboCharts&&this.tooltipUtil.hasBars();if(r.type==="mousemove"||r.type==="touchmove"||r.type==="mouseup"){if(h.globals.collapsedSeries.length+h.globals.ancillaryCollapsedSeries.length===h.globals.series.length)return;v!==null&&v.classList.add("apexcharts-active");var C=this.yaxisTooltips.filter(function(L){return L===!0});if(this.ycrosshairs!==null&&C.length&&this.ycrosshairs.classList.add("apexcharts-active"),A&&!this.showOnIntersect||k.length>1)this.handleStickyTooltip(r,g,m,l);else if(h.config.chart.type==="heatmap"||h.config.chart.type==="treemap"){var T=this.intersect.handleHeatTreeTooltip({e:r,opt:l,x:i,y:n,type:h.config.chart.type});i=T.x,n=T.y,b.style.left=i+"px",b.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:r,opt:l}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:r,opt:l,x:i,y:n});if(this.yaxisTooltips.length)for(var O=0;O<h.config.yaxis.length;O++)this.axesTooltip.drawYaxisTooltipText(O,m,this.xyRatios);h.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),l.tooltipEl.classList.add("apexcharts-active")}else r.type!=="mouseout"&&r.type!=="touchend"||this.handleMouseOut(l)}}},{key:"nonAxisChartsTooltips",value:function(e){var i=e.e,n=e.opt,r=e.tooltipRect,l=this.w,h=n.paths.getAttribute("rel"),u=this.getElTooltip(),g=l.globals.dom.elWrap.getBoundingClientRect();if(i.type==="mousemove"||i.type==="touchmove"){l.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),u.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(h,10)-1,shared:!1});var m=l.globals.clientX-g.left-r.ttWidth/2,y=l.globals.clientY-g.top-r.ttHeight-10;if(u.style.left=m+"px",u.style.top=y+"px",l.config.legend.tooltipHoverFormatter){var b=h-1,v=(0,l.config.legend.tooltipHoverFormatter)(this.legendLabels[b].getAttribute("data:default-text"),{seriesIndex:b,dataPointIndex:b,w:l});this.legendLabels[b].innerHTML=v}}else i.type!=="mouseout"&&i.type!=="touchend"||(u.classList.remove("apexcharts-active"),l.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),l.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(k){var A=k.getAttribute("data:default-text");k.innerHTML=decodeURIComponent(A)}))}},{key:"handleStickyTooltip",value:function(e,i,n,r){var l=this.w,h=this.tooltipUtil.getNearestValues({context:this,hoverArea:r.hoverArea,elGrid:r.elGrid,clientX:i,clientY:n}),u=h.j,g=h.capturedSeries;l.globals.collapsedSeriesIndices.includes(g)&&(g=null);var m=r.elGrid.getBoundingClientRect();if(h.hoverX<0||h.hoverX>m.width)this.handleMouseOut(r);else if(g!==null)this.handleStickyCapturedSeries(e,g,r,u);else if(this.tooltipUtil.isXoverlap(u)||l.globals.isBarHorizontal){var y=l.globals.series.findIndex(function(b,v){return!l.globals.collapsedSeriesIndices.includes(v)});this.create(e,this,y,u,r.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(e,i,n,r){var l=this.w;if(!this.tConfig.shared&&l.globals.series[i][r]===null)return void this.handleMouseOut(n);if(l.globals.series[i][r]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(r)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,i,r,n.ttItems):this.create(e,this,i,r,n.ttItems,!1);else if(this.tooltipUtil.isXoverlap(r)){var h=l.globals.series.findIndex(function(u,g){return!l.globals.collapsedSeriesIndices.includes(g)});this.create(e,this,h,r,n.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,i=new Q(this.ctx),n=e.globals.dom.Paper.find(".apexcharts-bar-area"),r=0;r<n.length;r++)i.pathMouseLeave(n[r])}},{key:"handleMouseOut",value:function(e){var i=this.w,n=this.getElXCrosshairs();if(i.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),i.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),n!==null&&n.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=i.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var r=0;r<this.yaxisTTEls.length;r++)this.yaxisTTEls[r].classList.remove("apexcharts-active")}i.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(l){var h=l.getAttribute("data:default-text");l.innerHTML=decodeURIComponent(h)})}},{key:"markerClick",value:function(e,i,n){var r=this.w;typeof r.config.chart.events.markerClick=="function"&&r.config.chart.events.markerClick(e,this.ctx,{seriesIndex:i,dataPointIndex:n,w:r}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:i,dataPointIndex:n,w:r}])}},{key:"create",value:function(e,i,n,r,l){var h,u,g,m,y,b,v,k,A,C,T,O,L,P,F,N,H=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,z=this.w,B=i;e.type==="mouseup"&&this.markerClick(e,n,r),H===null&&(H=this.tConfig.shared);var W=this.tooltipUtil.hasMarkers(n),V=this.tooltipUtil.getElBars();if(z.config.legend.tooltipHoverFormatter){var G=z.config.legend.tooltipHoverFormatter,q=Array.from(this.legendLabels);q.forEach(function(Xe){var We=Xe.getAttribute("data:default-text");Xe.innerHTML=decodeURIComponent(We)});for(var U=0;U<q.length;U++){var K=q[U],re=parseInt(K.getAttribute("i"),10),ae=decodeURIComponent(K.getAttribute("data:default-text")),ce=G(ae,{seriesIndex:H?re:n,dataPointIndex:r,w:z});if(H)K.innerHTML=z.globals.collapsedSeriesIndices.indexOf(re)<0?ce:ae;else if(K.innerHTML=re===n?ce:ae,n===re)break}}var xe=I(I({ttItems:l,i:n,j:r},((h=z.globals.seriesRange)===null||h===void 0||(u=h[n])===null||u===void 0||(g=u[r])===null||g===void 0||(m=g.y[0])===null||m===void 0?void 0:m.y1)!==void 0&&{y1:(y=z.globals.seriesRange)===null||y===void 0||(b=y[n])===null||b===void 0||(v=b[r])===null||v===void 0||(k=v.y[0])===null||k===void 0?void 0:k.y1}),((A=z.globals.seriesRange)===null||A===void 0||(C=A[n])===null||C===void 0||(T=C[r])===null||T===void 0||(O=T.y[0])===null||O===void 0?void 0:O.y2)!==void 0&&{y2:(L=z.globals.seriesRange)===null||L===void 0||(P=L[n])===null||P===void 0||(F=P[r])===null||F===void 0||(N=F.y[0])===null||N===void 0?void 0:N.y2});if(H){if(B.tooltipLabels.drawSeriesTexts(I(I({},xe),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),W)z.globals.markers.largestSize>0?B.marker.enlargePoints(r):B.tooltipPosition.moveDynamicPointsOnHover(r);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(V),this.barSeriesHeight>0)){var me=new Q(this.ctx),ye=z.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(r,n);for(var be=0;be<ye.length;be++)me.pathMouseEnter(ye[be])}}else B.tooltipLabels.drawSeriesTexts(I({shared:!1},xe)),this.tooltipUtil.hasBars()&&B.tooltipPosition.moveStickyTooltipOverBars(r,n),W&&B.tooltipPosition.moveMarkers(n,r)}}]),f}(),Lu=function(){function f(e){s(this,f),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return c(f,[{key:"handleBarDataLabels",value:function(e){var i,n,r=e.x,l=e.y,h=e.y1,u=e.y2,g=e.i,m=e.j,y=e.realIndex,b=e.columnGroupIndex,v=e.series,k=e.barHeight,A=e.barWidth,C=e.barXPosition,T=e.barYPosition,O=e.visibleSeries,L=e.renderedPath,P=this.w,F=new Q(this.barCtx.ctx),N=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[y]:this.barCtx.strokeWidth;P.globals.isXNumeric&&!P.globals.isBarHorizontal?(i=r+parseFloat(A*(O+1)),n=l+parseFloat(k*(O+1))-N):(i=r+parseFloat(A*O),n=l+parseFloat(k*O));var H,z=null,B=r,W=l,V={},G=P.config.dataLabels,q=this.barCtx.barOptions.dataLabels,U=this.barCtx.barOptions.dataLabels.total;T!==void 0&&this.barCtx.isRangeBar&&(n=T,W=T),C!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(i=C,B=C);var K=G.offsetX,re=G.offsetY,ae={width:0,height:0};if(P.config.dataLabels.enabled){var ce=P.globals.series[g][m];ae=F.getTextRects(P.config.dataLabels.formatter?P.config.dataLabels.formatter(ce,I(I({},P),{},{seriesIndex:g,dataPointIndex:m,w:P})):P.globals.yLabelFormatters[0](ce),parseFloat(G.style.fontSize))}var xe={x:r,y:l,i:g,j:m,realIndex:y,columnGroupIndex:b,renderedPath:L,bcx:i,bcy:n,barHeight:k,barWidth:A,textRects:ae,strokeWidth:N,dataLabelsX:B,dataLabelsY:W,dataLabelsConfig:G,barDataLabelsConfig:q,barTotalDataLabelsConfig:U,offX:K,offY:re};return V=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(xe):this.calculateColumnsDataLabelsPosition(xe),L.attr({cy:V.bcy,cx:V.bcx,j:m,val:P.globals.series[g][m],barHeight:k,barWidth:A}),H=this.drawCalculatedDataLabels({x:V.dataLabelsX,y:V.dataLabelsY,val:this.barCtx.isRangeBar?[h,u]:P.config.chart.stackType==="100%"?v[y][m]:P.globals.series[y][m],i:y,j:m,barWidth:A,barHeight:k,textRects:ae,dataLabelsConfig:G}),P.config.chart.stacked&&U.enabled&&(z=this.drawTotalDataLabels({x:V.totalDataLabelsX,y:V.totalDataLabelsY,barWidth:A,barHeight:k,realIndex:y,textAnchor:V.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:y,j:m}),dataLabelsConfig:G,barTotalDataLabelsConfig:U})),{dataLabels:H,totalDataLabels:z}}},{key:"getStackedTotalDataLabel",value:function(e){var i=e.realIndex,n=e.j,r=this.w,l=this.barCtx.stackedSeriesTotals[n];return this.totalFormatter&&(l=this.totalFormatter(l,I(I({},r),{},{seriesIndex:i,dataPointIndex:n,w:r}))),l}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var i=this.w,n=e.i,r=e.j,l=e.realIndex;e.columnGroupIndex;var h,u,g=e.y,m=e.bcx,y=e.barWidth,b=e.barHeight,v=e.textRects,k=e.dataLabelsX,A=e.dataLabelsY,C=e.dataLabelsConfig,T=e.barDataLabelsConfig,O=e.barTotalDataLabelsConfig,L=e.strokeWidth,P=e.offX,F=e.offY,N=m;b=Math.abs(b);var H=i.config.plotOptions.bar.dataLabels.orientation==="vertical",z=this.barCtx.barHelpers.getZeroValueEncounters({i:n,j:r}).zeroEncounters;m-=L/2;var B=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?k+=y/2:(k=i.globals.isXNumeric?m-y/2+P:m-B+y/2+P,z>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(k-=y*z)),H&&(k=k+v.height/2-L/2-2);var W=i.globals.series[n][r]<0,V=g;switch(this.barCtx.isReversed&&(V=g+(W?b:-b)),T.position){case"center":A=H?W?V-b/2+F:V+b/2-F:W?V-b/2+v.height/2+F:V+b/2+v.height/2-F;break;case"bottom":A=H?W?V-b+F:V+b-F:W?V-b+v.height+L+F:V+b-v.height/2+L-F;break;case"top":A=H?W?V+F:V-F:W?V-v.height/2-F:V+v.height+F}if(this.barCtx.lastActiveBarSerieIndex===l&&O.enabled){var G=new Q(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:l,j:r}),C.fontSize);h=W?V-G.height/2-F-O.offsetY+18:V+G.height+F+O.offsetY-18;var q=B;u=N+(i.globals.isXNumeric?-y*i.globals.barGroups.length/2:i.globals.barGroups.length*y/2-(i.globals.barGroups.length-1)*y-q)+O.offsetX}return i.config.chart.stacked||(A<0?A=0+L:A+v.height/3>i.globals.gridHeight&&(A=i.globals.gridHeight-L)),{bcx:m,bcy:g,dataLabelsX:k,dataLabelsY:A,totalDataLabelsX:u,totalDataLabelsY:h,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var i=this.w,n=e.x,r=e.i,l=e.j,h=e.realIndex,u=e.bcy,g=e.barHeight,m=e.barWidth,y=e.textRects,b=e.dataLabelsX,v=e.strokeWidth,k=e.dataLabelsConfig,A=e.barDataLabelsConfig,C=e.barTotalDataLabelsConfig,T=e.offX,O=e.offY,L=i.globals.gridHeight/i.globals.dataPoints;m=Math.abs(m);var P,F,N=u-(this.barCtx.isRangeBar?0:L)+g/2+y.height/2+O-3,H="start",z=i.globals.series[r][l]<0,B=n;switch(this.barCtx.isReversed&&(B=n+(z?-m:m),H=z?"start":"end"),A.position){case"center":b=z?B+m/2-T:Math.max(y.width/2,B-m/2)+T;break;case"bottom":b=z?B+m-v-T:B-m+v+T;break;case"top":b=z?B-v-T:B-v+T}if(this.barCtx.lastActiveBarSerieIndex===h&&C.enabled){var W=new Q(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:h,j:l}),k.fontSize);z?(P=B-v-T-C.offsetX,H="end"):P=B+T+C.offsetX+(this.barCtx.isReversed?-(m+v):v),F=N-y.height/2+W.height/2+C.offsetY+v}return i.config.chart.stacked||(k.textAnchor==="start"?b-y.width<0?b=z?y.width+v:v:b+y.width>i.globals.gridWidth&&(b=z?i.globals.gridWidth-v:i.globals.gridWidth-y.width-v):k.textAnchor==="middle"?b-y.width/2<0?b=y.width/2+v:b+y.width/2>i.globals.gridWidth&&(b=i.globals.gridWidth-y.width/2-v):k.textAnchor==="end"&&(b<1?b=y.width+v:b+1>i.globals.gridWidth&&(b=i.globals.gridWidth-y.width-v))),{bcx:n,bcy:u,dataLabelsX:b,dataLabelsY:N,totalDataLabelsX:P,totalDataLabelsY:F,totalDataLabelsAnchor:H}}},{key:"drawCalculatedDataLabels",value:function(e){var i=e.x,n=e.y,r=e.val,l=e.i,h=e.j,u=e.textRects,g=e.barHeight,m=e.barWidth,y=e.dataLabelsConfig,b=this.w,v="rotate(0)";b.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(v="rotate(-90, ".concat(i,", ").concat(n,")"));var k=new ds(this.barCtx.ctx),A=new Q(this.barCtx.ctx),C=y.formatter,T=null,O=b.globals.collapsedSeriesIndices.indexOf(l)>-1;if(y.enabled&&!O){T=A.group({class:"apexcharts-data-labels",transform:v});var L="";r!==void 0&&(L=C(r,I(I({},b),{},{seriesIndex:l,dataPointIndex:h,w:b}))),!r&&b.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(L="");var P=b.globals.series[l][h]<0,F=b.config.plotOptions.bar.dataLabels.position;b.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(F==="top"&&(y.textAnchor=P?"end":"start"),F==="center"&&(y.textAnchor="middle"),F==="bottom"&&(y.textAnchor=P?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&m<A.getTextRects(L,parseFloat(y.style.fontSize)).width&&(L=""),b.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?u.width/1.6>Math.abs(m)&&(L=""):u.height/1.6>Math.abs(g)&&(L=""));var N=I({},y);this.barCtx.isHorizontal&&r<0&&(y.textAnchor==="start"?N.textAnchor="end":y.textAnchor==="end"&&(N.textAnchor="start")),k.plotDataLabelsText({x:i,y:n,text:L,i:l,j:h,parent:T,dataLabelsConfig:N,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return T}},{key:"drawTotalDataLabels",value:function(e){var i=e.x,n=e.y,r=e.val,l=e.realIndex,h=e.textAnchor,u=e.barTotalDataLabelsConfig;this.w;var g,m=new Q(this.barCtx.ctx);return u.enabled&&i!==void 0&&n!==void 0&&this.barCtx.lastActiveBarSerieIndex===l&&(g=m.drawText({x:i,y:n,foreColor:u.style.color,text:r,textAnchor:h,fontFamily:u.style.fontFamily,fontSize:u.style.fontSize,fontWeight:u.style.fontWeight})),g}}]),f}(),Pu=function(){function f(e){s(this,f),this.w=e.w,this.barCtx=e}return c(f,[{key:"initVariables",value:function(e){var i=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),i.globals.isXNumeric)for(var r=0;r<e[n].length;r++)i.globals.seriesX[n][r]>i.globals.minX&&i.globals.seriesX[n][r]<i.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=i.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(i.globals.series),this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],i.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,i,n,r,l,h,u,g,m=this.w,y=m.globals.dataPoints;this.barCtx.isRangeBar&&(y=m.globals.labels.length);var b=this.barCtx.seriesLen;if(m.config.plotOptions.bar.rangeBarGroupRows&&(b=1),this.barCtx.isHorizontal)l=(n=m.globals.gridHeight/y)/b,m.globals.isXNumeric&&(l=(n=m.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),l=l*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(l=parseInt(this.barCtx.barOptions.barHeight,10)),g=this.barCtx.baseLineInvertedY+m.globals.padHorizontal+(this.barCtx.isReversed?m.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(g=m.globals.gridWidth/2),i=(n-l*this.barCtx.seriesLen)/2;else{if(r=m.globals.gridWidth/this.barCtx.visibleItems,m.config.xaxis.convertedCatToNumeric&&(r=m.globals.gridWidth/m.globals.dataPoints),h=r/b*parseInt(this.barCtx.barOptions.columnWidth,10)/100,m.globals.isXNumeric){var v=this.barCtx.xRatio;m.globals.minXDiff&&m.globals.minXDiff!==.5&&m.globals.minXDiff/v>0&&(r=m.globals.minXDiff/v),(h=r/b*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(h=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(h=parseInt(this.barCtx.barOptions.columnWidth,10)),u=m.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?m.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),e=m.globals.padHorizontal+(r-h*this.barCtx.seriesLen)/2}return m.globals.barHeight=l,m.globals.barWidth=h,{x:e,y:i,yDivision:n,xDivision:r,barHeight:l,barWidth:h,zeroH:u,zeroW:g}}},{key:"initializeStackedPrevVars",value:function(e){e.w.globals.seriesGroups.forEach(function(i){e[i]||(e[i]={}),e[i].prevY=[],e[i].prevX=[],e[i].prevYF=[],e[i].prevXF=[],e[i].prevYVal=[],e[i].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(e){e.w.globals.seriesGroups.forEach(function(i){e[i]||(e[i]={}),e[i].xArrj=[],e[i].xArrjF=[],e[i].xArrjVal=[],e[i].yArrj=[],e[i].yArrjF=[],e[i].yArrjVal=[]})}},{key:"getPathFillColor",value:function(e,i,n,r){var l,h,u,g,m=this.w,y=this.barCtx.ctx.fill,b=null,v=this.barCtx.barOptions.distributed?n:i;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(k){e[i][n]>=k.from&&e[i][n]<=k.to&&(b=k.color)}),y.fillPath({seriesNumber:this.barCtx.barOptions.distributed?v:r,dataPointIndex:n,color:b,value:e[i][n],fillConfig:(l=m.config.series[i].data[n])===null||l===void 0?void 0:l.fill,fillType:(h=m.config.series[i].data[n])!==null&&h!==void 0&&(u=h.fill)!==null&&u!==void 0&&u.type?(g=m.config.series[i].data[n])===null||g===void 0?void 0:g.fill.type:Array.isArray(m.config.fill.type)?m.config.fill.type[r]:m.config.fill.type})}},{key:"getStrokeWidth",value:function(e,i,n){var r=0,l=this.w;return this.barCtx.series[e][i]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,l.config.stroke.show&&(this.barCtx.isNullValue||(r=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),r}},{key:"createBorderRadiusArr",value:function(e){var i,n=this.w,r=!this.w.config.chart.stacked||n.config.plotOptions.bar.borderRadius<=0,l=e.length,h=0|((i=e[0])===null||i===void 0?void 0:i.length),u=Array.from({length:l},function(){return Array(h).fill(r?"top":"none")});if(r)return u;for(var g=0;g<h;g++){for(var m=[],y=[],b=0,v=0;v<l;v++){var k=e[v][g];k>0?(m.push(v),b++):k<0&&(y.push(v),b++)}if(m.length>0&&y.length===0)if(m.length===1)u[m[0]][g]="both";else{var A,C=m[0],T=m[m.length-1],O=d(m);try{for(O.s();!(A=O.n()).done;){var L=A.value;u[L][g]=L===C?"bottom":L===T?"top":"none"}}catch(ae){O.e(ae)}finally{O.f()}}else if(y.length>0&&m.length===0)if(y.length===1)u[y[0]][g]="both";else{var P,F=Math.max.apply(Math,y),N=Math.min.apply(Math,y),H=d(y);try{for(H.s();!(P=H.n()).done;){var z=P.value;u[z][g]=z===F?"bottom":z===N?"top":"none"}}catch(ae){H.e(ae)}finally{H.f()}}else if(m.length>0&&y.length>0){var B,W=m[m.length-1],V=d(m);try{for(V.s();!(B=V.n()).done;){var G=B.value;u[G][g]=G===W?"top":"none"}}catch(ae){V.e(ae)}finally{V.f()}var q,U=Math.max.apply(Math,y),K=d(y);try{for(K.s();!(q=K.n()).done;){var re=q.value;u[re][g]=re===U?"bottom":"none"}}catch(ae){K.e(ae)}finally{K.f()}}else b===1&&(u[m[0]||y[0]][g]="both")}return u}},{key:"barBackground",value:function(e){var i=e.j,n=e.i,r=e.x1,l=e.x2,h=e.y1,u=e.y2,g=e.elSeries,m=this.w,y=new Q(this.barCtx.ctx),b=new zt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&b===n){i>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(i%=this.barCtx.barOptions.colors.backgroundBarColors.length);var v=this.barCtx.barOptions.colors.backgroundBarColors[i],k=y.drawRect(r!==void 0?r:0,h!==void 0?h:0,l!==void 0?l:m.globals.gridWidth,u!==void 0?u:m.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,v,this.barCtx.barOptions.colors.backgroundBarOpacity);g.add(k),k.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var i,n=e.barWidth,r=e.barXPosition,l=e.y1,h=e.y2,u=e.strokeWidth,g=e.isReversed,m=e.series,y=e.seriesGroup,b=e.realIndex,v=e.i,k=e.j,A=e.w,C=new Q(this.barCtx.ctx);(u=Array.isArray(u)?u[b]:u)||(u=0);var T=n,O=r;(i=A.config.series[b].data[k])!==null&&i!==void 0&&i.columnWidthOffset&&(O=r-A.config.series[b].data[k].columnWidthOffset/2,T=n+A.config.series[b].data[k].columnWidthOffset);var L=u/2,P=O+L,F=O+T-L,N=(m[v][k]>=0?1:-1)*(g?-1:1);l+=.001-L*N,h+=.001+L*N;var H=C.move(P,l),z=C.move(P,l),B=C.line(F,l);if(A.globals.previousPaths.length>0&&(z=this.barCtx.getPreviousPath(b,k,!1)),H=H+C.line(P,h)+C.line(F,h)+B+(A.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[b][k]==="both"?" Z":" z"),z=z+C.line(P,l)+B+B+B+B+B+C.line(P,l)+(A.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[b][k]==="both"?" Z":" z"),this.arrBorderRadius[b][k]!=="none"&&(H=C.roundPathCorners(H,A.config.plotOptions.bar.borderRadius)),A.config.chart.stacked){var W=this.barCtx;(W=this.barCtx[y]).yArrj.push(h-L*N),W.yArrjF.push(Math.abs(l-h+u*N)),W.yArrjVal.push(this.barCtx.series[v][k])}return{pathTo:H,pathFrom:z}}},{key:"getBarpaths",value:function(e){var i,n=e.barYPosition,r=e.barHeight,l=e.x1,h=e.x2,u=e.strokeWidth,g=e.isReversed,m=e.series,y=e.seriesGroup,b=e.realIndex,v=e.i,k=e.j,A=e.w,C=new Q(this.barCtx.ctx);(u=Array.isArray(u)?u[b]:u)||(u=0);var T=n,O=r;(i=A.config.series[b].data[k])!==null&&i!==void 0&&i.barHeightOffset&&(T=n-A.config.series[b].data[k].barHeightOffset/2,O=r+A.config.series[b].data[k].barHeightOffset);var L=u/2,P=T+L,F=T+O-L,N=(m[v][k]>=0?1:-1)*(g?-1:1);l+=.001+L*N,h+=.001-L*N;var H=C.move(l,P),z=C.move(l,P);A.globals.previousPaths.length>0&&(z=this.barCtx.getPreviousPath(b,k,!1));var B=C.line(l,F);if(H=H+C.line(h,P)+C.line(h,F)+B+(A.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[b][k]==="both"?" Z":" z"),z=z+C.line(l,P)+B+B+B+B+B+C.line(l,P)+(A.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[b][k]==="both"?" Z":" z"),this.arrBorderRadius[b][k]!=="none"&&(H=C.roundPathCorners(H,A.config.plotOptions.bar.borderRadius)),A.config.chart.stacked){var W=this.barCtx;(W=this.barCtx[y]).xArrj.push(h+L*N),W.xArrjF.push(Math.abs(l-h-u*N)),W.xArrjVal.push(this.barCtx.series[v][k])}return{pathTo:H,pathFrom:z}}},{key:"checkZeroSeries",value:function(e){for(var i=e.series,n=this.w,r=0;r<i.length;r++){for(var l=0,h=0;h<i[n.globals.maxValsInArrayIndex].length;h++)l+=i[r][h];l===0&&this.barCtx.zeroSerieses.push(r)}}},{key:"getXForValue",value:function(e,i){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?i:null;return e!=null&&(n=i+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),n}},{key:"getYForValue",value:function(e,i,n){var r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?i:null;return e!=null&&(r=i-e/this.barCtx.yRatio[n]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[n]:0)),r}},{key:"getGoalValues",value:function(e,i,n,r,l,h){var u=this,g=this.w,m=[],y=function(k,A){var C;m.push((x(C={},e,e==="x"?u.getXForValue(k,i,!1):u.getYForValue(k,n,h,!1)),x(C,"attrs",A),C))};if(g.globals.seriesGoals[r]&&g.globals.seriesGoals[r][l]&&Array.isArray(g.globals.seriesGoals[r][l])&&g.globals.seriesGoals[r][l].forEach(function(k){y(k.value,k)}),this.barCtx.barOptions.isDumbbell&&g.globals.seriesRange.length){var b=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:g.globals.colors,v={strokeHeight:e==="x"?0:g.globals.markers.size[r],strokeWidth:e==="x"?g.globals.markers.size[r]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(b[r])?b[r][0]:b[r]};y(g.globals.seriesRangeStart[r][l],v),y(g.globals.seriesRangeEnd[r][l],I(I({},v),{},{strokeColor:Array.isArray(b[r])?b[r][1]:b[r]}))}return m}},{key:"drawGoalLine",value:function(e){var i=e.barXPosition,n=e.barYPosition,r=e.goalX,l=e.goalY,h=e.barWidth,u=e.barHeight,g=new Q(this.barCtx.ctx),m=g.group({className:"apexcharts-bar-goals-groups"});m.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:m.node}),m.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var y=null;return this.barCtx.isHorizontal?Array.isArray(r)&&r.forEach(function(b){if(b.x>=-1&&b.x<=g.w.globals.gridWidth+1){var v=b.attrs.strokeHeight!==void 0?b.attrs.strokeHeight:u/2,k=n+v+u/2;y=g.drawLine(b.x,k-2*v,b.x,k,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeWidth?b.attrs.strokeWidth:2,b.attrs.strokeLineCap),m.add(y)}}):Array.isArray(l)&&l.forEach(function(b){if(b.y>=-1&&b.y<=g.w.globals.gridHeight+1){var v=b.attrs.strokeWidth!==void 0?b.attrs.strokeWidth:h/2,k=i+v+h/2;y=g.drawLine(k-2*v,b.y,k,b.y,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeHeight?b.attrs.strokeHeight:2,b.attrs.strokeLineCap),m.add(y)}}),m}},{key:"drawBarShadow",value:function(e){var i=e.prevPaths,n=e.currPaths,r=e.color,l=this.w,h=i.x,u=i.x1,g=i.barYPosition,m=n.x,y=n.x1,b=n.barYPosition,v=g+n.barHeight,k=new Q(this.barCtx.ctx),A=new X,C=k.move(u,v)+k.line(h,v)+k.line(m,b)+k.line(y,b)+k.line(u,v)+(l.config.plotOptions.bar.borderRadiusApplication==="around"||this.arrBorderRadius[realIndex][j]==="both"?" Z":" z");return k.drawPath({d:C,fill:A.shadeColor(.5,X.rgb2hex(r)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(e){var i,n=e.i,r=e.j,l=this.w,h=0,u=0;return(l.config.plotOptions.bar.horizontal?l.globals.series.map(function(g,m){return m}):((i=l.globals.columnSeries)===null||i===void 0?void 0:i.i.map(function(g){return g}))||[]).forEach(function(g){var m=l.globals.seriesPercent[g][r];m&&h++,g<n&&m===0&&u++}),{nonZeroColumns:h,zeroEncounters:u}}},{key:"getGroupIndex",value:function(e){var i=this.w,n=i.globals.seriesGroups.findIndex(function(h){return h.indexOf(i.globals.seriesNames[e])>-1}),r=this.barCtx.columnGroupIndices,l=r.indexOf(n);return l<0&&(r.push(n),l=r.length-1),{groupIndex:n,columnGroupIndex:l}}}]),f}(),us=function(){function f(e,i){s(this,f),this.ctx=e,this.w=e.w;var n=this.w;this.barOptions=n.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=n.config.stroke.width,this.isNullValue=!1,this.isRangeBar=n.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!n.globals.isBarHorizontal&&n.globals.seriesRange.length&&n.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=i,this.xyRatios!==null&&(this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var r=new zt(this.ctx);this.lastActiveBarSerieIndex=r.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var l=r.getBarSeriesIndices(),h=new je(this.ctx);this.stackedSeriesTotals=h.getStackedSeriesTotals(this.w.config.series.map(function(u,g){return l.indexOf(g)===-1?g:-1}).filter(function(u){return u!==-1})),this.barHelpers=new Pu(this)}return c(f,[{key:"draw",value:function(e,i){var n=this.w,r=new Q(this.ctx),l=new je(this.ctx,n);e=l.getLogSeries(e),this.series=e,this.yRatio=l.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var h=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var u=0,g=0;u<e.length;u++,g++){var m,y,b,v,k=void 0,A=void 0,C=[],T=[],O=n.globals.comboCharts?i[u]:u,L=this.barHelpers.getGroupIndex(O).columnGroupIndex,P=r.group({class:"apexcharts-series",rel:u+1,seriesName:X.escapeString(n.globals.seriesNames[O]),"data:realIndex":O});this.ctx.series.addCollapsedClassToSeries(P,O),e[u].length>0&&(this.visibleI=this.visibleI+1);var F=0,N=0;this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[O],this.translationsIndex=O);var H=this.translationsIndex;this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var z=this.barHelpers.initialPositions();A=z.y,F=z.barHeight,y=z.yDivision,v=z.zeroW,k=z.x,N=z.barWidth,m=z.xDivision,b=z.zeroH,this.isHorizontal||T.push(k+N/2);var B=r.group({class:"apexcharts-datalabels","data:realIndex":O});n.globals.delayedElements.push({el:B.node}),B.node.classList.add("apexcharts-element-hidden");var W=r.group({class:"apexcharts-bar-goals-markers"}),V=r.group({class:"apexcharts-bar-shadows"});n.globals.delayedElements.push({el:V.node}),V.node.classList.add("apexcharts-element-hidden");for(var G=0;G<e[u].length;G++){var q=this.barHelpers.getStrokeWidth(u,G,O),U=null,K={indexes:{i:u,j:G,realIndex:O,translationsIndex:H,bc:g},x:k,y:A,strokeWidth:q,elSeries:P};this.isHorizontal?(U=this.drawBarPaths(I(I({},K),{},{barHeight:F,zeroW:v,yDivision:y})),N=this.series[u][G]/this.invertedYRatio):(U=this.drawColumnPaths(I(I({},K),{},{xDivision:m,barWidth:N,zeroH:b})),F=this.series[u][G]/this.yRatio[H]);var re=this.barHelpers.getPathFillColor(e,u,G,O);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&G>0){var ae=this.barHelpers.drawBarShadow({color:typeof re=="string"&&(re==null?void 0:re.indexOf("url"))===-1?re:X.hexToRgba(n.globals.colors[u]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:U});V.add(ae),n.config.chart.dropShadow.enabled&&new tt(this.ctx).dropShadow(ae,n.config.chart.dropShadow,O)}this.pathArr.push(U);var ce=this.barHelpers.drawGoalLine({barXPosition:U.barXPosition,barYPosition:U.barYPosition,goalX:U.goalX,goalY:U.goalY,barHeight:F,barWidth:N});ce&&W.add(ce),A=U.y,k=U.x,G>0&&T.push(k+N/2),C.push(A),this.renderSeries({realIndex:O,pathFill:re,j:G,i:u,columnGroupIndex:L,pathFrom:U.pathFrom,pathTo:U.pathTo,strokeWidth:q,elSeries:P,x:k,y:A,series:e,barHeight:Math.abs(U.barHeight?U.barHeight:F),barWidth:Math.abs(U.barWidth?U.barWidth:N),elDataLabelsWrap:B,elGoalsMarkers:W,elBarShadows:V,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[O]=T,n.globals.seriesYvalues[O]=C,h.add(P)}return h}},{key:"renderSeries",value:function(e){var i=e.realIndex,n=e.pathFill,r=e.lineFill,l=e.j,h=e.i,u=e.columnGroupIndex,g=e.pathFrom,m=e.pathTo,y=e.strokeWidth,b=e.elSeries,v=e.x,k=e.y,A=e.y1,C=e.y2,T=e.series,O=e.barHeight,L=e.barWidth,P=e.barXPosition,F=e.barYPosition,N=e.elDataLabelsWrap,H=e.elGoalsMarkers,z=e.elBarShadows,B=e.visibleSeries,W=e.type,V=e.classes,G=this.w,q=new Q(this.ctx);if(!r){var U=typeof G.globals.stroke.colors[i]=="function"?function(xe){var me,ye=G.config.stroke.colors;return Array.isArray(ye)&&ye.length>0&&((me=ye[xe])||(me=""),typeof me=="function")?me({value:G.globals.series[xe][l],dataPointIndex:l,w:G}):me}(i):G.globals.stroke.colors[i];r=this.barOptions.distributed?G.globals.stroke.colors[l]:U}G.config.series[h].data[l]&&G.config.series[h].data[l].strokeColor&&(r=G.config.series[h].data[l].strokeColor),this.isNullValue&&(n="none");var K=l/G.config.chart.animations.animateGradually.delay*(G.config.chart.animations.speed/G.globals.dataPoints)/2.4,re=q.renderPaths({i:h,j:l,realIndex:i,pathFrom:g,pathTo:m,stroke:r,strokeWidth:y,strokeLineCap:G.config.stroke.lineCap,fill:n,animationDelay:K,initialSpeed:G.config.chart.animations.speed,dataChangeSpeed:G.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(W,"-area ").concat(V),chartType:W});re.attr("clip-path","url(#gridRectBarMask".concat(G.globals.cuid,")"));var ae=G.config.forecastDataPoints;ae.count>0&&l>=G.globals.dataPoints-ae.count&&(re.node.setAttribute("stroke-dasharray",ae.dashArray),re.node.setAttribute("stroke-width",ae.strokeWidth),re.node.setAttribute("fill-opacity",ae.fillOpacity)),A!==void 0&&C!==void 0&&(re.attr("data-range-y1",A),re.attr("data-range-y2",C)),new tt(this.ctx).setSelectionFilter(re,i,l),b.add(re);var ce=new Lu(this).handleBarDataLabels({x:v,y:k,y1:A,y2:C,i:h,j:l,series:T,realIndex:i,columnGroupIndex:u,barHeight:O,barWidth:L,barXPosition:P,barYPosition:F,renderedPath:re,visibleSeries:B});return ce.dataLabels!==null&&N.add(ce.dataLabels),ce.totalDataLabels&&N.add(ce.totalDataLabels),b.add(N),H&&b.add(H),z&&b.add(z),b}},{key:"drawBarPaths",value:function(e){var i,n=e.indexes,r=e.barHeight,l=e.strokeWidth,h=e.zeroW,u=e.x,g=e.y,m=e.yDivision,y=e.elSeries,b=this.w,v=n.i,k=n.j;if(b.globals.isXNumeric)i=(g=(b.globals.seriesX[v][k]-b.globals.minX)/this.invertedXRatio-r)+r*this.visibleI;else if(b.config.plotOptions.bar.hideZeroBarsWhenGrouped){var A=0,C=0;b.globals.seriesPercent.forEach(function(O,L){O[k]&&A++,L<v&&O[k]===0&&C++}),A>0&&(r=this.seriesLen*r/A),i=g+r*this.visibleI,i-=r*C}else i=g+r*this.visibleI;this.isFunnel&&(h-=(this.barHelpers.getXForValue(this.series[v][k],h)-h)/2),u=this.barHelpers.getXForValue(this.series[v][k],h);var T=this.barHelpers.getBarpaths({barYPosition:i,barHeight:r,x1:h,x2:u,strokeWidth:l,isReversed:this.isReversed,series:this.series,realIndex:n.realIndex,i:v,j:k,w:b});return b.globals.isXNumeric||(g+=m),this.barHelpers.barBackground({j:k,i:v,y1:i-r*this.visibleI,y2:r*this.seriesLen,elSeries:y}),{pathTo:T.pathTo,pathFrom:T.pathFrom,x1:h,x:u,y:g,goalX:this.barHelpers.getGoalValues("x",h,null,v,k),barYPosition:i,barHeight:r}}},{key:"drawColumnPaths",value:function(e){var i,n=e.indexes,r=e.x,l=e.y,h=e.xDivision,u=e.barWidth,g=e.zeroH,m=e.strokeWidth,y=e.elSeries,b=this.w,v=n.realIndex,k=n.translationsIndex,A=n.i,C=n.j,T=n.bc;if(b.globals.isXNumeric){var O=this.getBarXForNumericXAxis({x:r,j:C,realIndex:v,barWidth:u});r=O.x,i=O.barXPosition}else if(b.config.plotOptions.bar.hideZeroBarsWhenGrouped){var L=this.barHelpers.getZeroValueEncounters({i:A,j:C}),P=L.nonZeroColumns,F=L.zeroEncounters;P>0&&(u=this.seriesLen*u/P),i=r+u*this.visibleI,i-=u*F}else i=r+u*this.visibleI;l=this.barHelpers.getYForValue(this.series[A][C],g,k);var N=this.barHelpers.getColumnPaths({barXPosition:i,barWidth:u,y1:g,y2:l,strokeWidth:m,isReversed:this.isReversed,series:this.series,realIndex:v,i:A,j:C,w:b});return b.globals.isXNumeric||(r+=h),this.barHelpers.barBackground({bc:T,j:C,i:A,x1:i-m/2-u*this.visibleI,x2:u*this.seriesLen+m/2,elSeries:y}),{pathTo:N.pathTo,pathFrom:N.pathFrom,x:r,y:l,goalY:this.barHelpers.getGoalValues("y",null,g,A,C,k),barXPosition:i,barWidth:u}}},{key:"getBarXForNumericXAxis",value:function(e){var i=e.x,n=e.barWidth,r=e.realIndex,l=e.j,h=this.w,u=r;return h.globals.seriesX[r].length||(u=h.globals.maxValsInArrayIndex),X.isNumber(h.globals.seriesX[u][l])&&(i=(h.globals.seriesX[u][l]-h.globals.minX)/this.xRatio-n*this.seriesLen/2),{barXPosition:i+n*this.visibleI,x:i}}},{key:"getPreviousPath",value:function(e,i){for(var n,r=this.w,l=0;l<r.globals.previousPaths.length;l++){var h=r.globals.previousPaths[l];h.paths&&h.paths.length>0&&parseInt(h.realIndex,10)===parseInt(e,10)&&r.globals.previousPaths[l].paths[i]!==void 0&&(n=r.globals.previousPaths[l].paths[i].d)}return n}}]),f}(),al=function(f){S(i,us);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return c(i,[{key:"draw",value:function(n,r){var l=this,h=this.w;this.graphics=new Q(this.ctx),this.bar=new us(this.ctx,this.xyRatios);var u=new je(this.ctx,h);n=u.getLogSeries(n),this.yRatio=u.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n),h.config.chart.stackType==="100%"&&(n=h.globals.comboCharts?r.map(function(A){return h.globals.seriesPercent[A]}):h.globals.seriesPercent.slice()),this.series=n,this.barHelpers.initializeStackedPrevVars(this);for(var g=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),m=0,y=0,b=function(A,C){var T=void 0,O=void 0,L=void 0,P=void 0,F=h.globals.comboCharts?r[A]:A,N=l.barHelpers.getGroupIndex(F),H=N.groupIndex,z=N.columnGroupIndex;l.groupCtx=l[h.globals.seriesGroups[H]];var B=[],W=[],V=0;l.yRatio.length>1&&(l.yaxisIndex=h.globals.seriesYAxisReverseMap[F][0],V=F),l.isReversed=h.config.yaxis[l.yaxisIndex]&&h.config.yaxis[l.yaxisIndex].reversed;var G=l.graphics.group({class:"apexcharts-series",seriesName:X.escapeString(h.globals.seriesNames[F]),rel:A+1,"data:realIndex":F});l.ctx.series.addCollapsedClassToSeries(G,F);var q=l.graphics.group({class:"apexcharts-datalabels","data:realIndex":F}),U=l.graphics.group({class:"apexcharts-bar-goals-markers"}),K=0,re=0,ae=l.initialPositions(m,y,T,O,L,P,V);y=ae.y,K=ae.barHeight,O=ae.yDivision,P=ae.zeroW,m=ae.x,re=ae.barWidth,T=ae.xDivision,L=ae.zeroH,h.globals.barHeight=K,h.globals.barWidth=re,l.barHelpers.initializeStackedXYVars(l),l.groupCtx.prevY.length===1&&l.groupCtx.prevY[0].every(function(at){return isNaN(at)})&&(l.groupCtx.prevY[0]=l.groupCtx.prevY[0].map(function(){return L}),l.groupCtx.prevYF[0]=l.groupCtx.prevYF[0].map(function(){return 0}));for(var ce=0;ce<h.globals.dataPoints;ce++){var xe=l.barHelpers.getStrokeWidth(A,ce,F),me={indexes:{i:A,j:ce,realIndex:F,translationsIndex:V,bc:C},strokeWidth:xe,x:m,y,elSeries:G,columnGroupIndex:z,seriesGroup:h.globals.seriesGroups[H]},ye=null;l.isHorizontal?(ye=l.drawStackedBarPaths(I(I({},me),{},{zeroW:P,barHeight:K,yDivision:O})),re=l.series[A][ce]/l.invertedYRatio):(ye=l.drawStackedColumnPaths(I(I({},me),{},{xDivision:T,barWidth:re,zeroH:L})),K=l.series[A][ce]/l.yRatio[V]);var be=l.barHelpers.drawGoalLine({barXPosition:ye.barXPosition,barYPosition:ye.barYPosition,goalX:ye.goalX,goalY:ye.goalY,barHeight:K,barWidth:re});be&&U.add(be),y=ye.y,m=ye.x,B.push(m),W.push(y);var Xe=l.barHelpers.getPathFillColor(n,A,ce,F),We="",Re=h.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y";(l.barHelpers.arrBorderRadius[F][ce]==="bottom"&&h.globals.series[F][ce]>0||l.barHelpers.arrBorderRadius[F][ce]==="top"&&h.globals.series[F][ce]<0)&&(We=Re),G=l.renderSeries({realIndex:F,pathFill:Xe,j:ce,i:A,columnGroupIndex:z,pathFrom:ye.pathFrom,pathTo:ye.pathTo,strokeWidth:xe,elSeries:G,x:m,y,series:n,barHeight:K,barWidth:re,elDataLabelsWrap:q,elGoalsMarkers:U,type:"bar",visibleSeries:z,classes:We})}h.globals.seriesXvalues[F]=B,h.globals.seriesYvalues[F]=W,l.groupCtx.prevY.push(l.groupCtx.yArrj),l.groupCtx.prevYF.push(l.groupCtx.yArrjF),l.groupCtx.prevYVal.push(l.groupCtx.yArrjVal),l.groupCtx.prevX.push(l.groupCtx.xArrj),l.groupCtx.prevXF.push(l.groupCtx.xArrjF),l.groupCtx.prevXVal.push(l.groupCtx.xArrjVal),g.add(G)},v=0,k=0;v<n.length;v++,k++)b(v,k);return g}},{key:"initialPositions",value:function(n,r,l,h,u,g,m){var y,b,v=this.w;if(this.isHorizontal){h=v.globals.gridHeight/v.globals.dataPoints;var k=v.config.plotOptions.bar.barHeight;y=String(k).indexOf("%")===-1?parseInt(k,10):h*parseInt(k,10)/100,g=v.globals.padHorizontal+(this.isReversed?v.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),r=(h-y)/2}else{b=l=v.globals.gridWidth/v.globals.dataPoints;var A=v.config.plotOptions.bar.columnWidth;v.globals.isXNumeric&&v.globals.dataPoints>1?b=(l=v.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(A).indexOf("%")===-1?b=parseInt(A,10):b*=parseInt(A,10)/100,u=this.isReversed?this.baseLineY[m]:v.globals.gridHeight-this.baseLineY[m],n=v.globals.padHorizontal+(l-b)/2}var C=v.globals.barGroups.length||1;return{x:n,y:r,yDivision:h,xDivision:l,barHeight:y/C,barWidth:b/C,zeroH:u,zeroW:g}}},{key:"drawStackedBarPaths",value:function(n){for(var r,l=n.indexes,h=n.barHeight,u=n.strokeWidth,g=n.zeroW,m=n.x,y=n.y,b=n.columnGroupIndex,v=n.seriesGroup,k=n.yDivision,A=n.elSeries,C=this.w,T=y+b*h,O=l.i,L=l.j,P=l.realIndex,F=l.translationsIndex,N=0,H=0;H<this.groupCtx.prevXF.length;H++)N+=this.groupCtx.prevXF[H][L];var z;if((z=v.indexOf(C.config.series[P].name))>0){var B=g;this.groupCtx.prevXVal[z-1][L]<0?B=this.series[O][L]>=0?this.groupCtx.prevX[z-1][L]+N-2*(this.isReversed?N:0):this.groupCtx.prevX[z-1][L]:this.groupCtx.prevXVal[z-1][L]>=0&&(B=this.series[O][L]>=0?this.groupCtx.prevX[z-1][L]:this.groupCtx.prevX[z-1][L]-N+2*(this.isReversed?N:0)),r=B}else r=g;m=this.series[O][L]===null?r:r+this.series[O][L]/this.invertedYRatio-2*(this.isReversed?this.series[O][L]/this.invertedYRatio:0);var W=this.barHelpers.getBarpaths({barYPosition:T,barHeight:h,x1:r,x2:m,strokeWidth:u,isReversed:this.isReversed,series:this.series,realIndex:l.realIndex,seriesGroup:v,i:O,j:L,w:C});return this.barHelpers.barBackground({j:L,i:O,y1:T,y2:h,elSeries:A}),y+=k,{pathTo:W.pathTo,pathFrom:W.pathFrom,goalX:this.barHelpers.getGoalValues("x",g,null,O,L,F),barXPosition:r,barYPosition:T,x:m,y}}},{key:"drawStackedColumnPaths",value:function(n){var r=n.indexes,l=n.x,h=n.y,u=n.xDivision,g=n.barWidth,m=n.zeroH,y=n.columnGroupIndex,b=n.seriesGroup,v=n.elSeries,k=this.w,A=r.i,C=r.j,T=r.bc,O=r.realIndex,L=r.translationsIndex;if(k.globals.isXNumeric){var P=k.globals.seriesX[O][C];P||(P=0),l=(P-k.globals.minX)/this.xRatio-g/2*k.globals.barGroups.length}for(var F,N=l+y*g,H=0,z=0;z<this.groupCtx.prevYF.length;z++)H+=isNaN(this.groupCtx.prevYF[z][C])?0:this.groupCtx.prevYF[z][C];var B=A;if(b&&(B=b.indexOf(k.globals.seriesNames[O])),B>0&&!k.globals.isXNumeric||B>0&&k.globals.isXNumeric&&k.globals.seriesX[O-1][C]===k.globals.seriesX[O][C]){var W,V,G,q=Math.min(this.yRatio.length+1,O+1);if(this.groupCtx.prevY[B-1]!==void 0&&this.groupCtx.prevY[B-1].length)for(var U=1;U<q;U++){var K;if(!isNaN((K=this.groupCtx.prevY[B-U])===null||K===void 0?void 0:K[C])){G=this.groupCtx.prevY[B-U][C];break}}for(var re=1;re<q;re++){var ae,ce;if(((ae=this.groupCtx.prevYVal[B-re])===null||ae===void 0?void 0:ae[C])<0){V=this.series[A][C]>=0?G-H+2*(this.isReversed?H:0):G;break}if(((ce=this.groupCtx.prevYVal[B-re])===null||ce===void 0?void 0:ce[C])>=0){V=this.series[A][C]>=0?G:G+H-2*(this.isReversed?H:0);break}}V===void 0&&(V=k.globals.gridHeight),F=(W=this.groupCtx.prevYF[0])!==null&&W!==void 0&&W.every(function(me){return me===0})&&this.groupCtx.prevYF.slice(1,B).every(function(me){return me.every(function(ye){return isNaN(ye)})})?m:V}else F=m;h=this.series[A][C]?F-this.series[A][C]/this.yRatio[L]+2*(this.isReversed?this.series[A][C]/this.yRatio[L]:0):F;var xe=this.barHelpers.getColumnPaths({barXPosition:N,barWidth:g,y1:F,y2:h,yRatio:this.yRatio[L],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:b,realIndex:r.realIndex,i:A,j:C,w:k});return this.barHelpers.barBackground({bc:T,j:C,i:A,x1:N,x2:g,elSeries:v}),{pathTo:xe.pathTo,pathFrom:xe.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,m,A,C),barXPosition:N,x:k.globals.isXNumeric?l:l+u,y:h}}}]),i}(),Wr=function(f){S(i,us);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return c(i,[{key:"draw",value:function(n,r,l){var h=this,u=this.w,g=new Q(this.ctx),m=u.globals.comboCharts?r:u.config.chart.type,y=new _t(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=u.config.plotOptions.bar.horizontal;var b=new je(this.ctx,u);n=b.getLogSeries(n),this.series=n,this.yRatio=b.getLogYRatios(this.yRatio),this.barHelpers.initVariables(n);for(var v=g.group({class:"apexcharts-".concat(m,"-series apexcharts-plot-series")}),k=function(C){h.isBoxPlot=u.config.chart.type==="boxPlot"||u.config.series[C].type==="boxPlot";var T,O,L,P,F=void 0,N=void 0,H=[],z=[],B=u.globals.comboCharts?l[C]:C,W=h.barHelpers.getGroupIndex(B).columnGroupIndex,V=g.group({class:"apexcharts-series",seriesName:X.escapeString(u.globals.seriesNames[B]),rel:C+1,"data:realIndex":B});h.ctx.series.addCollapsedClassToSeries(V,B),n[C].length>0&&(h.visibleI=h.visibleI+1);var G,q,U=0;h.yRatio.length>1&&(h.yaxisIndex=u.globals.seriesYAxisReverseMap[B][0],U=B);var K=h.barHelpers.initialPositions();N=K.y,G=K.barHeight,O=K.yDivision,P=K.zeroW,F=K.x,q=K.barWidth,T=K.xDivision,L=K.zeroH,z.push(F+q/2);for(var re=g.group({class:"apexcharts-datalabels","data:realIndex":B}),ae=g.group({class:"apexcharts-bar-goals-markers"}),ce=function(me){var ye=h.barHelpers.getStrokeWidth(C,me,B),be=null,Xe={indexes:{i:C,j:me,realIndex:B,translationsIndex:U},x:F,y:N,strokeWidth:ye,elSeries:V};be=h.isHorizontal?h.drawHorizontalBoxPaths(I(I({},Xe),{},{yDivision:O,barHeight:G,zeroW:P})):h.drawVerticalBoxPaths(I(I({},Xe),{},{xDivision:T,barWidth:q,zeroH:L})),N=be.y,F=be.x;var We=h.barHelpers.drawGoalLine({barXPosition:be.barXPosition,barYPosition:be.barYPosition,goalX:be.goalX,goalY:be.goalY,barHeight:G,barWidth:q});We&&ae.add(We),me>0&&z.push(F+q/2),H.push(N),be.pathTo.forEach(function(Re,at){var Me=!h.isBoxPlot&&h.candlestickOptions.wick.useFillColor?be.color[at]:u.globals.stroke.colors[C],Ae=y.fillPath({seriesNumber:B,dataPointIndex:me,color:be.color[at],value:n[C][me]});h.renderSeries({realIndex:B,pathFill:Ae,lineFill:Me,j:me,i:C,pathFrom:be.pathFrom,pathTo:Re,strokeWidth:ye,elSeries:V,x:F,y:N,series:n,columnGroupIndex:W,barHeight:G,barWidth:q,elDataLabelsWrap:re,elGoalsMarkers:ae,visibleSeries:h.visibleI,type:u.config.chart.type})})},xe=0;xe<u.globals.dataPoints;xe++)ce(xe);u.globals.seriesXvalues[B]=z,u.globals.seriesYvalues[B]=H,v.add(V)},A=0;A<n.length;A++)k(A);return v}},{key:"drawVerticalBoxPaths",value:function(n){var r=n.indexes,l=n.x;n.y;var h=n.xDivision,u=n.barWidth,g=n.zeroH,m=n.strokeWidth,y=this.w,b=new Q(this.ctx),v=r.i,k=r.j,A=y.config.plotOptions.candlestick.colors,C=this.boxOptions.colors,T=r.realIndex,O=function(re){return Array.isArray(re)?re[T]:re},L=O(A.upward),P=O(A.downward),F=this.yRatio[r.translationsIndex],N=this.getOHLCValue(T,k),H=g,z=g,B=N.o<N.c?[L]:[P];this.isBoxPlot&&(B=[O(C.lower),O(C.upper)]);var W=Math.min(N.o,N.c),V=Math.max(N.o,N.c),G=N.m;y.globals.isXNumeric&&(l=(y.globals.seriesX[T][k]-y.globals.minX)/this.xRatio-u/2);var q=l+u*this.visibleI;this.series[v][k]===void 0||this.series[v][k]===null?(W=g,V=g):(W=g-W/F,V=g-V/F,H=g-N.h/F,z=g-N.l/F,G=g-N.m/F);var U=b.move(q,g),K=b.move(q+u/2,W);return y.globals.previousPaths.length>0&&(K=this.getPreviousPath(T,k,!0)),U=this.isBoxPlot?[b.move(q,W)+b.line(q+u/2,W)+b.line(q+u/2,H)+b.line(q+u/4,H)+b.line(q+u-u/4,H)+b.line(q+u/2,H)+b.line(q+u/2,W)+b.line(q+u,W)+b.line(q+u,G)+b.line(q,G)+b.line(q,W+m/2),b.move(q,G)+b.line(q+u,G)+b.line(q+u,V)+b.line(q+u/2,V)+b.line(q+u/2,z)+b.line(q+u-u/4,z)+b.line(q+u/4,z)+b.line(q+u/2,z)+b.line(q+u/2,V)+b.line(q,V)+b.line(q,G)+"z"]:[b.move(q,V)+b.line(q+u/2,V)+b.line(q+u/2,H)+b.line(q+u/2,V)+b.line(q+u,V)+b.line(q+u,W)+b.line(q+u/2,W)+b.line(q+u/2,z)+b.line(q+u/2,W)+b.line(q,W)+b.line(q,V-m/2)],K+=b.move(q,W),y.globals.isXNumeric||(l+=h),{pathTo:U,pathFrom:K,x:l,y:V,goalY:this.barHelpers.getGoalValues("y",null,g,v,k,r.translationsIndex),barXPosition:q,color:B}}},{key:"drawHorizontalBoxPaths",value:function(n){var r=n.indexes;n.x;var l=n.y,h=n.yDivision,u=n.barHeight,g=n.zeroW,m=n.strokeWidth,y=this.w,b=new Q(this.ctx),v=r.i,k=r.j,A=this.boxOptions.colors.lower;this.isBoxPlot&&(A=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var C=this.invertedYRatio,T=r.realIndex,O=this.getOHLCValue(T,k),L=g,P=g,F=Math.min(O.o,O.c),N=Math.max(O.o,O.c),H=O.m;y.globals.isXNumeric&&(l=(y.globals.seriesX[T][k]-y.globals.minX)/this.invertedXRatio-u/2);var z=l+u*this.visibleI;this.series[v][k]===void 0||this.series[v][k]===null?(F=g,N=g):(F=g+F/C,N=g+N/C,L=g+O.h/C,P=g+O.l/C,H=g+O.m/C);var B=b.move(g,z),W=b.move(F,z+u/2);return y.globals.previousPaths.length>0&&(W=this.getPreviousPath(T,k,!0)),B=[b.move(F,z)+b.line(F,z+u/2)+b.line(L,z+u/2)+b.line(L,z+u/2-u/4)+b.line(L,z+u/2+u/4)+b.line(L,z+u/2)+b.line(F,z+u/2)+b.line(F,z+u)+b.line(H,z+u)+b.line(H,z)+b.line(F+m/2,z),b.move(H,z)+b.line(H,z+u)+b.line(N,z+u)+b.line(N,z+u/2)+b.line(P,z+u/2)+b.line(P,z+u-u/4)+b.line(P,z+u/4)+b.line(P,z+u/2)+b.line(N,z+u/2)+b.line(N,z)+b.line(H,z)+"z"],W+=b.move(F,z),y.globals.isXNumeric||(l+=h),{pathTo:B,pathFrom:W,x:N,y:l,goalX:this.barHelpers.getGoalValues("x",g,null,v,k),barYPosition:z,color:A}}},{key:"getOHLCValue",value:function(n,r){var l=this.w,h=new je(this.ctx,l),u=h.getLogValAtSeriesIndex(l.globals.seriesCandleH[n][r],n),g=h.getLogValAtSeriesIndex(l.globals.seriesCandleO[n][r],n),m=h.getLogValAtSeriesIndex(l.globals.seriesCandleM[n][r],n),y=h.getLogValAtSeriesIndex(l.globals.seriesCandleC[n][r],n),b=h.getLogValAtSeriesIndex(l.globals.seriesCandleL[n][r],n);return{o:this.isBoxPlot?u:g,h:this.isBoxPlot?g:u,m,l:this.isBoxPlot?y:b,c:this.isBoxPlot?b:y}}}]),i}(),ol=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"checkColorRange",value:function(){var e=this.w,i=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map(function(r,l){r.from<=0&&(i=!0)}),i}},{key:"getShadeColor",value:function(e,i,n,r){var l=this.w,h=1,u=l.config.plotOptions[e].shadeIntensity,g=this.determineColor(e,i,n);l.globals.hasNegs||r?h=l.config.plotOptions[e].reverseNegativeShade?g.percent<0?g.percent/100*(1.25*u):(1-g.percent/100)*(1.25*u):g.percent<=0?1-(1+g.percent/100)*u:(1-g.percent/100)*u:(h=1-g.percent/100,e==="treemap"&&(h=(1-g.percent/100)*(1.25*u)));var m=g.color,y=new X;if(l.config.plotOptions[e].enableShades)if(this.w.config.theme.mode==="dark"){var b=y.shadeColor(-1*h,g.color);m=X.hexToRgba(X.isColorHex(b)?b:X.rgb2hex(b),l.config.fill.opacity)}else{var v=y.shadeColor(h,g.color);m=X.hexToRgba(X.isColorHex(v)?v:X.rgb2hex(v),l.config.fill.opacity)}return{color:m,colorProps:g}}},{key:"determineColor",value:function(e,i,n){var r=this.w,l=r.globals.series[i][n],h=r.config.plotOptions[e],u=h.colorScale.inverse?n:i;h.distributed&&r.config.chart.type==="treemap"&&(u=n);var g=r.globals.colors[u],m=null,y=Math.min.apply(Math,Y(r.globals.series[i])),b=Math.max.apply(Math,Y(r.globals.series[i]));h.distributed||e!=="heatmap"||(y=r.globals.minY,b=r.globals.maxY),h.colorScale.min!==void 0&&(y=h.colorScale.min<r.globals.minY?h.colorScale.min:r.globals.minY,b=h.colorScale.max>r.globals.maxY?h.colorScale.max:r.globals.maxY);var v=Math.abs(b)+Math.abs(y),k=100*l/(v===0?v-1e-6:v);return h.colorScale.ranges.length>0&&h.colorScale.ranges.map(function(A,C){if(l>=A.from&&l<=A.to){g=A.color,m=A.foreColor?A.foreColor:null,y=A.from,b=A.to;var T=Math.abs(b)+Math.abs(y);k=100*l/(T===0?T-1e-6:T)}}),{color:g,foreColor:m,percent:k}}},{key:"calculateDataLabels",value:function(e){var i=e.text,n=e.x,r=e.y,l=e.i,h=e.j,u=e.colorProps,g=e.fontSize,m=this.w.config.dataLabels,y=new Q(this.ctx),b=new ds(this.ctx),v=null;if(m.enabled){v=y.group({class:"apexcharts-data-labels"});var k=m.offsetX,A=m.offsetY,C=n+k,T=r+parseFloat(m.style.fontSize)/3+A;b.plotDataLabelsText({x:C,y:T,text:i,i:l,j:h,color:u.foreColor,parent:v,fontSize:g,dataLabelsConfig:m})}return v}},{key:"addListeners",value:function(e){var i=new Q(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e))}}]),f}(),Nu=function(){function f(e,i){s(this,f),this.ctx=e,this.w=e.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new ol(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return c(f,[{key:"draw",value:function(e){var i=this.w,n=new Q(this.ctx),r=n.group({class:"apexcharts-heatmap"});r.attr("clip-path","url(#gridRectMask".concat(i.globals.cuid,")"));var l=i.globals.gridWidth/i.globals.dataPoints,h=i.globals.gridHeight/i.globals.series.length,u=0,g=!1;this.negRange=this.helpers.checkColorRange();var m=e.slice();i.config.yaxis[0].reversed&&(g=!0,m.reverse());for(var y=g?0:m.length-1;g?y<m.length:y>=0;g?y++:y--){var b=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:X.escapeString(i.globals.seriesNames[y]),rel:y+1,"data:realIndex":y});if(this.ctx.series.addCollapsedClassToSeries(b,y),i.config.chart.dropShadow.enabled){var v=i.config.chart.dropShadow;new tt(this.ctx).dropShadow(b,v,y)}for(var k=0,A=i.config.plotOptions.heatmap.shadeIntensity,C=0,T=0;T<i.globals.dataPoints;T++)if(i.globals.seriesX.length&&i.globals.minX+i.globals.minXDiff*T<i.globals.seriesX[y][C])k+=l;else{if(C>=m[y].length)break;var O=this.helpers.getShadeColor(i.config.chart.type,y,C,this.negRange),L=O.color,P=O.colorProps;i.config.fill.type==="image"&&(L=new _t(this.ctx).fillPath({seriesNumber:y,dataPointIndex:C,opacity:i.globals.hasNegs?P.percent<0?1-(1+P.percent/100):A+P.percent/100:P.percent/100,patternID:X.randomId(),width:i.config.fill.image.width?i.config.fill.image.width:l,height:i.config.fill.image.height?i.config.fill.image.height:h}));var F=this.rectRadius,N=n.drawRect(k,u,l,h,F);if(N.attr({cx:k,cy:u}),N.node.classList.add("apexcharts-heatmap-rect"),b.add(N),N.attr({fill:L,i:y,index:y,j:C,val:e[y][C],"stroke-width":this.strokeWidth,stroke:i.config.plotOptions.heatmap.useFillColorAsStroke?L:i.globals.stroke.colors[0],color:L}),this.helpers.addListeners(N),i.config.chart.animations.enabled&&!i.globals.dataChanged){var H=1;i.globals.resized||(H=i.config.chart.animations.speed),this.animateHeatMap(N,k,u,l,h,H)}if(i.globals.dataChanged){var z=1;if(this.dynamicAnim.enabled&&i.globals.shouldAnimate){z=this.dynamicAnim.speed;var B=i.globals.previousPaths[y]&&i.globals.previousPaths[y][C]&&i.globals.previousPaths[y][C].color;B||(B="rgba(255, 255, 255, 0)"),this.animateHeatColor(N,X.isColorHex(B)?B:X.rgb2hex(B),X.isColorHex(L)?L:X.rgb2hex(L),z)}}var W=(0,i.config.dataLabels.formatter)(i.globals.series[y][C],{value:i.globals.series[y][C],seriesIndex:y,dataPointIndex:C,w:i}),V=this.helpers.calculateDataLabels({text:W,x:k+l/2,y:u+h/2,i:y,j:C,colorProps:P,series:m});V!==null&&b.add(V),k+=l,C++}u+=h,r.add(b)}var G=i.globals.yAxisScale[0].result.slice();return i.config.yaxis[0].reversed?G.unshift(""):G.push(""),i.globals.yAxisScale[0].result=G,r}},{key:"animateHeatMap",value:function(e,i,n,r,l,h){var u=new Z(this.ctx);u.animateRect(e,{x:i+r/2,y:n+l/2,width:0,height:0},{x:i,y:n,width:r,height:l},h,function(){u.animationCompleted(e)})}},{key:"animateHeatColor",value:function(e,i,n,r){e.attr({fill:i}).animate(r).attr({fill:n})}}]),f}(),ll=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"drawYAxisTexts",value:function(e,i,n,r){var l=this.w,h=l.config.yaxis[0],u=l.globals.yLabelFormatters[0];return new Q(this.ctx).drawText({x:e+h.labels.offsetX,y:i+h.labels.offsetY,text:u(r,n),textAnchor:"middle",fontSize:h.labels.style.fontSize,fontFamily:h.labels.style.fontFamily,foreColor:Array.isArray(h.labels.style.colors)?h.labels.style.colors[n]:h.labels.style.colors})}}]),f}(),cl=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=i.globals.stroke.colors!==void 0?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,i.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100;var n=i.config.plotOptions.pie.customScale,r=i.globals.gridWidth/2,l=i.globals.gridHeight/2;this.translateX=r-r*n,this.translateY=l-l*n,this.dataLabelsGroup=new Q(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return c(f,[{key:"draw",value:function(e){var i=this,n=this.w,r=new Q(this.ctx),l=r.group({class:"apexcharts-pie"});if(n.globals.noData)return l;for(var h=0,u=0;u<e.length;u++)h+=X.negToZero(e[u]);var g=[],m=r.group();h===0&&(h=1e-5),e.forEach(function(P){i.maxY=Math.max(i.maxY,P)}),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),n.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(l);for(var y=0;y<e.length;y++){var b=this.fullAngle*X.negToZero(e[y])/h;g.push(b),this.chartType==="polarArea"?(g[y]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[y]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var v,k=0,A=0;A<n.globals.previousPaths.length;A++)k+=X.negToZero(n.globals.previousPaths[A]);for(var C=0;C<n.globals.previousPaths.length;C++)v=this.fullAngle*X.negToZero(n.globals.previousPaths[C])/k,this.prevSectorAngleArr.push(v)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var T=r.drawCircle(this.donutSize);T.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),m.add(T)}var O=this.drawArcs(g,e);if(this.sliceLabels.forEach(function(P){O.add(P)}),m.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),m.add(O),l.add(m),this.donutDataLabels.show){var L=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});l.add(L)}return n.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(l),l}},{key:"drawArcs",value:function(e,i){var n=this.w,r=new tt(this.ctx),l=new Q(this.ctx),h=new _t(this.ctx),u=l.group({class:"apexcharts-slices"}),g=this.initialAngle,m=this.initialAngle,y=this.initialAngle,b=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var v=0;v<e.length;v++){var k=l.group({class:"apexcharts-series apexcharts-pie-series",seriesName:X.escapeString(n.globals.seriesNames[v]),rel:v+1,"data:realIndex":v});u.add(k),m=b,y=(g=y)+e[v],b=m+this.prevSectorAngleArr[v];var A=y<g?this.fullAngle+y-g:y-g,C=h.fillPath({seriesNumber:v,size:this.sliceSizes[v],value:i[v]}),T=this.getChangedPath(m,b),O=l.drawPath({d:T,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[v]:this.lineColorArr,strokeWidth:0,fill:C,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(v)});if(O.attr({index:0,j:v}),r.setSelectionFilter(O,0,v),n.config.chart.dropShadow.enabled){var L=n.config.chart.dropShadow;r.dropShadow(O,L,v)}this.addListeners(O,this.donutDataLabels),Q.setAttrs(O.node,{"data:angle":A,"data:startAngle":g,"data:strokeWidth":this.strokeWidth,"data:value":i[v]});var P={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?P=X.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(g+A/2)%this.fullAngle):this.chartType==="donut"&&(P=X.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(g+A/2)%this.fullAngle)),k.add(O);var F=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):((F=A/this.fullAngle*n.config.chart.animations.speed)===0&&(F=1),this.animDur=F+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(O,{size:this.sliceSizes[v],endAngle:y,startAngle:g,prevStartAngle:m,prevEndAngle:b,animateStartingPos:!0,i:v,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(O,{size:this.sliceSizes[v],endAngle:y,startAngle:g,i:v,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:F}),n.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&O.node.addEventListener("mouseup",this.pieClicked.bind(this,v)),n.globals.selectedDataPoints[0]!==void 0&&n.globals.selectedDataPoints[0].indexOf(v)>-1&&this.pieClicked(v),n.config.dataLabels.enabled){var N=P.x,H=P.y,z=100*A/this.fullAngle+"%";if(A!==0&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[v]){var B=n.config.dataLabels.formatter;B!==void 0&&(z=B(n.globals.seriesPercent[v][0],{seriesIndex:v,w:n}));var W=n.globals.dataLabels.style.colors[v],V=l.group({class:"apexcharts-datalabels"}),G=l.drawText({x:N,y:H,text:z,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:W});if(V.add(G),n.config.dataLabels.dropShadow.enabled){var q=n.config.dataLabels.dropShadow;r.dropShadow(G,q)}G.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&n.globals.resized===!1&&(G.node.classList.add("apexcharts-pie-label-delay"),G.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(V)}}}return u}},{key:"addListeners",value:function(e,i){var n=new Q(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,i)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,i)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,i)))}},{key:"animatePaths",value:function(e,i){var n=this.w,r=i.endAngle<i.startAngle?this.fullAngle+i.endAngle-i.startAngle:i.endAngle-i.startAngle,l=r,h=i.startAngle,u=i.startAngle;i.prevStartAngle!==void 0&&i.prevEndAngle!==void 0&&(h=i.prevEndAngle,l=i.prevEndAngle<i.prevStartAngle?this.fullAngle+i.prevEndAngle-i.prevStartAngle:i.prevEndAngle-i.prevStartAngle),i.i===n.config.series.length-1&&(r+u>this.fullAngle?i.endAngle=i.endAngle-(r+u):r+u<this.fullAngle&&(i.endAngle=i.endAngle+(this.fullAngle-(r+u)))),r===this.fullAngle&&(r=this.fullAngle-.01),this.animateArc(e,h,u,r,l,i)}},{key:"animateArc",value:function(e,i,n,r,l,h){var u,g=this,m=this.w,y=new Z(this.ctx),b=h.size;(isNaN(i)||isNaN(l))&&(i=n,l=r,h.dur=0);var v=r,k=n,A=i<n?this.fullAngle+i-n:i-n;m.globals.dataChanged&&h.shouldSetPrevPaths&&h.prevEndAngle&&(u=g.getPiePath({me:g,startAngle:h.prevStartAngle,angle:h.prevEndAngle<h.prevStartAngle?this.fullAngle+h.prevEndAngle-h.prevStartAngle:h.prevEndAngle-h.prevStartAngle,size:b}),e.attr({d:u})),h.dur!==0?e.animate(h.dur,h.animBeginArr[h.i]).after(function(){g.chartType!=="pie"&&g.chartType!=="donut"&&g.chartType!=="polarArea"||this.animate(m.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":g.strokeWidth}),h.i===m.config.series.length-1&&y.animationCompleted(e)}).during(function(C){v=A+(r-A)*C,h.animateStartingPos&&(v=l+(r-l)*C,k=i-l+(n-(i-l))*C),u=g.getPiePath({me:g,startAngle:k,angle:v,size:b}),e.node.setAttribute("data:pathOrig",u),e.attr({d:u})}):(u=g.getPiePath({me:g,startAngle:k,angle:r,size:b}),h.isTrack||(m.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",u),e.attr({d:u,"stroke-width":g.strokeWidth}))}},{key:"pieClicked",value:function(e){var i,n=this.w,r=this,l=r.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),h=n.globals.dom.Paper.findOne(".apexcharts-".concat(r.chartType.toLowerCase(),"-slice-").concat(e));if(h.attr("data:pieClicked")!=="true"){var u=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(u,function(b){b.setAttribute("data:pieClicked","false");var v=b.getAttribute("data:pathOrig");v&&b.setAttribute("d",v)}),n.globals.capturedDataPointIndex=e,h.attr("data:pieClicked","true");var g=parseInt(h.attr("data:startAngle"),10),m=parseInt(h.attr("data:angle"),10);i=r.getPiePath({me:r,startAngle:g,angle:m,size:l}),m!==360&&h.plot(i)}else{h.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(h.node,this.donutDataLabels);var y=h.attr("data:pathOrig");h.attr({d:y})}}},{key:"getChangedPath",value:function(e,i){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:i-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var i,n=e.me,r=e.startAngle,l=e.angle,h=e.size,u=new Q(this.ctx),g=r,m=Math.PI*(g-90)/180,y=l+r;Math.ceil(y)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(y=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(y)>this.fullAngle&&(y-=this.fullAngle);var b=Math.PI*(y-90)/180,v=n.centerX+h*Math.cos(m),k=n.centerY+h*Math.sin(m),A=n.centerX+h*Math.cos(b),C=n.centerY+h*Math.sin(b),T=X.polarToCartesian(n.centerX,n.centerY,n.donutSize,y),O=X.polarToCartesian(n.centerX,n.centerY,n.donutSize,g),L=l>180?1:0,P=["M",v,k,"A",h,h,0,L,1,A,C];return i=n.chartType==="donut"?[].concat(P,["L",T.x,T.y,"A",n.donutSize,n.donutSize,0,L,0,O.x,O.y,"L",v,k,"z"]).join(" "):n.chartType==="pie"||n.chartType==="polarArea"?[].concat(P,["L",n.centerX,n.centerY,"L",v,k]).join(" "):[].concat(P).join(" "),u.roundPathCorners(i,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(e){var i=this.w,n=new el(this.ctx),r=new Q(this.ctx),l=new ll(this.ctx),h=r.group(),u=r.group(),g=n.niceScale(0,Math.ceil(this.maxY),0),m=g.result.reverse(),y=g.result.length;this.maxY=g.niceMax;for(var b=i.globals.radialSize,v=b/(y-1),k=0;k<y-1;k++){var A=r.drawCircle(b);if(A.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":i.config.plotOptions.polarArea.rings.strokeWidth,stroke:i.config.plotOptions.polarArea.rings.strokeColor}),i.config.yaxis[0].show){var C=l.drawYAxisTexts(this.centerX,this.centerY-b+parseInt(i.config.yaxis[0].labels.style.fontSize,10)/2,k,m[k]);u.add(C)}h.add(A),b-=v}this.drawSpokes(e),e.add(h),e.add(u)}},{key:"renderInnerDataLabels",value:function(e,i,n){var r=this.w,l=new Q(this.ctx),h=i.total.show;e.node.innerHTML="",e.node.style.opacity=n.opacity;var u,g,m=n.centerX,y=this.donutDataLabels.total.label?n.centerY:n.centerY-n.centerY/6;u=i.name.color===void 0?r.globals.colors[0]:i.name.color;var b=i.name.fontSize,v=i.name.fontFamily,k=i.name.fontWeight;g=i.value.color===void 0?r.config.chart.foreColor:i.value.color;var A=i.value.formatter,C="",T="";if(h?(u=i.total.color,b=i.total.fontSize,v=i.total.fontFamily,k=i.total.fontWeight,T=this.donutDataLabels.total.label?i.total.label:"",C=i.total.formatter(r)):r.globals.series.length===1&&(C=A(r.globals.series[0],r),T=r.globals.seriesNames[0]),T&&(T=i.name.formatter(T,i.total.show,r)),i.name.show){var O=l.drawText({x:m,y:y+parseFloat(i.name.offsetY),text:T,textAnchor:"middle",foreColor:u,fontSize:b,fontWeight:k,fontFamily:v});O.node.classList.add("apexcharts-datalabel-label"),e.add(O)}if(i.value.show){var L=i.name.show?parseFloat(i.value.offsetY)+16:i.value.offsetY,P=l.drawText({x:m,y:y+L,text:C,textAnchor:"middle",foreColor:g,fontWeight:i.value.fontWeight,fontSize:i.value.fontSize,fontFamily:i.value.fontFamily});P.node.classList.add("apexcharts-datalabel-value"),e.add(P)}return e}},{key:"printInnerLabels",value:function(e,i,n,r){var l,h=this.w;r?l=e.name.color===void 0?h.globals.colors[parseInt(r.parentNode.getAttribute("rel"),10)-1]:e.name.color:h.globals.series.length>1&&e.total.show&&(l=e.total.color);var u=h.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),g=h.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,h),r||typeof e.total.formatter!="function"||(n=e.total.formatter(h));var m=i===e.total.label;i=this.donutDataLabels.total.label?e.name.formatter(i,m,h):"",u!==null&&(u.textContent=i),g!==null&&(g.textContent=n),u!==null&&(u.style.fill=l)}},{key:"printDataLabelsInner",value:function(e,i){var n=this.w,r=e.getAttribute("data:value"),l=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(i,l,r,e);var h=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");h!==null&&(h.style.opacity=1)}},{key:"drawSpokes",value:function(e){var i=this,n=this.w,r=new Q(this.ctx),l=n.config.plotOptions.polarArea.spokes;if(l.strokeWidth!==0){for(var h=[],u=360/n.globals.series.length,g=0;g<n.globals.series.length;g++)h.push(X.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+u*g));h.forEach(function(m,y){var b=r.drawLine(m.x,m.y,i.centerX,i.centerY,Array.isArray(l.connectorColors)?l.connectorColors[y]:l.connectorColors);e.add(b)})}}},{key:"revertDataLabelsInner",value:function(){var e=this.w;if(this.donutDataLabels.show){var i=e.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),n=this.renderInnerDataLabels(i,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});e.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(n)}}}]),f}(),Du=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new Q(this.ctx),this.lineColorArr=i.globals.stroke.colors!==void 0?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.logBase=i.config.yaxis[0].logBase,this.coreUtils=new je(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),i.config.plotOptions.radar.size!==void 0&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return c(f,[{key:"draw",value:function(e){var i=this,n=this.w,r=new _t(this.ctx),l=[],h=new ds(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var u=n.globals.gridWidth/2,g=n.globals.gridHeight/2,m=u+n.config.plotOptions.radar.offsetX,y=g+n.config.plotOptions.radar.offsetY,b=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(m||0,", ").concat(y||0,")")}),v=[],k=null,A=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach(function(T,O){var L=T.length===n.globals.dataPoints,P=i.graphics.group().attr({class:"apexcharts-series","data:longestSeries":L,seriesName:X.escapeString(n.globals.seriesNames[O]),rel:O+1,"data:realIndex":O});i.dataRadiusOfPercent[O]=[],i.dataRadius[O]=[],i.angleArr[O]=[],T.forEach(function(U,K){var re=Math.abs(i.maxValue-i.minValue);U-=i.minValue,i.isLog&&(U=i.coreUtils.getLogVal(i.logBase,U,0)),i.dataRadiusOfPercent[O][K]=U/re,i.dataRadius[O][K]=i.dataRadiusOfPercent[O][K]*i.size,i.angleArr[O][K]=K*i.disAngle}),v=i.getDataPointsPos(i.dataRadius[O],i.angleArr[O]);var F=i.createPaths(v,{x:0,y:0});k=i.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),A=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":O}),n.globals.delayedElements.push({el:k.node,index:O});var N={i:O,realIndex:O,animationDelay:O,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[O],strokeLineCap:n.config.stroke.lineCap},H=null;n.globals.previousPaths.length>0&&(H=i.getPreviousPath(O));for(var z=0;z<F.linePathsTo.length;z++){var B=i.graphics.renderPaths(I(I({},N),{},{pathFrom:H===null?F.linePathsFrom[z]:H,pathTo:F.linePathsTo[z],strokeWidth:Array.isArray(i.strokeWidth)?i.strokeWidth[O]:i.strokeWidth,fill:"none",drawShadow:!1}));P.add(B);var W=r.fillPath({seriesNumber:O}),V=i.graphics.renderPaths(I(I({},N),{},{pathFrom:H===null?F.areaPathsFrom[z]:H,pathTo:F.areaPathsTo[z],strokeWidth:0,fill:W,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var G=new tt(i.ctx),q=n.config.chart.dropShadow;G.dropShadow(V,Object.assign({},q,{noUserSpaceOnUse:!0}),O)}P.add(V)}T.forEach(function(U,K){var re=new hs(i.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:O,dataPointIndex:K}),ae=i.graphics.drawMarker(v[K].x,v[K].y,re);ae.attr("rel",K),ae.attr("j",K),ae.attr("index",O),ae.node.setAttribute("default-marker-size",re.pSize);var ce=i.graphics.group({class:"apexcharts-series-markers"});ce&&ce.add(ae),k.add(ce),P.add(k);var xe=n.config.dataLabels;if(xe.enabled){var me=xe.formatter(n.globals.series[O][K],{seriesIndex:O,dataPointIndex:K,w:n});h.plotDataLabelsText({x:v[K].x,y:v[K].y,text:me,textAnchor:"middle",i:O,j:O,parent:A,offsetCorrection:!1,dataLabelsConfig:I({},xe)})}P.add(A)}),l.push(P)}),this.drawPolygons({parent:b}),n.config.xaxis.labels.show){var C=this.drawXAxisTexts();b.add(C)}return l.forEach(function(T){b.add(T)}),b.add(this.yaxisLabels),b}},{key:"drawPolygons",value:function(e){for(var i=this,n=this.w,r=e.parent,l=new ll(this.ctx),h=n.globals.yAxisScale[0].result.reverse(),u=h.length,g=[],m=this.size/(u-1),y=0;y<u;y++)g[y]=m*y;g.reverse();var b=[],v=[];g.forEach(function(k,A){var C=X.getPolygonPos(k,i.dataPointsLen),T="";C.forEach(function(O,L){if(A===0){var P=i.graphics.drawLine(O.x,O.y,0,0,Array.isArray(i.polygons.connectorColors)?i.polygons.connectorColors[L]:i.polygons.connectorColors);v.push(P)}L===0&&i.yaxisLabelsTextsPos.push({x:O.x,y:O.y}),T+=O.x+","+O.y+" "}),b.push(T)}),b.forEach(function(k,A){var C=i.polygons.strokeColors,T=i.polygons.strokeWidth,O=i.graphics.drawPolygon(k,Array.isArray(C)?C[A]:C,Array.isArray(T)?T[A]:T,n.globals.radarPolygons.fill.colors[A]);r.add(O)}),v.forEach(function(k){r.add(k)}),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(k,A){var C=l.drawYAxisTexts(k.x,k.y,A,h[A]);i.yaxisLabels.add(C)})}},{key:"drawXAxisTexts",value:function(){var e=this,i=this.w,n=i.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),l=X.getPolygonPos(this.size,this.dataPointsLen);return i.globals.labels.forEach(function(h,u){var g=i.config.xaxis.labels.formatter,m=new ds(e.ctx);if(l[u]){var y=e.getTextPos(l[u],e.size),b=g(h,{seriesIndex:-1,dataPointIndex:u,w:i});m.plotDataLabelsText({x:y.newX,y:y.newY,text:b,textAnchor:y.textAnchor,i:u,j:u,parent:r,className:"apexcharts-xaxis-label",color:Array.isArray(n.style.colors)&&n.style.colors[u]?n.style.colors[u]:"#a8a8a8",dataLabelsConfig:I({textAnchor:y.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1}).on("click",function(v){if(typeof i.config.chart.events.xAxisLabelClick=="function"){var k=Object.assign({},i,{labelIndex:u});i.config.chart.events.xAxisLabelClick(v,e.ctx,k)}})}}),r}},{key:"createPaths",value:function(e,i){var n=this,r=[],l=[],h=[],u=[];if(e.length){l=[this.graphics.move(i.x,i.y)],u=[this.graphics.move(i.x,i.y)];var g=this.graphics.move(e[0].x,e[0].y),m=this.graphics.move(e[0].x,e[0].y);e.forEach(function(y,b){g+=n.graphics.line(y.x,y.y),m+=n.graphics.line(y.x,y.y),b===e.length-1&&(g+="Z",m+="Z")}),r.push(g),h.push(m)}return{linePathsFrom:l,linePathsTo:r,areaPathsFrom:u,areaPathsTo:h}}},{key:"getTextPos",value:function(e,i){var n="middle",r=e.x,l=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",r+=10):e.x<0&&(n="end",r-=10):n="middle",Math.abs(e.y)>=i-10&&(e.y<0?l-=10:e.y>0&&(l+=10)),{textAnchor:n,newX:r,newY:l}}},{key:"getPreviousPath",value:function(e){for(var i=this.w,n=null,r=0;r<i.globals.previousPaths.length;r++){var l=i.globals.previousPaths[r];l.paths.length>0&&parseInt(l.realIndex,10)===parseInt(e,10)&&i.globals.previousPaths[r].paths[0]!==void 0&&(n=i.globals.previousPaths[r].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;e=e||[],i=i||[];for(var r=[],l=0;l<n;l++){var h={};h.x=e[l]*Math.sin(i[l]),h.y=-e[l]*Math.cos(i[l]),r.push(h)}return r}}]),f}(),Ru=function(f){S(i,cl);var e=p(i);function i(n){var r;s(this,i),(r=e.call(this,n)).ctx=n,r.w=n.w,r.animBeginArr=[0],r.animDur=0;var l=r.w;return r.startAngle=l.config.plotOptions.radialBar.startAngle,r.endAngle=l.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(l.config.plotOptions.radialBar.endAngle-l.config.plotOptions.radialBar.startAngle),r.trackStartAngle=l.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=l.config.plotOptions.radialBar.track.endAngle,r.barLabels=r.w.config.plotOptions.radialBar.barLabels,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),r.endAngle===360&&(r.endAngle=359.99),r.margin=parseInt(l.config.plotOptions.radialBar.track.margin,10),r.onBarLabelClick=r.onBarLabelClick.bind(t(r)),r}return c(i,[{key:"draw",value:function(n){var r=this.w,l=new Q(this.ctx),h=l.group({class:"apexcharts-radialbar"});if(r.globals.noData)return h;var u=l.group(),g=this.defaultSize/2,m=r.globals.gridWidth/2,y=this.defaultSize/2.05;r.config.chart.sparkline.enabled||(y=y-r.config.stroke.width-r.config.chart.dropShadow.blur);var b=r.globals.fill.colors;if(r.config.plotOptions.radialBar.track.show){var v=this.drawTracks({size:y,centerX:m,centerY:g,colorArr:b,series:n});u.add(v)}var k=this.drawArcs({size:y,centerX:m,centerY:g,colorArr:b,series:n}),A=360;r.config.plotOptions.radialBar.startAngle<0&&(A=this.totalAngle);var C=(360-A)/360;if(r.globals.radialSize=y-y*C,this.radialDataLabels.value.show){var T=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);r.globals.radialSize+=T*C}return u.add(k.g),r.config.plotOptions.radialBar.hollow.position==="front"&&(k.g.add(k.elHollow),k.dataLabels&&k.g.add(k.dataLabels)),h.add(u),h}},{key:"drawTracks",value:function(n){var r=this.w,l=new Q(this.ctx),h=l.group({class:"apexcharts-tracks"}),u=new tt(this.ctx),g=new _t(this.ctx),m=this.getStrokeWidth(n);n.size=n.size-m/2;for(var y=0;y<n.series.length;y++){var b=l.group({class:"apexcharts-radialbar-track apexcharts-track"});h.add(b),b.attr({rel:y+1}),n.size=n.size-m-this.margin;var v=r.config.plotOptions.radialBar.track,k=g.fillPath({seriesNumber:0,size:n.size,fillColors:Array.isArray(v.background)?v.background[y]:v.background,solid:!0}),A=this.trackStartAngle,C=this.trackEndAngle;Math.abs(C)+Math.abs(A)>=360&&(C=360-Math.abs(this.startAngle)-.1);var T=l.drawPath({d:"",stroke:k,strokeWidth:m*parseInt(v.strokeWidth,10)/100,fill:"none",strokeOpacity:v.opacity,classes:"apexcharts-radialbar-area"});if(v.dropShadow.enabled){var O=v.dropShadow;u.dropShadow(T,O)}b.add(T),T.attr("id","apexcharts-radialbarTrack-"+y),this.animatePaths(T,{centerX:n.centerX,centerY:n.centerY,endAngle:C,startAngle:A,size:n.size,i:y,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return h}},{key:"drawArcs",value:function(n){var r=this.w,l=new Q(this.ctx),h=new _t(this.ctx),u=new tt(this.ctx),g=l.group(),m=this.getStrokeWidth(n);n.size=n.size-m/2;var y=r.config.plotOptions.radialBar.hollow.background,b=n.size-m*n.series.length-this.margin*n.series.length-m*parseInt(r.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,v=b-r.config.plotOptions.radialBar.hollow.margin;r.config.plotOptions.radialBar.hollow.image!==void 0&&(y=this.drawHollowImage(n,g,b,y));var k=this.drawHollow({size:v,centerX:n.centerX,centerY:n.centerY,fill:y||"transparent"});if(r.config.plotOptions.radialBar.hollow.dropShadow.enabled){var A=r.config.plotOptions.radialBar.hollow.dropShadow;u.dropShadow(k,A)}var C=1;!this.radialDataLabels.total.show&&r.globals.series.length>1&&(C=0);var T=null;if(this.radialDataLabels.show){var O=r.globals.dom.Paper.findOne(".apexcharts-datalabels-group");T=this.renderInnerDataLabels(O,this.radialDataLabels,{hollowSize:b,centerX:n.centerX,centerY:n.centerY,opacity:C})}r.config.plotOptions.radialBar.hollow.position==="back"&&(g.add(k),T&&g.add(T));var L=!1;r.config.plotOptions.radialBar.inverseOrder&&(L=!0);for(var P=L?n.series.length-1:0;L?P>=0:P<n.series.length;L?P--:P++){var F=l.group({class:"apexcharts-series apexcharts-radial-series",seriesName:X.escapeString(r.globals.seriesNames[P])});g.add(F),F.attr({rel:P+1,"data:realIndex":P}),this.ctx.series.addCollapsedClassToSeries(F,P),n.size=n.size-m-this.margin;var N=h.fillPath({seriesNumber:P,size:n.size,value:n.series[P]}),H=this.startAngle,z=void 0,B=X.negToZero(n.series[P]>100?100:n.series[P])/100,W=Math.round(this.totalAngle*B)+this.startAngle,V=void 0;r.globals.dataChanged&&(z=this.startAngle,V=Math.round(this.totalAngle*X.negToZero(r.globals.previousPaths[P])/100)+z),Math.abs(W)+Math.abs(H)>360&&(W-=.01),Math.abs(V)+Math.abs(z)>360&&(V-=.01);var G=W-H,q=Array.isArray(r.config.stroke.dashArray)?r.config.stroke.dashArray[P]:r.config.stroke.dashArray,U=l.drawPath({d:"",stroke:N,strokeWidth:m,fill:"none",fillOpacity:r.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+P,strokeDashArray:q});if(Q.setAttrs(U.node,{"data:angle":G,"data:value":n.series[P]}),r.config.chart.dropShadow.enabled){var K=r.config.chart.dropShadow;u.dropShadow(U,K,P)}if(u.setSelectionFilter(U,0,P),this.addListeners(U,this.radialDataLabels),F.add(U),U.attr({index:0,j:P}),this.barLabels.enabled){var re=X.polarToCartesian(n.centerX,n.centerY,n.size,H),ae=this.barLabels.formatter(r.globals.seriesNames[P],{seriesIndex:P,w:r}),ce=["apexcharts-radialbar-label"];this.barLabels.onClick||ce.push("apexcharts-no-click");var xe=this.barLabels.useSeriesColors?r.globals.colors[P]:r.config.chart.foreColor;xe||(xe=r.config.chart.foreColor);var me=re.x+this.barLabels.offsetX,ye=re.y+this.barLabels.offsetY,be=l.drawText({x:me,y:ye,text:ae,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:xe,cssClass:ce.join(" ")});be.on("click",this.onBarLabelClick),be.attr({rel:P+1}),H!==0&&be.attr({"transform-origin":"".concat(me," ").concat(ye),transform:"rotate(".concat(H," 0 0)")}),F.add(be)}var Xe=0;!this.initialAnim||r.globals.resized||r.globals.dataChanged||(Xe=r.config.chart.animations.speed),r.globals.dataChanged&&(Xe=r.config.chart.animations.dynamicAnimation.speed),this.animDur=Xe/(1.2*n.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(U,{centerX:n.centerX,centerY:n.centerY,endAngle:W,startAngle:H,prevEndAngle:V,prevStartAngle:z,size:n.size,i:P,totalItems:2,animBeginArr:this.animBeginArr,dur:Xe,shouldSetPrevPaths:!0})}return{g,elHollow:k,dataLabels:T}}},{key:"drawHollow",value:function(n){var r=new Q(this.ctx).drawCircle(2*n.size);return r.attr({class:"apexcharts-radialbar-hollow",cx:n.centerX,cy:n.centerY,r:n.size,fill:n.fill}),r}},{key:"drawHollowImage",value:function(n,r,l,h){var u=this.w,g=new _t(this.ctx),m=X.randomId(),y=u.config.plotOptions.radialBar.hollow.image;if(u.config.plotOptions.radialBar.hollow.imageClipped)g.clippedImgArea({width:l,height:l,image:y,patternID:"pattern".concat(u.globals.cuid).concat(m)}),h="url(#pattern".concat(u.globals.cuid).concat(m,")");else{var b=u.config.plotOptions.radialBar.hollow.imageWidth,v=u.config.plotOptions.radialBar.hollow.imageHeight;if(b===void 0&&v===void 0){var k=u.globals.dom.Paper.image(y,function(C){this.move(n.centerX-C.width/2+u.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-C.height/2+u.config.plotOptions.radialBar.hollow.imageOffsetY)});r.add(k)}else{var A=u.globals.dom.Paper.image(y,function(C){this.move(n.centerX-b/2+u.config.plotOptions.radialBar.hollow.imageOffsetX,n.centerY-v/2+u.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(b,v)});r.add(A)}}return h}},{key:"getStrokeWidth",value:function(n){var r=this.w;return n.size*(100-parseInt(r.config.plotOptions.radialBar.hollow.size,10))/100/(n.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(n){var r=parseInt(n.target.getAttribute("rel"),10)-1,l=this.barLabels.onClick,h=this.w;l&&l(h.globals.seriesNames[r],{w:h,seriesIndex:r})}}]),i}(),zu=function(f){S(i,us);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return c(i,[{key:"draw",value:function(n,r){var l=this.w,h=new Q(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=n,this.seriesRangeStart=l.globals.seriesRangeStart,this.seriesRangeEnd=l.globals.seriesRangeEnd,this.barHelpers.initVariables(n);for(var u=h.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),g=0;g<n.length;g++){var m,y,b,v,k=void 0,A=void 0,C=l.globals.comboCharts?r[g]:g,T=this.barHelpers.getGroupIndex(C).columnGroupIndex,O=h.group({class:"apexcharts-series",seriesName:X.escapeString(l.globals.seriesNames[C]),rel:g+1,"data:realIndex":C});this.ctx.series.addCollapsedClassToSeries(O,C),n[g].length>0&&(this.visibleI=this.visibleI+1);var L=0,P=0,F=0;this.yRatio.length>1&&(this.yaxisIndex=l.globals.seriesYAxisReverseMap[C][0],F=C);var N=this.barHelpers.initialPositions();A=N.y,v=N.zeroW,k=N.x,P=N.barWidth,L=N.barHeight,m=N.xDivision,y=N.yDivision,b=N.zeroH;for(var H=h.group({class:"apexcharts-datalabels","data:realIndex":C}),z=h.group({class:"apexcharts-rangebar-goals-markers"}),B=0;B<l.globals.dataPoints;B++){var W=this.barHelpers.getStrokeWidth(g,B,C),V=this.seriesRangeStart[g][B],G=this.seriesRangeEnd[g][B],q=null,U=null,K=null,re={x:k,y:A,strokeWidth:W,elSeries:O},ae=this.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(ae=1),l.config.series[g].data[B]===void 0)break;if(this.isHorizontal){K=A+L*this.visibleI;var ce=(y-L*ae)/2;if(l.config.series[g].data[B].x){var xe=this.detectOverlappingBars({i:g,j:B,barYPosition:K,srty:ce,barHeight:L,yDivision:y,initPositions:N});L=xe.barHeight,K=xe.barYPosition}P=(q=this.drawRangeBarPaths(I({indexes:{i:g,j:B,realIndex:C},barHeight:L,barYPosition:K,zeroW:v,yDivision:y,y1:V,y2:G},re))).barWidth}else{l.globals.isXNumeric&&(k=(l.globals.seriesX[g][B]-l.globals.minX)/this.xRatio-P/2),U=k+P*this.visibleI;var me=(m-P*ae)/2;if(l.config.series[g].data[B].x){var ye=this.detectOverlappingBars({i:g,j:B,barXPosition:U,srtx:me,barWidth:P,xDivision:m,initPositions:N});P=ye.barWidth,U=ye.barXPosition}L=(q=this.drawRangeColumnPaths(I({indexes:{i:g,j:B,realIndex:C,translationsIndex:F},barWidth:P,barXPosition:U,zeroH:b,xDivision:m},re))).barHeight}var be=this.barHelpers.drawGoalLine({barXPosition:q.barXPosition,barYPosition:K,goalX:q.goalX,goalY:q.goalY,barHeight:L,barWidth:P});be&&z.add(be),A=q.y,k=q.x;var Xe=this.barHelpers.getPathFillColor(n,g,B,C),We=l.globals.stroke.colors[C];this.renderSeries({realIndex:C,pathFill:Xe,lineFill:We,j:B,i:g,x:k,y:A,y1:V,y2:G,pathFrom:q.pathFrom,pathTo:q.pathTo,strokeWidth:W,elSeries:O,series:n,barHeight:L,barWidth:P,barXPosition:U,barYPosition:K,columnGroupIndex:T,elDataLabelsWrap:H,elGoalsMarkers:z,visibleSeries:this.visibleI,type:"rangebar"})}u.add(O)}return u}},{key:"detectOverlappingBars",value:function(n){var r=n.i,l=n.j,h=n.barYPosition,u=n.barXPosition,g=n.srty,m=n.srtx,y=n.barHeight,b=n.barWidth,v=n.yDivision,k=n.xDivision,A=n.initPositions,C=this.w,T=[],O=C.config.series[r].data[l].rangeName,L=C.config.series[r].data[l].x,P=Array.isArray(L)?L.join(" "):L,F=C.globals.labels.map(function(H){return Array.isArray(H)?H.join(" "):H}).indexOf(P),N=C.globals.seriesRange[r].findIndex(function(H){return H.x===P&&H.overlaps.length>0});return this.isHorizontal?(h=C.config.plotOptions.bar.rangeBarGroupRows?g+v*F:g+y*this.visibleI+v*F,N>-1&&!C.config.plotOptions.bar.rangeBarOverlap&&(T=C.globals.seriesRange[r][N].overlaps).indexOf(O)>-1&&(h=(y=A.barHeight/T.length)*this.visibleI+v*(100-parseInt(this.barOptions.barHeight,10))/100/2+y*(this.visibleI+T.indexOf(O))+v*F)):(F>-1&&!C.globals.timescaleLabels.length&&(u=C.config.plotOptions.bar.rangeBarGroupRows?m+k*F:m+b*this.visibleI+k*F),N>-1&&!C.config.plotOptions.bar.rangeBarOverlap&&(T=C.globals.seriesRange[r][N].overlaps).indexOf(O)>-1&&(u=(b=A.barWidth/T.length)*this.visibleI+k*(100-parseInt(this.barOptions.barWidth,10))/100/2+b*(this.visibleI+T.indexOf(O))+k*F)),{barYPosition:h,barXPosition:u,barHeight:y,barWidth:b}}},{key:"drawRangeColumnPaths",value:function(n){var r=n.indexes,l=n.x,h=n.xDivision,u=n.barWidth,g=n.barXPosition,m=n.zeroH,y=this.w,b=r.i,v=r.j,k=r.realIndex,A=r.translationsIndex,C=this.yRatio[A],T=this.getRangeValue(k,v),O=Math.min(T.start,T.end),L=Math.max(T.start,T.end);this.series[b][v]===void 0||this.series[b][v]===null?O=m:(O=m-O/C,L=m-L/C);var P=Math.abs(L-O),F=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:u,y1:O,y2:L,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:k,i:k,j:v,w:y});if(y.globals.isXNumeric){var N=this.getBarXForNumericXAxis({x:l,j:v,realIndex:k,barWidth:u});l=N.x,g=N.barXPosition}else l+=h;return{pathTo:F.pathTo,pathFrom:F.pathFrom,barHeight:P,x:l,y:T.start<0&&T.end<0?O:L,goalY:this.barHelpers.getGoalValues("y",null,m,b,v,A),barXPosition:g}}},{key:"preventBarOverflow",value:function(n){var r=this.w;return n<0&&(n=0),n>r.globals.gridWidth&&(n=r.globals.gridWidth),n}},{key:"drawRangeBarPaths",value:function(n){var r=n.indexes,l=n.y,h=n.y1,u=n.y2,g=n.yDivision,m=n.barHeight,y=n.barYPosition,b=n.zeroW,v=this.w,k=r.realIndex,A=r.j,C=this.preventBarOverflow(b+h/this.invertedYRatio),T=this.preventBarOverflow(b+u/this.invertedYRatio),O=this.getRangeValue(k,A),L=Math.abs(T-C),P=this.barHelpers.getBarpaths({barYPosition:y,barHeight:m,x1:C,x2:T,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:k,realIndex:k,j:A,w:v});return v.globals.isXNumeric||(l+=g),{pathTo:P.pathTo,pathFrom:P.pathFrom,barWidth:L,x:O.start<0&&O.end<0?C:T,goalX:this.barHelpers.getGoalValues("x",b,null,k,A),y:l}}},{key:"getRangeValue",value:function(n,r){var l=this.w;return{start:l.globals.seriesRangeStart[n][r],end:l.globals.seriesRangeEnd[n][r]}}}]),i}(),Fu=function(){function f(e){s(this,f),this.w=e.w,this.lineCtx=e}return c(f,[{key:"sameValueSeriesFix",value:function(e,i){var n=this.w;if((n.config.fill.type==="gradient"||n.config.fill.type[e]==="gradient")&&new je(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var r=i[e].slice();r[r.length-1]=r[r.length-1]+1e-6,i[e]=r}return i}},{key:"calculatePoints",value:function(e){var i=e.series,n=e.realIndex,r=e.x,l=e.y,h=e.i,u=e.j,g=e.prevY,m=this.w,y=[],b=[];if(u===0){var v=this.lineCtx.categoryAxisCorrection+m.config.markers.offsetX;m.globals.isXNumeric&&(v=(m.globals.seriesX[n][0]-m.globals.minX)/this.lineCtx.xRatio+m.config.markers.offsetX),y.push(v),b.push(X.isNumber(i[h][0])?g+m.config.markers.offsetY:null),y.push(r+m.config.markers.offsetX),b.push(X.isNumber(i[h][u+1])?l+m.config.markers.offsetY:null)}else y.push(r+m.config.markers.offsetX),b.push(X.isNumber(i[h][u+1])?l+m.config.markers.offsetY:null);return{x:y,y:b}}},{key:"checkPreviousPaths",value:function(e){for(var i=e.pathFromLine,n=e.pathFromArea,r=e.realIndex,l=this.w,h=0;h<l.globals.previousPaths.length;h++){var u=l.globals.previousPaths[h];(u.type==="line"||u.type==="area")&&u.paths.length>0&&parseInt(u.realIndex,10)===parseInt(r,10)&&(u.type==="line"?(this.lineCtx.appendPathFrom=!1,i=l.globals.previousPaths[h].paths[0].d):u.type==="area"&&(this.lineCtx.appendPathFrom=!1,n=l.globals.previousPaths[h].paths[0].d,l.config.stroke.show&&l.globals.previousPaths[h].paths[1]&&(i=l.globals.previousPaths[h].paths[1].d)))}return{pathFromLine:i,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var i,n,r,l=e.i,h=e.realIndex,u=e.series,g=e.prevY,m=e.lineYPosition,y=e.translationsIndex,b=this.w,v=b.config.chart.stacked&&!b.globals.comboCharts||b.config.chart.stacked&&b.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((i=this.w.config.series[h])===null||i===void 0?void 0:i.type)==="bar"||((n=this.w.config.series[h])===null||n===void 0?void 0:n.type)==="column");if(((r=u[l])===null||r===void 0?void 0:r[0])!==void 0)g=(m=v&&l>0?this.lineCtx.prevSeriesY[l-1][0]:this.lineCtx.zeroY)-u[l][0]/this.lineCtx.yRatio[y]+2*(this.lineCtx.isReversed?u[l][0]/this.lineCtx.yRatio[y]:0);else if(v&&l>0&&u[l][0]===void 0){for(var k=l-1;k>=0;k--)if(u[k][0]!==null&&u[k][0]!==void 0){g=m=this.lineCtx.prevSeriesY[k][0];break}}return{prevY:g,lineYPosition:m}}}]),f}(),Bu=function(f){for(var e,i,n,r,l=function(y){for(var b=[],v=y[0],k=y[1],A=b[0]=_r(v,k),C=1,T=y.length-1;C<T;C++)v=k,k=y[C+1],b[C]=.5*(A+(A=_r(v,k)));return b[C]=A,b}(f),h=f.length-1,u=[],g=0;g<h;g++)n=_r(f[g],f[g+1]),Math.abs(n)<1e-6?l[g]=l[g+1]=0:(r=(e=l[g]/n)*e+(i=l[g+1]/n)*i)>9&&(r=3*n/Math.sqrt(r),l[g]=r*e,l[g+1]=r*i);for(var m=0;m<=h;m++)r=(f[Math.min(h,m+1)][0]-f[Math.max(0,m-1)][0])/(6*(1+l[m]*l[m])),u.push([r||0,l[m]*r||0]);return u},Hu=function(f){var e=Bu(f),i=f[1],n=f[0],r=[],l=e[1],h=e[0];r.push(n,[n[0]+h[0],n[1]+h[1],i[0]-l[0],i[1]-l[1],i[0],i[1]]);for(var u=2,g=e.length;u<g;u++){var m=f[u],y=e[u];r.push([m[0]-y[0],m[1]-y[1],m[0],m[1]])}return r},Xu=function(f,e,i){var n=f.slice(e,i);if(e){if(i-e>1&&n[1].length<6){var r=n[0].length;n[1]=[2*n[0][r-2]-n[0][r-4],2*n[0][r-1]-n[0][r-3]].concat(n[1])}n[0]=n[0].slice(-2)}return n};function _r(f,e){return(e[1]-f[1])/(e[0]-f[0])}var jr=function(){function f(e,i,n){s(this,f),this.ctx=e,this.w=e.w,this.xyRatios=i,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||n,this.scatter=new Ko(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Fu(this),this.markers=new hs(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return c(f,[{key:"draw",value:function(e,i,n,r){var l,h=this.w,u=new Q(this.ctx),g=h.globals.comboCharts?i:h.config.chart.type,m=u.group({class:"apexcharts-".concat(g,"-series apexcharts-plot-series")}),y=new je(this.ctx,h);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=y.getLogSeries(e),this.yRatio=y.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var b=[],v=0;v<e.length;v++){e=this.lineHelpers.sameValueSeriesFix(v,e);var k=h.globals.comboCharts?n[v]:v,A=this.yRatio.length>1?k:0;this._initSerieVariables(e,v,k);var C=[],T=[],O=[],L=h.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,k),h.globals.isXNumeric&&h.globals.seriesX.length>0&&(L=(h.globals.seriesX[k][0]-h.globals.minX)/this.xRatio),O.push(L);var P,F=L,N=void 0,H=F,z=this.zeroY,B=this.zeroY;z=this.lineHelpers.determineFirstPrevY({i:v,realIndex:k,series:e,prevY:z,lineYPosition:0,translationsIndex:A}).prevY,h.config.stroke.curve==="monotoneCubic"&&e[v][0]===null?C.push(null):C.push(z),P=z,g==="rangeArea"&&(N=B=this.lineHelpers.determineFirstPrevY({i:v,realIndex:k,series:r,prevY:B,lineYPosition:0,translationsIndex:A}).prevY,T.push(C[0]!==null?B:null));var W=this._calculatePathsFrom({type:g,series:e,i:v,realIndex:k,translationsIndex:A,prevX:H,prevY:z,prevY2:B}),V=[C[0]],G=[T[0]],q={type:g,series:e,realIndex:k,translationsIndex:A,i:v,x:L,y:1,pX:F,pY:P,pathsFrom:W,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:O,yArrj:C,y2Arrj:T,seriesRangeEnd:r},U=this._iterateOverDataPoints(I(I({},q),{},{iterations:g==="rangeArea"?e[v].length-1:void 0,isRangeStart:!0}));if(g==="rangeArea"){for(var K=this._calculatePathsFrom({series:r,i:v,realIndex:k,prevX:H,prevY:B}),re=this._iterateOverDataPoints(I(I({},q),{},{series:r,xArrj:[L],yArrj:V,y2Arrj:G,pY:N,areaPaths:U.areaPaths,pathsFrom:K,iterations:r[v].length-1,isRangeStart:!1})),ae=U.linePaths.length/2,ce=0;ce<ae;ce++)U.linePaths[ce]=re.linePaths[ce+ae]+U.linePaths[ce];U.linePaths.splice(ae),U.pathFromLine=re.pathFromLine+U.pathFromLine}else U.pathFromArea+="z";this._handlePaths({type:g,realIndex:k,i:v,paths:U}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),b.push(this.elSeries)}if(((l=h.config.series[0])===null||l===void 0?void 0:l.zIndex)!==void 0&&b.sort(function(ye,be){return Number(ye.node.getAttribute("zIndex"))-Number(be.node.getAttribute("zIndex"))}),h.config.chart.stacked)for(var xe=b.length-1;xe>=0;xe--)m.add(b[xe]);else for(var me=0;me<b.length;me++)m.add(b[me]);return m}},{key:"_initSerieVariables",value:function(e,i,n){var r=this.w,l=new Q(this.ctx);this.xDivision=r.globals.gridWidth/(r.globals.dataPoints-(r.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(r.config.stroke.width)?r.config.stroke.width[n]:r.config.stroke.width;var h=0;this.yRatio.length>1&&(this.yaxisIndex=r.globals.seriesYAxisReverseMap[n],h=n),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed,this.zeroY=r.globals.gridHeight-this.baseLineY[h]-(this.isReversed?r.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[h]:0),this.areaBottomY=this.zeroY,(this.zeroY>r.globals.gridHeight||r.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=r.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=l.group({class:"apexcharts-series",zIndex:r.config.series[n].zIndex!==void 0?r.config.series[n].zIndex:n,seriesName:X.escapeString(r.globals.seriesNames[n])}),this.elPointsMain=l.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=l.group({class:"apexcharts-datalabels","data:realIndex":n});var u=e[i].length===r.globals.dataPoints;this.elSeries.attr({"data:longestSeries":u,rel:i+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var i,n,r,l,h=e.type,u=e.series,g=e.i,m=e.realIndex,y=e.translationsIndex,b=e.prevX,v=e.prevY,k=e.prevY2,A=this.w,C=new Q(this.ctx);if(u[g][0]===null){for(var T=0;T<u[g].length;T++)if(u[g][T]!==null){b=this.xDivision*T,v=this.zeroY-u[g][T]/this.yRatio[y],i=C.move(b,v),n=C.move(b,this.areaBottomY);break}}else i=C.move(b,v),h==="rangeArea"&&(i=C.move(b,k)+C.line(b,v)),n=C.move(b,this.areaBottomY)+C.line(b,v);if(r=C.move(0,this.areaBottomY)+C.line(0,this.areaBottomY),l=C.move(0,this.areaBottomY)+C.line(0,this.areaBottomY),A.globals.previousPaths.length>0){var O=this.lineHelpers.checkPreviousPaths({pathFromLine:r,pathFromArea:l,realIndex:m});r=O.pathFromLine,l=O.pathFromArea}return{prevX:b,prevY:v,linePath:i,areaPath:n,pathFromLine:r,pathFromArea:l}}},{key:"_handlePaths",value:function(e){var i=e.type,n=e.realIndex,r=e.i,l=e.paths,h=this.w,u=new Q(this.ctx),g=new _t(this.ctx);this.prevSeriesY.push(l.yArrj),h.globals.seriesXvalues[n]=l.xArrj,h.globals.seriesYvalues[n]=l.yArrj;var m=h.config.forecastDataPoints;if(m.count>0&&i!=="rangeArea"){var y=h.globals.seriesXvalues[n][h.globals.seriesXvalues[n].length-m.count-1],b=u.drawRect(y,0,h.globals.gridWidth,h.globals.gridHeight,0);h.globals.dom.elForecastMask.appendChild(b.node);var v=u.drawRect(0,0,y,h.globals.gridHeight,0);h.globals.dom.elNonForecastMask.appendChild(v.node)}this.pointsChart||h.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var k={i:r,realIndex:n,animationDelay:r,initialSpeed:h.config.chart.animations.speed,dataChangeSpeed:h.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(i)};if(i==="area")for(var A=g.fillPath({seriesNumber:n}),C=0;C<l.areaPaths.length;C++){var T=u.renderPaths(I(I({},k),{},{pathFrom:l.pathFromArea,pathTo:l.areaPaths[C],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:A}));this.elSeries.add(T)}if(h.config.stroke.show&&!this.pointsChart){var O=null;if(i==="line")O=g.fillPath({seriesNumber:n,i:r});else if(h.config.stroke.fill.type==="solid")O=h.globals.stroke.colors[n];else{var L=h.config.fill;h.config.fill=h.config.stroke.fill,O=g.fillPath({seriesNumber:n,i:r}),h.config.fill=L}for(var P=0;P<l.linePaths.length;P++){var F=O;i==="rangeArea"&&(F=g.fillPath({seriesNumber:n}));var N=I(I({},k),{},{pathFrom:l.pathFromLine,pathTo:l.linePaths[P],stroke:O,strokeWidth:this.strokeWidth,strokeLineCap:h.config.stroke.lineCap,fill:i==="rangeArea"?F:"none"}),H=u.renderPaths(N);if(this.elSeries.add(H),H.attr("fill-rule","evenodd"),m.count>0&&i!=="rangeArea"){var z=u.renderPaths(N);z.node.setAttribute("stroke-dasharray",m.dashArray),m.strokeWidth&&z.node.setAttribute("stroke-width",m.strokeWidth),this.elSeries.add(z),z.attr("clip-path","url(#forecastMask".concat(h.globals.cuid,")")),H.attr("clip-path","url(#nonForecastMask".concat(h.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){var i,n,r=this,l=e.type,h=e.series,u=e.iterations,g=e.realIndex,m=e.translationsIndex,y=e.i,b=e.x,v=e.y,k=e.pX,A=e.pY,C=e.pathsFrom,T=e.linePaths,O=e.areaPaths,L=e.seriesIndex,P=e.lineYPosition,F=e.xArrj,N=e.yArrj,H=e.y2Arrj,z=e.isRangeStart,B=e.seriesRangeEnd,W=this.w,V=new Q(this.ctx),G=this.yRatio,q=C.prevY,U=C.linePath,K=C.areaPath,re=C.pathFromLine,ae=C.pathFromArea,ce=X.isNumber(W.globals.minYArr[g])?W.globals.minYArr[g]:W.globals.minY;u||(u=W.globals.dataPoints>1?W.globals.dataPoints-1:W.globals.dataPoints);var xe=function(ot,lt){return lt-ot/G[m]+2*(r.isReversed?ot/G[m]:0)},me=v,ye=W.config.chart.stacked&&!W.globals.comboCharts||W.config.chart.stacked&&W.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((i=this.w.config.series[g])===null||i===void 0?void 0:i.type)==="bar"||((n=this.w.config.series[g])===null||n===void 0?void 0:n.type)==="column"),be=W.config.stroke.curve;Array.isArray(be)&&(be=Array.isArray(L)?be[L[y]]:be[y]);for(var Xe,We=0,Re=0;Re<u;Re++){var at=h[y][Re+1]===void 0||h[y][Re+1]===null;if(W.globals.isXNumeric){var Me=W.globals.seriesX[g][Re+1];W.globals.seriesX[g][Re+1]===void 0&&(Me=W.globals.seriesX[g][u-1]),b=(Me-W.globals.minX)/this.xRatio}else b+=this.xDivision;ye?y>0&&W.globals.collapsedSeries.length<W.config.series.length-1?P=this.prevSeriesY[function(ot){for(var lt=ot;lt>0;lt--){if(!(W.globals.collapsedSeriesIndices.indexOf((L==null?void 0:L[lt])||lt)>-1))return lt;lt--}return 0}(y-1)][Re+1]:P=this.zeroY:P=this.zeroY,at?v=xe(ce,P):(v=xe(h[y][Re+1],P),l==="rangeArea"&&(me=xe(B[y][Re+1],P))),F.push(b),!at||W.config.stroke.curve!=="smooth"&&W.config.stroke.curve!=="monotoneCubic"?(N.push(v),H.push(me)):(N.push(null),H.push(null));var Ae=this.lineHelpers.calculatePoints({series:h,x:b,y:v,realIndex:g,i:y,j:Re,prevY:q}),Le=this._createPaths({type:l,series:h,i:y,realIndex:g,j:Re,x:b,y:v,y2:me,xArrj:F,yArrj:N,y2Arrj:H,pX:k,pY:A,pathState:We,segmentStartX:Xe,linePath:U,areaPath:K,linePaths:T,areaPaths:O,curve:be,isRangeStart:z});O=Le.areaPaths,T=Le.linePaths,k=Le.pX,A=Le.pY,We=Le.pathState,Xe=Le.segmentStartX,K=Le.areaPath,U=Le.linePath,!this.appendPathFrom||W.globals.hasNullValues||be==="monotoneCubic"&&l==="rangeArea"||(re+=V.line(b,this.areaBottomY),ae+=V.line(b,this.areaBottomY)),this.handleNullDataPoints(h,Ae,y,Re,g),this._handleMarkersAndLabels({type:l,pointsPos:Ae,i:y,j:Re,realIndex:g,isRangeStart:z})}return{yArrj:N,xArrj:F,pathFromArea:ae,areaPaths:O,pathFromLine:re,linePaths:T,linePath:U,areaPath:K}}},{key:"_handleMarkersAndLabels",value:function(e){var i=e.type,n=e.pointsPos,r=e.isRangeStart,l=e.i,h=e.j,u=e.realIndex,g=this.w,m=new ds(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,h,{realIndex:u,pointsPos:n,zRatio:this.zRatio,elParent:this.elPointsMain});else{g.globals.series[l].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var y=this.markers.plotChartMarkers(n,u,h+1);y!==null&&this.elPointsMain.add(y)}var b=m.drawDataLabel({type:i,isRangeStart:r,pos:n,i:u,j:h+1});b!==null&&this.elDataLabelsWrap.add(b)}},{key:"_createPaths",value:function(e){var i=e.type,n=e.series,r=e.i;e.realIndex;var l,h=e.j,u=e.x,g=e.y,m=e.xArrj,y=e.yArrj,b=e.y2,v=e.y2Arrj,k=e.pX,A=e.pY,C=e.pathState,T=e.segmentStartX,O=e.linePath,L=e.areaPath,P=e.linePaths,F=e.areaPaths,N=e.curve,H=e.isRangeStart,z=new Q(this.ctx),B=this.areaBottomY,W=i==="rangeArea",V=i==="rangeArea"&&H;switch(N){case"monotoneCubic":var G=H?y:v;switch(C){case 0:if(G[h+1]===null)break;C=1;case 1:if(!(W?m.length===n[r].length:h===n[r].length-2))break;case 2:var q=H?m:m.slice().reverse(),U=H?G:G.slice().reverse(),K=(l=U,q.map(function(Me,Ae){return[Me,l[Ae]]}).filter(function(Me){return Me[1]!==null})),re=K.length>1?Hu(K):K,ae=[];W&&(V?F=K:ae=F.reverse());var ce=0,xe=0;if(function(Me,Ae){for(var Le=function(Ys){var pt=[],si=0;return Ys.forEach(function($u){$u!==null?si++:si>0&&(pt.push(si),si=0)}),si>0&&pt.push(si),pt}(Me),ot=[],lt=0,$t=0;lt<Le.length;$t+=Le[lt++])ot[lt]=Xu(Ae,$t,$t+Le[lt]);return ot}(U,re).forEach(function(Me){ce++;var Ae=function(lt){for(var $t="",Ys=0;Ys<lt.length;Ys++){var pt=lt[Ys],si=pt.length;si>4?($t+="C".concat(pt[0],", ").concat(pt[1]),$t+=", ".concat(pt[2],", ").concat(pt[3]),$t+=", ".concat(pt[4],", ").concat(pt[5])):si>2&&($t+="S".concat(pt[0],", ").concat(pt[1]),$t+=", ".concat(pt[2],", ").concat(pt[3]))}return $t}(Me),Le=xe,ot=(xe+=Me.length)-1;V?O=z.move(K[Le][0],K[Le][1])+Ae:W?O=z.move(ae[Le][0],ae[Le][1])+z.line(K[Le][0],K[Le][1])+Ae+z.line(ae[ot][0],ae[ot][1]):(O=z.move(K[Le][0],K[Le][1])+Ae,L=O+z.line(K[ot][0],B)+z.line(K[Le][0],B)+"z",F.push(L)),P.push(O)}),W&&ce>1&&!V){var me=P.slice(ce).reverse();P.splice(ce),me.forEach(function(Me){return P.push(Me)})}C=0}break;case"smooth":var ye=.35*(u-k);if(n[r][h]===null)C=0;else switch(C){case 0:if(T=k,O=V?z.move(k,v[h])+z.line(k,A):z.move(k,A),L=z.move(k,A),n[r][h+1]===null){P.push(O),F.push(L);break}if(C=1,h<n[r].length-2){var be=z.curve(k+ye,A,u-ye,g,u,g);O+=be,L+=be;break}case 1:if(n[r][h+1]===null)O+=V?z.line(k,b):z.move(k,A),L+=z.line(k,B)+z.line(T,B)+"z",P.push(O),F.push(L),C=-1;else{var Xe=z.curve(k+ye,A,u-ye,g,u,g);O+=Xe,L+=Xe,h>=n[r].length-2&&(V&&(O+=z.curve(u,g,u,g,u,b)+z.move(u,b)),L+=z.curve(u,g,u,g,u,B)+z.line(T,B)+"z",P.push(O),F.push(L),C=-1)}}k=u,A=g;break;default:var We=function(Me,Ae,Le){var ot=[];switch(Me){case"stepline":ot=z.line(Ae,null,"H")+z.line(null,Le,"V");break;case"linestep":ot=z.line(null,Le,"V")+z.line(Ae,null,"H");break;case"straight":ot=z.line(Ae,Le)}return ot};if(n[r][h]===null)C=0;else switch(C){case 0:if(T=k,O=V?z.move(k,v[h])+z.line(k,A):z.move(k,A),L=z.move(k,A),n[r][h+1]===null){P.push(O),F.push(L);break}if(C=1,h<n[r].length-2){var Re=We(N,u,g);O+=Re,L+=Re;break}case 1:if(n[r][h+1]===null)O+=V?z.line(k,b):z.move(k,A),L+=z.line(k,B)+z.line(T,B)+"z",P.push(O),F.push(L),C=-1;else{var at=We(N,u,g);O+=at,L+=at,h>=n[r].length-2&&(V&&(O+=z.line(u,b)),L+=z.line(u,B)+z.line(T,B)+"z",P.push(O),F.push(L),C=-1)}}k=u,A=g}return{linePaths:P,areaPaths:F,pX:k,pY:A,pathState:C,segmentStartX:T,linePath:O,areaPath:L}}},{key:"handleNullDataPoints",value:function(e,i,n,r,l){var h=this.w;if(e[n][r]===null&&h.config.markers.showNullDataPoints||e[n].length===1){var u=this.strokeWidth-h.config.markers.strokeWidth/2;u>0||(u=0);var g=this.markers.plotChartMarkers(i,l,r+1,u,!0);g!==null&&this.elPointsMain.add(g)}}}]),f}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function f(u,g,m,y){this.xoffset=u,this.yoffset=g,this.height=y,this.width=m,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(b){var v,k=[],A=this.xoffset,C=this.yoffset,T=l(b)/this.height,O=l(b)/this.width;if(this.width>=this.height)for(v=0;v<b.length;v++)k.push([A,C,A+T,C+b[v]/T]),C+=b[v]/T;else for(v=0;v<b.length;v++)k.push([A,C,A+b[v]/O,C+O]),A+=b[v]/O;return k},this.cutArea=function(b){var v;if(this.width>=this.height){var k=b/this.height,A=this.width-k;v=new f(this.xoffset+k,this.yoffset,A,this.height)}else{var C=b/this.width,T=this.height-C;v=new f(this.xoffset,this.yoffset+C,this.width,T)}return v}}function e(u,g,m,y,b){y=y===void 0?0:y,b=b===void 0?0:b;var v=i(function(k,A){var C,T=[],O=A/l(k);for(C=0;C<k.length;C++)T[C]=k[C]*O;return T}(u,g*m),[],new f(y,b,g,m),[]);return function(k){var A,C,T=[];for(A=0;A<k.length;A++)for(C=0;C<k[A].length;C++)T.push(k[A][C]);return T}(v)}function i(u,g,m,y){var b,v,k;if(u.length!==0)return b=m.shortestEdge(),function(A,C,T){var O;if(A.length===0)return!0;(O=A.slice()).push(C);var L=n(A,T),P=n(O,T);return L>=P}(g,v=u[0],b)?(g.push(v),i(u.slice(1),g,m,y)):(k=m.cutArea(l(g),y),y.push(m.getCoordinates(g)),i(u,[],k,y)),y;y.push(m.getCoordinates(g))}function n(u,g){var m=Math.min.apply(Math,u),y=Math.max.apply(Math,u),b=l(u);return Math.max(Math.pow(g,2)*y/Math.pow(b,2),Math.pow(b,2)/(Math.pow(g,2)*m))}function r(u){return u&&u.constructor===Array}function l(u){var g,m=0;for(g=0;g<u.length;g++)m+=u[g];return m}function h(u){var g,m=0;if(r(u[0]))for(g=0;g<u.length;g++)m+=h(u[g]);else m=l(u);return m}return function u(g,m,y,b,v){b=b===void 0?0:b,v=v===void 0?0:v;var k,A,C=[],T=[];if(r(g[0])){for(A=0;A<g.length;A++)C[A]=h(g[A]);for(k=e(C,m,y,b,v),A=0;A<g.length;A++)T.push(u(g[A],k[A][2]-k[A][0],k[A][3]-k[A][1],k[A][0],k[A][1]))}else T=e(g,m,y,b,v);return T}}();var Yu=function(){function f(e,i){s(this,f),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new ol(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return c(f,[{key:"draw",value:function(e){var i=this,n=this.w,r=new Q(this.ctx),l=new _t(this.ctx),h=r.group({class:"apexcharts-treemap"});if(n.globals.noData)return h;var u=[];return e.forEach(function(g){var m=g.map(function(y){return Math.abs(y)});u.push(m)}),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach(function(g,m){g.data.forEach(function(y){Array.isArray(i.labels[m])||(i.labels[m]=[]),i.labels[m].push(y.x)})}),window.TreemapSquared.generate(u,n.globals.gridWidth,n.globals.gridHeight).forEach(function(g,m){var y=r.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:X.escapeString(n.globals.seriesNames[m]),rel:m+1,"data:realIndex":m});if(n.config.chart.dropShadow.enabled){var b=n.config.chart.dropShadow;new tt(i.ctx).dropShadow(h,b,m)}var v=r.group({class:"apexcharts-data-labels"});g.forEach(function(k,A){var C=k[0],T=k[1],O=k[2],L=k[3],P=r.drawRect(C,T,O-C,L-T,n.config.plotOptions.treemap.borderRadius,"#fff",1,i.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?N:n.globals.stroke.colors[m]);P.attr({cx:C,cy:T,index:m,i:m,j:A,width:O-C,height:L-T});var F=i.helpers.getShadeColor(n.config.chart.type,m,A,i.negRange),N=F.color,H=l.fillPath({color:N,seriesNumber:m,dataPointIndex:A});P.node.classList.add("apexcharts-treemap-rect"),P.attr({fill:H}),i.helpers.addListeners(P);var z={x:C+(O-C)/2,y:T+(L-T)/2,width:0,height:0},B={x:C,y:T,width:O-C,height:L-T};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var W=1;n.globals.resized||(W=n.config.chart.animations.speed),i.animateTreemap(P,z,B,W)}if(n.globals.dataChanged){var V=1;i.dynamicAnim.enabled&&n.globals.shouldAnimate&&(V=i.dynamicAnim.speed,n.globals.previousPaths[m]&&n.globals.previousPaths[m][A]&&n.globals.previousPaths[m][A].rect&&(z=n.globals.previousPaths[m][A].rect),i.animateTreemap(P,z,B,V))}var G=i.getFontSize(k),q=n.config.dataLabels.formatter(i.labels[m][A],{value:n.globals.series[m][A],seriesIndex:m,dataPointIndex:A,w:n});n.config.plotOptions.treemap.dataLabels.format==="truncate"&&(G=parseInt(n.config.dataLabels.style.fontSize,10),q=i.truncateLabels(q,G,C,T,O,L));var U=null;n.globals.series[m][A]&&(U=i.helpers.calculateDataLabels({text:q,x:(C+O)/2,y:(T+L)/2+i.strokeWidth/2+G/3,i:m,j:A,colorProps:F,fontSize:G,series:e})),n.config.dataLabels.enabled&&U&&i.rotateToFitLabel(U,G,q,C,T,O,L),y.add(P),U!==null&&y.add(U)}),y.add(v),h.add(y)}),h}},{key:"getFontSize",value:function(e){var i=this.w,n=function r(l){var h,u=0;if(Array.isArray(l[0]))for(h=0;h<l.length;h++)u+=r(l[h]);else for(h=0;h<l.length;h++)u+=l[h].length;return u}(this.labels)/function r(l){var h,u=0;if(Array.isArray(l[0]))for(h=0;h<l.length;h++)u+=r(l[h]);else for(h=0;h<l.length;h++)u+=1;return u}(this.labels);return function(r,l){var h=r*l,u=Math.pow(h,.5);return Math.min(u/n,parseInt(i.config.dataLabels.style.fontSize,10))}(e[2]-e[0],e[3]-e[1])}},{key:"rotateToFitLabel",value:function(e,i,n,r,l,h,u){var g=new Q(this.ctx),m=g.getTextRects(n,i);if(m.width+this.w.config.stroke.width+5>h-r&&m.width<=u-l){var y=g.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(y.x," ").concat(y.y,") translate(").concat(m.height/3,")"))}}},{key:"truncateLabels",value:function(e,i,n,r,l,h){var u=new Q(this.ctx),g=u.getTextRects(e,i).width+this.w.config.stroke.width+5>l-n&&h-r>l-n?h-r:l-n,m=u.getTextBasedOnMaxWidth({text:e,maxWidth:g,fontSize:i});return e.length!==m.length&&g/i<5?"":m}},{key:"animateTreemap",value:function(e,i,n,r){var l=new Z(this.ctx);l.animateRect(e,{x:i.x,y:i.y,width:i.width,height:i.height},{x:n.x,y:n.y,width:n.width,height:n.height},r,function(){l.animationCompleted(e)})}}]),f}(),hl=86400,Wu=10/hl,_u=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return c(f,[{key:"calculateTimeScaleTicks",value:function(e,i){var n=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var l=new it(this.ctx),h=(i-e)/864e5;this.determineInterval(h),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,h<Wu?r.globals.disableZoomIn=!0:h>5e4&&(r.globals.disableZoomOut=!0);var u=l.getTimeUnitsfromTimestamp(e,i,this.utc),g=r.globals.gridWidth/h,m=g/24,y=m/60,b=y/60,v=Math.floor(24*h),k=Math.floor(1440*h),A=Math.floor(h*hl),C=Math.floor(h),T=Math.floor(h/30),O=Math.floor(h/365),L={minMillisecond:u.minMillisecond,minSecond:u.minSecond,minMinute:u.minMinute,minHour:u.minHour,minDate:u.minDate,minMonth:u.minMonth,minYear:u.minYear},P={firstVal:L,currentMillisecond:L.minMillisecond,currentSecond:L.minSecond,currentMinute:L.minMinute,currentHour:L.minHour,currentMonthDate:L.minDate,currentDate:L.minDate,currentMonth:L.minMonth,currentYear:L.minYear,daysWidthOnXAxis:g,hoursWidthOnXAxis:m,minutesWidthOnXAxis:y,secondsWidthOnXAxis:b,numberOfSeconds:A,numberOfMinutes:k,numberOfHours:v,numberOfDays:C,numberOfMonths:T,numberOfYears:O};switch(this.tickInterval){case"years":this.generateYearScale(P);break;case"months":case"half_year":this.generateMonthScale(P);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(P);break;case"hours":this.generateHourScale(P);break;case"minutes_fives":case"minutes":this.generateMinuteScale(P);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(P)}var F=this.timeScaleArray.map(function(N){var H={position:N.position,unit:N.unit,year:N.year,day:N.day?N.day:1,hour:N.hour?N.hour:0,month:N.month+1};return N.unit==="month"?I(I({},H),{},{day:1,value:N.value+1}):N.unit==="day"||N.unit==="hour"?I(I({},H),{},{value:N.value}):N.unit==="minute"?I(I({},H),{},{value:N.value,minute:N.value}):N.unit==="second"?I(I({},H),{},{value:N.value,minute:N.minute,second:N.second}):N});return F.filter(function(N){var H=1,z=Math.ceil(r.globals.gridWidth/120),B=N.value;r.config.xaxis.tickAmount!==void 0&&(z=r.config.xaxis.tickAmount),F.length>z&&(H=Math.floor(F.length/z));var W=!1,V=!1;switch(n.tickInterval){case"years":N.unit==="year"&&(W=!0);break;case"half_year":H=7,N.unit==="year"&&(W=!0);break;case"months":H=1,N.unit==="year"&&(W=!0);break;case"months_fortnight":H=15,N.unit!=="year"&&N.unit!=="month"||(W=!0),B===30&&(V=!0);break;case"months_days":H=10,N.unit==="month"&&(W=!0),B===30&&(V=!0);break;case"week_days":H=8,N.unit==="month"&&(W=!0);break;case"days":H=1,N.unit==="month"&&(W=!0);break;case"hours":N.unit==="day"&&(W=!0);break;case"minutes_fives":case"seconds_fives":B%5!=0&&(V=!0);break;case"seconds_tens":B%10!=0&&(V=!0)}if(n.tickInterval==="hours"||n.tickInterval==="minutes_fives"||n.tickInterval==="seconds_tens"||n.tickInterval==="seconds_fives"){if(!V)return!0}else if((B%H==0||W)&&!V)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(e,i){var n=this.w,r=this.formatDates(e),l=this.removeOverlappingTS(r);n.globals.timescaleLabels=l.slice(),new wn(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var i=24*e,n=60*i;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case i>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var i=e.firstVal,n=e.currentMonth,r=e.currentYear,l=e.daysWidthOnXAxis,h=e.numberOfYears,u=i.minYear,g=0,m=new it(this.ctx),y="year";if(i.minDate>1||i.minMonth>0){var b=m.determineRemainingDaysOfYear(i.minYear,i.minMonth,i.minDate);g=(m.determineDaysOfYear(i.minYear)-b+1)*l,u=i.minYear+1,this.timeScaleArray.push({position:g,value:u,unit:y,year:u,month:X.monthMod(n+1)})}else i.minDate===1&&i.minMonth===0&&this.timeScaleArray.push({position:g,value:u,unit:y,year:r,month:X.monthMod(n+1)});for(var v=u,k=g,A=0;A<h;A++)v++,k=m.determineDaysOfYear(v-1)*l+k,this.timeScaleArray.push({position:k,value:v,unit:y,year:v,month:1})}},{key:"generateMonthScale",value:function(e){var i=e.firstVal,n=e.currentMonthDate,r=e.currentMonth,l=e.currentYear,h=e.daysWidthOnXAxis,u=e.numberOfMonths,g=r,m=0,y=new it(this.ctx),b="month",v=0;if(i.minDate>1){m=(y.determineDaysOfMonths(r+1,i.minYear)-n+1)*h,g=X.monthMod(r+1);var k=l+v,A=X.monthMod(g),C=g;g===0&&(b="year",C=k,A=1,k+=v+=1),this.timeScaleArray.push({position:m,value:C,unit:b,year:k,month:A})}else this.timeScaleArray.push({position:m,value:g,unit:b,year:l,month:X.monthMod(r)});for(var T=g+1,O=m,L=0,P=1;L<u;L++,P++){(T=X.monthMod(T))===0?(b="year",v+=1):b="month";var F=this._getYear(l,T,v);O=y.determineDaysOfMonths(T,F)*h+O;var N=T===0?F:T;this.timeScaleArray.push({position:O,value:N,unit:b,year:F,month:T===0?1:T}),T++}}},{key:"generateDayScale",value:function(e){var i=e.firstVal,n=e.currentMonth,r=e.currentYear,l=e.hoursWidthOnXAxis,h=e.numberOfDays,u=new it(this.ctx),g="day",m=i.minDate+1,y=m,b=function(P,F,N){return P>u.determineDaysOfMonths(F+1,N)&&(y=1,g="month",k=F+=1),F},v=(24-i.minHour)*l,k=m,A=b(y,n,r);i.minHour===0&&i.minDate===1?(v=0,k=X.monthMod(i.minMonth),g="month",y=i.minDate):i.minDate!==1&&i.minHour===0&&i.minMinute===0&&(v=0,m=i.minDate,k=m,A=b(y=m,n,r),k!==1&&(g="day")),this.timeScaleArray.push({position:v,value:k,unit:g,year:this._getYear(r,A,0),month:X.monthMod(A),day:y});for(var C=v,T=0;T<h;T++){g="day",A=b(y+=1,A,this._getYear(r,A,0));var O=this._getYear(r,A,0);C=24*l+C;var L=y===1?X.monthMod(A):y;this.timeScaleArray.push({position:C,value:L,unit:g,year:O,month:X.monthMod(A),day:L})}}},{key:"generateHourScale",value:function(e){var i=e.firstVal,n=e.currentDate,r=e.currentMonth,l=e.currentYear,h=e.minutesWidthOnXAxis,u=e.numberOfHours,g=new it(this.ctx),m="hour",y=function(H,z){return H>g.determineDaysOfMonths(z+1,l)&&(T=1,z+=1),{month:z,date:T}},b=function(H,z){return H>g.determineDaysOfMonths(z+1,l)?z+=1:z},v=60-(i.minMinute+i.minSecond/60),k=v*h,A=i.minHour+1,C=A;v===60&&(k=0,C=A=i.minHour);var T=n;C>=24&&(C=0,m="day",A=T+=1);var O=y(T,r).month;O=b(T,O),this.timeScaleArray.push({position:k,value:A,unit:m,day:T,hour:C,year:l,month:X.monthMod(O)}),C++;for(var L=k,P=0;P<u;P++){m="hour",C>=24&&(C=0,m="day",O=y(T+=1,O).month,O=b(T,O));var F=this._getYear(l,O,0);L=60*h+L;var N=C===0?T:C;this.timeScaleArray.push({position:L,value:N,unit:m,hour:C,day:T,year:F,month:X.monthMod(O)}),C++}}},{key:"generateMinuteScale",value:function(e){for(var i=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,l=e.currentHour,h=e.currentDate,u=e.currentMonth,g=e.currentYear,m=e.minutesWidthOnXAxis,y=e.secondsWidthOnXAxis,b=e.numberOfMinutes,v=r+1,k=h,A=u,C=g,T=l,O=(60-n-i/1e3)*y,L=0;L<b;L++)v>=60&&(v=0,(T+=1)===24&&(T=0)),this.timeScaleArray.push({position:O,value:v,unit:"minute",hour:T,minute:v,day:k,year:this._getYear(C,A,0),month:X.monthMod(A)}),O+=m,v++}},{key:"generateSecondScale",value:function(e){for(var i=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,l=e.currentHour,h=e.currentDate,u=e.currentMonth,g=e.currentYear,m=e.secondsWidthOnXAxis,y=e.numberOfSeconds,b=n+1,v=r,k=h,A=u,C=g,T=l,O=(1e3-i)/1e3*m,L=0;L<y;L++)b>=60&&(b=0,++v>=60&&(v=0,++T===24&&(T=0))),this.timeScaleArray.push({position:O,value:b,unit:"second",hour:T,minute:v,second:b,day:k,year:this._getYear(C,A,0),month:X.monthMod(A)}),O+=m,b++}},{key:"createRawDateString",value:function(e,i){var n=e.year;return e.month===0&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),e.unit==="day"?n+=e.unit==="day"?"-"+("0"+i).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),e.unit==="hour"?n+=e.unit==="hour"?"T"+("0"+i).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),e.unit==="minute"?n+=":"+("0"+i).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),e.unit==="second"?n+=":"+("0"+i).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var i=this,n=this.w;return e.map(function(r){var l=r.value.toString(),h=new it(i.ctx),u=i.createRawDateString(r,l),g=h.getDate(h.parseDate(u));if(i.utc||(g=h.getDate(h.parseDateWithTimezone(u))),n.config.xaxis.labels.format===void 0){var m="dd MMM",y=n.config.xaxis.labels.datetimeFormatter;r.unit==="year"&&(m=y.year),r.unit==="month"&&(m=y.month),r.unit==="day"&&(m=y.day),r.unit==="hour"&&(m=y.hour),r.unit==="minute"&&(m=y.minute),r.unit==="second"&&(m=y.second),l=h.formatDate(g,m)}else l=h.formatDate(g,n.config.xaxis.labels.format);return{dateString:u,position:r.position,value:l,unit:r.unit,year:r.year,month:r.month}})}},{key:"removeOverlappingTS",value:function(e){var i,n=this,r=new Q(this.ctx),l=!1;e.length>0&&e[0].value&&e.every(function(g){return g.value.length===e[0].value.length})&&(l=!0,i=r.getTextRects(e[0].value).width);var h=0,u=e.map(function(g,m){if(m>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var y=l?i:r.getTextRects(e[h].value).width,b=e[h].position;return g.position>b+y+10?(h=m,g):null}return g});return u=u.filter(function(g){return g!==null})}},{key:"_getYear",value:function(e,i,n){return e+Math.floor(i/12)+n}}]),f}(),ju=function(){function f(e,i){s(this,f),this.ctx=i,this.w=i.w,this.el=e}return c(f,[{key:"setupElements",value:function(){var e=this.w,i=e.globals,n=e.config,r=n.chart.type;i.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(r),i.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(r),i.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(r)&&n.plotOptions.bar.horizontal,i.chartClass=".apexcharts".concat(i.chartID),i.dom.baseEl=this.el,i.dom.elWrap=document.createElement("div"),Q.setAttrs(i.dom.elWrap,{id:i.chartClass.substring(1),class:"apexcharts-canvas ".concat(i.chartClass.substring(1))}),this.el.appendChild(i.dom.elWrap),i.dom.Paper=window.SVG().addTo(i.dom.elWrap),i.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(n.chart.offsetX,", ").concat(n.chart.offsetY,")")}),i.dom.Paper.node.style.background=n.theme.mode!=="dark"||n.chart.background?n.theme.mode!=="light"||n.chart.background?n.chart.background:"#fff":"#424242",this.setSVGDimensions(),i.dom.elLegendForeign=document.createElementNS(i.SVGNS,"foreignObject"),Q.setAttrs(i.dom.elLegendForeign,{x:0,y:0,width:i.svgWidth,height:i.svgHeight}),i.dom.elLegendWrap=document.createElement("div"),i.dom.elLegendWrap.classList.add("apexcharts-legend"),i.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),i.dom.elLegendForeign.appendChild(i.dom.elLegendWrap),i.dom.Paper.node.appendChild(i.dom.elLegendForeign),i.dom.elGraphical=i.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),i.dom.elDefs=i.dom.Paper.defs(),i.dom.Paper.add(i.dom.elGraphical),i.dom.elGraphical.add(i.dom.elDefs)}},{key:"plotChartType",value:function(e,i){var n=this.w,r=this.ctx,l=n.config,h=n.globals,u={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},column:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},g=l.chart.type||"line",m=null,y=0;h.series.forEach(function(H,z){var B=e[z].type||g;u[B]?(B==="rangeArea"?(u[B].series.push(h.seriesRangeStart[z]),u[B].seriesRangeEnd.push(h.seriesRangeEnd[z])):u[B].series.push(H),u[B].i.push(z),B!=="column"&&B!=="bar"||(n.globals.columnSeries=u.column)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(B)?m=B:B==="bar"?(u.column.series.push(H),u.column.i.push(z)):console.warn("You have specified an unrecognized series type (".concat(B,").")),g!==B&&B!=="scatter"&&y++}),y>0&&(m&&console.warn("Chart or series type ".concat(m," cannot appear with other chart or series types.")),u.column.series.length>0&&l.plotOptions.bar.horizontal&&(y-=u.column.series.length,u.column={series:[],i:[]},n.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),h.comboCharts||(h.comboCharts=y>0);var b=new jr(r,i),v=new Wr(r,i);r.pie=new cl(r);var k=new Ru(r);r.rangeBar=new zu(r,i);var A=new Du(r),C=[];if(h.comboCharts){var T,O,L=new je(r);if(u.area.series.length>0&&(T=C).push.apply(T,Y(L.drawSeriesByGroup(u.area,h.areaGroups,"area",b))),u.column.series.length>0)if(l.chart.stacked){var P=new al(r,i);C.push(P.draw(u.column.series,u.column.i))}else r.bar=new us(r,i),C.push(r.bar.draw(u.column.series,u.column.i));if(u.rangeArea.series.length>0&&C.push(b.draw(u.rangeArea.series,"rangeArea",u.rangeArea.i,u.rangeArea.seriesRangeEnd)),u.line.series.length>0&&(O=C).push.apply(O,Y(L.drawSeriesByGroup(u.line,h.lineGroups,"line",b))),u.candlestick.series.length>0&&C.push(v.draw(u.candlestick.series,"candlestick",u.candlestick.i)),u.boxPlot.series.length>0&&C.push(v.draw(u.boxPlot.series,"boxPlot",u.boxPlot.i)),u.rangeBar.series.length>0&&C.push(r.rangeBar.draw(u.rangeBar.series,u.rangeBar.i)),u.scatter.series.length>0){var F=new jr(r,i,!0);C.push(F.draw(u.scatter.series,"scatter",u.scatter.i))}if(u.bubble.series.length>0){var N=new jr(r,i,!0);C.push(N.draw(u.bubble.series,"bubble",u.bubble.i))}}else switch(l.chart.type){case"line":C=b.draw(h.series,"line");break;case"area":C=b.draw(h.series,"area");break;case"bar":l.chart.stacked?C=new al(r,i).draw(h.series):(r.bar=new us(r,i),C=r.bar.draw(h.series));break;case"candlestick":C=new Wr(r,i).draw(h.series,"candlestick");break;case"boxPlot":C=new Wr(r,i).draw(h.series,l.chart.type);break;case"rangeBar":C=r.rangeBar.draw(h.series);break;case"rangeArea":C=b.draw(h.seriesRangeStart,"rangeArea",void 0,h.seriesRangeEnd);break;case"heatmap":C=new Nu(r,i).draw(h.series);break;case"treemap":C=new Yu(r,i).draw(h.series);break;case"pie":case"donut":case"polarArea":C=r.pie.draw(h.series);break;case"radialBar":C=k.draw(h.series);break;case"radar":C=A.draw(h.series);break;default:C=b.draw(h.series)}return C}},{key:"setSVGDimensions",value:function(){var e=this.w,i=e.globals,n=e.config;n.chart.width=n.chart.width||"100%",n.chart.height=n.chart.height||"auto",i.svgWidth=n.chart.width,i.svgHeight=n.chart.height;var r=X.getDimensions(this.el),l=n.chart.width.toString().split(/[0-9]+/g).pop();l==="%"?X.isNumber(r[0])&&(r[0].width===0&&(r=X.getDimensions(this.el.parentNode)),i.svgWidth=r[0]*parseInt(n.chart.width,10)/100):l!=="px"&&l!==""||(i.svgWidth=parseInt(n.chart.width,10));var h=String(n.chart.height).toString().split(/[0-9]+/g).pop();if(i.svgHeight!=="auto"&&i.svgHeight!=="")if(h==="%"){var u=X.getDimensions(this.el.parentNode);i.svgHeight=u[1]*parseInt(n.chart.height,10)/100}else i.svgHeight=parseInt(n.chart.height,10);else i.svgHeight=i.axisCharts?i.svgWidth/1.61:i.svgWidth/1.2;if(i.svgWidth=Math.max(i.svgWidth,0),i.svgHeight=Math.max(i.svgHeight,0),Q.setAttrs(i.dom.Paper.node,{width:i.svgWidth,height:i.svgHeight}),h!=="%"){var g=n.chart.sparkline.enabled?0:i.axisCharts?n.chart.parentHeightOffset:0;i.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(i.svgHeight+g,"px")}i.dom.elWrap.style.width="".concat(i.svgWidth,"px"),i.dom.elWrap.style.height="".concat(i.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,i=e.translateY,n=e.translateX;Q.setAttrs(e.dom.elGraphical.node,{transform:"translate(".concat(n,", ").concat(i,")")})}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,i=e.globals,n=0,r=e.config.chart.sparkline.enabled?1:15;r+=e.config.grid.padding.bottom,["top","bottom"].includes(e.config.legend.position)&&e.config.legend.show&&!e.config.legend.floating&&(n=new tl(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var l=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),h=2.05*e.globals.radialSize;if(l&&!e.config.chart.sparkline.enabled&&e.config.plotOptions.radialBar.startAngle!==0){var u=X.getBoundingClientRect(l);h=u.bottom;var g=u.bottom-u.top;h=Math.max(2.05*e.globals.radialSize,g)}var m=Math.ceil(h+i.translateY+n+r);i.dom.elLegendForeign&&i.dom.elLegendForeign.setAttribute("height",m),e.config.chart.height&&String(e.config.chart.height).includes("%")||(i.dom.elWrap.style.height="".concat(m,"px"),Q.setAttrs(i.dom.Paper.node,{height:m}),i.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(m,"px"))}},{key:"coreCalculations",value:function(){new Hr(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,i=function(){return e.w.config.series.map(function(){return[]})},n=new Zo,r=this.w.globals;n.initGlobalVars(r),r.seriesXvalues=i(),r.seriesYvalues=i()}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var e=this.w,i=null;if(e.globals.axisCharts){if(e.config.xaxis.crosshairs.position==="back"&&new Yr(this.ctx).drawXCrosshairs(),e.config.yaxis[0].crosshairs.position==="back"&&new Yr(this.ctx).drawYCrosshairs(),e.config.xaxis.type==="datetime"&&e.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new _u(this.ctx);var n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}i=new je(this.ctx).getCalculatedRatios()}return i}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,i=this.w;if(i.config.chart.brush.enabled&&typeof i.config.chart.events.selection!="function"){var n=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];n.forEach(function(r){var l=ApexCharts.getChartByID(r);l.w.globals.brushSource=e.ctx,typeof l.w.config.chart.events.zoomed!="function"&&(l.w.config.chart.events.zoomed=function(){return e.updateSourceChart(l)}),typeof l.w.config.chart.events.scrolled!="function"&&(l.w.config.chart.events.scrolled=function(){return e.updateSourceChart(l)})}),i.config.chart.events.selection=function(r,l){n.forEach(function(h){ApexCharts.getChartByID(h).ctx.updateHelpers._updateOptions({xaxis:{min:l.xaxis.min,max:l.xaxis.max}},!1,!1,!1,!1)})}}}}]),f}(),Vu=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"_updateOptions",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(u){var g=[i.ctx];l&&(g=i.ctx.getSyncedCharts()),i.ctx.w.globals.isExecCalled&&(g=[i.ctx],i.ctx.w.globals.isExecCalled=!1),g.forEach(function(m,y){var b=m.w;if(b.globals.shouldAnimate=r,n||(b.globals.resized=!0,b.globals.dataChanged=!0,r&&m.series.getPreviousPaths()),e&&$(e)==="object"&&(m.config=new Hs(e),e=je.extendArrayProps(m.config,e,b),m.w.globals.chartID!==i.ctx.w.globals.chartID&&delete e.series,b.config=X.extend(b.config,e),h&&(b.globals.lastXAxis=e.xaxis?X.clone(e.xaxis):[],b.globals.lastYAxis=e.yaxis?X.clone(e.yaxis):[],b.globals.initialConfig=X.extend({},b.config),b.globals.initialSeries=X.clone(b.config.series),e.series))){for(var v=0;v<b.globals.collapsedSeriesIndices.length;v++){var k=b.config.series[b.globals.collapsedSeriesIndices[v]];b.globals.collapsedSeries[v].data=b.globals.axisCharts?k.data.slice():k}for(var A=0;A<b.globals.ancillaryCollapsedSeriesIndices.length;A++){var C=b.config.series[b.globals.ancillaryCollapsedSeriesIndices[A]];b.globals.ancillaryCollapsedSeries[A].data=b.globals.axisCharts?C.data.slice():C}m.series.emptyCollapsedSeries(b.config.series)}return m.update(e).then(function(){y===g.length-1&&u(m)})})})}},{key:"_updateSeries",value:function(e,i){var n=this,r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(l){var h,u=n.w;return u.globals.shouldAnimate=i,u.globals.dataChanged=!0,i&&n.ctx.series.getPreviousPaths(),u.globals.axisCharts?((h=e.map(function(g,m){return n._extendSeries(g,m)})).length===0&&(h=[{data:[]}]),u.config.series=h):u.config.series=e.slice(),r&&(u.globals.initialConfig.series=X.clone(u.config.series),u.globals.initialSeries=X.clone(u.config.series)),n.ctx.update().then(function(){l(n.ctx)})})}},{key:"_extendSeries",value:function(e,i){var n=this.w,r=n.config.series[i];return I(I({},n.config.series[i]),{},{name:e.name?e.name:r==null?void 0:r.name,color:e.color?e.color:r==null?void 0:r.color,type:e.type?e.type:r==null?void 0:r.type,group:e.group?e.group:r==null?void 0:r.group,hidden:e.hidden!==void 0?e.hidden:r==null?void 0:r.hidden,data:e.data?e.data:r==null?void 0:r.data,zIndex:e.zIndex!==void 0?e.zIndex:i})}},{key:"toggleDataPointSelection",value:function(e,i){var n=this.w,r=null,l=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?r=n.globals.dom.Paper.findOne("".concat(l," path[j='").concat(i,"'], ").concat(l," circle[j='").concat(i,"'], ").concat(l," rect[j='").concat(i,"']")):i===void 0&&(r=n.globals.dom.Paper.findOne("".concat(l," path[j='").concat(e,"']")),n.config.chart.type!=="pie"&&n.config.chart.type!=="polarArea"&&n.config.chart.type!=="donut"||this.ctx.pie.pieClicked(e)),r?(new Q(this.ctx).pathMouseDown(r,null),r.node?r.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var i=this.w;if(["min","max"].forEach(function(r){e.xaxis[r]!==void 0&&(i.config.xaxis[r]=e.xaxis[r],i.globals.lastXAxis[r]=e.xaxis[r])}),e.xaxis.categories&&e.xaxis.categories.length&&(i.config.xaxis.categories=e.xaxis.categories),i.config.xaxis.convertedCatToNumeric){var n=new Bs(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){return e.chart&&e.chart.stacked&&e.chart.stackType==="100%"&&(Array.isArray(e.yaxis)?e.yaxis.forEach(function(i,n){e.yaxis[n].min=0,e.yaxis[n].max=100}):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var i=this,n=this.w,r=n.globals.lastXAxis,l=n.globals.lastYAxis;e&&e.xaxis&&(r=e.xaxis),e&&e.yaxis&&(l=e.yaxis),n.config.xaxis.min=r.min,n.config.xaxis.max=r.max;var h=function(u){l[u]!==void 0&&(n.config.yaxis[u].min=l[u].min,n.config.yaxis[u].max=l[u].max)};n.config.yaxis.map(function(u,g){n.globals.zoomed||l[g]!==void 0?h(g):i.ctx.opts.yaxis[g]!==void 0&&(u.min=i.ctx.opts.yaxis[g].min,u.max=i.ctx.opts.yaxis[g].max)})}}]),f}();(function(){function f(){for(var l=arguments.length>0&&arguments[0]!==b?arguments[0]:[],h=arguments.length>1?arguments[1]:b,u=arguments.length>2?arguments[2]:b,g=arguments.length>3?arguments[3]:b,m=arguments.length>4?arguments[4]:b,y=arguments.length>5?arguments[5]:b,b=arguments.length>6?arguments[6]:b,v=l.slice(h,u||b),k=g.slice(m,y||b),A=0,C={pos:[0,0],start:[0,0]},T={pos:[0,0],start:[0,0]};v[A]=e.call(C,v[A]),k[A]=e.call(T,k[A]),v[A][0]!=k[A][0]||v[A][0]=="M"||v[A][0]=="A"&&(v[A][4]!=k[A][4]||v[A][5]!=k[A][5])?(Array.prototype.splice.apply(v,[A,1].concat(n.call(C,v[A]))),Array.prototype.splice.apply(k,[A,1].concat(n.call(T,k[A])))):(v[A]=i.call(C,v[A]),k[A]=i.call(T,k[A])),!(++A==v.length&&A==k.length);)A==v.length&&v.push(["C",C.pos[0],C.pos[1],C.pos[0],C.pos[1],C.pos[0],C.pos[1]]),A==k.length&&k.push(["C",T.pos[0],T.pos[1],T.pos[0],T.pos[1],T.pos[0],T.pos[1]]);return{start:v,dest:k}}function e(l){switch(l[0]){case"z":case"Z":l[0]="L",l[1]=this.start[0],l[2]=this.start[1];break;case"H":l[0]="L",l[2]=this.pos[1];break;case"V":l[0]="L",l[2]=l[1],l[1]=this.pos[0];break;case"T":l[0]="Q",l[3]=l[1],l[4]=l[2],l[1]=this.reflection[1],l[2]=this.reflection[0];break;case"S":l[0]="C",l[6]=l[4],l[5]=l[3],l[4]=l[2],l[3]=l[1],l[2]=this.reflection[1],l[1]=this.reflection[0]}return l}function i(l){var h=l.length;return this.pos=[l[h-2],l[h-1]],"SCQT".indexOf(l[0])!=-1&&(this.reflection=[2*this.pos[0]-l[h-4],2*this.pos[1]-l[h-3]]),l}function n(l){var h=[l];switch(l[0]){case"M":return this.pos=this.start=[l[1],l[2]],h;case"L":l[5]=l[3]=l[1],l[6]=l[4]=l[2],l[1]=this.pos[0],l[2]=this.pos[1];break;case"Q":l[6]=l[4],l[5]=l[3],l[4]=1*l[4]/3+2*l[2]/3,l[3]=1*l[3]/3+2*l[1]/3,l[2]=1*this.pos[1]/3+2*l[2]/3,l[1]=1*this.pos[0]/3+2*l[1]/3;break;case"A":h=function(u,g){var m,y,b,v,k,A,C,T,O,L,P,F,N,H,z,B,W,V,G,q,U,K,re,ae,ce,xe,me=Math.abs(g[1]),ye=Math.abs(g[2]),be=g[3]%360,Xe=g[4],We=g[5],Re=g[6],at=g[7],Me=new Te(u),Ae=new Te(Re,at),Le=[];if(me===0||ye===0||Me.x===Ae.x&&Me.y===Ae.y)return[["C",Me.x,Me.y,Ae.x,Ae.y,Ae.x,Ae.y]];for(m=new Te((Me.x-Ae.x)/2,(Me.y-Ae.y)/2).transform(new fe().rotate(be)),y=m.x*m.x/(me*me)+m.y*m.y/(ye*ye),y>1&&(me*=y=Math.sqrt(y),ye*=y),b=new fe().rotate(be).scale(1/me,1/ye).rotate(-be),Me=Me.transform(b),Ae=Ae.transform(b),v=[Ae.x-Me.x,Ae.y-Me.y],A=v[0]*v[0]+v[1]*v[1],k=Math.sqrt(A),v[0]/=k,v[1]/=k,C=A<4?Math.sqrt(1-A/4):0,Xe===We&&(C*=-1),T=new Te((Ae.x+Me.x)/2+C*-v[1],(Ae.y+Me.y)/2+C*v[0]),O=new Te(Me.x-T.x,Me.y-T.y),L=new Te(Ae.x-T.x,Ae.y-T.y),P=Math.acos(O.x/Math.sqrt(O.x*O.x+O.y*O.y)),O.y<0&&(P*=-1),F=Math.acos(L.x/Math.sqrt(L.x*L.x+L.y*L.y)),L.y<0&&(F*=-1),We&&P>F&&(F+=2*Math.PI),!We&&P<F&&(F-=2*Math.PI),H=Math.ceil(2*Math.abs(P-F)/Math.PI),B=[],W=P,N=(F-P)/H,z=4*Math.tan(N/4)/3,U=0;U<=H;U++)G=Math.cos(W),V=Math.sin(W),q=new Te(T.x+G,T.y+V),B[U]=[new Te(q.x+z*V,q.y-z*G),q,new Te(q.x-z*V,q.y+z*G)],W+=N;for(B[0][0]=B[0][1].clone(),B[B.length-1][2]=B[B.length-1][1].clone(),b=new fe().rotate(be).scale(me,ye).rotate(-be),U=0,K=B.length;U<K;U++)B[U][0]=B[U][0].transform(b),B[U][1]=B[U][1].transform(b),B[U][2]=B[U][2].transform(b);for(U=1,K=B.length;U<K;U++)re=(q=B[U-1][2]).x,ae=q.y,ce=(q=B[U][0]).x,xe=q.y,Re=(q=B[U][1]).x,at=q.y,Le.push(["C",re,ae,ce,xe,Re,at]);return Le}(this.pos,l),l=h[0]}return l[0]="C",this.pos=[l[5],l[6]],this.reflection=[2*l[5]-l[3],2*l[6]-l[4]],h}function r(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=arguments.length>1?arguments[1]:void 0;if(h===!1)return!1;for(var u=h,g=l.length;u<g;++u)if(l[u][0]=="M")return u;return!1}pe(Yt,{morph:function(l,h,u,g,m){for(var y=this.parse(l),b=this.parse(h),v=0,k=0,A=!1,C=!1;v!==!1||k!==!1;){var T;A=r(y,v!==!1&&v+1),C=r(b,k!==!1&&k+1),v===!1&&(v=(T=new Yt(O.start).bbox()).height==0||T.width==0?y.push(y[0])-1:y.push(["M",T.x+T.width/2,T.y+T.height/2])-1),k===!1&&(k=(T=new Yt(O.dest).bbox()).height==0||T.width==0?b.push(b[0])-1:b.push(["M",T.x+T.width/2,T.y+T.height/2])-1);var O=f(y,v,A,b,k,C);y=y.slice(0,v).concat(O.start,A===!1?[]:y.slice(A)),b=b.slice(0,k).concat(O.dest,C===!1?[]:b.slice(C)),v=A!==!1&&v+O.start.length,k=C!==!1&&k+O.dest.length}this._array=y,this.destination=new Yt,this.destination._array=b;var L=this.fromArray(y.map(function(P,F){var N=b[F].map(function(H,z){return z===0?H:g.step(P[z],b[F][z],u,m[F],m)});return N}));return L}})})();const dl=f=>(f.changedTouches&&(f=f.changedTouches[0]),{x:f.clientX,y:f.clientY});class Gu{constructor(e){e.remember("_draggable",this),this.el=e,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(e){e?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(e){const i=!e.type.indexOf("mouse");if(i&&e.which!==1&&e.buttons!==0||this.el.dispatch("beforedrag",{event:e,handler:this}).defaultPrevented)return;e.preventDefault(),e.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(dl(e));const n=(i?"mouseup":"touchend")+".drag";ii(window,(i?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),ii(window,n,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:e,handler:this,box:this.box})}drag(e){const{box:i,lastClick:n}=this,r=this.el.point(dl(e)),l=r.x-n.x,h=r.y-n.y;if(!l&&!h)return i;const u=i.x+l,g=i.y+h;this.box=new _e(u,g,i.w,i.h),this.lastClick=r,this.el.dispatch("dragmove",{event:e,handler:this,box:this.box}).defaultPrevented||this.move(u,g)}move(e,i){this.el.type==="svg"?ui.prototype.move.call(this.el,e,i):this.el.move(e,i)}endDrag(e){this.drag(e),this.el.fire("dragend",{event:e,handler:this,box:this.box}),Dt(window,"mousemove.drag"),Dt(window,"touchmove.drag"),Dt(window,"mouseup.drag"),Dt(window,"touchend.drag"),this.init(!0)}}/*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function Vr(f,e,i,n=null){return function(r){r.preventDefault(),r.stopPropagation();var l=r.pageX||r.touches[0].pageX,h=r.pageY||r.touches[0].pageY;e.fire(f,{x:l,y:h,event:r,index:n,points:i})}}function Gr([f,e],{a:i,b:n,c:r,d:l,e:h,f:u}){return[f*i+e*r+h,f*n+e*l+u]}pe(et,{draggable(f=!0){return(this.remember("_draggable")||new Gu(this)).init(f),this}});let ul=class{constructor(f){this.el=f,f.remember("_selectHandler",this),this.selection=new ui,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Ee();this.observer=new e.MutationObserver(this.mutationHandler)}init(f){this.createHandle=f.createHandle||this.createHandleFn,this.createRot=f.createRot||this.createRotFn,this.updateHandle=f.updateHandle||this.updateHandleFn,this.updateRot=f.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(f,e){if(!f)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((f,e,i)=>{const n=this.order[e];this.createHandle.call(this,this.selection,f,e,i,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",Vr(n,this.el,this.handlePoints,e))})}createHandleFn(f){f.polyline()}updateHandleFn(f,e,i,n){const r=n.at(i-1),l=n[(i+1)%n.length],h=e,u=[h[0]-r[0],h[1]-r[1]],g=[h[0]-l[0],h[1]-l[1]],m=Math.sqrt(u[0]*u[0]+u[1]*u[1]),y=Math.sqrt(g[0]*g[0]+g[1]*g[1]),b=[u[0]/m,u[1]/m],v=[g[0]/y,g[1]/y],k=[h[0]-10*b[0],h[1]-10*b[1]],A=[h[0]-10*v[0],h[1]-10*v[1]];f.plot([k,h,A])}updateResizeHandles(){this.handlePoints.forEach((f,e,i)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),f,e,i,n)})}createRotFn(f){f.line(),f.circle(5)}getPoint(f){return this.handlePoints[this.order.indexOf(f)]}getPointHandle(f){return this.selection.get(this.order.indexOf(f)+1)}updateRotFn(f,e){const i=this.getPoint("t");f.get(0).plot(i[0],i[1],e[0],e[1]),f.get(1).center(e[0],e[1])}createRotationHandle(){const f=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",Vr("rot",this.el,this.handlePoints));this.createRot.call(this,f)}updateRotationHandle(){const f=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(f,this.rotationPoint,this.handlePoints)}updatePoints(){const f=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(f).map(i=>Gr(i,e)),this.rotationPoint=Gr(this.getRotationPoint(f),e)}getHandlePoints({x:f,x2:e,y:i,y2:n,cx:r,cy:l}=this.el.bbox()){return[[f,i],[r,i],[e,i],[e,l],[e,n],[r,n],[f,n],[f,l]]}getRotationPoint({y:f,cx:e}=this.el.bbox()){return[e,f-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const fl=f=>function(e=!0,i={}){typeof e=="object"&&(i=e,e=!0);let n=this.remember("_"+f.name);return n||(e.prototype instanceof ul?(n=new e(this),e=!0):n=new f(this),this.remember("_"+f.name,n)),n.active(e,i),this};/*!
* @svgdotjs/svg.resize.js - An extension for svg.js which allows to resize elements which are selected
* @version 2.0.4
* https://github.com/svgdotjs/svg.resize.js
*
* @copyright [object Object]
* @license MIT
*
* BUILT: Fri Sep 13 2024 12:43:14 GMT+0200 (Central European Summer Time)
*//*!
* @svgdotjs/svg.select.js - An extension of svg.js which allows to select elements with mouse
* @version 4.0.1
* https://github.com/svgdotjs/svg.select.js
*
* @copyright Ulrich-Matthias Schäfer
* @license MIT
*
* BUILT: Mon Jul 01 2024 15:04:42 GMT+0200 (Central European Summer Time)
*/function qr(f,e,i,n=null){return function(r){r.preventDefault(),r.stopPropagation();var l=r.pageX||r.touches[0].pageX,h=r.pageY||r.touches[0].pageY;e.fire(f,{x:l,y:h,event:r,index:n,points:i})}}function $r([f,e],{a:i,b:n,c:r,d:l,e:h,f:u}){return[f*i+e*r+h,f*n+e*l+u]}pe(et,{select:fl(ul)}),pe([Xi,Yi,Fi],{pointSelect:fl(class{constructor(f){this.el=f,f.remember("_pointSelectHandler",this),this.selection=new ui,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Ee();this.observer=new e.MutationObserver(this.mutationHandler)}init(f){this.createHandle=f.createHandle||this.createHandleFn,this.updateHandle=f.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(f,e){if(!f)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((f,e,i)=>{this.createHandle.call(this,this.selection,f,e,i),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",Vr("point",this.el,this.points,e))})}createHandleFn(f){f.circle(5)}updateHandleFn(f,e){f.center(e[0],e[1])}updatePointHandles(){this.points.forEach((f,e,i)=>{this.updateHandle.call(this,this.selection.get(e+1),f,e,i)})}updatePoints(){const f=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>Gr(e,f))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class pl{constructor(e){this.el=e,e.remember("_selectHandler",this),this.selection=new ui,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const i=Ee();this.observer=new i.MutationObserver(this.mutationHandler)}init(e){this.createHandle=e.createHandle||this.createHandleFn,this.createRot=e.createRot||this.createRotFn,this.updateHandle=e.updateHandle||this.updateHandleFn,this.updateRot=e.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(e,i){if(!e)return this.selection.clear().remove(),void this.observer.disconnect();this.init(i)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((e,i,n)=>{const r=this.order[i];this.createHandle.call(this,this.selection,e,i,n,r),this.selection.get(i+1).addClass("svg_select_handle svg_select_handle_"+r).on("mousedown.selection touchstart.selection",qr(r,this.el,this.handlePoints,i))})}createHandleFn(e){e.polyline()}updateHandleFn(e,i,n,r){const l=r.at(n-1),h=r[(n+1)%r.length],u=i,g=[u[0]-l[0],u[1]-l[1]],m=[u[0]-h[0],u[1]-h[1]],y=Math.sqrt(g[0]*g[0]+g[1]*g[1]),b=Math.sqrt(m[0]*m[0]+m[1]*m[1]),v=[g[0]/y,g[1]/y],k=[m[0]/b,m[1]/b],A=[u[0]-10*v[0],u[1]-10*v[1]],C=[u[0]-10*k[0],u[1]-10*k[1]];e.plot([A,u,C])}updateResizeHandles(){this.handlePoints.forEach((e,i,n)=>{const r=this.order[i];this.updateHandle.call(this,this.selection.get(i+1),e,i,n,r)})}createRotFn(e){e.line(),e.circle(5)}getPoint(e){return this.handlePoints[this.order.indexOf(e)]}getPointHandle(e){return this.selection.get(this.order.indexOf(e)+1)}updateRotFn(e,i){const n=this.getPoint("t");e.get(0).plot(n[0],n[1],i[0],i[1]),e.get(1).center(i[0],i[1])}createRotationHandle(){const e=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",qr("rot",this.el,this.handlePoints));this.createRot.call(this,e)}updateRotationHandle(){const e=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(e,this.rotationPoint,this.handlePoints)}updatePoints(){const e=this.el.bbox(),i=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(e).map(n=>$r(n,i)),this.rotationPoint=$r(this.getRotationPoint(e),i)}getHandlePoints({x:e,x2:i,y:n,y2:r,cx:l,cy:h}=this.el.bbox()){return[[e,n],[l,n],[i,n],[i,h],[i,r],[l,r],[e,r],[e,h]]}getRotationPoint({y:e,cx:i}=this.el.bbox()){return[i,e-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const gl=f=>function(e=!0,i={}){typeof e=="object"&&(i=e,e=!0);let n=this.remember("_"+f.name);return n||(e.prototype instanceof pl?(n=new e(this),e=!0):n=new f(this),this.remember("_"+f.name,n)),n.active(e,i),this};pe(et,{select:gl(pl)}),pe([Xi,Yi,Fi],{pointSelect:gl(class{constructor(f){this.el=f,f.remember("_pointSelectHandler",this),this.selection=new ui,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Ee();this.observer=new e.MutationObserver(this.mutationHandler)}init(f){this.createHandle=f.createHandle||this.createHandleFn,this.updateHandle=f.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(f,e){if(!f)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((f,e,i)=>{this.createHandle.call(this,this.selection,f,e,i),this.selection.get(e+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",qr("point",this.el,this.points,e))})}createHandleFn(f){f.circle(5)}updateHandleFn(f,e){f.center(e[0],e[1])}updatePointHandles(){this.points.forEach((f,e,i)=>{this.updateHandle.call(this,this.selection.get(e+1),f,e,i)})}updatePoints(){const f=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(e=>$r(e,f))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const kn=f=>(f.changedTouches&&(f=f.changedTouches[0]),{x:f.clientX,y:f.clientY}),ml=f=>{let e=1/0,i=1/0,n=-1/0,r=-1/0;for(let l=0;l<f.length;l++){const h=f[l];e=Math.min(e,h[0]),i=Math.min(i,h[1]),n=Math.max(n,h[0]),r=Math.max(r,h[1])}return new _e(e,i,n-e,r-i)};class xl{constructor(e){this.el=e,e.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(e,i){this.preserveAspectRatio=i.preserveAspectRatio??!1,this.aroundCenter=i.aroundCenter??!1,this.grid=i.grid??0,this.degree=i.degree??0,this.el.off(".resize"),e&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&(this.eventType==="rot"?this.rotate(this.lastEvent):this.eventType==="point"?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(e){this.eventType=e.type;const{event:i,index:n,points:r}=e.detail,l=!i.type.indexOf("mouse");if(l&&(i.which||i.buttons)!==1||this.el.dispatch("beforeresize",{event:e,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(kn(i)),this.index=n,this.points=r.slice();const h=(l?"mousemove":"touchmove")+".resize",u=(l?"mouseup":"touchcancel.resize touchend")+".resize";e.type==="point"?ii(window,h,this.movePoint):e.type==="rot"?ii(window,h,this.rotate):ii(window,h,this.resize),ii(window,u,this.endResize)}resize(e){this.lastEvent=e;const i=this.snapToGrid(this.el.point(kn(e)));let n=i.x-this.startPoint.x,r=i.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(n*=2,r*=2);const l=this.box.x+n,h=this.box.y+r,u=this.box.x2+n,g=this.box.y2+r;let m=new _e(this.box);if(this.eventType.includes("l")&&(m.x=Math.min(l,this.box.x2),m.x2=Math.max(l,this.box.x2)),this.eventType.includes("r")&&(m.x=Math.min(u,this.box.x),m.x2=Math.max(u,this.box.x)),this.eventType.includes("t")&&(m.y=Math.min(h,this.box.y2),m.y2=Math.max(h,this.box.y2)),this.eventType.includes("b")&&(m.y=Math.min(g,this.box.y),m.y2=Math.max(g,this.box.y)),m.width=m.x2-m.x,m.height=m.y2-m.y,this.preserveAspectRatio){const y=m.width/this.box.width,b=m.height/this.box.height,v=["lt","t","rt","r","rb","b","lb","l"],k=(v.indexOf(this.eventType)+4)%v.length,A=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[k];let C=this.eventType.includes("t")||this.eventType.includes("b")?b:y;C=this.eventType.length===2?Math.max(y,b):C,m=function(T,O,L){const P=[[T.x,T.y],[T.x+T.width,T.y],[T.x+T.width,T.y+T.height],[T.x,T.y+T.height]].map(([F,N])=>{const H=F-O[0],z=(N-O[1])*L;return[H*L+O[0],z+O[1]]});return ml(P)}(this.box,A,C)}this.el.dispatch("resize",{box:new _e(m),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.size(m.width,m.height).move(m.x,m.y)}movePoint(e){this.lastEvent=e;const{x:i,y:n}=this.snapToGrid(this.el.point(kn(e))),r=this.el.array().slice();r[this.index]=[i,n],this.el.dispatch("resize",{box:ml(r),angle:0,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.plot(r)}rotate(e){this.lastEvent=e;const i=this.startPoint,n=this.el.point(kn(e)),{cx:r,cy:l}=this.box,h=i.x-r,u=i.y-l,g=n.x-r,m=n.y-l,y=Math.sqrt(h*h+u*u)*Math.sqrt(g*g+m*m);if(y===0)return;let b=Math.acos((h*g+u*m)/y)/Math.PI*180;if(!b)return;n.x<i.x&&(b=-b);const v=new fe(this.el),{x:k,y:A}=new Te(r,l).transformO(v),{rotate:C}=v.decompose(),T=this.snapToAngle(C+b)-C;this.el.dispatch("resize",{box:this.box,angle:T,eventType:this.eventType,event:e,handler:this}).defaultPrevented||this.el.transform(v.rotateO(T,k,A))}endResize(e){this.eventType!=="rot"&&this.eventType!=="point"&&this.resize(e),this.lastEvent=null,this.eventType="",Dt(window,"mousemove.resize touchmove.resize"),Dt(window,"mouseup.resize touchend.resize")}snapToGrid(e){return this.grid&&(e.x=Math.round(e.x/this.grid)*this.grid,e.y=Math.round(e.y/this.grid)*this.grid),e}snapToAngle(e){return this.degree&&(e=Math.round(e/this.degree)*this.degree),e}}pe(et,{resize:function(f=!0,e={}){typeof f=="object"&&(e=f,f=!0);let i=this.remember("_ResizeHandler");return i||(f.prototype instanceof xl?(i=new f(this),f=!0):i=new xl(this),this.remember("_resizeHandler",i)),i.active(f,e),this}}),window.SVG===void 0&&(window.SVG=lu),window.Apex===void 0&&(window.Apex={});var bl=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new Z(this.ctx),this.ctx.axes=new xu(this.ctx),this.ctx.core=new ju(this.ctx.el,this.ctx),this.ctx.config=new Hs({}),this.ctx.data=new Br(this.ctx),this.ctx.grid=new Qo(this.ctx),this.ctx.graphics=new Q(this.ctx),this.ctx.coreUtils=new je(this.ctx),this.ctx.crosshairs=new Yr(this.ctx),this.ctx.events=new gu(this.ctx),this.ctx.exports=new vn(this.ctx),this.ctx.fill=new _t(this.ctx),this.ctx.localization=new mu(this.ctx),this.ctx.options=new Wi,this.ctx.responsive=new bu(this.ctx),this.ctx.series=new zt(this.ctx),this.ctx.theme=new yu(this.ctx),this.ctx.formatters=new Fs(this.ctx),this.ctx.titleSubtitle=new vu(this.ctx),this.ctx.legend=new tl(this.ctx),this.ctx.toolbar=new il(this.ctx),this.ctx.tooltip=new rl(this.ctx),this.ctx.dimensions=new wn(this.ctx),this.ctx.updateHelpers=new Vu(this.ctx),this.ctx.zoomPanSelection=new Mu(this.ctx),this.ctx.w.globals.tooltip=new rl(this.ctx)}}]),f}(),yl=function(){function f(e){s(this,f),this.ctx=e,this.w=e.w}return c(f,[{key:"clear",value:function(e){var i=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:i})}},{key:"killSVG",value:function(e){e.each(function(){this.removeClass("*"),this.off()},!0),e.clear()}},{key:"clearDomElements",value:function(e){var i=this,n=e.isUpdating,r=this.w.globals.dom.Paper.node;r.parentNode&&r.parentNode.parentNode&&!n&&(r.parentNode.parentNode.style.minHeight="unset");var l=this.w.globals.dom.baseEl;l&&this.ctx.eventList.forEach(function(u){l.removeEventListener(u,i.ctx.events.documentEvent)});var h=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(h.Paper),h.Paper.remove(),h.elWrap=null,h.elGraphical=null,h.elLegendWrap=null,h.elLegendForeign=null,h.baseEl=null,h.elGridRect=null,h.elGridRectMask=null,h.elGridRectBarMask=null,h.elGridRectMarkerMask=null,h.elForecastMask=null,h.elNonForecastMask=null,h.elDefs=null}}]),f}(),Ur=new WeakMap,qu=function(){function f(e,i){s(this,f),this.opts=i,this.ctx=this,this.w=new pu(i).init(),this.el=e,this.w.globals.cuid=X.randomId(),this.w.globals.chartID=this.w.config.chart.id?X.escapeString(this.w.config.chart.id):this.w.globals.cuid,new bl(this).initModules(),this.create=X.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return c(f,[{key:"render",value:function(){var e=this;return new Promise(function(i,n){if(X.elementExists(e.el)){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var r=e.w.config.chart.events.beforeMount;typeof r=="function"&&r(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(v,k){var A=!1;if(v.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var C=v.getBoundingClientRect();v.style.display!=="none"&&C.width!==0||(A=!0)}var T=new ResizeObserver(function(O){A&&k.call(v,O),A=!0});v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(v.children).forEach(function(O){return T.observe(O)}):T.observe(v),Ur.set(k,T)}(e.el.parentNode,e.parentResizeHandler);var l=e.el.getRootNode&&e.el.getRootNode(),h=X.is("ShadowRoot",l),u=e.el.ownerDocument,g=h?l.getElementById("apexcharts-css"):u.getElementById("apexcharts-css");if(!g){var m;(g=document.createElement("style")).id="apexcharts-css",g.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  direction: ltr !important;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_shape {
  stroke-width: 1;
  stroke-dasharray: 10 10;
  stroke: black;
  stroke-opacity: 0.1;
  pointer-events: none;
  fill: none;
}

.svg_select_handle {
  stroke-width: 3;
  stroke: black;
  fill: none;
}

.svg_select_handle_r {
  cursor: e-resize;
}

.svg_select_handle_l {
  cursor: w-resize;
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path:not(.apexcharts-marker),
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect,
.no-pointer-events {
  pointer-events: none
}

.apexcharts-tooltip-active .apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}`;var y=((m=e.opts.chart)===null||m===void 0?void 0:m.nonce)||e.w.config.chart.nonce;y&&g.setAttribute("nonce",y),h?l.prepend(g):u.head.appendChild(g)}var b=e.create(e.w.config.series,{});if(!b)return i(e);e.mount(b).then(function(){typeof e.w.config.chart.events.mounted=="function"&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),i(b)}).catch(function(v){n(v)})}else n(new Error("Element not found"))})}},{key:"create",value:function(e,i){var n=this,r=this.w;new bl(this).initModules();var l=this.w.globals;if(l.noData=!1,l.animationEnded=!1,!X.elementExists(this.el))return l.animationEnded=!0,this.destroy(),null;if(this.responsive.checkResponsiveConfig(i),r.config.xaxis.convertedCatToNumeric&&new Bs(r.config).convertCatToNumericXaxis(r.config,this.ctx),this.core.setupElements(),r.config.chart.type==="treemap"&&(r.config.grid.show=!1,r.config.yaxis[0].show=!1),l.svgWidth===0)return l.animationEnded=!0,null;var h=e;e.forEach(function(v,k){v.hidden&&(h=n.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:k}))});var u=je.checkComboSeries(h,r.config.chart.type);l.comboCharts=u.comboCharts,l.comboBarCount=u.comboBarCount;var g=h.every(function(v){return v.data&&v.data.length===0});(h.length===0||g&&l.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(h),this.theme.init(),new hs(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),l.noData&&l.collapsedSeries.length!==l.series.length&&!r.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),l.axisCharts&&(this.core.coreCalculations(),r.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=r.globals.minX,this.ctx.toolbar.maxX=r.globals.maxX),this.formatters.heatmapLabelFormatters(),new je(this).getLargestMarkerSize(),this.dimensions.plotCoords();var m=this.core.xySettings();this.grid.createGridMask();var y=this.core.plotChartType(h,m),b=new ds(this);return b.bringForward(),r.config.dataLabels.background.enabled&&b.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:y,xyRatios:m,dimensions:{plot:{left:r.globals.translateX,top:r.globals.translateY,width:r.globals.gridWidth,height:r.globals.gridHeight}}}}},{key:"mount",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=this,r=n.w;return new Promise(function(l,h){if(n.el===null)return h(new Error("Not enough data to display or target element not found"));(i===null||r.globals.allSeriesCollapsed)&&n.series.handleNoData(),n.grid=new Qo(n);var u,g,m=n.grid.drawGrid();if(n.annotations=new fu(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),r.config.grid.position==="back"&&(m&&r.globals.dom.elGraphical.add(m.el),m!=null&&(u=m.elGridBorders)!==null&&u!==void 0&&u.node&&r.globals.dom.elGraphical.add(m.elGridBorders)),Array.isArray(i.elGraph))for(var y=0;y<i.elGraph.length;y++)r.globals.dom.elGraphical.add(i.elGraph[y]);else r.globals.dom.elGraphical.add(i.elGraph);r.config.grid.position==="front"&&(m&&r.globals.dom.elGraphical.add(m.el),m!=null&&(g=m.elGridBorders)!==null&&g!==void 0&&g.node&&r.globals.dom.elGraphical.add(m.elGridBorders)),r.config.xaxis.crosshairs.position==="front"&&n.crosshairs.drawXCrosshairs(),r.config.yaxis[0].crosshairs.position==="front"&&n.crosshairs.drawYCrosshairs(),r.config.chart.type!=="treemap"&&n.axes.drawAxis(r.config.chart.type,m);var b=new Xs(e.ctx,m),v=new Xr(e.ctx,m);if(m!==null&&(b.xAxisLabelCorrections(m.xAxisTickWidth),v.setYAxisTextAlignments(),r.config.yaxis.map(function(A,C){r.globals.ignoreYAxisIndexes.indexOf(C)===-1&&v.yAxisTitleRotate(C,A.opposite)})),n.annotations.drawAxesAnnotations(),!r.globals.noData){if(r.config.tooltip.enabled&&!r.globals.noData&&n.w.globals.tooltip.drawTooltip(i.xyRatios),r.globals.axisCharts&&(r.globals.isXNumeric||r.config.xaxis.convertedCatToNumeric||r.globals.isRangeBar))(r.config.chart.zoom.enabled||r.config.chart.selection&&r.config.chart.selection.enabled||r.config.chart.pan&&r.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:i.xyRatios});else{var k=r.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(A){k[A]=!1})}r.config.chart.toolbar.show&&!r.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}r.globals.memory.methodsToExec.length>0&&r.globals.memory.methodsToExec.forEach(function(A){A.method(A.params,!1,A.context)}),r.globals.axisCharts||r.globals.noData||n.core.resizeNonAxisCharts(),l(n)})}},{key:"destroy",value:function(){window.removeEventListener("resize",this.windowResizeHandler),function(i,n){var r=Ur.get(n);r&&(r.disconnect(),Ur.delete(n))}(this.el.parentNode,this.parentResizeHandler);var e=this.w.config.chart.id;e&&Apex._chartInstances.forEach(function(i,n){i.id===X.escapeString(e)&&Apex._chartInstances.splice(n,1)}),new yl(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],u=this.w;return this.opts=e,u.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map(function(g,m){return i.updateHelpers._extendSeries(g,m)})),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),u.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,r,l,h)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,i,n)}},{key:"appendSeries",value:function(e){var i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=this.w.config.series.slice();return r.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,i,n)}},{key:"appendData",value:function(e){var i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var r=n.w.config.series.slice(),l=0;l<r.length;l++)if(e[l]!==null&&e[l]!==void 0)for(var h=0;h<e[l].data.length;h++)r[l].data.push(e[l].data[h]);return n.w.config.series=r,i&&(n.w.globals.initialSeries=X.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var i=this;return new Promise(function(n,r){new yl(i.ctx).clear({isUpdating:!0});var l=i.create(i.w.config.series,e);if(!l)return n(i);i.mount(l).then(function(){typeof i.w.config.chart.events.updated=="function"&&i.w.config.chart.events.updated(i,i.w),i.events.fireEvent("updated",[i,i.w]),i.w.globals.isDirty=!0,n(i)}).catch(function(h){r(h)})})}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),i=[this];return e.length&&(i=[],e.forEach(function(n){i.push(n)})),i}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter(function(i){if(i.group)return!0}).map(function(i){return e.w.config.chart.group===i.group?i.chart:e})}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,i){return this.series.toggleSeriesOnHover(e,i)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"highlightSeries",value:function(e){this.series.highlightSeries(e)}},{key:"isSeriesHidden",value:function(e){this.series.isSeriesHidden(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(e,i)}},{key:"addEventListener",value:function(e,i){this.events.addEventListener(e,i)}},{key:"removeEventListener",value:function(e,i){this.events.removeEventListener(e,i)}},{key:"addXaxisAnnotation",value:function(e){var i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addXaxisAnnotationExternal(e,i,r)}},{key:"addYaxisAnnotation",value:function(e){var i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addYaxisAnnotationExternal(e,i,r)}},{key:"addPointAnnotation",value:function(e){var i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addPointAnnotationExternal(e,i,r)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=this;e&&(i=e),i.annotations.clearAnnotations(i)}},{key:"removeAnnotation",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=this;i&&(n=i),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,i){return this.coreUtils.getSeriesTotalsXRange(e,i)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Hr(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Hr(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,i){return this.updateHelpers.toggleDataPointSelection(e,i)}},{key:"zoomX",value:function(e,i){this.ctx.toolbar.zoomUpdateOptions(e,i)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new vn(this.ctx).dataURI(e)}},{key:"exportToCSV",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new vn(this.ctx).exportToCSV(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;typeof e=="function"&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var i=X.escapeString(e);if(Apex._chartInstances){var n=Apex._chartInstances.filter(function(r){return r.id===i})[0];return n&&n.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),i=0;i<e.length;i++)new f(e[i],JSON.parse(e[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,i){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var r=null;if(n.publicMethods.indexOf(i)!==-1){for(var l=arguments.length,h=new Array(l>2?l-2:0),u=2;u<l;u++)h[u-2]=arguments[u];r=n[i].apply(n,h)}return r}}},{key:"merge",value:function(e,i){return X.extend(e,i)}}]),f}();return ta=qu,ta}var Sl;function Cf(){return Sl||(Sl=1,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=X;var t=x(Uu()),s=d(Sf()),o=d(af()),c=["type","width","height","series","options"];function d(Z){return Z&&Z.__esModule?Z:{default:Z}}function p(Z){var se,ee;return typeof WeakMap!="function"?null:(se=new WeakMap,ee=new WeakMap,(p=function(te){return te?ee:se})(Z))}function x(Z,se){if(!se&&Z&&Z.__esModule)return Z;if(Z===null||E(Z)!="object"&&typeof Z!="function")return{default:Z};if(se=p(se),se&&se.has(Z))return se.get(Z);var ee,te,de={__proto__:null},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ee in Z)ee!=="default"&&{}.hasOwnProperty.call(Z,ee)&&((te=ue?Object.getOwnPropertyDescriptor(Z,ee):null)&&(te.get||te.set)?Object.defineProperty(de,ee,te):de[ee]=Z[ee]);return de.default=Z,se&&se.set(Z,de),de}function w(){return(w=Object.assign?Object.assign.bind():function(Z){for(var se=1;se<arguments.length;se++){var ee,te=arguments[se];for(ee in te)!{}.hasOwnProperty.call(te,ee)||(Z[ee]=te[ee])}return Z}).apply(null,arguments)}function S(Z,se){if(Z==null)return{};var ee,te=M(Z,se);if(Object.getOwnPropertySymbols)for(var de=Object.getOwnPropertySymbols(Z),ue=0;ue<de.length;ue++)ee=de[ue],se.includes(ee)||{}.propertyIsEnumerable.call(Z,ee)&&(te[ee]=Z[ee]);return te}function M(Z,se){if(Z==null)return{};var ee,te={};for(ee in Z)if({}.hasOwnProperty.call(Z,ee)){if(se.includes(ee))continue;te[ee]=Z[ee]}return te}function E(Z){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(se){return typeof se}:function(se){return se&&typeof Symbol=="function"&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se})(Z)}function I(Z,se){var ee,te=Object.keys(Z);return Object.getOwnPropertySymbols&&(ee=Object.getOwnPropertySymbols(Z),se&&(ee=ee.filter(function(de){return Object.getOwnPropertyDescriptor(Z,de).enumerable})),te.push.apply(te,ee)),te}function D(Z){for(var se=1;se<arguments.length;se++){var ee=arguments[se]!=null?arguments[se]:{};se%2?I(Object(ee),!0).forEach(function(te){R(Z,te,ee[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(ee)):I(Object(ee)).forEach(function(te){Object.defineProperty(Z,te,Object.getOwnPropertyDescriptor(ee,te))})}return Z}function R(Z,se,ee){return(se=Y(se))in Z?Object.defineProperty(Z,se,{value:ee,enumerable:!0,configurable:!0,writable:!0}):Z[se]=ee,Z}function Y(Z){return Z=_(Z,"string"),E(Z)=="symbol"?Z:Z+""}function _(Z,se){if(E(Z)!="object"||!Z)return Z;var ee=Z[Symbol.toPrimitive];if(ee===void 0)return(se==="string"?String:Number)(Z);if(ee=ee.call(Z,se||"default"),E(ee)!="object")return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}function $(Z,se){var ee=D({},Z);return se.forEach(function(te){delete ee[te]}),ee}function ne(Z,se){var ee=2<arguments.length&&arguments[2]!==void 0?arguments[2]:new WeakSet;if(Z!==se){if(E(Z)!=="object"||Z===null||E(se)!=="object"||se===null)return!1;if(!ee.has(Z)&&!ee.has(se)){ee.add(Z),ee.add(se);var te=Object.keys(Z),de=Object.keys(se);if(te.length!==de.length)return!1;for(var ue=0,Fe=te;ue<Fe.length;ue++){var Pe=Fe[ue];if(!de.includes(Pe)||!ne(Z[Pe],se[Pe],ee))return!1}}}return!0}function X(At){function se(qe){return qe&&E(qe)==="object"&&!Array.isArray(qe)}var Pe=At.type,ee=Pe===void 0?"line":Pe,Pe=At.width,te=Pe===void 0?"100%":Pe,Pe=At.height,de=Pe===void 0?"auto":Pe,ue=At.series,Fe=At.options,Pe=S(At,c),Ye=(0,t.useRef)(null),He=(0,t.useRef)(null),ei=(0,t.useRef)(),ns=((0,t.useEffect)(function(){ei.current=Fe;var qe=Ye.current;return He.current=new s.default(qe,ns()),He.current.render(),function(){He.current&&typeof He.current.destroy=="function"&&He.current.destroy()}},[]),(0,t.useEffect)(function(){var qe=!ne(He.current.w.config.series,ue),wt=!ne(ei.current,Fe)||de!==He.current.opts.chart.height||te!==He.current.opts.chart.width;(qe||wt)&&(!qe||wt?He.current.updateOptions(ns()):He.current.updateSeries(ue)),ei.current=Fe},[Fe,ue,de,te]),function(){return li(Fe,{chart:{type:ee,height:de,width:te},series:ue})}),li=function(qe,wt){var Lt=D({},qe);return se(qe)&&se(wt)&&Object.keys(wt).forEach(function(he){se(wt[he])&&he in qe?Lt[he]=li(qe[he],wt[he]):Object.assign(Lt,R({},he,wt[he]))}),Lt},At=$(Pe,Object.keys(X.propTypes));return t.default.createElement("div",w({ref:Ye},At))}X.propTypes={type:o.default.string.isRequired,series:o.default.array.isRequired,options:o.default.object.isRequired,width:o.default.oneOfType([o.default.string,o.default.number]),height:o.default.oneOfType([o.default.string,o.default.number])}}(ea)),ea}Cf();var Cl;(function(a){a.Hour="Hour",a.QuarterDay="Quarter Day",a.HalfDay="Half Day",a.Day="Day",a.Week="Week",a.Month="Month",a.Year="Year"})(Cl||(Cl={}));typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Ve.createContext({column:0,position:0});const It=a=>{const{className:t,disabled:s,active:o,...c}=a;return J.jsx("button",{className:Ca("tool-button text-xl heading-text hover:text-primary flex items-center p-1.5 rounded-lg",o&&"text-primary",s&&"opacity-20 cursor-not-allowed",t),type:"button",disabled:s,...c})},Al=({editor:a,...t})=>J.jsx(It,{title:"Bold",disabled:!a.can().chain().focus().toggleBold().run(),active:a.isActive("bold"),onClick:()=>a.chain().focus().toggleBold().run(),...t,children:J.jsx(of,{})}),Ml=({editor:a})=>J.jsx(It,{title:"Italic",disabled:!a.can().chain().focus().toggleItalic().run(),active:a.isActive("italic"),onClick:()=>a.chain().focus().toggleItalic().run(),children:J.jsx(lf,{})}),Tl=({editor:a})=>J.jsx(It,{title:"Strikethrough",disabled:!a.can().chain().focus().toggleStrike().run(),active:a.isActive("strike"),onClick:()=>a.chain().focus().toggleStrike().run(),children:J.jsx(cf,{})}),Ol=({editor:a})=>J.jsx(It,{title:"Code",disabled:!a.can().chain().focus().toggleCode().run(),active:a.isActive("code"),onClick:()=>a.chain().focus().toggleCode().run(),children:J.jsx(hf,{})}),El=({editor:a})=>J.jsx(It,{title:"Ordered List",active:a.isActive("orderedList"),onClick:()=>a.chain().focus().toggleOrderedList().run(),children:J.jsx(df,{})}),Il=({editor:a})=>J.jsx(It,{title:"Code Block",active:a.isActive("codeBlock"),onClick:()=>a.chain().focus().toggleCodeBlock().run(),children:J.jsx(uf,{})}),Ll=({editor:a})=>J.jsx(It,{title:"Blockquote",active:a.isActive("blockquote"),onClick:()=>a.chain().focus().toggleBlockquote().run(),children:J.jsx(ff,{})}),Pl=({editor:a})=>J.jsx(It,{title:"Horizontal Rule",onClick:()=>a.chain().focus().setHorizontalRule().run(),children:J.jsx(pf,{})});function Af(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"path",attr:{d:"m17 12 3-2v8"},child:[]}]})(a)}function Mf(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"path",attr:{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1"},child:[]}]})(a)}function Tf(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"path",attr:{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2"},child:[]},{tag:"path",attr:{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2"},child:[]}]})(a)}function Of(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"path",attr:{d:"M17 10v3a1 1 0 0 0 1 1h3"},child:[]},{tag:"path",attr:{d:"M21 10v8"},child:[]},{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]}]})(a)}function Ef(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"path",attr:{d:"M17 13v-3h4"},child:[]},{tag:"path",attr:{d:"M17 17.7c.4.2.8.3 1.3.3 1.5 0 2.7-1.1 2.7-2.5S19.8 13 18.3 13H17"},child:[]}]})(a)}function If(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12h8"},child:[]},{tag:"path",attr:{d:"M4 18V6"},child:[]},{tag:"path",attr:{d:"M12 18V6"},child:[]},{tag:"circle",attr:{cx:"19",cy:"16",r:"2"},child:[]},{tag:"path",attr:{d:"M20 10c-2 2-3 3.5-3 6"},child:[]}]})(a)}function Lf(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6 12h12"},child:[]},{tag:"path",attr:{d:"M6 20V4"},child:[]},{tag:"path",attr:{d:"M18 20V4"},child:[]}]})(a)}const Cn={1:{label:"Heading 1",value:1,icon:J.jsx(Af,{})},2:{label:"Heading 2",value:2,icon:J.jsx(Mf,{})},3:{label:"Heading 3",value:3,icon:J.jsx(Tf,{})},4:{label:"Heading 4",value:4,icon:J.jsx(Of,{})},5:{label:"Heading 5",value:5,icon:J.jsx(Ef,{})},6:{label:"Heading 6",value:6,icon:J.jsx(If,{})}},Nl=({editor:a,headingLevel:t=[1,2,3,4,5,6]})=>J.jsx(J.Fragment,{children:J.jsx(vl,{renderTitle:J.jsx(It,{title:"Heading",children:J.jsx(Lf,{})}),children:t.map(s=>J.jsxs(vl.Item,{eventKey:`heading-${s}`,active:a.isActive("heading",{level:Cn[s].value}),onClick:()=>a.chain().focus().toggleHeading({level:Cn[s].value}).run(),children:[J.jsx("span",{className:"text-lg",children:Cn[s].icon}),Cn[s].label]},`heading-${s}`))})});function Pf(a){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16h2v4h2V6h2v14h2V6h3V4H9c-3.309 0-6 2.691-6 6s2.691 6 6 6zM9 6h2v8H9c-2.206 0-4-1.794-4-4s1.794-4 4-4z"},child:[]}]})(a)}const Nf=({editor:a})=>J.jsx(It,{title:"Paragraph",active:a.isActive("paragraph"),onClick:()=>a.chain().focus().setParagraph().run(),children:J.jsx(Pf,{})}),Df=({editor:a})=>J.jsx(It,{title:"Code",disabled:!a.can().chain().focus().undo().run(),onClick:()=>a.chain().focus().undo().run(),children:J.jsx(Ju,{})}),Rf=({editor:a})=>J.jsx(It,{title:"Code",disabled:!a.can().chain().focus().redo().run(),onClick:()=>a.chain().focus().redo().run(),children:J.jsx(Zu,{})}),Dl=({editor:a})=>J.jsx(It,{title:"Bullet List",active:a.isActive("bulletList"),onClick:()=>a.chain().focus().toggleBulletList().run(),children:J.jsx(gf,{})});function st(a){this.content=a}st.prototype={constructor:st,find:function(a){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===a)return t;return-1},get:function(a){var t=this.find(a);return t==-1?void 0:this.content[t+1]},update:function(a,t,s){var o=s&&s!=a?this.remove(s):this,c=o.find(a),d=o.content.slice();return c==-1?d.push(s||a,t):(d[c+1]=t,s&&(d[c]=s)),new st(d)},remove:function(a){var t=this.find(a);if(t==-1)return this;var s=this.content.slice();return s.splice(t,2),new st(s)},addToStart:function(a,t){return new st([a,t].concat(this.remove(a).content))},addToEnd:function(a,t){var s=this.remove(a).content.slice();return s.push(a,t),new st(s)},addBefore:function(a,t,s){var o=this.remove(t),c=o.content.slice(),d=o.find(a);return c.splice(d==-1?c.length:d,0,t,s),new st(c)},forEach:function(a){for(var t=0;t<this.content.length;t+=2)a(this.content[t],this.content[t+1])},prepend:function(a){return a=st.from(a),a.size?new st(a.content.concat(this.subtract(a).content)):this},append:function(a){return a=st.from(a),a.size?new st(this.subtract(a).content.concat(a.content)):this},subtract:function(a){var t=this;a=st.from(a);for(var s=0;s<a.content.length;s+=2)t=t.remove(a.content[s]);return t},toObject:function(){var a={};return this.forEach(function(t,s){a[t]=s}),a},get size(){return this.content.length>>1}};st.from=function(a){if(a instanceof st)return a;var t=[];if(a)for(var s in a)t.push(s,a[s]);return new st(t)};function Kc(a,t,s){for(let o=0;;o++){if(o==a.childCount||o==t.childCount)return a.childCount==t.childCount?null:s;let c=a.child(o),d=t.child(o);if(c==d){s+=c.nodeSize;continue}if(!c.sameMarkup(d))return s;if(c.isText&&c.text!=d.text){for(let p=0;c.text[p]==d.text[p];p++)s++;return s}if(c.content.size||d.content.size){let p=Kc(c.content,d.content,s+1);if(p!=null)return p}s+=c.nodeSize}}function Qc(a,t,s,o){for(let c=a.childCount,d=t.childCount;;){if(c==0||d==0)return c==d?null:{a:s,b:o};let p=a.child(--c),x=t.child(--d),w=p.nodeSize;if(p==x){s-=w,o-=w;continue}if(!p.sameMarkup(x))return{a:s,b:o};if(p.isText&&p.text!=x.text){let S=0,M=Math.min(p.text.length,x.text.length);for(;S<M&&p.text[p.text.length-S-1]==x.text[x.text.length-S-1];)S++,s--,o--;return{a:s,b:o}}if(p.content.size||x.content.size){let S=Qc(p.content,x.content,s-1,o-1);if(S)return S}s-=w,o-=w}}class ie{constructor(t,s){if(this.content=t,this.size=s||0,s==null)for(let o=0;o<t.length;o++)this.size+=t[o].nodeSize}nodesBetween(t,s,o,c=0,d){for(let p=0,x=0;x<s;p++){let w=this.content[p],S=x+w.nodeSize;if(S>t&&o(w,c+x,d||null,p)!==!1&&w.content.size){let M=x+1;w.nodesBetween(Math.max(0,t-M),Math.min(w.content.size,s-M),o,c+M)}x=S}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,s,o,c){let d="",p=!0;return this.nodesBetween(t,s,(x,w)=>{let S=x.isText?x.text.slice(Math.max(t,w)-w,s-w):x.isLeaf?c?typeof c=="function"?c(x):c:x.type.spec.leafText?x.type.spec.leafText(x):"":"";x.isBlock&&(x.isLeaf&&S||x.isTextblock)&&o&&(p?p=!1:d+=o),d+=S},0),d}append(t){if(!t.size)return this;if(!this.size)return t;let s=this.lastChild,o=t.firstChild,c=this.content.slice(),d=0;for(s.isText&&s.sameMarkup(o)&&(c[c.length-1]=s.withText(s.text+o.text),d=1);d<t.content.length;d++)c.push(t.content[d]);return new ie(c,this.size+t.size)}cut(t,s=this.size){if(t==0&&s==this.size)return this;let o=[],c=0;if(s>t)for(let d=0,p=0;p<s;d++){let x=this.content[d],w=p+x.nodeSize;w>t&&((p<t||w>s)&&(x.isText?x=x.cut(Math.max(0,t-p),Math.min(x.text.length,s-p)):x=x.cut(Math.max(0,t-p-1),Math.min(x.content.size,s-p-1))),o.push(x),c+=x.nodeSize),p=w}return new ie(o,c)}cutByIndex(t,s){return t==s?ie.empty:t==0&&s==this.content.length?this:new ie(this.content.slice(t,s))}replaceChild(t,s){let o=this.content[t];if(o==s)return this;let c=this.content.slice(),d=this.size+s.nodeSize-o.nodeSize;return c[t]=s,new ie(c,d)}addToStart(t){return new ie([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ie(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(t.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let s=this.content[t];if(!s)throw new RangeError("Index "+t+" out of range for "+this);return s}maybeChild(t){return this.content[t]||null}forEach(t){for(let s=0,o=0;s<this.content.length;s++){let c=this.content[s];t(c,o,s),o+=c.nodeSize}}findDiffStart(t,s=0){return Kc(this,t,s)}findDiffEnd(t,s=this.size,o=t.size){return Qc(this,t,s,o)}findIndex(t,s=-1){if(t==0)return An(0,t);if(t==this.size)return An(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let o=0,c=0;;o++){let d=this.child(o),p=c+d.nodeSize;if(p>=t)return p==t||s>0?An(o+1,p):An(o,c);c=p}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,s){if(!s)return ie.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new ie(s.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ie.empty;let s,o=0;for(let c=0;c<t.length;c++){let d=t[c];o+=d.nodeSize,c&&d.isText&&t[c-1].sameMarkup(d)?(s||(s=t.slice(0,c)),s[s.length-1]=d.withText(s[s.length-1].text+d.text)):s&&s.push(d)}return new ie(s||t,o)}static from(t){if(!t)return ie.empty;if(t instanceof ie)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ie([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ie.empty=new ie([],0);const ia={index:0,offset:0};function An(a,t){return ia.index=a,ia.offset=t,ia}function Fn(a,t){if(a===t)return!0;if(!(a&&typeof a=="object")||!(t&&typeof t=="object"))return!1;let s=Array.isArray(a);if(Array.isArray(t)!=s)return!1;if(s){if(a.length!=t.length)return!1;for(let o=0;o<a.length;o++)if(!Fn(a[o],t[o]))return!1}else{for(let o in a)if(!(o in t)||!Fn(a[o],t[o]))return!1;for(let o in t)if(!(o in a))return!1}return!0}let ze=class Aa{constructor(t,s){this.type=t,this.attrs=s}addToSet(t){let s,o=!1;for(let c=0;c<t.length;c++){let d=t[c];if(this.eq(d))return t;if(this.type.excludes(d.type))s||(s=t.slice(0,c));else{if(d.type.excludes(this.type))return t;!o&&d.type.rank>this.type.rank&&(s||(s=t.slice(0,c)),s.push(this),o=!0),s&&s.push(d)}}return s||(s=t.slice()),o||s.push(this),s}removeFromSet(t){for(let s=0;s<t.length;s++)if(this.eq(t[s]))return t.slice(0,s).concat(t.slice(s+1));return t}isInSet(t){for(let s=0;s<t.length;s++)if(this.eq(t[s]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Fn(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let s in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let o=t.marks[s.type];if(!o)throw new RangeError(`There is no mark type ${s.type} in this schema`);let c=o.create(s.attrs);return o.checkAttrs(c.attrs),c}static sameSet(t,s){if(t==s)return!0;if(t.length!=s.length)return!1;for(let o=0;o<t.length;o++)if(!t[o].eq(s[o]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Aa.none;if(t instanceof Aa)return[t];let s=t.slice();return s.sort((o,c)=>o.type.rank-c.type.rank),s}};ze.none=[];class Bn extends Error{}class oe{constructor(t,s,o){this.content=t,this.openStart=s,this.openEnd=o}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,s){let o=th(this.content,t+this.openStart,s);return o&&new oe(o,this.openStart,this.openEnd)}removeBetween(t,s){return new oe(eh(this.content,t+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,s){if(!s)return oe.empty;let o=s.openStart||0,c=s.openEnd||0;if(typeof o!="number"||typeof c!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new oe(ie.fromJSON(t,s.content),o,c)}static maxOpen(t,s=!0){let o=0,c=0;for(let d=t.firstChild;d&&!d.isLeaf&&(s||!d.type.spec.isolating);d=d.firstChild)o++;for(let d=t.lastChild;d&&!d.isLeaf&&(s||!d.type.spec.isolating);d=d.lastChild)c++;return new oe(t,o,c)}}oe.empty=new oe(ie.empty,0,0);function eh(a,t,s){let{index:o,offset:c}=a.findIndex(t),d=a.maybeChild(o),{index:p,offset:x}=a.findIndex(s);if(c==t||d.isText){if(x!=s&&!a.child(p).isText)throw new RangeError("Removing non-flat range");return a.cut(0,t).append(a.cut(s))}if(o!=p)throw new RangeError("Removing non-flat range");return a.replaceChild(o,d.copy(eh(d.content,t-c-1,s-c-1)))}function th(a,t,s,o){let{index:c,offset:d}=a.findIndex(t),p=a.maybeChild(c);if(d==t||p.isText)return a.cut(0,t).append(s).append(a.cut(t));let x=th(p.content,t-d-1,s);return x&&a.replaceChild(c,p.copy(x))}function zf(a,t,s){if(s.openStart>a.depth)throw new Bn("Inserted content deeper than insertion position");if(a.depth-s.openStart!=t.depth-s.openEnd)throw new Bn("Inconsistent open depths");return ih(a,t,s,0)}function ih(a,t,s,o){let c=a.index(o),d=a.node(o);if(c==t.index(o)&&o<a.depth-s.openStart){let p=ih(a,t,s,o+1);return d.copy(d.content.replaceChild(c,p))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&a.depth==o&&t.depth==o){let p=a.parent,x=p.content;return Ji(p,x.cut(0,a.parentOffset).append(s.content).append(x.cut(t.parentOffset)))}else{let{start:p,end:x}=Ff(s,a);return Ji(d,nh(a,p,x,t,o))}else return Ji(d,Hn(a,t,o))}function sh(a,t){if(!t.type.compatibleContent(a.type))throw new Bn("Cannot join "+t.type.name+" onto "+a.type.name)}function Ma(a,t,s){let o=a.node(s);return sh(o,t.node(s)),o}function Ui(a,t){let s=t.length-1;s>=0&&a.isText&&a.sameMarkup(t[s])?t[s]=a.withText(t[s].text+a.text):t.push(a)}function qs(a,t,s,o){let c=(t||a).node(s),d=0,p=t?t.index(s):c.childCount;a&&(d=a.index(s),a.depth>s?d++:a.textOffset&&(Ui(a.nodeAfter,o),d++));for(let x=d;x<p;x++)Ui(c.child(x),o);t&&t.depth==s&&t.textOffset&&Ui(t.nodeBefore,o)}function Ji(a,t){return a.type.checkContent(t),a.copy(t)}function nh(a,t,s,o,c){let d=a.depth>c&&Ma(a,t,c+1),p=o.depth>c&&Ma(s,o,c+1),x=[];return qs(null,a,c,x),d&&p&&t.index(c)==s.index(c)?(sh(d,p),Ui(Ji(d,nh(a,t,s,o,c+1)),x)):(d&&Ui(Ji(d,Hn(a,t,c+1)),x),qs(t,s,c,x),p&&Ui(Ji(p,Hn(s,o,c+1)),x)),qs(o,null,c,x),new ie(x)}function Hn(a,t,s){let o=[];if(qs(null,a,s,o),a.depth>s){let c=Ma(a,t,s+1);Ui(Ji(c,Hn(a,t,s+1)),o)}return qs(t,null,s,o),new ie(o)}function Ff(a,t){let s=t.depth-a.openStart,c=t.node(s).copy(a.content);for(let d=s-1;d>=0;d--)c=t.node(d).copy(ie.from(c));return{start:c.resolveNoCache(a.openStart+s),end:c.resolveNoCache(c.content.size-a.openEnd-s)}}class Zs{constructor(t,s,o){this.pos=t,this.path=s,this.parentOffset=o,this.depth=s.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,s=this.index(this.depth);if(s==t.childCount)return null;let o=this.pos-this.path[this.path.length-1],c=t.child(s);return o?t.child(s).cut(o):c}get nodeBefore(){let t=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(t).cut(0,s):t==0?null:this.parent.child(t-1)}posAtIndex(t,s){s=this.resolveDepth(s);let o=this.path[s*3],c=s==0?0:this.path[s*3-1]+1;for(let d=0;d<t;d++)c+=o.child(d).nodeSize;return c}marks(){let t=this.parent,s=this.index();if(t.content.size==0)return ze.none;if(this.textOffset)return t.child(s).marks;let o=t.maybeChild(s-1),c=t.maybeChild(s);if(!o){let x=o;o=c,c=x}let d=o.marks;for(var p=0;p<d.length;p++)d[p].type.spec.inclusive===!1&&(!c||!d[p].isInSet(c.marks))&&(d=d[p--].removeFromSet(d));return d}marksAcross(t){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let o=s.marks,c=t.parent.maybeChild(t.index());for(var d=0;d<o.length;d++)o[d].type.spec.inclusive===!1&&(!c||!o[d].isInSet(c.marks))&&(o=o[d--].removeFromSet(o));return o}sharedDepth(t){for(let s=this.depth;s>0;s--)if(this.start(s)<=t&&this.end(s)>=t)return s;return 0}blockRange(t=this,s){if(t.pos<this.pos)return t.blockRange(this);for(let o=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);o>=0;o--)if(t.pos<=this.end(o)&&(!s||s(this.node(o))))return new Xn(this,t,o);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let s=1;s<=this.depth;s++)t+=(t?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return t+":"+this.parentOffset}static resolve(t,s){if(!(s>=0&&s<=t.content.size))throw new RangeError("Position "+s+" out of range");let o=[],c=0,d=s;for(let p=t;;){let{index:x,offset:w}=p.content.findIndex(d),S=d-w;if(o.push(p,x,c+w),!S||(p=p.child(x),p.isText))break;d=S-1,c+=w+1}return new Zs(s,o,d)}static resolveCached(t,s){let o=Rl.get(t);if(o)for(let d=0;d<o.elts.length;d++){let p=o.elts[d];if(p.pos==s)return p}else Rl.set(t,o=new Bf);let c=o.elts[o.i]=Zs.resolve(t,s);return o.i=(o.i+1)%Hf,c}}class Bf{constructor(){this.elts=[],this.i=0}}const Hf=12,Rl=new WeakMap;class Xn{constructor(t,s,o){this.$from=t,this.$to=s,this.depth=o}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Xf=Object.create(null);let Si=class Ta{constructor(t,s,o,c=ze.none){this.type=t,this.attrs=s,this.marks=c,this.content=o||ie.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,s,o,c=0){this.content.nodesBetween(t,s,o,c,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,s,o,c){return this.content.textBetween(t,s,o,c)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,s,o){return this.type==t&&Fn(this.attrs,s||t.defaultAttrs||Xf)&&ze.sameSet(this.marks,o||ze.none)}copy(t=null){return t==this.content?this:new Ta(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Ta(this.type,this.attrs,this.content,t)}cut(t,s=this.content.size){return t==0&&s==this.content.size?this:this.copy(this.content.cut(t,s))}slice(t,s=this.content.size,o=!1){if(t==s)return oe.empty;let c=this.resolve(t),d=this.resolve(s),p=o?0:c.sharedDepth(s),x=c.start(p),S=c.node(p).content.cut(c.pos-x,d.pos-x);return new oe(S,c.depth-p,d.depth-p)}replace(t,s,o){return zf(this.resolve(t),this.resolve(s),o)}nodeAt(t){for(let s=this;;){let{index:o,offset:c}=s.content.findIndex(t);if(s=s.maybeChild(o),!s)return null;if(c==t||s.isText)return s;t-=c+1}}childAfter(t){let{index:s,offset:o}=this.content.findIndex(t);return{node:this.content.maybeChild(s),index:s,offset:o}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:s,offset:o}=this.content.findIndex(t);if(o<t)return{node:this.content.child(s),index:s,offset:o};let c=this.content.child(s-1);return{node:c,index:s-1,offset:o-c.nodeSize}}resolve(t){return Zs.resolveCached(this,t)}resolveNoCache(t){return Zs.resolve(this,t)}rangeHasMark(t,s,o){let c=!1;return s>t&&this.nodesBetween(t,s,d=>(o.isInSet(d.marks)&&(c=!0),!c)),c}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),rh(this.marks,t)}contentMatchAt(t){let s=this.type.contentMatch.matchFragment(this.content,0,t);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(t,s,o=ie.empty,c=0,d=o.childCount){let p=this.contentMatchAt(t).matchFragment(o,c,d),x=p&&p.matchFragment(this.content,s);if(!x||!x.validEnd)return!1;for(let w=c;w<d;w++)if(!this.type.allowsMarks(o.child(w).marks))return!1;return!0}canReplaceWith(t,s,o,c){if(c&&!this.type.allowsMarks(c))return!1;let d=this.contentMatchAt(t).matchType(o),p=d&&d.matchFragment(this.content,s);return p?p.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ze.none;for(let s=0;s<this.marks.length;s++){let o=this.marks[s];o.type.checkAttrs(o.attrs),t=o.addToSet(t)}if(!ze.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let t={type:this.type.name};for(let s in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(s=>s.toJSON())),t}static fromJSON(t,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let o;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");o=s.marks.map(t.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(s.text,o)}let c=ie.fromJSON(t,s.content),d=t.nodeType(s.type).create(s.attrs,c,o);return d.type.checkAttrs(d.attrs),d}};Si.prototype.text=void 0;class Yn extends Si{constructor(t,s,o,c){if(super(t,s,null,c),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):rh(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,s){return this.text.slice(t,s)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Yn(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Yn(this.type,this.attrs,t,this.marks)}cut(t=0,s=this.text.length){return t==0&&s==this.text.length?this:this.withText(this.text.slice(t,s))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function rh(a,t){for(let s=a.length-1;s>=0;s--)t=a[s].type.name+"("+t+")";return t}class es{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,s){let o=new Yf(t,s);if(o.next==null)return es.empty;let c=ah(o);o.next&&o.err("Unexpected trailing text");let d=$f(qf(c));return Uf(d,o),d}matchType(t){for(let s=0;s<this.next.length;s++)if(this.next[s].type==t)return this.next[s].next;return null}matchFragment(t,s=0,o=t.childCount){let c=this;for(let d=s;c&&d<o;d++)c=c.matchType(t.child(d).type);return c}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:s}=this.next[t];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(t){for(let s=0;s<this.next.length;s++)for(let o=0;o<t.next.length;o++)if(this.next[s].type==t.next[o].type)return!0;return!1}fillBefore(t,s=!1,o=0){let c=[this];function d(p,x){let w=p.matchFragment(t,o);if(w&&(!s||w.validEnd))return ie.from(x.map(S=>S.createAndFill()));for(let S=0;S<p.next.length;S++){let{type:M,next:E}=p.next[S];if(!(M.isText||M.hasRequiredAttrs())&&c.indexOf(E)==-1){c.push(E);let I=d(E,x.concat(M));if(I)return I}}return null}return d(this,[])}findWrapping(t){for(let o=0;o<this.wrapCache.length;o+=2)if(this.wrapCache[o]==t)return this.wrapCache[o+1];let s=this.computeWrapping(t);return this.wrapCache.push(t,s),s}computeWrapping(t){let s=Object.create(null),o=[{match:this,type:null,via:null}];for(;o.length;){let c=o.shift(),d=c.match;if(d.matchType(t)){let p=[];for(let x=c;x.type;x=x.via)p.push(x.type);return p.reverse()}for(let p=0;p<d.next.length;p++){let{type:x,next:w}=d.next[p];!x.isLeaf&&!x.hasRequiredAttrs()&&!(x.name in s)&&(!c.type||w.validEnd)&&(o.push({match:x.contentMatch,type:x,via:c}),s[x.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function s(o){t.push(o);for(let c=0;c<o.next.length;c++)t.indexOf(o.next[c].next)==-1&&s(o.next[c].next)}return s(this),t.map((o,c)=>{let d=c+(o.validEnd?"*":" ")+" ";for(let p=0;p<o.next.length;p++)d+=(p?", ":"")+o.next[p].type.name+"->"+t.indexOf(o.next[p].next);return d}).join(`
`)}}es.empty=new es(!0);class Yf{constructor(t,s){this.string=t,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function ah(a){let t=[];do t.push(Wf(a));while(a.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Wf(a){let t=[];do t.push(_f(a));while(a.next&&a.next!=")"&&a.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function _f(a){let t=Gf(a);for(;;)if(a.eat("+"))t={type:"plus",expr:t};else if(a.eat("*"))t={type:"star",expr:t};else if(a.eat("?"))t={type:"opt",expr:t};else if(a.eat("{"))t=jf(a,t);else break;return t}function zl(a){/\D/.test(a.next)&&a.err("Expected number, got '"+a.next+"'");let t=Number(a.next);return a.pos++,t}function jf(a,t){let s=zl(a),o=s;return a.eat(",")&&(a.next!="}"?o=zl(a):o=-1),a.eat("}")||a.err("Unclosed braced range"),{type:"range",min:s,max:o,expr:t}}function Vf(a,t){let s=a.nodeTypes,o=s[t];if(o)return[o];let c=[];for(let d in s){let p=s[d];p.isInGroup(t)&&c.push(p)}return c.length==0&&a.err("No node type or group '"+t+"' found"),c}function Gf(a){if(a.eat("(")){let t=ah(a);return a.eat(")")||a.err("Missing closing paren"),t}else if(/\W/.test(a.next))a.err("Unexpected token '"+a.next+"'");else{let t=Vf(a,a.next).map(s=>(a.inline==null?a.inline=s.isInline:a.inline!=s.isInline&&a.err("Mixing inline and block content"),{type:"name",value:s}));return a.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function qf(a){let t=[[]];return c(d(a,0),s()),t;function s(){return t.push([])-1}function o(p,x,w){let S={term:w,to:x};return t[p].push(S),S}function c(p,x){p.forEach(w=>w.to=x)}function d(p,x){if(p.type=="choice")return p.exprs.reduce((w,S)=>w.concat(d(S,x)),[]);if(p.type=="seq")for(let w=0;;w++){let S=d(p.exprs[w],x);if(w==p.exprs.length-1)return S;c(S,x=s())}else if(p.type=="star"){let w=s();return o(x,w),c(d(p.expr,w),w),[o(w)]}else if(p.type=="plus"){let w=s();return c(d(p.expr,x),w),c(d(p.expr,w),w),[o(w)]}else{if(p.type=="opt")return[o(x)].concat(d(p.expr,x));if(p.type=="range"){let w=x;for(let S=0;S<p.min;S++){let M=s();c(d(p.expr,w),M),w=M}if(p.max==-1)c(d(p.expr,w),w);else for(let S=p.min;S<p.max;S++){let M=s();o(w,M),c(d(p.expr,w),M),w=M}return[o(w)]}else{if(p.type=="name")return[o(x,void 0,p.value)];throw new Error("Unknown expr type")}}}}function oh(a,t){return t-a}function Fl(a,t){let s=[];return o(t),s.sort(oh);function o(c){let d=a[c];if(d.length==1&&!d[0].term)return o(d[0].to);s.push(c);for(let p=0;p<d.length;p++){let{term:x,to:w}=d[p];!x&&s.indexOf(w)==-1&&o(w)}}}function $f(a){let t=Object.create(null);return s(Fl(a,0));function s(o){let c=[];o.forEach(p=>{a[p].forEach(({term:x,to:w})=>{if(!x)return;let S;for(let M=0;M<c.length;M++)c[M][0]==x&&(S=c[M][1]);Fl(a,w).forEach(M=>{S||c.push([x,S=[]]),S.indexOf(M)==-1&&S.push(M)})})});let d=t[o.join(",")]=new es(o.indexOf(a.length-1)>-1);for(let p=0;p<c.length;p++){let x=c[p][1].sort(oh);d.next.push({type:c[p][0],next:t[x.join(",")]||s(x)})}return d}}function Uf(a,t){for(let s=0,o=[a];s<o.length;s++){let c=o[s],d=!c.validEnd,p=[];for(let x=0;x<c.next.length;x++){let{type:w,next:S}=c.next[x];p.push(w.name),d&&!(w.isText||w.hasRequiredAttrs())&&(d=!1),o.indexOf(S)==-1&&o.push(S)}d&&t.err("Only non-generatable nodes ("+p.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function lh(a){let t=Object.create(null);for(let s in a){let o=a[s];if(!o.hasDefault)return null;t[s]=o.default}return t}function ch(a,t){let s=Object.create(null);for(let o in a){let c=t&&t[o];if(c===void 0){let d=a[o];if(d.hasDefault)c=d.default;else throw new RangeError("No value supplied for attribute "+o)}s[o]=c}return s}function hh(a,t,s,o){for(let c in t)if(!(c in a))throw new RangeError(`Unsupported attribute ${c} for ${s} of type ${c}`);for(let c in a){let d=a[c];d.validate&&d.validate(t[c])}}function dh(a,t){let s=Object.create(null);if(t)for(let o in t)s[o]=new Zf(a,o,t[o]);return s}let Bl=class uh{constructor(t,s,o){this.name=t,this.schema=s,this.spec=o,this.markSet=null,this.groups=o.group?o.group.split(" "):[],this.attrs=dh(t,o.attrs),this.defaultAttrs=lh(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(o.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==es.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:ch(this.attrs,t)}create(t=null,s,o){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Si(this,this.computeAttrs(t),ie.from(s),ze.setFrom(o))}createChecked(t=null,s,o){return s=ie.from(s),this.checkContent(s),new Si(this,this.computeAttrs(t),s,ze.setFrom(o))}createAndFill(t=null,s,o){if(t=this.computeAttrs(t),s=ie.from(s),s.size){let p=this.contentMatch.fillBefore(s);if(!p)return null;s=p.append(s)}let c=this.contentMatch.matchFragment(s),d=c&&c.fillBefore(ie.empty,!0);return d?new Si(this,t,s.append(d),ze.setFrom(o)):null}validContent(t){let s=this.contentMatch.matchFragment(t);if(!s||!s.validEnd)return!1;for(let o=0;o<t.childCount;o++)if(!this.allowsMarks(t.child(o).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){hh(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let s=0;s<t.length;s++)if(!this.allowsMarkType(t[s].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let s;for(let o=0;o<t.length;o++)this.allowsMarkType(t[o].type)?s&&s.push(t[o]):s||(s=t.slice(0,o));return s?s.length?s:ze.none:t}static compile(t,s){let o=Object.create(null);t.forEach((d,p)=>o[d]=new uh(d,s,p));let c=s.spec.topNode||"doc";if(!o[c])throw new RangeError("Schema is missing its top node type ('"+c+"')");if(!o.text)throw new RangeError("Every schema needs a 'text' type");for(let d in o.text.attrs)throw new RangeError("The text node type should not have attributes");return o}};function Jf(a,t,s){let o=s.split("|");return c=>{let d=c===null?"null":typeof c;if(o.indexOf(d)<0)throw new RangeError(`Expected value of type ${o} for attribute ${t} on type ${a}, got ${d}`)}}class Zf{constructor(t,s,o){this.hasDefault=Object.prototype.hasOwnProperty.call(o,"default"),this.default=o.default,this.validate=typeof o.validate=="string"?Jf(t,s,o.validate):o.validate}get isRequired(){return!this.hasDefault}}class Zn{constructor(t,s,o,c){this.name=t,this.rank=s,this.schema=o,this.spec=c,this.attrs=dh(t,c.attrs),this.excluded=null;let d=lh(this.attrs);this.instance=d?new ze(this,d):null}create(t=null){return!t&&this.instance?this.instance:new ze(this,ch(this.attrs,t))}static compile(t,s){let o=Object.create(null),c=0;return t.forEach((d,p)=>o[d]=new Zn(d,c++,s,p)),o}removeFromSet(t){for(var s=0;s<t.length;s++)t[s].type==this&&(t=t.slice(0,s).concat(t.slice(s+1)),s--);return t}isInSet(t){for(let s=0;s<t.length;s++)if(t[s].type==this)return t[s]}checkAttrs(t){hh(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class fh{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let c in t)s[c]=t[c];s.nodes=st.from(t.nodes),s.marks=st.from(t.marks||{}),this.nodes=Bl.compile(this.spec.nodes,this),this.marks=Zn.compile(this.spec.marks,this);let o=Object.create(null);for(let c in this.nodes){if(c in this.marks)throw new RangeError(c+" can not be both a node and a mark");let d=this.nodes[c],p=d.spec.content||"",x=d.spec.marks;if(d.contentMatch=o[p]||(o[p]=es.parse(p,this.nodes)),d.inlineContent=d.contentMatch.inlineContent,d.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!d.isInline||!d.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=d}d.markSet=x=="_"?null:x?Hl(this,x.split(" ")):x==""||!d.inlineContent?[]:null}for(let c in this.marks){let d=this.marks[c],p=d.spec.excludes;d.excluded=p==null?[d]:p==""?[]:Hl(this,p.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,s=null,o,c){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof Bl){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(s,o,c)}text(t,s){let o=this.nodes.text;return new Yn(o,o.defaultAttrs,t,ze.setFrom(s))}mark(t,s){return typeof t=="string"&&(t=this.marks[t]),t.create(s)}nodeFromJSON(t){return Si.fromJSON(this,t)}markFromJSON(t){return ze.fromJSON(this,t)}nodeType(t){let s=this.nodes[t];if(!s)throw new RangeError("Unknown node type: "+t);return s}}function Hl(a,t){let s=[];for(let o=0;o<t.length;o++){let c=t[o],d=a.marks[c],p=d;if(d)s.push(d);else for(let x in a.marks){let w=a.marks[x];(c=="_"||w.spec.group&&w.spec.group.split(" ").indexOf(c)>-1)&&s.push(p=w)}if(!p)throw new SyntaxError("Unknown mark type: '"+t[o]+"'")}return s}function Kf(a){return a.tag!=null}function Qf(a){return a.style!=null}class Ci{constructor(t,s){this.schema=t,this.rules=s,this.tags=[],this.styles=[];let o=this.matchedStyles=[];s.forEach(c=>{if(Kf(c))this.tags.push(c);else if(Qf(c)){let d=/[^=]*/.exec(c.style)[0];o.indexOf(d)<0&&o.push(d),this.styles.push(c)}}),this.normalizeLists=!this.tags.some(c=>{if(!/^(ul|ol)\b/.test(c.tag)||!c.node)return!1;let d=t.nodes[c.node];return d.contentMatch.matchType(d)})}parse(t,s={}){let o=new Yl(this,s,!1);return o.addAll(t,ze.none,s.from,s.to),o.finish()}parseSlice(t,s={}){let o=new Yl(this,s,!0);return o.addAll(t,ze.none,s.from,s.to),oe.maxOpen(o.finish())}matchTag(t,s,o){for(let c=o?this.tags.indexOf(o)+1:0;c<this.tags.length;c++){let d=this.tags[c];if(ip(t,d.tag)&&(d.namespace===void 0||t.namespaceURI==d.namespace)&&(!d.context||s.matchesContext(d.context))){if(d.getAttrs){let p=d.getAttrs(t);if(p===!1)continue;d.attrs=p||void 0}return d}}}matchStyle(t,s,o,c){for(let d=c?this.styles.indexOf(c)+1:0;d<this.styles.length;d++){let p=this.styles[d],x=p.style;if(!(x.indexOf(t)!=0||p.context&&!o.matchesContext(p.context)||x.length>t.length&&(x.charCodeAt(t.length)!=61||x.slice(t.length+1)!=s))){if(p.getAttrs){let w=p.getAttrs(s);if(w===!1)continue;p.attrs=w||void 0}return p}}}static schemaRules(t){let s=[];function o(c){let d=c.priority==null?50:c.priority,p=0;for(;p<s.length;p++){let x=s[p];if((x.priority==null?50:x.priority)<d)break}s.splice(p,0,c)}for(let c in t.marks){let d=t.marks[c].spec.parseDOM;d&&d.forEach(p=>{o(p=Wl(p)),p.mark||p.ignore||p.clearMark||(p.mark=c)})}for(let c in t.nodes){let d=t.nodes[c].spec.parseDOM;d&&d.forEach(p=>{o(p=Wl(p)),p.node||p.ignore||p.mark||(p.node=c)})}return s}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ci(t,Ci.schemaRules(t)))}}const ph={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ep={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},gh={ol:!0,ul:!0},Ks=1,Oa=2,$s=4;function Xl(a,t,s){return t!=null?(t?Ks:0)|(t==="full"?Oa:0):a&&a.whitespace=="pre"?Ks|Oa:s&~$s}class Mn{constructor(t,s,o,c,d,p){this.type=t,this.attrs=s,this.marks=o,this.solid=c,this.options=p,this.content=[],this.activeMarks=ze.none,this.match=d||(p&$s?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(ie.from(t));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let o=this.type.contentMatch,c;return(c=o.findWrapping(t.type))?(this.match=o,c):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Ks)){let o=this.content[this.content.length-1],c;if(o&&o.isText&&(c=/[ \t\r\n\u000c]+$/.exec(o.text))){let d=o;o.text.length==c[0].length?this.content.pop():this.content[this.content.length-1]=d.withText(d.text.slice(0,d.text.length-c[0].length))}}let s=ie.from(this.content);return!t&&this.match&&(s=s.append(this.match.fillBefore(ie.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!ph.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Yl{constructor(t,s,o){this.parser=t,this.options=s,this.isOpen=o,this.open=0,this.localPreserveWS=!1;let c=s.topNode,d,p=Xl(null,s.preserveWhitespace,0)|(o?$s:0);c?d=new Mn(c.type,c.attrs,ze.none,!0,s.topMatch||c.type.contentMatch,p):o?d=new Mn(null,null,ze.none,!0,null,p):d=new Mn(t.schema.topNodeType,null,ze.none,!0,null,p),this.nodes=[d],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,s){t.nodeType==3?this.addTextNode(t,s):t.nodeType==1&&this.addElement(t,s)}addTextNode(t,s){let o=t.nodeValue,c=this.top,d=c.options&Oa?"full":this.localPreserveWS||(c.options&Ks)>0;if(d==="full"||c.inlineContext(t)||/[^ \t\r\n\u000c]/.test(o)){if(d)d!=="full"?o=o.replace(/\r?\n|\r/g," "):o=o.replace(/\r\n?/g,`
`);else if(o=o.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(o)&&this.open==this.nodes.length-1){let p=c.content[c.content.length-1],x=t.previousSibling;(!p||x&&x.nodeName=="BR"||p.isText&&/[ \t\r\n\u000c]$/.test(p.text))&&(o=o.slice(1))}o&&this.insertNode(this.parser.schema.text(o),s),this.findInText(t)}else this.findInside(t)}addElement(t,s,o){let c=this.localPreserveWS,d=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let p=t.nodeName.toLowerCase(),x;gh.hasOwnProperty(p)&&this.parser.normalizeLists&&tp(t);let w=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(x=this.parser.matchTag(t,this,o));e:if(w?w.ignore:ep.hasOwnProperty(p))this.findInside(t),this.ignoreFallback(t,s);else if(!w||w.skip||w.closeParent){w&&w.closeParent?this.open=Math.max(0,this.open-1):w&&w.skip.nodeType&&(t=w.skip);let S,M=this.needsBlock;if(ph.hasOwnProperty(p))d.content.length&&d.content[0].isInline&&this.open&&(this.open--,d=this.top),S=!0,d.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,s);break e}let E=w&&w.skip?s:this.readStyles(t,s);E&&this.addAll(t,E),S&&this.sync(d),this.needsBlock=M}else{let S=this.readStyles(t,s);S&&this.addElementByRule(t,w,S,w.consuming===!1?x:void 0)}this.localPreserveWS=c}leafFallback(t,s){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),s)}ignoreFallback(t,s){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s)}readStyles(t,s){let o=t.style;if(o&&o.length)for(let c=0;c<this.parser.matchedStyles.length;c++){let d=this.parser.matchedStyles[c],p=o.getPropertyValue(d);if(p)for(let x=void 0;;){let w=this.parser.matchStyle(d,p,this,x);if(!w)break;if(w.ignore)return null;if(w.clearMark?s=s.filter(S=>!w.clearMark(S)):s=s.concat(this.parser.schema.marks[w.mark].create(w.attrs)),w.consuming===!1)x=w;else break}}return s}addElementByRule(t,s,o,c){let d,p;if(s.node)if(p=this.parser.schema.nodes[s.node],p.isLeaf)this.insertNode(p.create(s.attrs),o)||this.leafFallback(t,o);else{let w=this.enter(p,s.attrs||null,o,s.preserveWhitespace);w&&(d=!0,o=w)}else{let w=this.parser.schema.marks[s.mark];o=o.concat(w.create(s.attrs))}let x=this.top;if(p&&p.isLeaf)this.findInside(t);else if(c)this.addElement(t,o,c);else if(s.getContent)this.findInside(t),s.getContent(t,this.parser.schema).forEach(w=>this.insertNode(w,o));else{let w=t;typeof s.contentElement=="string"?w=t.querySelector(s.contentElement):typeof s.contentElement=="function"?w=s.contentElement(t):s.contentElement&&(w=s.contentElement),this.findAround(t,w,!0),this.addAll(w,o),this.findAround(t,w,!1)}d&&this.sync(x)&&this.open--}addAll(t,s,o,c){let d=o||0;for(let p=o?t.childNodes[o]:t.firstChild,x=c==null?null:t.childNodes[c];p!=x;p=p.nextSibling,++d)this.findAtPoint(t,d),this.addDOM(p,s);this.findAtPoint(t,d)}findPlace(t,s){let o,c;for(let d=this.open;d>=0;d--){let p=this.nodes[d],x=p.findWrapping(t);if(x&&(!o||o.length>x.length)&&(o=x,c=p,!x.length)||p.solid)break}if(!o)return null;this.sync(c);for(let d=0;d<o.length;d++)s=this.enterInner(o[d],null,s,!1);return s}insertNode(t,s){if(t.isInline&&this.needsBlock&&!this.top.type){let c=this.textblockFromContext();c&&(s=this.enterInner(c,null,s))}let o=this.findPlace(t,s);if(o){this.closeExtra();let c=this.top;c.match&&(c.match=c.match.matchType(t.type));let d=ze.none;for(let p of o.concat(t.marks))(c.type?c.type.allowsMarkType(p.type):_l(p.type,t.type))&&(d=p.addToSet(d));return c.content.push(t.mark(d)),!0}return!1}enter(t,s,o,c){let d=this.findPlace(t.create(s),o);return d&&(d=this.enterInner(t,s,o,!0,c)),d}enterInner(t,s,o,c=!1,d){this.closeExtra();let p=this.top;p.match=p.match&&p.match.matchType(t);let x=Xl(t,d,p.options);p.options&$s&&p.content.length==0&&(x|=$s);let w=ze.none;return o=o.filter(S=>(p.type?p.type.allowsMarkType(S.type):_l(S.type,t))?(w=S.addToSet(w),!1):!0),this.nodes.push(new Mn(t,s,w,c,null,x)),this.open++,o}closeExtra(t=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let s=this.open;s>=0;s--){if(this.nodes[s]==t)return this.open=s,!0;this.localPreserveWS&&(this.nodes[s].options|=Ks)}return!1}get currentPos(){this.closeExtra();let t=0;for(let s=this.open;s>=0;s--){let o=this.nodes[s].content;for(let c=o.length-1;c>=0;c--)t+=o[c].nodeSize;s&&t++}return t}findAtPoint(t,s){if(this.find)for(let o=0;o<this.find.length;o++)this.find[o].node==t&&this.find[o].offset==s&&(this.find[o].pos=this.currentPos)}findInside(t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&t.nodeType==1&&t.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(t,s,o){if(t!=s&&this.find)for(let c=0;c<this.find.length;c++)this.find[c].pos==null&&t.nodeType==1&&t.contains(this.find[c].node)&&s.compareDocumentPosition(this.find[c].node)&(o?2:4)&&(this.find[c].pos=this.currentPos)}findInText(t){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==t&&(this.find[s].pos=this.currentPos-(t.nodeValue.length-this.find[s].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let s=t.split("/"),o=this.options.context,c=!this.isOpen&&(!o||o.parent.type==this.nodes[0].type),d=-(o?o.depth+1:0)+(c?0:1),p=(x,w)=>{for(;x>=0;x--){let S=s[x];if(S==""){if(x==s.length-1||x==0)continue;for(;w>=d;w--)if(p(x-1,w))return!0;return!1}else{let M=w>0||w==0&&c?this.nodes[w].type:o&&w>=d?o.node(w-d).type:null;if(!M||M.name!=S&&!M.isInGroup(S))return!1;w--}}return!0};return p(s.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let s=t.depth;s>=0;s--){let o=t.node(s).contentMatchAt(t.indexAfter(s)).defaultType;if(o&&o.isTextblock&&o.defaultAttrs)return o}for(let s in this.parser.schema.nodes){let o=this.parser.schema.nodes[s];if(o.isTextblock&&o.defaultAttrs)return o}}}function tp(a){for(let t=a.firstChild,s=null;t;t=t.nextSibling){let o=t.nodeType==1?t.nodeName.toLowerCase():null;o&&gh.hasOwnProperty(o)&&s?(s.appendChild(t),t=s):o=="li"?s=t:o&&(s=null)}}function ip(a,t){return(a.matches||a.msMatchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector).call(a,t)}function Wl(a){let t={};for(let s in a)t[s]=a[s];return t}function _l(a,t){let s=t.schema.nodes;for(let o in s){let c=s[o];if(!c.allowsMarkType(a))continue;let d=[],p=x=>{d.push(x);for(let w=0;w<x.edgeCount;w++){let{type:S,next:M}=x.edge(w);if(S==t||d.indexOf(M)<0&&p(M))return!0}};if(p(c.contentMatch))return!0}}class ss{constructor(t,s){this.nodes=t,this.marks=s}serializeFragment(t,s={},o){o||(o=sa(s).createDocumentFragment());let c=o,d=[];return t.forEach(p=>{if(d.length||p.marks.length){let x=0,w=0;for(;x<d.length&&w<p.marks.length;){let S=p.marks[w];if(!this.marks[S.type.name]){w++;continue}if(!S.eq(d[x][0])||S.type.spec.spanning===!1)break;x++,w++}for(;x<d.length;)c=d.pop()[1];for(;w<p.marks.length;){let S=p.marks[w++],M=this.serializeMark(S,p.isInline,s);M&&(d.push([S,c]),c.appendChild(M.dom),c=M.contentDOM||M.dom)}}c.appendChild(this.serializeNodeInner(p,s))}),o}serializeNodeInner(t,s){let{dom:o,contentDOM:c}=Nn(sa(s),this.nodes[t.type.name](t),null,t.attrs);if(c){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,s,c)}return o}serializeNode(t,s={}){let o=this.serializeNodeInner(t,s);for(let c=t.marks.length-1;c>=0;c--){let d=this.serializeMark(t.marks[c],t.isInline,s);d&&((d.contentDOM||d.dom).appendChild(o),o=d.dom)}return o}serializeMark(t,s,o={}){let c=this.marks[t.type.name];return c&&Nn(sa(o),c(t,s),null,t.attrs)}static renderSpec(t,s,o=null,c){return Nn(t,s,o,c)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new ss(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let s=jl(t.nodes);return s.text||(s.text=o=>o.text),s}static marksFromSchema(t){return jl(t.marks)}}function jl(a){let t={};for(let s in a){let o=a[s].spec.toDOM;o&&(t[s]=o)}return t}function sa(a){return a.document||window.document}const Vl=new WeakMap;function sp(a){let t=Vl.get(a);return t===void 0&&Vl.set(a,t=np(a)),t}function np(a){let t=null;function s(o){if(o&&typeof o=="object")if(Array.isArray(o))if(typeof o[0]=="string")t||(t=[]),t.push(o);else for(let c=0;c<o.length;c++)s(o[c]);else for(let c in o)s(o[c])}return s(a),t}function Nn(a,t,s,o){if(typeof t=="string")return{dom:a.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let c=t[0],d;if(typeof c!="string")throw new RangeError("Invalid array passed to renderSpec");if(o&&(d=sp(o))&&d.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let p=c.indexOf(" ");p>0&&(s=c.slice(0,p),c=c.slice(p+1));let x,w=s?a.createElementNS(s,c):a.createElement(c),S=t[1],M=1;if(S&&typeof S=="object"&&S.nodeType==null&&!Array.isArray(S)){M=2;for(let E in S)if(S[E]!=null){let I=E.indexOf(" ");I>0?w.setAttributeNS(E.slice(0,I),E.slice(I+1),S[E]):w.setAttribute(E,S[E])}}for(let E=M;E<t.length;E++){let I=t[E];if(I===0){if(E<t.length-1||E>M)throw new RangeError("Content hole must be the only child of its parent node");return{dom:w,contentDOM:w}}else{let{dom:D,contentDOM:R}=Nn(a,I,s,o);if(w.appendChild(D),R){if(x)throw new RangeError("Multiple content holes");x=R}}}return{dom:w,contentDOM:x}}const mh=65535,xh=Math.pow(2,16);function rp(a,t){return a+t*xh}function Gl(a){return a&mh}function ap(a){return(a-(a&mh))/xh}const bh=1,yh=2,Dn=4,vh=8;class Ea{constructor(t,s,o){this.pos=t,this.delInfo=s,this.recover=o}get deleted(){return(this.delInfo&vh)>0}get deletedBefore(){return(this.delInfo&(bh|Dn))>0}get deletedAfter(){return(this.delInfo&(yh|Dn))>0}get deletedAcross(){return(this.delInfo&Dn)>0}}class Et{constructor(t,s=!1){if(this.ranges=t,this.inverted=s,!t.length&&Et.empty)return Et.empty}recover(t){let s=0,o=Gl(t);if(!this.inverted)for(let c=0;c<o;c++)s+=this.ranges[c*3+2]-this.ranges[c*3+1];return this.ranges[o*3]+s+ap(t)}mapResult(t,s=1){return this._map(t,s,!1)}map(t,s=1){return this._map(t,s,!0)}_map(t,s,o){let c=0,d=this.inverted?2:1,p=this.inverted?1:2;for(let x=0;x<this.ranges.length;x+=3){let w=this.ranges[x]-(this.inverted?c:0);if(w>t)break;let S=this.ranges[x+d],M=this.ranges[x+p],E=w+S;if(t<=E){let I=S?t==w?-1:t==E?1:s:s,D=w+c+(I<0?0:M);if(o)return D;let R=t==(s<0?w:E)?null:rp(x/3,t-w),Y=t==w?yh:t==E?bh:Dn;return(s<0?t!=w:t!=E)&&(Y|=vh),new Ea(D,Y,R)}c+=M-S}return o?t+c:new Ea(t+c,0,null)}touches(t,s){let o=0,c=Gl(s),d=this.inverted?2:1,p=this.inverted?1:2;for(let x=0;x<this.ranges.length;x+=3){let w=this.ranges[x]-(this.inverted?o:0);if(w>t)break;let S=this.ranges[x+d],M=w+S;if(t<=M&&x==c*3)return!0;o+=this.ranges[x+p]-S}return!1}forEach(t){let s=this.inverted?2:1,o=this.inverted?1:2;for(let c=0,d=0;c<this.ranges.length;c+=3){let p=this.ranges[c],x=p-(this.inverted?d:0),w=p+(this.inverted?0:d),S=this.ranges[c+s],M=this.ranges[c+o];t(x,x+S,w,w+M),d+=M-S}}invert(){return new Et(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Et.empty:new Et(t<0?[0,-t,0]:[0,0,t])}}Et.empty=new Et([]);class ys{constructor(t=[],s,o=0,c=t.length){this.maps=t,this.mirror=s,this.from=o,this.to=c}slice(t=0,s=this.maps.length){return new ys(this.maps,this.mirror,t,s)}copy(){return new ys(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,s){this.to=this.maps.push(t),s!=null&&this.setMirror(this.maps.length-1,s)}appendMapping(t){for(let s=0,o=this.maps.length;s<t.maps.length;s++){let c=t.getMirror(s);this.appendMap(t.maps[s],c!=null&&c<s?o+c:void 0)}}getMirror(t){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==t)return this.mirror[s+(s%2?-1:1)]}}setMirror(t,s){this.mirror||(this.mirror=[]),this.mirror.push(t,s)}appendMappingInverted(t){for(let s=t.maps.length-1,o=this.maps.length+t.maps.length;s>=0;s--){let c=t.getMirror(s);this.appendMap(t.maps[s].invert(),c!=null&&c>s?o-c-1:void 0)}}invert(){let t=new ys;return t.appendMappingInverted(this),t}map(t,s=1){if(this.mirror)return this._map(t,s,!0);for(let o=this.from;o<this.to;o++)t=this.maps[o].map(t,s);return t}mapResult(t,s=1){return this._map(t,s,!1)}_map(t,s,o){let c=0;for(let d=this.from;d<this.to;d++){let p=this.maps[d],x=p.mapResult(t,s);if(x.recover!=null){let w=this.getMirror(d);if(w!=null&&w>d&&w<this.to){d=w,t=this.maps[w].recover(x.recover);continue}}c|=x.delInfo,t=x.pos}return o?t:new Ea(t,c,null)}}const na=Object.create(null);class dt{getMap(){return Et.empty}merge(t){return null}static fromJSON(t,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let o=na[s.stepType];if(!o)throw new RangeError(`No step type ${s.stepType} defined`);return o.fromJSON(t,s)}static jsonID(t,s){if(t in na)throw new RangeError("Duplicate use of step JSON ID "+t);return na[t]=s,s.prototype.jsonID=t,s}}class $e{constructor(t,s){this.doc=t,this.failed=s}static ok(t){return new $e(t,null)}static fail(t){return new $e(null,t)}static fromReplace(t,s,o,c){try{return $e.ok(t.replace(s,o,c))}catch(d){if(d instanceof Bn)return $e.fail(d.message);throw d}}}function qa(a,t,s){let o=[];for(let c=0;c<a.childCount;c++){let d=a.child(c);d.content.size&&(d=d.copy(qa(d.content,t,d))),d.isInline&&(d=t(d,s,c)),o.push(d)}return ie.fromArray(o)}class vi extends dt{constructor(t,s,o){super(),this.from=t,this.to=s,this.mark=o}apply(t){let s=t.slice(this.from,this.to),o=t.resolve(this.from),c=o.node(o.sharedDepth(this.to)),d=new oe(qa(s.content,(p,x)=>!p.isAtom||!x.type.allowsMarkType(this.mark.type)?p:p.mark(this.mark.addToSet(p.marks)),c),s.openStart,s.openEnd);return $e.fromReplace(t,this.from,this.to,d)}invert(){return new Jt(this.from,this.to,this.mark)}map(t){let s=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return s.deleted&&o.deleted||s.pos>=o.pos?null:new vi(s.pos,o.pos,this.mark)}merge(t){return t instanceof vi&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new vi(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vi(s.from,s.to,t.markFromJSON(s.mark))}}dt.jsonID("addMark",vi);class Jt extends dt{constructor(t,s,o){super(),this.from=t,this.to=s,this.mark=o}apply(t){let s=t.slice(this.from,this.to),o=new oe(qa(s.content,c=>c.mark(this.mark.removeFromSet(c.marks)),t),s.openStart,s.openEnd);return $e.fromReplace(t,this.from,this.to,o)}invert(){return new vi(this.from,this.to,this.mark)}map(t){let s=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return s.deleted&&o.deleted||s.pos>=o.pos?null:new Jt(s.pos,o.pos,this.mark)}merge(t){return t instanceof Jt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Jt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Jt(s.from,s.to,t.markFromJSON(s.mark))}}dt.jsonID("removeMark",Jt);class wi extends dt{constructor(t,s){super(),this.pos=t,this.mark=s}apply(t){let s=t.nodeAt(this.pos);if(!s)return $e.fail("No node at mark step's position");let o=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return $e.fromReplace(t,this.pos,this.pos+1,new oe(ie.from(o),0,s.isLeaf?0:1))}invert(t){let s=t.nodeAt(this.pos);if(s){let o=this.mark.addToSet(s.marks);if(o.length==s.marks.length){for(let c=0;c<s.marks.length;c++)if(!s.marks[c].isInSet(o))return new wi(this.pos,s.marks[c]);return new wi(this.pos,this.mark)}}return new Ss(this.pos,this.mark)}map(t){let s=t.mapResult(this.pos,1);return s.deletedAfter?null:new wi(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new wi(s.pos,t.markFromJSON(s.mark))}}dt.jsonID("addNodeMark",wi);class Ss extends dt{constructor(t,s){super(),this.pos=t,this.mark=s}apply(t){let s=t.nodeAt(this.pos);if(!s)return $e.fail("No node at mark step's position");let o=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return $e.fromReplace(t,this.pos,this.pos+1,new oe(ie.from(o),0,s.isLeaf?0:1))}invert(t){let s=t.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new wi(this.pos,this.mark)}map(t){let s=t.mapResult(this.pos,1);return s.deletedAfter?null:new Ss(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ss(s.pos,t.markFromJSON(s.mark))}}dt.jsonID("removeNodeMark",Ss);class Je extends dt{constructor(t,s,o,c=!1){super(),this.from=t,this.to=s,this.slice=o,this.structure=c}apply(t){return this.structure&&Ia(t,this.from,this.to)?$e.fail("Structure replace would overwrite content"):$e.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Et([this.from,this.to-this.from,this.slice.size])}invert(t){return new Je(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let s=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return s.deletedAcross&&o.deletedAcross?null:new Je(s.pos,Math.max(s.pos,o.pos),this.slice)}merge(t){if(!(t instanceof Je)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let s=this.slice.size+t.slice.size==0?oe.empty:new oe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Je(this.from,this.to+(t.to-t.from),s,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let s=this.slice.size+t.slice.size==0?oe.empty:new oe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Je(t.from,this.to,s,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Je(s.from,s.to,oe.fromJSON(t,s.slice),!!s.structure)}}dt.jsonID("replace",Je);class Ze extends dt{constructor(t,s,o,c,d,p,x=!1){super(),this.from=t,this.to=s,this.gapFrom=o,this.gapTo=c,this.slice=d,this.insert=p,this.structure=x}apply(t){if(this.structure&&(Ia(t,this.from,this.gapFrom)||Ia(t,this.gapTo,this.to)))return $e.fail("Structure gap-replace would overwrite content");let s=t.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return $e.fail("Gap is not a flat range");let o=this.slice.insertAt(this.insert,s.content);return o?$e.fromReplace(t,this.from,this.to,o):$e.fail("Content does not fit in gap")}getMap(){return new Et([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let s=this.gapTo-this.gapFrom;return new Ze(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let s=t.mapResult(this.from,1),o=t.mapResult(this.to,-1),c=this.from==this.gapFrom?s.pos:t.map(this.gapFrom,-1),d=this.to==this.gapTo?o.pos:t.map(this.gapTo,1);return s.deletedAcross&&o.deletedAcross||c<s.pos||d>o.pos?null:new Ze(s.pos,o.pos,c,d,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ze(s.from,s.to,s.gapFrom,s.gapTo,oe.fromJSON(t,s.slice),s.insert,!!s.structure)}}dt.jsonID("replaceAround",Ze);function Ia(a,t,s){let o=a.resolve(t),c=s-t,d=o.depth;for(;c>0&&d>0&&o.indexAfter(d)==o.node(d).childCount;)d--,c--;if(c>0){let p=o.node(d).maybeChild(o.indexAfter(d));for(;c>0;){if(!p||p.isLeaf)return!0;p=p.firstChild,c--}}return!1}function op(a,t,s,o){let c=[],d=[],p,x;a.doc.nodesBetween(t,s,(w,S,M)=>{if(!w.isInline)return;let E=w.marks;if(!o.isInSet(E)&&M.type.allowsMarkType(o.type)){let I=Math.max(S,t),D=Math.min(S+w.nodeSize,s),R=o.addToSet(E);for(let Y=0;Y<E.length;Y++)E[Y].isInSet(R)||(p&&p.to==I&&p.mark.eq(E[Y])?p.to=D:c.push(p=new Jt(I,D,E[Y])));x&&x.to==I?x.to=D:d.push(x=new vi(I,D,o))}}),c.forEach(w=>a.step(w)),d.forEach(w=>a.step(w))}function lp(a,t,s,o){let c=[],d=0;a.doc.nodesBetween(t,s,(p,x)=>{if(!p.isInline)return;d++;let w=null;if(o instanceof Zn){let S=p.marks,M;for(;M=o.isInSet(S);)(w||(w=[])).push(M),S=M.removeFromSet(S)}else o?o.isInSet(p.marks)&&(w=[o]):w=p.marks;if(w&&w.length){let S=Math.min(x+p.nodeSize,s);for(let M=0;M<w.length;M++){let E=w[M],I;for(let D=0;D<c.length;D++){let R=c[D];R.step==d-1&&E.eq(c[D].style)&&(I=R)}I?(I.to=S,I.step=d):c.push({style:E,from:Math.max(x,t),to:S,step:d})}}}),c.forEach(p=>a.step(new Jt(p.from,p.to,p.style)))}function $a(a,t,s,o=s.contentMatch,c=!0){let d=a.doc.nodeAt(t),p=[],x=t+1;for(let w=0;w<d.childCount;w++){let S=d.child(w),M=x+S.nodeSize,E=o.matchType(S.type);if(!E)p.push(new Je(x,M,oe.empty));else{o=E;for(let I=0;I<S.marks.length;I++)s.allowsMarkType(S.marks[I].type)||a.step(new Jt(x,M,S.marks[I]));if(c&&S.isText&&s.whitespace!="pre"){let I,D=/\r?\n|\r/g,R;for(;I=D.exec(S.text);)R||(R=new oe(ie.from(s.schema.text(" ",s.allowedMarks(S.marks))),0,0)),p.push(new Je(x+I.index,x+I.index+I[0].length,R))}}x=M}if(!o.validEnd){let w=o.fillBefore(ie.empty,!0);a.replace(x,x,new oe(w,0,0))}for(let w=p.length-1;w>=0;w--)a.step(p[w])}function cp(a,t,s){return(t==0||a.canReplace(t,a.childCount))&&(s==a.childCount||a.canReplace(0,s))}function Es(a){let s=a.parent.content.cutByIndex(a.startIndex,a.endIndex);for(let o=a.depth;;--o){let c=a.$from.node(o),d=a.$from.index(o),p=a.$to.indexAfter(o);if(o<a.depth&&c.canReplace(d,p,s))return o;if(o==0||c.type.spec.isolating||!cp(c,d,p))break}return null}function hp(a,t,s){let{$from:o,$to:c,depth:d}=t,p=o.before(d+1),x=c.after(d+1),w=p,S=x,M=ie.empty,E=0;for(let R=d,Y=!1;R>s;R--)Y||o.index(R)>0?(Y=!0,M=ie.from(o.node(R).copy(M)),E++):w--;let I=ie.empty,D=0;for(let R=d,Y=!1;R>s;R--)Y||c.after(R+1)<c.end(R)?(Y=!0,I=ie.from(c.node(R).copy(I)),D++):S++;a.step(new Ze(w,S,p,x,new oe(M.append(I),E,D),M.size-E,!0))}function Ua(a,t,s=null,o=a){let c=dp(a,t),d=c&&up(o,t);return d?c.map(ql).concat({type:t,attrs:s}).concat(d.map(ql)):null}function ql(a){return{type:a,attrs:null}}function dp(a,t){let{parent:s,startIndex:o,endIndex:c}=a,d=s.contentMatchAt(o).findWrapping(t);if(!d)return null;let p=d.length?d[0]:t;return s.canReplaceWith(o,c,p)?d:null}function up(a,t){let{parent:s,startIndex:o,endIndex:c}=a,d=s.child(o),p=t.contentMatch.findWrapping(d.type);if(!p)return null;let w=(p.length?p[p.length-1]:t).contentMatch;for(let S=o;w&&S<c;S++)w=w.matchType(s.child(S).type);return!w||!w.validEnd?null:p}function fp(a,t,s){let o=ie.empty;for(let p=s.length-1;p>=0;p--){if(o.size){let x=s[p].type.contentMatch.matchFragment(o);if(!x||!x.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=ie.from(s[p].type.create(s[p].attrs,o))}let c=t.start,d=t.end;a.step(new Ze(c,d,c,d,new oe(o,0,0),s.length,!0))}function pp(a,t,s,o,c){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let d=a.steps.length;a.doc.nodesBetween(t,s,(p,x)=>{let w=typeof c=="function"?c(p):c;if(p.isTextblock&&!p.hasMarkup(o,w)&&gp(a.doc,a.mapping.slice(d).map(x),o)){let S=null;if(o.schema.linebreakReplacement){let D=o.whitespace=="pre",R=!!o.contentMatch.matchType(o.schema.linebreakReplacement);D&&!R?S=!1:!D&&R&&(S=!0)}S===!1&&kh(a,p,x,d),$a(a,a.mapping.slice(d).map(x,1),o,void 0,S===null);let M=a.mapping.slice(d),E=M.map(x,1),I=M.map(x+p.nodeSize,1);return a.step(new Ze(E,I,E+1,I-1,new oe(ie.from(o.create(w,null,p.marks)),0,0),1,!0)),S===!0&&wh(a,p,x,d),!1}})}function wh(a,t,s,o){t.forEach((c,d)=>{if(c.isText){let p,x=/\r?\n|\r/g;for(;p=x.exec(c.text);){let w=a.mapping.slice(o).map(s+1+d+p.index);a.replaceWith(w,w+1,t.type.schema.linebreakReplacement.create())}}})}function kh(a,t,s,o){t.forEach((c,d)=>{if(c.type==c.type.schema.linebreakReplacement){let p=a.mapping.slice(o).map(s+1+d);a.replaceWith(p,p+1,t.type.schema.text(`
`))}})}function gp(a,t,s){let o=a.resolve(t),c=o.index();return o.parent.canReplaceWith(c,c+1,s)}function mp(a,t,s,o,c){let d=a.doc.nodeAt(t);if(!d)throw new RangeError("No node at given position");s||(s=d.type);let p=s.create(o,null,c||d.marks);if(d.isLeaf)return a.replaceWith(t,t+d.nodeSize,p);if(!s.validContent(d.content))throw new RangeError("Invalid content for node type "+s.name);a.step(new Ze(t,t+d.nodeSize,t+1,t+d.nodeSize-1,new oe(ie.from(p),0,0),1,!0))}function vs(a,t,s=1,o){let c=a.resolve(t),d=c.depth-s,p=o&&o[o.length-1]||c.parent;if(d<0||c.parent.type.spec.isolating||!c.parent.canReplace(c.index(),c.parent.childCount)||!p.type.validContent(c.parent.content.cutByIndex(c.index(),c.parent.childCount)))return!1;for(let S=c.depth-1,M=s-2;S>d;S--,M--){let E=c.node(S),I=c.index(S);if(E.type.spec.isolating)return!1;let D=E.content.cutByIndex(I,E.childCount),R=o&&o[M+1];R&&(D=D.replaceChild(0,R.type.create(R.attrs)));let Y=o&&o[M]||E;if(!E.canReplace(I+1,E.childCount)||!Y.type.validContent(D))return!1}let x=c.indexAfter(d),w=o&&o[0];return c.node(d).canReplaceWith(x,x,w?w.type:c.node(d+1).type)}function xp(a,t,s=1,o){let c=a.doc.resolve(t),d=ie.empty,p=ie.empty;for(let x=c.depth,w=c.depth-s,S=s-1;x>w;x--,S--){d=ie.from(c.node(x).copy(d));let M=o&&o[S];p=ie.from(M?M.type.create(M.attrs,p):c.node(x).copy(p))}a.step(new Je(t,t,new oe(d.append(p),s,s),!0))}function Li(a,t){let s=a.resolve(t),o=s.index();return Sh(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(o,o+1)}function bp(a,t){t.content.size||a.type.compatibleContent(t.type);let s=a.contentMatchAt(a.childCount),{linebreakReplacement:o}=a.type.schema;for(let c=0;c<t.childCount;c++){let d=t.child(c),p=d.type==o?a.type.schema.nodes.text:d.type;if(s=s.matchType(p),!s||!a.type.allowsMarks(d.marks))return!1}return s.validEnd}function Sh(a,t){return!!(a&&t&&!a.isLeaf&&bp(a,t))}function Kn(a,t,s=-1){let o=a.resolve(t);for(let c=o.depth;;c--){let d,p,x=o.index(c);if(c==o.depth?(d=o.nodeBefore,p=o.nodeAfter):s>0?(d=o.node(c+1),x++,p=o.node(c).maybeChild(x)):(d=o.node(c).maybeChild(x-1),p=o.node(c+1)),d&&!d.isTextblock&&Sh(d,p)&&o.node(c).canReplace(x,x+1))return t;if(c==0)break;t=s<0?o.before(c):o.after(c)}}function yp(a,t,s){let o=null,{linebreakReplacement:c}=a.doc.type.schema,d=a.doc.resolve(t-s),p=d.node().type;if(c&&p.inlineContent){let M=p.whitespace=="pre",E=!!p.contentMatch.matchType(c);M&&!E?o=!1:!M&&E&&(o=!0)}let x=a.steps.length;if(o===!1){let M=a.doc.resolve(t+s);kh(a,M.node(),M.before(),x)}p.inlineContent&&$a(a,t+s-1,p,d.node().contentMatchAt(d.index()),o==null);let w=a.mapping.slice(x),S=w.map(t-s);if(a.step(new Je(S,w.map(t+s,-1),oe.empty,!0)),o===!0){let M=a.doc.resolve(S);wh(a,M.node(),M.before(),a.steps.length)}return a}function vp(a,t,s){let o=a.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),s))return t;if(o.parentOffset==0)for(let c=o.depth-1;c>=0;c--){let d=o.index(c);if(o.node(c).canReplaceWith(d,d,s))return o.before(c+1);if(d>0)return null}if(o.parentOffset==o.parent.content.size)for(let c=o.depth-1;c>=0;c--){let d=o.indexAfter(c);if(o.node(c).canReplaceWith(d,d,s))return o.after(c+1);if(d<o.node(c).childCount)return null}return null}function Ch(a,t,s){let o=a.resolve(t);if(!s.content.size)return t;let c=s.content;for(let d=0;d<s.openStart;d++)c=c.firstChild.content;for(let d=1;d<=(s.openStart==0&&s.size?2:1);d++)for(let p=o.depth;p>=0;p--){let x=p==o.depth?0:o.pos<=(o.start(p+1)+o.end(p+1))/2?-1:1,w=o.index(p)+(x>0?1:0),S=o.node(p),M=!1;if(d==1)M=S.canReplace(w,w,c);else{let E=S.contentMatchAt(w).findWrapping(c.firstChild.type);M=E&&S.canReplaceWith(w,w,E[0])}if(M)return x==0?o.pos:x<0?o.before(p+1):o.after(p+1)}return null}function Qn(a,t,s=t,o=oe.empty){if(t==s&&!o.size)return null;let c=a.resolve(t),d=a.resolve(s);return Ah(c,d,o)?new Je(t,s,o):new wp(c,d,o).fit()}function Ah(a,t,s){return!s.openStart&&!s.openEnd&&a.start()==t.start()&&a.parent.canReplace(a.index(),t.index(),s.content)}class wp{constructor(t,s,o){this.$from=t,this.$to=s,this.unplaced=o,this.frontier=[],this.placed=ie.empty;for(let c=0;c<=t.depth;c++){let d=t.node(c);this.frontier.push({type:d.type,match:d.contentMatchAt(t.indexAfter(c))})}for(let c=t.depth;c>0;c--)this.placed=ie.from(t.node(c).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let S=this.findFittable();S?this.placeNodes(S):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,o=this.$from,c=this.close(t<0?this.$to:o.doc.resolve(t));if(!c)return null;let d=this.placed,p=o.depth,x=c.depth;for(;p&&x&&d.childCount==1;)d=d.firstChild.content,p--,x--;let w=new oe(d,p,x);return t>-1?new Ze(o.pos,t,this.$to.pos,this.$to.end(),w,s):w.size||o.pos!=this.$to.pos?new Je(o.pos,c.pos,w):null}findFittable(){let t=this.unplaced.openStart;for(let s=this.unplaced.content,o=0,c=this.unplaced.openEnd;o<t;o++){let d=s.firstChild;if(s.childCount>1&&(c=0),d.type.spec.isolating&&c<=o){t=o;break}s=d.content}for(let s=1;s<=2;s++)for(let o=s==1?t:this.unplaced.openStart;o>=0;o--){let c,d=null;o?(d=ra(this.unplaced.content,o-1).firstChild,c=d.content):c=this.unplaced.content;let p=c.firstChild;for(let x=this.depth;x>=0;x--){let{type:w,match:S}=this.frontier[x],M,E=null;if(s==1&&(p?S.matchType(p.type)||(E=S.fillBefore(ie.from(p),!1)):d&&w.compatibleContent(d.type)))return{sliceDepth:o,frontierDepth:x,parent:d,inject:E};if(s==2&&p&&(M=S.findWrapping(p.type)))return{sliceDepth:o,frontierDepth:x,parent:d,wrap:M};if(d&&S.matchType(d.type))break}}}openMore(){let{content:t,openStart:s,openEnd:o}=this.unplaced,c=ra(t,s);return!c.childCount||c.firstChild.isLeaf?!1:(this.unplaced=new oe(t,s+1,Math.max(o,c.size+s>=t.size-o?s+1:0)),!0)}dropNode(){let{content:t,openStart:s,openEnd:o}=this.unplaced,c=ra(t,s);if(c.childCount<=1&&s>0){let d=t.size-s<=s+c.size;this.unplaced=new oe(_s(t,s-1,1),s-1,d?s-1:o)}else this.unplaced=new oe(_s(t,s,1),s,o)}placeNodes({sliceDepth:t,frontierDepth:s,parent:o,inject:c,wrap:d}){for(;this.depth>s;)this.closeFrontierNode();if(d)for(let Y=0;Y<d.length;Y++)this.openFrontierNode(d[Y]);let p=this.unplaced,x=o?o.content:p.content,w=p.openStart-t,S=0,M=[],{match:E,type:I}=this.frontier[s];if(c){for(let Y=0;Y<c.childCount;Y++)M.push(c.child(Y));E=E.matchFragment(c)}let D=x.size+t-(p.content.size-p.openEnd);for(;S<x.childCount;){let Y=x.child(S),_=E.matchType(Y.type);if(!_)break;S++,(S>1||w==0||Y.content.size)&&(E=_,M.push(Mh(Y.mark(I.allowedMarks(Y.marks)),S==1?w:0,S==x.childCount?D:-1)))}let R=S==x.childCount;R||(D=-1),this.placed=js(this.placed,s,ie.from(M)),this.frontier[s].match=E,R&&D<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let Y=0,_=x;Y<D;Y++){let $=_.lastChild;this.frontier.push({type:$.type,match:$.contentMatchAt($.childCount)}),_=$.content}this.unplaced=R?t==0?oe.empty:new oe(_s(p.content,t-1,1),t-1,D<0?p.openEnd:t-1):new oe(_s(p.content,t,S),p.openStart,p.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],s;if(!t.type.isTextblock||!aa(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:o}=this.$to,c=this.$to.after(o);for(;o>1&&c==this.$to.end(--o);)++c;return c}findCloseLevel(t){e:for(let s=Math.min(this.depth,t.depth);s>=0;s--){let{match:o,type:c}=this.frontier[s],d=s<t.depth&&t.end(s+1)==t.pos+(t.depth-(s+1)),p=aa(t,s,c,o,d);if(p){for(let x=s-1;x>=0;x--){let{match:w,type:S}=this.frontier[x],M=aa(t,x,S,w,!0);if(!M||M.childCount)continue e}return{depth:s,fit:p,move:d?t.doc.resolve(t.after(s+1)):t}}}}close(t){let s=this.findCloseLevel(t);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=js(this.placed,s.depth,s.fit)),t=s.move;for(let o=s.depth+1;o<=t.depth;o++){let c=t.node(o),d=c.type.contentMatch.fillBefore(c.content,!0,t.index(o));this.openFrontierNode(c.type,c.attrs,d)}return t}openFrontierNode(t,s=null,o){let c=this.frontier[this.depth];c.match=c.match.matchType(t),this.placed=js(this.placed,this.depth,ie.from(t.create(s,o))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(ie.empty,!0);s.childCount&&(this.placed=js(this.placed,this.frontier.length,s))}}function _s(a,t,s){return t==0?a.cutByIndex(s,a.childCount):a.replaceChild(0,a.firstChild.copy(_s(a.firstChild.content,t-1,s)))}function js(a,t,s){return t==0?a.append(s):a.replaceChild(a.childCount-1,a.lastChild.copy(js(a.lastChild.content,t-1,s)))}function ra(a,t){for(let s=0;s<t;s++)a=a.firstChild.content;return a}function Mh(a,t,s){if(t<=0)return a;let o=a.content;return t>1&&(o=o.replaceChild(0,Mh(o.firstChild,t-1,o.childCount==1?s-1:0))),t>0&&(o=a.type.contentMatch.fillBefore(o).append(o),s<=0&&(o=o.append(a.type.contentMatch.matchFragment(o).fillBefore(ie.empty,!0)))),a.copy(o)}function aa(a,t,s,o,c){let d=a.node(t),p=c?a.indexAfter(t):a.index(t);if(p==d.childCount&&!s.compatibleContent(d.type))return null;let x=o.fillBefore(d.content,!0,p);return x&&!kp(s,d.content,p)?x:null}function kp(a,t,s){for(let o=s;o<t.childCount;o++)if(!a.allowsMarks(t.child(o).marks))return!0;return!1}function Sp(a){return a.spec.defining||a.spec.definingForContent}function Cp(a,t,s,o){if(!o.size)return a.deleteRange(t,s);let c=a.doc.resolve(t),d=a.doc.resolve(s);if(Ah(c,d,o))return a.step(new Je(t,s,o));let p=Oh(c,a.doc.resolve(s));p[p.length-1]==0&&p.pop();let x=-(c.depth+1);p.unshift(x);for(let I=c.depth,D=c.pos-1;I>0;I--,D--){let R=c.node(I).type.spec;if(R.defining||R.definingAsContext||R.isolating)break;p.indexOf(I)>-1?x=I:c.before(I)==D&&p.splice(1,0,-I)}let w=p.indexOf(x),S=[],M=o.openStart;for(let I=o.content,D=0;;D++){let R=I.firstChild;if(S.push(R),D==o.openStart)break;I=R.content}for(let I=M-1;I>=0;I--){let D=S[I],R=Sp(D.type);if(R&&!D.sameMarkup(c.node(Math.abs(x)-1)))M=I;else if(R||!D.type.isTextblock)break}for(let I=o.openStart;I>=0;I--){let D=(I+M+1)%(o.openStart+1),R=S[D];if(R)for(let Y=0;Y<p.length;Y++){let _=p[(Y+w)%p.length],$=!0;_<0&&($=!1,_=-_);let ne=c.node(_-1),X=c.index(_-1);if(ne.canReplaceWith(X,X,R.type,R.marks))return a.replace(c.before(_),$?d.after(_):s,new oe(Th(o.content,0,o.openStart,D),D,o.openEnd))}}let E=a.steps.length;for(let I=p.length-1;I>=0&&(a.replace(t,s,o),!(a.steps.length>E));I--){let D=p[I];D<0||(t=c.before(D),s=d.after(D))}}function Th(a,t,s,o,c){if(t<s){let d=a.firstChild;a=a.replaceChild(0,d.copy(Th(d.content,t+1,s,o,d)))}if(t>o){let d=c.contentMatchAt(0),p=d.fillBefore(a).append(a);a=p.append(d.matchFragment(p).fillBefore(ie.empty,!0))}return a}function Ap(a,t,s,o){if(!o.isInline&&t==s&&a.doc.resolve(t).parent.content.size){let c=vp(a.doc,t,o.type);c!=null&&(t=s=c)}a.replaceRange(t,s,new oe(ie.from(o),0,0))}function Mp(a,t,s){let o=a.doc.resolve(t),c=a.doc.resolve(s),d=Oh(o,c);for(let p=0;p<d.length;p++){let x=d[p],w=p==d.length-1;if(w&&x==0||o.node(x).type.contentMatch.validEnd)return a.delete(o.start(x),c.end(x));if(x>0&&(w||o.node(x-1).canReplace(o.index(x-1),c.indexAfter(x-1))))return a.delete(o.before(x),c.after(x))}for(let p=1;p<=o.depth&&p<=c.depth;p++)if(t-o.start(p)==o.depth-p&&s>o.end(p)&&c.end(p)-s!=c.depth-p&&o.start(p-1)==c.start(p-1)&&o.node(p-1).canReplace(o.index(p-1),c.index(p-1)))return a.delete(o.before(p),s);a.delete(t,s)}function Oh(a,t){let s=[],o=Math.min(a.depth,t.depth);for(let c=o;c>=0;c--){let d=a.start(c);if(d<a.pos-(a.depth-c)||t.end(c)>t.pos+(t.depth-c)||a.node(c).type.spec.isolating||t.node(c).type.spec.isolating)break;(d==t.start(c)||c==a.depth&&c==t.depth&&a.parent.inlineContent&&t.parent.inlineContent&&c&&t.start(c-1)==d-1)&&s.push(c)}return s}class ws extends dt{constructor(t,s,o){super(),this.pos=t,this.attr=s,this.value=o}apply(t){let s=t.nodeAt(this.pos);if(!s)return $e.fail("No node at attribute step's position");let o=Object.create(null);for(let d in s.attrs)o[d]=s.attrs[d];o[this.attr]=this.value;let c=s.type.create(o,null,s.marks);return $e.fromReplace(t,this.pos,this.pos+1,new oe(ie.from(c),0,s.isLeaf?0:1))}getMap(){return Et.empty}invert(t){return new ws(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let s=t.mapResult(this.pos,1);return s.deletedAfter?null:new ws(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ws(s.pos,s.attr,s.value)}}dt.jsonID("attr",ws);class Qs extends dt{constructor(t,s){super(),this.attr=t,this.value=s}apply(t){let s=Object.create(null);for(let c in t.attrs)s[c]=t.attrs[c];s[this.attr]=this.value;let o=t.type.create(s,t.content,t.marks);return $e.ok(o)}getMap(){return Et.empty}invert(t){return new Qs(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Qs(s.attr,s.value)}}dt.jsonID("docAttr",Qs);let Cs=class extends Error{};Cs=function a(t){let s=Error.call(this,t);return s.__proto__=a.prototype,s};Cs.prototype=Object.create(Error.prototype);Cs.prototype.constructor=Cs;Cs.prototype.name="TransformError";class Tp{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new ys}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let s=this.maybeStep(t);if(s.failed)throw new Cs(s.failed);return this}maybeStep(t){let s=t.apply(this.doc);return s.failed||this.addStep(t,s.doc),s}get docChanged(){return this.steps.length>0}addStep(t,s){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=s}replace(t,s=t,o=oe.empty){let c=Qn(this.doc,t,s,o);return c&&this.step(c),this}replaceWith(t,s,o){return this.replace(t,s,new oe(ie.from(o),0,0))}delete(t,s){return this.replace(t,s,oe.empty)}insert(t,s){return this.replaceWith(t,t,s)}replaceRange(t,s,o){return Cp(this,t,s,o),this}replaceRangeWith(t,s,o){return Ap(this,t,s,o),this}deleteRange(t,s){return Mp(this,t,s),this}lift(t,s){return hp(this,t,s),this}join(t,s=1){return yp(this,t,s),this}wrap(t,s){return fp(this,t,s),this}setBlockType(t,s=t,o,c=null){return pp(this,t,s,o,c),this}setNodeMarkup(t,s,o=null,c){return mp(this,t,s,o,c),this}setNodeAttribute(t,s,o){return this.step(new ws(t,s,o)),this}setDocAttribute(t,s){return this.step(new Qs(t,s)),this}addNodeMark(t,s){return this.step(new wi(t,s)),this}removeNodeMark(t,s){if(!(s instanceof ze)){let o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at position "+t);if(s=s.isInSet(o.marks),!s)return this}return this.step(new Ss(t,s)),this}split(t,s=1,o){return xp(this,t,s,o),this}addMark(t,s,o){return op(this,t,s,o),this}removeMark(t,s,o){return lp(this,t,s,o),this}clearIncompatible(t,s,o){return $a(this,t,s,o),this}}const oa=Object.create(null);class ke{constructor(t,s,o){this.$anchor=t,this.$head=s,this.ranges=o||[new Op(t.min(s),t.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let s=0;s<t.length;s++)if(t[s].$from.pos!=t[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,s=oe.empty){let o=s.content.lastChild,c=null;for(let x=0;x<s.openEnd;x++)c=o,o=o.lastChild;let d=t.steps.length,p=this.ranges;for(let x=0;x<p.length;x++){let{$from:w,$to:S}=p[x],M=t.mapping.slice(d);t.replaceRange(M.map(w.pos),M.map(S.pos),x?oe.empty:s),x==0&&Jl(t,d,(o?o.isInline:c&&c.isTextblock)?-1:1)}}replaceWith(t,s){let o=t.steps.length,c=this.ranges;for(let d=0;d<c.length;d++){let{$from:p,$to:x}=c[d],w=t.mapping.slice(o),S=w.map(p.pos),M=w.map(x.pos);d?t.deleteRange(S,M):(t.replaceRangeWith(S,M,s),Jl(t,o,s.isInline?-1:1))}}static findFrom(t,s,o=!1){let c=t.parent.inlineContent?new we(t):gs(t.node(0),t.parent,t.pos,t.index(),s,o);if(c)return c;for(let d=t.depth-1;d>=0;d--){let p=s<0?gs(t.node(0),t.node(d),t.before(d+1),t.index(d),s,o):gs(t.node(0),t.node(d),t.after(d+1),t.index(d)+1,s,o);if(p)return p}return null}static near(t,s=1){return this.findFrom(t,s)||this.findFrom(t,-s)||new Vt(t.node(0))}static atStart(t){return gs(t,t,0,0,1)||new Vt(t)}static atEnd(t){return gs(t,t,t.content.size,t.childCount,-1)||new Vt(t)}static fromJSON(t,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let o=oa[s.type];if(!o)throw new RangeError(`No selection type ${s.type} defined`);return o.fromJSON(t,s)}static jsonID(t,s){if(t in oa)throw new RangeError("Duplicate use of selection JSON ID "+t);return oa[t]=s,s.prototype.jsonID=t,s}getBookmark(){return we.between(this.$anchor,this.$head).getBookmark()}}ke.prototype.visible=!0;class Op{constructor(t,s){this.$from=t,this.$to=s}}let $l=!1;function Ul(a){!$l&&!a.parent.inlineContent&&($l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+a.parent.type.name+")"))}class we extends ke{constructor(t,s=t){Ul(t),Ul(s),super(t,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,s){let o=t.resolve(s.map(this.head));if(!o.parent.inlineContent)return ke.near(o);let c=t.resolve(s.map(this.anchor));return new we(c.parent.inlineContent?c:o,o)}replace(t,s=oe.empty){if(super.replace(t,s),s==oe.empty){let o=this.$from.marksAcross(this.$to);o&&t.ensureMarks(o)}}eq(t){return t instanceof we&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new er(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new we(t.resolve(s.anchor),t.resolve(s.head))}static create(t,s,o=s){let c=t.resolve(s);return new this(c,o==s?c:t.resolve(o))}static between(t,s,o){let c=t.pos-s.pos;if((!o||c)&&(o=c>=0?1:-1),!s.parent.inlineContent){let d=ke.findFrom(s,o,!0)||ke.findFrom(s,-o,!0);if(d)s=d.$head;else return ke.near(s,o)}return t.parent.inlineContent||(c==0?t=s:(t=(ke.findFrom(t,-o,!0)||ke.findFrom(t,o,!0)).$anchor,t.pos<s.pos!=c<0&&(t=s))),new we(t,s)}}ke.jsonID("text",we);class er{constructor(t,s){this.anchor=t,this.head=s}map(t){return new er(t.map(this.anchor),t.map(this.head))}resolve(t){return we.between(t.resolve(this.anchor),t.resolve(this.head))}}class ge extends ke{constructor(t){let s=t.nodeAfter,o=t.node(0).resolve(t.pos+s.nodeSize);super(t,o),this.node=s}map(t,s){let{deleted:o,pos:c}=s.mapResult(this.anchor),d=t.resolve(c);return o?ke.near(d):new ge(d)}content(){return new oe(ie.from(this.node),0,0)}eq(t){return t instanceof ge&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ja(this.anchor)}static fromJSON(t,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ge(t.resolve(s.anchor))}static create(t,s){return new ge(t.resolve(s))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}ge.prototype.visible=!1;ke.jsonID("node",ge);class Ja{constructor(t){this.anchor=t}map(t){let{deleted:s,pos:o}=t.mapResult(this.anchor);return s?new er(o,o):new Ja(o)}resolve(t){let s=t.resolve(this.anchor),o=s.nodeAfter;return o&&ge.isSelectable(o)?new ge(s):ke.near(s)}}class Vt extends ke{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,s=oe.empty){if(s==oe.empty){t.delete(0,t.doc.content.size);let o=ke.atStart(t.doc);o.eq(t.selection)||t.setSelection(o)}else super.replace(t,s)}toJSON(){return{type:"all"}}static fromJSON(t){return new Vt(t)}map(t){return new Vt(t)}eq(t){return t instanceof Vt}getBookmark(){return Ep}}ke.jsonID("all",Vt);const Ep={map(){return this},resolve(a){return new Vt(a)}};function gs(a,t,s,o,c,d=!1){if(t.inlineContent)return we.create(a,s);for(let p=o-(c>0?0:1);c>0?p<t.childCount:p>=0;p+=c){let x=t.child(p);if(x.isAtom){if(!d&&ge.isSelectable(x))return ge.create(a,s-(c<0?x.nodeSize:0))}else{let w=gs(a,x,s+c,c<0?x.childCount:0,c,d);if(w)return w}s+=x.nodeSize*c}return null}function Jl(a,t,s){let o=a.steps.length-1;if(o<t)return;let c=a.steps[o];if(!(c instanceof Je||c instanceof Ze))return;let d=a.mapping.maps[o],p;d.forEach((x,w,S,M)=>{p==null&&(p=M)}),a.setSelection(ke.near(a.doc.resolve(p),s))}const Zl=1,Tn=2,Kl=4;class Ip extends Tp{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Zl)&~Tn,this.storedMarks=null,this}get selectionSet(){return(this.updated&Zl)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Tn,this}ensureMarks(t){return ze.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Tn)>0}addStep(t,s){super.addStep(t,s),this.updated=this.updated&~Tn,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,s=!0){let o=this.selection;return s&&(t=t.mark(this.storedMarks||(o.empty?o.$from.marks():o.$from.marksAcross(o.$to)||ze.none))),o.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,s,o){let c=this.doc.type.schema;if(s==null)return t?this.replaceSelectionWith(c.text(t),!0):this.deleteSelection();{if(o==null&&(o=s),o=o??s,!t)return this.deleteRange(s,o);let d=this.storedMarks;if(!d){let p=this.doc.resolve(s);d=o==s?p.marks():p.marksAcross(this.doc.resolve(o))}return this.replaceRangeWith(s,o,c.text(t,d)),this.selection.empty||this.setSelection(ke.near(this.selection.$to)),this}}setMeta(t,s){return this.meta[typeof t=="string"?t:t.key]=s,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Kl,this}get scrolledIntoView(){return(this.updated&Kl)>0}}function Ql(a,t){return!t||!a?a:a.bind(t)}class Vs{constructor(t,s,o){this.name=t,this.init=Ql(s.init,o),this.apply=Ql(s.apply,o)}}const Lp=[new Vs("doc",{init(a){return a.doc||a.schema.topNodeType.createAndFill()},apply(a){return a.doc}}),new Vs("selection",{init(a,t){return a.selection||ke.atStart(t.doc)},apply(a){return a.selection}}),new Vs("storedMarks",{init(a){return a.storedMarks||null},apply(a,t,s,o){return o.selection.$cursor?a.storedMarks:null}}),new Vs("scrollToSelection",{init(){return 0},apply(a,t){return a.scrolledIntoView?t+1:t}})];class la{constructor(t,s){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Lp.slice(),s&&s.forEach(o=>{if(this.pluginsByKey[o.key])throw new RangeError("Adding different instances of a keyed plugin ("+o.key+")");this.plugins.push(o),this.pluginsByKey[o.key]=o,o.spec.state&&this.fields.push(new Vs(o.key,o.spec.state,o))})}}class xs{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,s=-1){for(let o=0;o<this.config.plugins.length;o++)if(o!=s){let c=this.config.plugins[o];if(c.spec.filterTransaction&&!c.spec.filterTransaction.call(c,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let s=[t],o=this.applyInner(t),c=null;for(;;){let d=!1;for(let p=0;p<this.config.plugins.length;p++){let x=this.config.plugins[p];if(x.spec.appendTransaction){let w=c?c[p].n:0,S=c?c[p].state:this,M=w<s.length&&x.spec.appendTransaction.call(x,w?s.slice(w):s,S,o);if(M&&o.filterTransaction(M,p)){if(M.setMeta("appendedTransaction",t),!c){c=[];for(let E=0;E<this.config.plugins.length;E++)c.push(E<p?{state:o,n:s.length}:{state:this,n:0})}s.push(M),o=o.applyInner(M),d=!0}c&&(c[p]={state:o,n:s.length})}}if(!d)return{state:o,transactions:s}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new xs(this.config),o=this.config.fields;for(let c=0;c<o.length;c++){let d=o[c];s[d.name]=d.apply(t,this[d.name],this,s)}return s}get tr(){return new Ip(this)}static create(t){let s=new la(t.doc?t.doc.type.schema:t.schema,t.plugins),o=new xs(s);for(let c=0;c<s.fields.length;c++)o[s.fields[c].name]=s.fields[c].init(t,o);return o}reconfigure(t){let s=new la(this.schema,t.plugins),o=s.fields,c=new xs(s);for(let d=0;d<o.length;d++){let p=o[d].name;c[p]=this.hasOwnProperty(p)?this[p]:o[d].init(t,c)}return c}toJSON(t){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(o=>o.toJSON())),t&&typeof t=="object")for(let o in t){if(o=="doc"||o=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let c=t[o],d=c.spec.state;d&&d.toJSON&&(s[o]=d.toJSON.call(c,this[c.key]))}return s}static fromJSON(t,s,o){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let c=new la(t.schema,t.plugins),d=new xs(c);return c.fields.forEach(p=>{if(p.name=="doc")d.doc=Si.fromJSON(t.schema,s.doc);else if(p.name=="selection")d.selection=ke.fromJSON(d.doc,s.selection);else if(p.name=="storedMarks")s.storedMarks&&(d.storedMarks=s.storedMarks.map(t.schema.markFromJSON));else{if(o)for(let x in o){let w=o[x],S=w.spec.state;if(w.key==p.name&&S&&S.fromJSON&&Object.prototype.hasOwnProperty.call(s,x)){d[p.name]=S.fromJSON.call(w,t,s[x],d);return}}d[p.name]=p.init(t,d)}}),d}}function Eh(a,t,s){for(let o in a){let c=a[o];c instanceof Function?c=c.bind(t):o=="handleDOMEvents"&&(c=Eh(c,t,{})),s[o]=c}return s}class Ct{constructor(t){this.spec=t,this.props={},t.props&&Eh(t.props,this,this.props),this.key=t.key?t.key.key:Ih("plugin")}getState(t){return t[this.key]}}const ca=Object.create(null);function Ih(a){return a in ca?a+"$"+ ++ca[a]:(ca[a]=0,a+"$")}class Qt{constructor(t="key"){this.key=Ih(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const nt=function(a){for(var t=0;;t++)if(a=a.previousSibling,!a)return t},en=function(a){let t=a.assignedSlot||a.parentNode;return t&&t.nodeType==11?t.host:t};let La=null;const ri=function(a,t,s){let o=La||(La=document.createRange());return o.setEnd(a,s??a.nodeValue.length),o.setStart(a,t||0),o},Pp=function(){La=null},ts=function(a,t,s,o){return s&&(ec(a,t,s,o,-1)||ec(a,t,s,o,1))},Np=/^(img|br|input|textarea|hr)$/i;function ec(a,t,s,o,c){for(;;){if(a==s&&t==o)return!0;if(t==(c<0?0:Bt(a))){let d=a.parentNode;if(!d||d.nodeType!=1||on(a)||Np.test(a.nodeName)||a.contentEditable=="false")return!1;t=nt(a)+(c<0?0:1),a=d}else if(a.nodeType==1){if(a=a.childNodes[t+(c<0?-1:0)],a.contentEditable=="false")return!1;t=c<0?Bt(a):0}else return!1}}function Bt(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}function Dp(a,t){for(;;){if(a.nodeType==3&&t)return a;if(a.nodeType==1&&t>0){if(a.contentEditable=="false")return null;a=a.childNodes[t-1],t=Bt(a)}else if(a.parentNode&&!on(a))t=nt(a),a=a.parentNode;else return null}}function Rp(a,t){for(;;){if(a.nodeType==3&&t<a.nodeValue.length)return a;if(a.nodeType==1&&t<a.childNodes.length){if(a.contentEditable=="false")return null;a=a.childNodes[t],t=0}else if(a.parentNode&&!on(a))t=nt(a)+1,a=a.parentNode;else return null}}function zp(a,t,s){for(let o=t==0,c=t==Bt(a);o||c;){if(a==s)return!0;let d=nt(a);if(a=a.parentNode,!a)return!1;o=o&&d==0,c=c&&d==Bt(a)}}function on(a){let t;for(let s=a;s&&!(t=s.pmViewDesc);s=s.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==a||t.contentDOM==a)}const tr=function(a){return a.focusNode&&ts(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)};function _i(a,t){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=a,s.key=s.code=t,s}function Fp(a){let t=a.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Bp(a,t,s){if(a.caretPositionFromPoint)try{let o=a.caretPositionFromPoint(t,s);if(o)return{node:o.offsetNode,offset:Math.min(Bt(o.offsetNode),o.offset)}}catch{}if(a.caretRangeFromPoint){let o=a.caretRangeFromPoint(t,s);if(o)return{node:o.startContainer,offset:Math.min(Bt(o.startContainer),o.startOffset)}}}const Zt=typeof navigator<"u"?navigator:null,tc=typeof document<"u"?document:null,Pi=Zt&&Zt.userAgent||"",Pa=/Edge\/(\d+)/.exec(Pi),Lh=/MSIE \d/.exec(Pi),Na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pi),St=!!(Lh||Na||Pa),Ai=Lh?document.documentMode:Na?+Na[1]:Pa?+Pa[1]:0,Gt=!St&&/gecko\/(\d+)/i.test(Pi);Gt&&+(/Firefox\/(\d+)/.exec(Pi)||[0,0])[1];const Da=!St&&/Chrome\/(\d+)/.exec(Pi),ht=!!Da,Ph=Da?+Da[1]:0,mt=!St&&!!Zt&&/Apple Computer/.test(Zt.vendor),As=mt&&(/Mobile\/\w+/.test(Pi)||!!Zt&&Zt.maxTouchPoints>2),Ft=As||(Zt?/Mac/.test(Zt.platform):!1),Hp=Zt?/Win/.test(Zt.platform):!1,ai=/Android \d/.test(Pi),ln=!!tc&&"webkitFontSmoothing"in tc.documentElement.style,Xp=ln?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Yp(a){let t=a.defaultView&&a.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:a.documentElement.clientWidth,top:0,bottom:a.documentElement.clientHeight}}function ni(a,t){return typeof a=="number"?a:a[t]}function Wp(a){let t=a.getBoundingClientRect(),s=t.width/a.offsetWidth||1,o=t.height/a.offsetHeight||1;return{left:t.left,right:t.left+a.clientWidth*s,top:t.top,bottom:t.top+a.clientHeight*o}}function ic(a,t,s){let o=a.someProp("scrollThreshold")||0,c=a.someProp("scrollMargin")||5,d=a.dom.ownerDocument;for(let p=s||a.dom;p;p=en(p)){if(p.nodeType!=1)continue;let x=p,w=x==d.body,S=w?Yp(d):Wp(x),M=0,E=0;if(t.top<S.top+ni(o,"top")?E=-(S.top-t.top+ni(c,"top")):t.bottom>S.bottom-ni(o,"bottom")&&(E=t.bottom-t.top>S.bottom-S.top?t.top+ni(c,"top")-S.top:t.bottom-S.bottom+ni(c,"bottom")),t.left<S.left+ni(o,"left")?M=-(S.left-t.left+ni(c,"left")):t.right>S.right-ni(o,"right")&&(M=t.right-S.right+ni(c,"right")),M||E)if(w)d.defaultView.scrollBy(M,E);else{let I=x.scrollLeft,D=x.scrollTop;E&&(x.scrollTop+=E),M&&(x.scrollLeft+=M);let R=x.scrollLeft-I,Y=x.scrollTop-D;t={left:t.left-R,top:t.top-Y,right:t.right-R,bottom:t.bottom-Y}}if(w||/^(fixed|sticky)$/.test(getComputedStyle(p).position))break}}function _p(a){let t=a.dom.getBoundingClientRect(),s=Math.max(0,t.top),o,c;for(let d=(t.left+t.right)/2,p=s+1;p<Math.min(innerHeight,t.bottom);p+=5){let x=a.root.elementFromPoint(d,p);if(!x||x==a.dom||!a.dom.contains(x))continue;let w=x.getBoundingClientRect();if(w.top>=s-20){o=x,c=w.top;break}}return{refDOM:o,refTop:c,stack:Nh(a.dom)}}function Nh(a){let t=[],s=a.ownerDocument;for(let o=a;o&&(t.push({dom:o,top:o.scrollTop,left:o.scrollLeft}),a!=s);o=en(o));return t}function jp({refDOM:a,refTop:t,stack:s}){let o=a?a.getBoundingClientRect().top:0;Dh(s,o==0?0:o-t)}function Dh(a,t){for(let s=0;s<a.length;s++){let{dom:o,top:c,left:d}=a[s];o.scrollTop!=c+t&&(o.scrollTop=c+t),o.scrollLeft!=d&&(o.scrollLeft=d)}}let fs=null;function Vp(a){if(a.setActive)return a.setActive();if(fs)return a.focus(fs);let t=Nh(a);a.focus(fs==null?{get preventScroll(){return fs={preventScroll:!0},!0}}:void 0),fs||(fs=!1,Dh(t,0))}function Rh(a,t){let s,o=2e8,c,d=0,p=t.top,x=t.top,w,S;for(let M=a.firstChild,E=0;M;M=M.nextSibling,E++){let I;if(M.nodeType==1)I=M.getClientRects();else if(M.nodeType==3)I=ri(M).getClientRects();else continue;for(let D=0;D<I.length;D++){let R=I[D];if(R.top<=p&&R.bottom>=x){p=Math.max(R.bottom,p),x=Math.min(R.top,x);let Y=R.left>t.left?R.left-t.left:R.right<t.left?t.left-R.right:0;if(Y<o){s=M,o=Y,c=Y&&s.nodeType==3?{left:R.right<t.left?R.right:R.left,top:t.top}:t,M.nodeType==1&&Y&&(d=E+(t.left>=(R.left+R.right)/2?1:0));continue}}else R.top>t.top&&!w&&R.left<=t.left&&R.right>=t.left&&(w=M,S={left:Math.max(R.left,Math.min(R.right,t.left)),top:R.top});!s&&(t.left>=R.right&&t.top>=R.top||t.left>=R.left&&t.top>=R.bottom)&&(d=E+1)}}return!s&&w&&(s=w,c=S,o=0),s&&s.nodeType==3?Gp(s,c):!s||o&&s.nodeType==1?{node:a,offset:d}:Rh(s,c)}function Gp(a,t){let s=a.nodeValue.length,o=document.createRange();for(let c=0;c<s;c++){o.setEnd(a,c+1),o.setStart(a,c);let d=pi(o,1);if(d.top!=d.bottom&&Za(t,d))return{node:a,offset:c+(t.left>=(d.left+d.right)/2?1:0)}}return{node:a,offset:0}}function Za(a,t){return a.left>=t.left-1&&a.left<=t.right+1&&a.top>=t.top-1&&a.top<=t.bottom+1}function qp(a,t){let s=a.parentNode;return s&&/^li$/i.test(s.nodeName)&&t.left<a.getBoundingClientRect().left?s:a}function $p(a,t,s){let{node:o,offset:c}=Rh(t,s),d=-1;if(o.nodeType==1&&!o.firstChild){let p=o.getBoundingClientRect();d=p.left!=p.right&&s.left>(p.left+p.right)/2?1:-1}return a.docView.posFromDOM(o,c,d)}function Up(a,t,s,o){let c=-1;for(let d=t,p=!1;d!=a.dom;){let x=a.docView.nearestDesc(d,!0),w;if(!x)return null;if(x.dom.nodeType==1&&(x.node.isBlock&&x.parent||!x.contentDOM)&&((w=x.dom.getBoundingClientRect()).width||w.height)&&(x.node.isBlock&&x.parent&&(!p&&w.left>o.left||w.top>o.top?c=x.posBefore:(!p&&w.right<o.left||w.bottom<o.top)&&(c=x.posAfter),p=!0),!x.contentDOM&&c<0&&!x.node.isText))return(x.node.isBlock?o.top<(w.top+w.bottom)/2:o.left<(w.left+w.right)/2)?x.posBefore:x.posAfter;d=x.dom.parentNode}return c>-1?c:a.docView.posFromDOM(t,s,-1)}function zh(a,t,s){let o=a.childNodes.length;if(o&&s.top<s.bottom)for(let c=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-s.top)/(s.bottom-s.top))-2)),d=c;;){let p=a.childNodes[d];if(p.nodeType==1){let x=p.getClientRects();for(let w=0;w<x.length;w++){let S=x[w];if(Za(t,S))return zh(p,t,S)}}if((d=(d+1)%o)==c)break}return a}function Jp(a,t){let s=a.dom.ownerDocument,o,c=0,d=Bp(s,t.left,t.top);d&&({node:o,offset:c}=d);let p=(a.root.elementFromPoint?a.root:s).elementFromPoint(t.left,t.top),x;if(!p||!a.dom.contains(p.nodeType!=1?p.parentNode:p)){let S=a.dom.getBoundingClientRect();if(!Za(t,S)||(p=zh(a.dom,t,S),!p))return null}if(mt)for(let S=p;o&&S;S=en(S))S.draggable&&(o=void 0);if(p=qp(p,t),o){if(Gt&&o.nodeType==1&&(c=Math.min(c,o.childNodes.length),c<o.childNodes.length)){let M=o.childNodes[c],E;M.nodeName=="IMG"&&(E=M.getBoundingClientRect()).right<=t.left&&E.bottom>t.top&&c++}let S;ln&&c&&o.nodeType==1&&(S=o.childNodes[c-1]).nodeType==1&&S.contentEditable=="false"&&S.getBoundingClientRect().top>=t.top&&c--,o==a.dom&&c==o.childNodes.length-1&&o.lastChild.nodeType==1&&t.top>o.lastChild.getBoundingClientRect().bottom?x=a.state.doc.content.size:(c==0||o.nodeType!=1||o.childNodes[c-1].nodeName!="BR")&&(x=Up(a,o,c,t))}x==null&&(x=$p(a,p,t));let w=a.docView.nearestDesc(p,!0);return{pos:x,inside:w?w.posAtStart-w.border:-1}}function sc(a){return a.top<a.bottom||a.left<a.right}function pi(a,t){let s=a.getClientRects();if(s.length){let o=s[t<0?0:s.length-1];if(sc(o))return o}return Array.prototype.find.call(s,sc)||a.getBoundingClientRect()}const Zp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Fh(a,t,s){let{node:o,offset:c,atom:d}=a.docView.domFromPos(t,s<0?-1:1),p=ln||Gt;if(o.nodeType==3)if(p&&(Zp.test(o.nodeValue)||(s<0?!c:c==o.nodeValue.length))){let w=pi(ri(o,c,c),s);if(Gt&&c&&/\s/.test(o.nodeValue[c-1])&&c<o.nodeValue.length){let S=pi(ri(o,c-1,c-1),-1);if(S.top==w.top){let M=pi(ri(o,c,c+1),-1);if(M.top!=w.top)return Ws(M,M.left<S.left)}}return w}else{let w=c,S=c,M=s<0?1:-1;return s<0&&!c?(S++,M=-1):s>=0&&c==o.nodeValue.length?(w--,M=1):s<0?w--:S++,Ws(pi(ri(o,w,S),M),M<0)}if(!a.state.doc.resolve(t-(d||0)).parent.inlineContent){if(d==null&&c&&(s<0||c==Bt(o))){let w=o.childNodes[c-1];if(w.nodeType==1)return ha(w.getBoundingClientRect(),!1)}if(d==null&&c<Bt(o)){let w=o.childNodes[c];if(w.nodeType==1)return ha(w.getBoundingClientRect(),!0)}return ha(o.getBoundingClientRect(),s>=0)}if(d==null&&c&&(s<0||c==Bt(o))){let w=o.childNodes[c-1],S=w.nodeType==3?ri(w,Bt(w)-(p?0:1)):w.nodeType==1&&(w.nodeName!="BR"||!w.nextSibling)?w:null;if(S)return Ws(pi(S,1),!1)}if(d==null&&c<Bt(o)){let w=o.childNodes[c];for(;w.pmViewDesc&&w.pmViewDesc.ignoreForCoords;)w=w.nextSibling;let S=w?w.nodeType==3?ri(w,0,p?0:1):w.nodeType==1?w:null:null;if(S)return Ws(pi(S,-1),!0)}return Ws(pi(o.nodeType==3?ri(o):o,-s),s>=0)}function Ws(a,t){if(a.width==0)return a;let s=t?a.left:a.right;return{top:a.top,bottom:a.bottom,left:s,right:s}}function ha(a,t){if(a.height==0)return a;let s=t?a.top:a.bottom;return{top:s,bottom:s,left:a.left,right:a.right}}function Bh(a,t,s){let o=a.state,c=a.root.activeElement;o!=t&&a.updateState(t),c!=a.dom&&a.focus();try{return s()}finally{o!=t&&a.updateState(o),c!=a.dom&&c&&c.focus()}}function Kp(a,t,s){let o=t.selection,c=s=="up"?o.$from:o.$to;return Bh(a,t,()=>{let{node:d}=a.docView.domFromPos(c.pos,s=="up"?-1:1);for(;;){let x=a.docView.nearestDesc(d,!0);if(!x)break;if(x.node.isBlock){d=x.contentDOM||x.dom;break}d=x.dom.parentNode}let p=Fh(a,c.pos,1);for(let x=d.firstChild;x;x=x.nextSibling){let w;if(x.nodeType==1)w=x.getClientRects();else if(x.nodeType==3)w=ri(x,0,x.nodeValue.length).getClientRects();else continue;for(let S=0;S<w.length;S++){let M=w[S];if(M.bottom>M.top+1&&(s=="up"?p.top-M.top>(M.bottom-p.top)*2:M.bottom-p.bottom>(p.bottom-M.top)*2))return!1}}return!0})}const Qp=/[\u0590-\u08ac]/;function eg(a,t,s){let{$head:o}=t.selection;if(!o.parent.isTextblock)return!1;let c=o.parentOffset,d=!c,p=c==o.parent.content.size,x=a.domSelection();return x?!Qp.test(o.parent.textContent)||!x.modify?s=="left"||s=="backward"?d:p:Bh(a,t,()=>{let{focusNode:w,focusOffset:S,anchorNode:M,anchorOffset:E}=a.domSelectionRange(),I=x.caretBidiLevel;x.modify("move",s,"character");let D=o.depth?a.docView.domAfterPos(o.before()):a.dom,{focusNode:R,focusOffset:Y}=a.domSelectionRange(),_=R&&!D.contains(R.nodeType==1?R:R.parentNode)||w==R&&S==Y;try{x.collapse(M,E),w&&(w!=M||S!=E)&&x.extend&&x.extend(w,S)}catch{}return I!=null&&(x.caretBidiLevel=I),_}):o.pos==o.start()||o.pos==o.end()}let nc=null,rc=null,ac=!1;function tg(a,t,s){return nc==t&&rc==s?ac:(nc=t,rc=s,ac=s=="up"||s=="down"?Kp(a,t,s):eg(a,t,s))}const Xt=0,oc=1,Vi=2,Kt=3;class cn{constructor(t,s,o,c){this.parent=t,this.children=s,this.dom=o,this.contentDOM=c,this.dirty=Xt,o.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,s,o){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let s=0;s<this.children.length;s++)t+=this.children[s].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let s=0,o=this.posAtStart;;s++){let c=this.children[s];if(c==t)return o;o+=c.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,s,o){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(o<0){let d,p;if(t==this.contentDOM)d=t.childNodes[s-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;d=t.previousSibling}for(;d&&!((p=d.pmViewDesc)&&p.parent==this);)d=d.previousSibling;return d?this.posBeforeChild(p)+p.size:this.posAtStart}else{let d,p;if(t==this.contentDOM)d=t.childNodes[s];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;d=t.nextSibling}for(;d&&!((p=d.pmViewDesc)&&p.parent==this);)d=d.nextSibling;return d?this.posBeforeChild(p):this.posAtEnd}let c;if(t==this.dom&&this.contentDOM)c=s>nt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))c=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let d=t;;d=d.parentNode){if(d==this.dom){c=!1;break}if(d.previousSibling)break}if(c==null&&s==t.childNodes.length)for(let d=t;;d=d.parentNode){if(d==this.dom){c=!0;break}if(d.nextSibling)break}}return c??o>0?this.posAtEnd:this.posAtStart}nearestDesc(t,s=!1){for(let o=!0,c=t;c;c=c.parentNode){let d=this.getDesc(c),p;if(d&&(!s||d.node))if(o&&(p=d.nodeDOM)&&!(p.nodeType==1?p.contains(t.nodeType==1?t:t.parentNode):p==t))o=!1;else return d}}getDesc(t){let s=t.pmViewDesc;for(let o=s;o;o=o.parent)if(o==this)return s}posFromDOM(t,s,o){for(let c=t;c;c=c.parentNode){let d=this.getDesc(c);if(d)return d.localPosFromDOM(t,s,o)}return-1}descAt(t){for(let s=0,o=0;s<this.children.length;s++){let c=this.children[s],d=o+c.size;if(o==t&&d!=o){for(;!c.border&&c.children.length;)c=c.children[0];return c}if(t<d)return c.descAt(t-o-c.border);o=d}}domFromPos(t,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let o=0,c=0;for(let d=0;o<this.children.length;o++){let p=this.children[o],x=d+p.size;if(x>t||p instanceof Xh){c=t-d;break}d=x}if(c)return this.children[o].domFromPos(c-this.children[o].border,s);for(let d;o&&!(d=this.children[o-1]).size&&d instanceof Hh&&d.side>=0;o--);if(s<=0){let d,p=!0;for(;d=o?this.children[o-1]:null,!(!d||d.dom.parentNode==this.contentDOM);o--,p=!1);return d&&s&&p&&!d.border&&!d.domAtom?d.domFromPos(d.size,s):{node:this.contentDOM,offset:d?nt(d.dom)+1:0}}else{let d,p=!0;for(;d=o<this.children.length?this.children[o]:null,!(!d||d.dom.parentNode==this.contentDOM);o++,p=!1);return d&&p&&!d.border&&!d.domAtom?d.domFromPos(0,s):{node:this.contentDOM,offset:d?nt(d.dom):this.contentDOM.childNodes.length}}}parseRange(t,s,o=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let c=-1,d=-1;for(let p=o,x=0;;x++){let w=this.children[x],S=p+w.size;if(c==-1&&t<=S){let M=p+w.border;if(t>=M&&s<=S-w.border&&w.node&&w.contentDOM&&this.contentDOM.contains(w.contentDOM))return w.parseRange(t,s,M);t=p;for(let E=x;E>0;E--){let I=this.children[E-1];if(I.size&&I.dom.parentNode==this.contentDOM&&!I.emptyChildAt(1)){c=nt(I.dom)+1;break}t-=I.size}c==-1&&(c=0)}if(c>-1&&(S>s||x==this.children.length-1)){s=S;for(let M=x+1;M<this.children.length;M++){let E=this.children[M];if(E.size&&E.dom.parentNode==this.contentDOM&&!E.emptyChildAt(-1)){d=nt(E.dom);break}s+=E.size}d==-1&&(d=this.contentDOM.childNodes.length);break}p=S}return{node:this.contentDOM,from:t,to:s,fromOffset:c,toOffset:d}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[t<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(t)}domAfterPos(t){let{node:s,offset:o}=this.domFromPos(t,0);if(s.nodeType!=1||o==s.childNodes.length)throw new RangeError("No node after pos "+t);return s.childNodes[o]}setSelection(t,s,o,c=!1){let d=Math.min(t,s),p=Math.max(t,s);for(let D=0,R=0;D<this.children.length;D++){let Y=this.children[D],_=R+Y.size;if(d>R&&p<_)return Y.setSelection(t-R-Y.border,s-R-Y.border,o,c);R=_}let x=this.domFromPos(t,t?-1:1),w=s==t?x:this.domFromPos(s,s?-1:1),S=o.root.getSelection(),M=o.domSelectionRange(),E=!1;if((Gt||mt)&&t==s){let{node:D,offset:R}=x;if(D.nodeType==3){if(E=!!(R&&D.nodeValue[R-1]==`
`),E&&R==D.nodeValue.length)for(let Y=D,_;Y;Y=Y.parentNode){if(_=Y.nextSibling){_.nodeName=="BR"&&(x=w={node:_.parentNode,offset:nt(_)+1});break}let $=Y.pmViewDesc;if($&&$.node&&$.node.isBlock)break}}else{let Y=D.childNodes[R-1];E=Y&&(Y.nodeName=="BR"||Y.contentEditable=="false")}}if(Gt&&M.focusNode&&M.focusNode!=w.node&&M.focusNode.nodeType==1){let D=M.focusNode.childNodes[M.focusOffset];D&&D.contentEditable=="false"&&(c=!0)}if(!(c||E&&mt)&&ts(x.node,x.offset,M.anchorNode,M.anchorOffset)&&ts(w.node,w.offset,M.focusNode,M.focusOffset))return;let I=!1;if((S.extend||t==s)&&!E){S.collapse(x.node,x.offset);try{t!=s&&S.extend(w.node,w.offset),I=!0}catch{}}if(!I){if(t>s){let R=x;x=w,w=R}let D=document.createRange();D.setEnd(w.node,w.offset),D.setStart(x.node,x.offset),S.removeAllRanges(),S.addRange(D)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,s){for(let o=0,c=0;c<this.children.length;c++){let d=this.children[c],p=o+d.size;if(o==p?t<=p&&s>=o:t<p&&s>o){let x=o+d.border,w=p-d.border;if(t>=x&&s<=w){this.dirty=t==o||s==p?Vi:oc,t==x&&s==w&&(d.contentLost||d.dom.parentNode!=this.contentDOM)?d.dirty=Kt:d.markDirty(t-x,s-x);return}else d.dirty=d.dom==d.contentDOM&&d.dom.parentNode==this.contentDOM&&!d.children.length?Vi:Kt}o=p}this.dirty=Vi}markParentsDirty(){let t=1;for(let s=this.parent;s;s=s.parent,t++){let o=t==1?Vi:oc;s.dirty<o&&(s.dirty=o)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class Hh extends cn{constructor(t,s,o,c){let d,p=s.type.toDOM;if(typeof p=="function"&&(p=p(o,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)})),!s.type.spec.raw){if(p.nodeType!=1){let x=document.createElement("span");x.appendChild(p),p=x}p.contentEditable="false",p.classList.add("ProseMirror-widget")}super(t,[],p,null),this.widget=s,this.widget=s,d=this}matchesWidget(t){return this.dirty==Xt&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let s=this.widget.spec.stopEvent;return s?s(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ig extends cn{constructor(t,s,o,c){super(t,[],s,null),this.textDOM=o,this.text=c}get size(){return this.text.length}localPosFromDOM(t,s){return t!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class is extends cn{constructor(t,s,o,c,d){super(t,[],o,c),this.mark=s,this.spec=d}static create(t,s,o,c){let d=c.nodeViews[s.type.name],p=d&&d(s,c,o);return(!p||!p.dom)&&(p=ss.renderSpec(document,s.type.spec.toDOM(s,o),null,s.attrs)),new is(t,s,p.dom,p.contentDOM||p.dom,p)}parseRule(){return this.dirty&Kt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Kt&&this.mark.eq(t)}markDirty(t,s){if(super.markDirty(t,s),this.dirty!=Xt){let o=this.parent;for(;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=Xt}}slice(t,s,o){let c=is.create(this.parent,this.mark,!0,o),d=this.children,p=this.size;s<p&&(d=za(d,s,p,o)),t>0&&(d=za(d,0,t,o));for(let x=0;x<d.length;x++)d[x].parent=c;return c.children=d,c}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Mi extends cn{constructor(t,s,o,c,d,p,x,w,S){super(t,[],d,p),this.node=s,this.outerDeco=o,this.innerDeco=c,this.nodeDOM=x}static create(t,s,o,c,d,p){let x=d.nodeViews[s.type.name],w,S=x&&x(s,d,()=>{if(!w)return p;if(w.parent)return w.parent.posBeforeChild(w)},o,c),M=S&&S.dom,E=S&&S.contentDOM;if(s.isText){if(!M)M=document.createTextNode(s.text);else if(M.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else M||({dom:M,contentDOM:E}=ss.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!E&&!s.isText&&M.nodeName!="BR"&&(M.hasAttribute("contenteditable")||(M.contentEditable="false"),s.type.spec.draggable&&(M.draggable=!0));let I=M;return M=_h(M,o,s),S?w=new sg(t,s,o,c,M,E||null,I,S,d,p+1):s.isText?new ir(t,s,o,c,M,I,d):new Mi(t,s,o,c,M,E||null,I,d,p+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let o=this.children[s];if(this.dom.contains(o.dom.parentNode)){t.contentElement=o.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ie.empty)}return t}matchesNode(t,s,o){return this.dirty==Xt&&t.eq(this.node)&&Wn(s,this.outerDeco)&&o.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,s){let o=this.node.inlineContent,c=s,d=t.composing?this.localCompositionInfo(t,s):null,p=d&&d.pos>-1?d:null,x=d&&d.pos<0,w=new rg(this,p&&p.node,t);lg(this.node,this.innerDeco,(S,M,E)=>{S.spec.marks?w.syncToMarks(S.spec.marks,o,t):S.type.side>=0&&!E&&w.syncToMarks(M==this.node.childCount?ze.none:this.node.child(M).marks,o,t),w.placeWidget(S,t,c)},(S,M,E,I)=>{w.syncToMarks(S.marks,o,t);let D;w.findNodeMatch(S,M,E,I)||x&&t.state.selection.from>c&&t.state.selection.to<c+S.nodeSize&&(D=w.findIndexWithChild(d.node))>-1&&w.updateNodeAt(S,M,E,D,t)||w.updateNextNode(S,M,E,t,I,c)||w.addNode(S,M,E,t,c),c+=S.nodeSize}),w.syncToMarks([],o,t),this.node.isTextblock&&w.addTextblockHacks(),w.destroyRest(),(w.changed||this.dirty==Vi)&&(p&&this.protectLocalComposition(t,p),Yh(this.contentDOM,this.children,t),As&&cg(this.dom))}localCompositionInfo(t,s){let{from:o,to:c}=t.state.selection;if(!(t.state.selection instanceof we)||o<s||c>s+this.node.content.size)return null;let d=t.input.compositionNode;if(!d||!this.dom.contains(d.parentNode))return null;if(this.node.inlineContent){let p=d.nodeValue,x=hg(this.node.content,p,o-s,c-s);return x<0?null:{node:d,pos:x,text:p}}else return{node:d,pos:-1,text:""}}protectLocalComposition(t,{node:s,pos:o,text:c}){if(this.getDesc(s))return;let d=s;for(;d.parentNode!=this.contentDOM;d=d.parentNode){for(;d.previousSibling;)d.parentNode.removeChild(d.previousSibling);for(;d.nextSibling;)d.parentNode.removeChild(d.nextSibling);d.pmViewDesc&&(d.pmViewDesc=void 0)}let p=new ig(this,d,s,c);t.input.compositionNodes.push(p),this.children=za(this.children,o,o+c.length,t,p)}update(t,s,o,c){return this.dirty==Kt||!t.sameMarkup(this.node)?!1:(this.updateInner(t,s,o,c),!0)}updateInner(t,s,o,c){this.updateOuterDeco(s),this.node=t,this.innerDeco=o,this.contentDOM&&this.updateChildren(c,this.posAtStart),this.dirty=Xt}updateOuterDeco(t){if(Wn(t,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,o=this.dom;this.dom=Wh(this.dom,this.nodeDOM,Ra(this.outerDeco,this.node,s),Ra(t,this.node,s)),this.dom!=o&&(o.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function lc(a,t,s,o,c){_h(o,t,a);let d=new Mi(void 0,a,t,s,o,o,o,c,0);return d.contentDOM&&d.updateChildren(c,0),d}class ir extends Mi{constructor(t,s,o,c,d,p,x){super(t,s,o,c,d,null,p,x,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,s,o,c){return this.dirty==Kt||this.dirty!=Xt&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=Xt||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,c.trackWrites==this.nodeDOM&&(c.trackWrites=null)),this.node=t,this.dirty=Xt,!0)}inParent(){let t=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,s,o){return t==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(t,s,o)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,s,o){let c=this.node.cut(t,s),d=document.createTextNode(c.text);return new ir(this.parent,c,this.outerDeco,this.innerDeco,d,d,o)}markDirty(t,s){super.markDirty(t,s),this.dom!=this.nodeDOM&&(t==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=Kt)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Xh extends cn{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Xt&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sg extends Mi{constructor(t,s,o,c,d,p,x,w,S,M){super(t,s,o,c,d,p,x,S,M),this.spec=w}update(t,s,o,c){if(this.dirty==Kt)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let d=this.spec.update(t,s,o);return d&&this.updateInner(t,s,o,c),d}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,s,o,c)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,s,o,c){this.spec.setSelection?this.spec.setSelection(t,s,o.root):super.setSelection(t,s,o,c)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Yh(a,t,s){let o=a.firstChild,c=!1;for(let d=0;d<t.length;d++){let p=t[d],x=p.dom;if(x.parentNode==a){for(;x!=o;)o=cc(o),c=!0;o=o.nextSibling}else c=!0,a.insertBefore(x,o);if(p instanceof is){let w=o?o.previousSibling:a.lastChild;Yh(p.contentDOM,p.children,s),o=w?w.nextSibling:a.firstChild}}for(;o;)o=cc(o),c=!0;c&&s.trackWrites==a&&(s.trackWrites=null)}const Us=function(a){a&&(this.nodeName=a)};Us.prototype=Object.create(null);const Gi=[new Us];function Ra(a,t,s){if(a.length==0)return Gi;let o=s?Gi[0]:new Us,c=[o];for(let d=0;d<a.length;d++){let p=a[d].type.attrs;if(p){p.nodeName&&c.push(o=new Us(p.nodeName));for(let x in p){let w=p[x];w!=null&&(s&&c.length==1&&c.push(o=new Us(t.isInline?"span":"div")),x=="class"?o.class=(o.class?o.class+" ":"")+w:x=="style"?o.style=(o.style?o.style+";":"")+w:x!="nodeName"&&(o[x]=w))}}}return c}function Wh(a,t,s,o){if(s==Gi&&o==Gi)return t;let c=t;for(let d=0;d<o.length;d++){let p=o[d],x=s[d];if(d){let w;x&&x.nodeName==p.nodeName&&c!=a&&(w=c.parentNode)&&w.nodeName.toLowerCase()==p.nodeName||(w=document.createElement(p.nodeName),w.pmIsDeco=!0,w.appendChild(c),x=Gi[0]),c=w}ng(c,x||Gi[0],p)}return c}function ng(a,t,s){for(let o in t)o!="class"&&o!="style"&&o!="nodeName"&&!(o in s)&&a.removeAttribute(o);for(let o in s)o!="class"&&o!="style"&&o!="nodeName"&&s[o]!=t[o]&&a.setAttribute(o,s[o]);if(t.class!=s.class){let o=t.class?t.class.split(" ").filter(Boolean):[],c=s.class?s.class.split(" ").filter(Boolean):[];for(let d=0;d<o.length;d++)c.indexOf(o[d])==-1&&a.classList.remove(o[d]);for(let d=0;d<c.length;d++)o.indexOf(c[d])==-1&&a.classList.add(c[d]);a.classList.length==0&&a.removeAttribute("class")}if(t.style!=s.style){if(t.style){let o=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,c;for(;c=o.exec(t.style);)a.style.removeProperty(c[1])}s.style&&(a.style.cssText+=s.style)}}function _h(a,t,s){return Wh(a,a,Gi,Ra(t,s,a.nodeType!=1))}function Wn(a,t){if(a.length!=t.length)return!1;for(let s=0;s<a.length;s++)if(!a[s].type.eq(t[s].type))return!1;return!0}function cc(a){let t=a.nextSibling;return a.parentNode.removeChild(a),t}class rg{constructor(t,s,o){this.lock=s,this.view=o,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=ag(t.node.content,t)}destroyBetween(t,s){if(t!=s){for(let o=t;o<s;o++)this.top.children[o].destroy();this.top.children.splice(t,s-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,s,o){let c=0,d=this.stack.length>>1,p=Math.min(d,t.length);for(;c<p&&(c==d-1?this.top:this.stack[c+1<<1]).matchesMark(t[c])&&t[c].type.spec.spanning!==!1;)c++;for(;c<d;)this.destroyRest(),this.top.dirty=Xt,this.index=this.stack.pop(),this.top=this.stack.pop(),d--;for(;d<t.length;){this.stack.push(this.top,this.index+1);let x=-1;for(let w=this.index;w<Math.min(this.index+3,this.top.children.length);w++){let S=this.top.children[w];if(S.matchesMark(t[d])&&!this.isLocked(S.dom)){x=w;break}}if(x>-1)x>this.index&&(this.changed=!0,this.destroyBetween(this.index,x)),this.top=this.top.children[this.index];else{let w=is.create(this.top,t[d],s,o);this.top.children.splice(this.index,0,w),this.top=w,this.changed=!0}this.index=0,d++}}findNodeMatch(t,s,o,c){let d=-1,p;if(c>=this.preMatch.index&&(p=this.preMatch.matches[c-this.preMatch.index]).parent==this.top&&p.matchesNode(t,s,o))d=this.top.children.indexOf(p,this.index);else for(let x=this.index,w=Math.min(this.top.children.length,x+5);x<w;x++){let S=this.top.children[x];if(S.matchesNode(t,s,o)&&!this.preMatch.matched.has(S)){d=x;break}}return d<0?!1:(this.destroyBetween(this.index,d),this.index++,!0)}updateNodeAt(t,s,o,c,d){let p=this.top.children[c];return p.dirty==Kt&&p.dom==p.contentDOM&&(p.dirty=Vi),p.update(t,s,o,d)?(this.destroyBetween(this.index,c),this.index++,!0):!1}findIndexWithChild(t){for(;;){let s=t.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let o=t.pmViewDesc;if(o){for(let c=this.index;c<this.top.children.length;c++)if(this.top.children[c]==o)return c}return-1}t=s}}updateNextNode(t,s,o,c,d,p){for(let x=this.index;x<this.top.children.length;x++){let w=this.top.children[x];if(w instanceof Mi){let S=this.preMatch.matched.get(w);if(S!=null&&S!=d)return!1;let M=w.dom,E,I=this.isLocked(M)&&!(t.isText&&w.node&&w.node.isText&&w.nodeDOM.nodeValue==t.text&&w.dirty!=Kt&&Wn(s,w.outerDeco));if(!I&&w.update(t,s,o,c))return this.destroyBetween(this.index,x),w.dom!=M&&(this.changed=!0),this.index++,!0;if(!I&&(E=this.recreateWrapper(w,t,s,o,c,p)))return this.destroyBetween(this.index,x),this.top.children[this.index]=E,E.contentDOM&&(E.dirty=Vi,E.updateChildren(c,p+1),E.dirty=Xt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,s,o,c,d,p){if(t.dirty||s.isAtom||!t.children.length||!t.node.content.eq(s.content)||!Wn(o,t.outerDeco)||!c.eq(t.innerDeco))return null;let x=Mi.create(this.top,s,o,c,d,p);if(x.contentDOM){x.children=t.children,t.children=[];for(let w of x.children)w.parent=x}return t.destroy(),x}addNode(t,s,o,c,d){let p=Mi.create(this.top,t,s,o,c,d);p.contentDOM&&p.updateChildren(c,d+1),this.top.children.splice(this.index++,0,p),this.changed=!0}placeWidget(t,s,o){let c=this.index<this.top.children.length?this.top.children[this.index]:null;if(c&&c.matchesWidget(t)&&(t==c.widget||!c.widget.type.toDOM.parentNode))this.index++;else{let d=new Hh(this.top,t,s,o);this.top.children.splice(this.index++,0,d),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],s=this.top;for(;t instanceof is;)s=t,t=s.children[s.children.length-1];(!t||!(t instanceof ir)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((mt||ht)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(t,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(t))this.index++;else{let o=document.createElement(t);t=="IMG"&&(o.className="ProseMirror-separator",o.alt=""),t=="BR"&&(o.className="ProseMirror-trailingBreak");let c=new Xh(this.top,[],o,null);s!=this.top?s.children.push(c):s.children.splice(this.index++,0,c),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function ag(a,t){let s=t,o=s.children.length,c=a.childCount,d=new Map,p=[];e:for(;c>0;){let x;for(;;)if(o){let S=s.children[o-1];if(S instanceof is)s=S,o=S.children.length;else{x=S,o--;break}}else{if(s==t)break e;o=s.parent.children.indexOf(s),s=s.parent}let w=x.node;if(w){if(w!=a.child(c-1))break;--c,d.set(x,c),p.push(x)}}return{index:c,matched:d,matches:p.reverse()}}function og(a,t){return a.type.side-t.type.side}function lg(a,t,s,o){let c=t.locals(a),d=0;if(c.length==0){for(let S=0;S<a.childCount;S++){let M=a.child(S);o(M,c,t.forChild(d,M),S),d+=M.nodeSize}return}let p=0,x=[],w=null;for(let S=0;;){let M,E;for(;p<c.length&&c[p].to==d;){let _=c[p++];_.widget&&(M?(E||(E=[M])).push(_):M=_)}if(M)if(E){E.sort(og);for(let _=0;_<E.length;_++)s(E[_],S,!!w)}else s(M,S,!!w);let I,D;if(w)D=-1,I=w,w=null;else if(S<a.childCount)D=S,I=a.child(S++);else break;for(let _=0;_<x.length;_++)x[_].to<=d&&x.splice(_--,1);for(;p<c.length&&c[p].from<=d&&c[p].to>d;)x.push(c[p++]);let R=d+I.nodeSize;if(I.isText){let _=R;p<c.length&&c[p].from<_&&(_=c[p].from);for(let $=0;$<x.length;$++)x[$].to<_&&(_=x[$].to);_<R&&(w=I.cut(_-d),I=I.cut(0,_-d),R=_,D=-1)}else for(;p<c.length&&c[p].to<R;)p++;let Y=I.isInline&&!I.isLeaf?x.filter(_=>!_.inline):x.slice();o(I,Y,t.forChild(d,I),D),d=R}}function cg(a){if(a.nodeName=="UL"||a.nodeName=="OL"){let t=a.style.cssText;a.style.cssText=t+"; list-style: square !important",window.getComputedStyle(a).listStyle,a.style.cssText=t}}function hg(a,t,s,o){for(let c=0,d=0;c<a.childCount&&d<=o;){let p=a.child(c++),x=d;if(d+=p.nodeSize,!p.isText)continue;let w=p.text;for(;c<a.childCount;){let S=a.child(c++);if(d+=S.nodeSize,!S.isText)break;w+=S.text}if(d>=s){if(d>=o&&w.slice(o-t.length-x,o-x)==t)return o-t.length;let S=x<o?w.lastIndexOf(t,o-x-1):-1;if(S>=0&&S+t.length+x>=s)return x+S;if(s==o&&w.length>=o+t.length-x&&w.slice(o-x,o-x+t.length)==t)return o}}return-1}function za(a,t,s,o,c){let d=[];for(let p=0,x=0;p<a.length;p++){let w=a[p],S=x,M=x+=w.size;S>=s||M<=t?d.push(w):(S<t&&d.push(w.slice(0,t-S,o)),c&&(d.push(c),c=void 0),M>s&&d.push(w.slice(s-S,w.size,o)))}return d}function Ka(a,t=null){let s=a.domSelectionRange(),o=a.state.doc;if(!s.focusNode)return null;let c=a.docView.nearestDesc(s.focusNode),d=c&&c.size==0,p=a.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(p<0)return null;let x=o.resolve(p),w,S;if(tr(s)){for(w=p;c&&!c.node;)c=c.parent;let E=c.node;if(c&&E.isAtom&&ge.isSelectable(E)&&c.parent&&!(E.isInline&&zp(s.focusNode,s.focusOffset,c.dom))){let I=c.posBefore;S=new ge(p==I?x:o.resolve(I))}}else{if(s instanceof a.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let E=p,I=p;for(let D=0;D<s.rangeCount;D++){let R=s.getRangeAt(D);E=Math.min(E,a.docView.posFromDOM(R.startContainer,R.startOffset,1)),I=Math.max(I,a.docView.posFromDOM(R.endContainer,R.endOffset,-1))}if(E<0)return null;[w,p]=I==a.state.selection.anchor?[I,E]:[E,I],x=o.resolve(p)}else w=a.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(w<0)return null}let M=o.resolve(w);if(!S){let E=t=="pointer"||a.state.selection.head<x.pos&&!d?1:-1;S=Qa(a,M,x,E)}return S}function jh(a){return a.editable?a.hasFocus():Gh(a)&&document.activeElement&&document.activeElement.contains(a.dom)}function oi(a,t=!1){let s=a.state.selection;if(Vh(a,s),!!jh(a)){if(!t&&a.input.mouseDown&&a.input.mouseDown.allowDefault&&ht){let o=a.domSelectionRange(),c=a.domObserver.currentSelection;if(o.anchorNode&&c.anchorNode&&ts(o.anchorNode,o.anchorOffset,c.anchorNode,c.anchorOffset)){a.input.mouseDown.delayedSelectionSync=!0,a.domObserver.setCurSelection();return}}if(a.domObserver.disconnectSelection(),a.cursorWrapper)ug(a);else{let{anchor:o,head:c}=s,d,p;hc&&!(s instanceof we)&&(s.$from.parent.inlineContent||(d=dc(a,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(p=dc(a,s.to))),a.docView.setSelection(o,c,a,t),hc&&(d&&uc(d),p&&uc(p)),s.visible?a.dom.classList.remove("ProseMirror-hideselection"):(a.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dg(a))}a.domObserver.setCurSelection(),a.domObserver.connectSelection()}}const hc=mt||ht&&Ph<63;function dc(a,t){let{node:s,offset:o}=a.docView.domFromPos(t,0),c=o<s.childNodes.length?s.childNodes[o]:null,d=o?s.childNodes[o-1]:null;if(mt&&c&&c.contentEditable=="false")return da(c);if((!c||c.contentEditable=="false")&&(!d||d.contentEditable=="false")){if(c)return da(c);if(d)return da(d)}}function da(a){return a.contentEditable="true",mt&&a.draggable&&(a.draggable=!1,a.wasDraggable=!0),a}function uc(a){a.contentEditable="false",a.wasDraggable&&(a.draggable=!0,a.wasDraggable=null)}function dg(a){let t=a.dom.ownerDocument;t.removeEventListener("selectionchange",a.input.hideSelectionGuard);let s=a.domSelectionRange(),o=s.anchorNode,c=s.anchorOffset;t.addEventListener("selectionchange",a.input.hideSelectionGuard=()=>{(s.anchorNode!=o||s.anchorOffset!=c)&&(t.removeEventListener("selectionchange",a.input.hideSelectionGuard),setTimeout(()=>{(!jh(a)||a.state.selection.visible)&&a.dom.classList.remove("ProseMirror-hideselection")},20))})}function ug(a){let t=a.domSelection(),s=document.createRange();if(!t)return;let o=a.cursorWrapper.dom,c=o.nodeName=="IMG";c?s.setStart(o.parentNode,nt(o)+1):s.setStart(o,0),s.collapse(!0),t.removeAllRanges(),t.addRange(s),!c&&!a.state.selection.visible&&St&&Ai<=11&&(o.disabled=!0,o.disabled=!1)}function Vh(a,t){if(t instanceof ge){let s=a.docView.descAt(t.from);s!=a.lastSelectedViewDesc&&(fc(a),s&&s.selectNode(),a.lastSelectedViewDesc=s)}else fc(a)}function fc(a){a.lastSelectedViewDesc&&(a.lastSelectedViewDesc.parent&&a.lastSelectedViewDesc.deselectNode(),a.lastSelectedViewDesc=void 0)}function Qa(a,t,s,o){return a.someProp("createSelectionBetween",c=>c(a,t,s))||we.between(t,s,o)}function pc(a){return a.editable&&!a.hasFocus()?!1:Gh(a)}function Gh(a){let t=a.domSelectionRange();if(!t.anchorNode)return!1;try{return a.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(a.editable||a.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function fg(a){let t=a.docView.domFromPos(a.state.selection.anchor,0),s=a.domSelectionRange();return ts(t.node,t.offset,s.anchorNode,s.anchorOffset)}function Fa(a,t){let{$anchor:s,$head:o}=a.selection,c=t>0?s.max(o):s.min(o),d=c.parent.inlineContent?c.depth?a.doc.resolve(t>0?c.after():c.before()):null:c;return d&&ke.findFrom(d,t)}function gi(a,t){return a.dispatch(a.state.tr.setSelection(t).scrollIntoView()),!0}function gc(a,t,s){let o=a.state.selection;if(o instanceof we)if(s.indexOf("s")>-1){let{$head:c}=o,d=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter;if(!d||d.isText||!d.isLeaf)return!1;let p=a.state.doc.resolve(c.pos+d.nodeSize*(t<0?-1:1));return gi(a,new we(o.$anchor,p))}else if(o.empty){if(a.endOfTextblock(t>0?"forward":"backward")){let c=Fa(a.state,t);return c&&c instanceof ge?gi(a,c):!1}else if(!(Ft&&s.indexOf("m")>-1)){let c=o.$head,d=c.textOffset?null:t<0?c.nodeBefore:c.nodeAfter,p;if(!d||d.isText)return!1;let x=t<0?c.pos-d.nodeSize:c.pos;return d.isAtom||(p=a.docView.descAt(x))&&!p.contentDOM?ge.isSelectable(d)?gi(a,new ge(t<0?a.state.doc.resolve(c.pos-d.nodeSize):c)):ln?gi(a,new we(a.state.doc.resolve(t<0?x:x+d.nodeSize))):!1:!1}}else return!1;else{if(o instanceof ge&&o.node.isInline)return gi(a,new we(t>0?o.$to:o.$from));{let c=Fa(a.state,t);return c?gi(a,c):!1}}}function _n(a){return a.nodeType==3?a.nodeValue.length:a.childNodes.length}function Js(a,t){let s=a.pmViewDesc;return s&&s.size==0&&(t<0||a.nextSibling||a.nodeName!="BR")}function ps(a,t){return t<0?pg(a):gg(a)}function pg(a){let t=a.domSelectionRange(),s=t.focusNode,o=t.focusOffset;if(!s)return;let c,d,p=!1;for(Gt&&s.nodeType==1&&o<_n(s)&&Js(s.childNodes[o],-1)&&(p=!0);;)if(o>0){if(s.nodeType!=1)break;{let x=s.childNodes[o-1];if(Js(x,-1))c=s,d=--o;else if(x.nodeType==3)s=x,o=s.nodeValue.length;else break}}else{if(qh(s))break;{let x=s.previousSibling;for(;x&&Js(x,-1);)c=s.parentNode,d=nt(x),x=x.previousSibling;if(x)s=x,o=_n(s);else{if(s=s.parentNode,s==a.dom)break;o=0}}}p?Ba(a,s,o):c&&Ba(a,c,d)}function gg(a){let t=a.domSelectionRange(),s=t.focusNode,o=t.focusOffset;if(!s)return;let c=_n(s),d,p;for(;;)if(o<c){if(s.nodeType!=1)break;let x=s.childNodes[o];if(Js(x,1))d=s,p=++o;else break}else{if(qh(s))break;{let x=s.nextSibling;for(;x&&Js(x,1);)d=x.parentNode,p=nt(x)+1,x=x.nextSibling;if(x)s=x,o=0,c=_n(s);else{if(s=s.parentNode,s==a.dom)break;o=c=0}}}d&&Ba(a,d,p)}function qh(a){let t=a.pmViewDesc;return t&&t.node&&t.node.isBlock}function mg(a,t){for(;a&&t==a.childNodes.length&&!on(a);)t=nt(a)+1,a=a.parentNode;for(;a&&t<a.childNodes.length;){let s=a.childNodes[t];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;a=s,t=0}}function xg(a,t){for(;a&&!t&&!on(a);)t=nt(a),a=a.parentNode;for(;a&&t;){let s=a.childNodes[t-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;a=s,t=a.childNodes.length}}function Ba(a,t,s){if(t.nodeType!=3){let d,p;(p=mg(t,s))?(t=p,s=0):(d=xg(t,s))&&(t=d,s=d.nodeValue.length)}let o=a.domSelection();if(!o)return;if(tr(o)){let d=document.createRange();d.setEnd(t,s),d.setStart(t,s),o.removeAllRanges(),o.addRange(d)}else o.extend&&o.extend(t,s);a.domObserver.setCurSelection();let{state:c}=a;setTimeout(()=>{a.state==c&&oi(a)},50)}function mc(a,t){let s=a.state.doc.resolve(t);if(!(ht||Hp)&&s.parent.inlineContent){let c=a.coordsAtPos(t);if(t>s.start()){let d=a.coordsAtPos(t-1),p=(d.top+d.bottom)/2;if(p>c.top&&p<c.bottom&&Math.abs(d.left-c.left)>1)return d.left<c.left?"ltr":"rtl"}if(t<s.end()){let d=a.coordsAtPos(t+1),p=(d.top+d.bottom)/2;if(p>c.top&&p<c.bottom&&Math.abs(d.left-c.left)>1)return d.left>c.left?"ltr":"rtl"}}return getComputedStyle(a.dom).direction=="rtl"?"rtl":"ltr"}function xc(a,t,s){let o=a.state.selection;if(o instanceof we&&!o.empty||s.indexOf("s")>-1||Ft&&s.indexOf("m")>-1)return!1;let{$from:c,$to:d}=o;if(!c.parent.inlineContent||a.endOfTextblock(t<0?"up":"down")){let p=Fa(a.state,t);if(p&&p instanceof ge)return gi(a,p)}if(!c.parent.inlineContent){let p=t<0?c:d,x=o instanceof Vt?ke.near(p,t):ke.findFrom(p,t);return x?gi(a,x):!1}return!1}function bc(a,t){if(!(a.state.selection instanceof we))return!0;let{$head:s,$anchor:o,empty:c}=a.state.selection;if(!s.sameParent(o))return!0;if(!c)return!1;if(a.endOfTextblock(t>0?"forward":"backward"))return!0;let d=!s.textOffset&&(t<0?s.nodeBefore:s.nodeAfter);if(d&&!d.isText){let p=a.state.tr;return t<0?p.delete(s.pos-d.nodeSize,s.pos):p.delete(s.pos,s.pos+d.nodeSize),a.dispatch(p),!0}return!1}function yc(a,t,s){a.domObserver.stop(),t.contentEditable=s,a.domObserver.start()}function bg(a){if(!mt||a.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:s}=a.domSelectionRange();if(t&&t.nodeType==1&&s==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let o=t.firstChild;yc(a,o,"true"),setTimeout(()=>yc(a,o,"false"),20)}return!1}function yg(a){let t="";return a.ctrlKey&&(t+="c"),a.metaKey&&(t+="m"),a.altKey&&(t+="a"),a.shiftKey&&(t+="s"),t}function vg(a,t){let s=t.keyCode,o=yg(t);if(s==8||Ft&&s==72&&o=="c")return bc(a,-1)||ps(a,-1);if(s==46&&!t.shiftKey||Ft&&s==68&&o=="c")return bc(a,1)||ps(a,1);if(s==13||s==27)return!0;if(s==37||Ft&&s==66&&o=="c"){let c=s==37?mc(a,a.state.selection.from)=="ltr"?-1:1:-1;return gc(a,c,o)||ps(a,c)}else if(s==39||Ft&&s==70&&o=="c"){let c=s==39?mc(a,a.state.selection.from)=="ltr"?1:-1:1;return gc(a,c,o)||ps(a,c)}else{if(s==38||Ft&&s==80&&o=="c")return xc(a,-1,o)||ps(a,-1);if(s==40||Ft&&s==78&&o=="c")return bg(a)||xc(a,1,o)||ps(a,1);if(o==(Ft?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function $h(a,t){a.someProp("transformCopied",D=>{t=D(t,a)});let s=[],{content:o,openStart:c,openEnd:d}=t;for(;c>1&&d>1&&o.childCount==1&&o.firstChild.childCount==1;){c--,d--;let D=o.firstChild;s.push(D.type.name,D.attrs!=D.type.defaultAttrs?D.attrs:null),o=D.content}let p=a.someProp("clipboardSerializer")||ss.fromSchema(a.state.schema),x=ed(),w=x.createElement("div");w.appendChild(p.serializeFragment(o,{document:x}));let S=w.firstChild,M,E=0;for(;S&&S.nodeType==1&&(M=Qh[S.nodeName.toLowerCase()]);){for(let D=M.length-1;D>=0;D--){let R=x.createElement(M[D]);for(;w.firstChild;)R.appendChild(w.firstChild);w.appendChild(R),E++}S=w.firstChild}S&&S.nodeType==1&&S.setAttribute("data-pm-slice",`${c} ${d}${E?` -${E}`:""} ${JSON.stringify(s)}`);let I=a.someProp("clipboardTextSerializer",D=>D(t,a))||t.content.textBetween(0,t.content.size,`

`);return{dom:w,text:I,slice:t}}function Uh(a,t,s,o,c){let d=c.parent.type.spec.code,p,x;if(!s&&!t)return null;let w=t&&(o||d||!s);if(w){if(a.someProp("transformPastedText",I=>{t=I(t,d||o,a)}),d)return t?new oe(ie.from(a.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):oe.empty;let E=a.someProp("clipboardTextParser",I=>I(t,c,o,a));if(E)x=E;else{let I=c.marks(),{schema:D}=a.state,R=ss.fromSchema(D);p=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(Y=>{let _=p.appendChild(document.createElement("p"));Y&&_.appendChild(R.serializeNode(D.text(Y,I)))})}}else a.someProp("transformPastedHTML",E=>{s=E(s,a)}),p=Cg(s),ln&&Ag(p);let S=p&&p.querySelector("[data-pm-slice]"),M=S&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(S.getAttribute("data-pm-slice")||"");if(M&&M[3])for(let E=+M[3];E>0;E--){let I=p.firstChild;for(;I&&I.nodeType!=1;)I=I.nextSibling;if(!I)break;p=I}if(x||(x=(a.someProp("clipboardParser")||a.someProp("domParser")||Ci.fromSchema(a.state.schema)).parseSlice(p,{preserveWhitespace:!!(w||M),context:c,ruleFromNode(I){return I.nodeName=="BR"&&!I.nextSibling&&I.parentNode&&!wg.test(I.parentNode.nodeName)?{ignore:!0}:null}})),M)x=Mg(vc(x,+M[1],+M[2]),M[4]);else if(x=oe.maxOpen(kg(x.content,c),!0),x.openStart||x.openEnd){let E=0,I=0;for(let D=x.content.firstChild;E<x.openStart&&!D.type.spec.isolating;E++,D=D.firstChild);for(let D=x.content.lastChild;I<x.openEnd&&!D.type.spec.isolating;I++,D=D.lastChild);x=vc(x,E,I)}return a.someProp("transformPasted",E=>{x=E(x,a)}),x}const wg=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function kg(a,t){if(a.childCount<2)return a;for(let s=t.depth;s>=0;s--){let c=t.node(s).contentMatchAt(t.index(s)),d,p=[];if(a.forEach(x=>{if(!p)return;let w=c.findWrapping(x.type),S;if(!w)return p=null;if(S=p.length&&d.length&&Zh(w,d,x,p[p.length-1],0))p[p.length-1]=S;else{p.length&&(p[p.length-1]=Kh(p[p.length-1],d.length));let M=Jh(x,w);p.push(M),c=c.matchType(M.type),d=w}}),p)return ie.from(p)}return a}function Jh(a,t,s=0){for(let o=t.length-1;o>=s;o--)a=t[o].create(null,ie.from(a));return a}function Zh(a,t,s,o,c){if(c<a.length&&c<t.length&&a[c]==t[c]){let d=Zh(a,t,s,o.lastChild,c+1);if(d)return o.copy(o.content.replaceChild(o.childCount-1,d));if(o.contentMatchAt(o.childCount).matchType(c==a.length-1?s.type:a[c+1]))return o.copy(o.content.append(ie.from(Jh(s,a,c+1))))}}function Kh(a,t){if(t==0)return a;let s=a.content.replaceChild(a.childCount-1,Kh(a.lastChild,t-1)),o=a.contentMatchAt(a.childCount).fillBefore(ie.empty,!0);return a.copy(s.append(o))}function Ha(a,t,s,o,c,d){let p=t<0?a.firstChild:a.lastChild,x=p.content;return a.childCount>1&&(d=0),c<o-1&&(x=Ha(x,t,s,o,c+1,d)),c>=s&&(x=t<0?p.contentMatchAt(0).fillBefore(x,d<=c).append(x):x.append(p.contentMatchAt(p.childCount).fillBefore(ie.empty,!0))),a.replaceChild(t<0?0:a.childCount-1,p.copy(x))}function vc(a,t,s){return t<a.openStart&&(a=new oe(Ha(a.content,-1,t,a.openStart,0,a.openEnd),t,a.openEnd)),s<a.openEnd&&(a=new oe(Ha(a.content,1,s,a.openEnd,0,0),a.openStart,s)),a}const Qh={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wc=null;function ed(){return wc||(wc=document.implementation.createHTMLDocument("title"))}let ua=null;function Sg(a){let t=window.trustedTypes;return t?(ua||(ua=t.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),ua.createHTML(a)):a}function Cg(a){let t=/^(\s*<meta [^>]*>)*/.exec(a);t&&(a=a.slice(t[0].length));let s=ed().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(a),c;if((c=o&&Qh[o[1].toLowerCase()])&&(a=c.map(d=>"<"+d+">").join("")+a+c.map(d=>"</"+d+">").reverse().join("")),s.innerHTML=Sg(a),c)for(let d=0;d<c.length;d++)s=s.querySelector(c[d])||s;return s}function Ag(a){let t=a.querySelectorAll(ht?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<t.length;s++){let o=t[s];o.childNodes.length==1&&o.textContent==" "&&o.parentNode&&o.parentNode.replaceChild(a.ownerDocument.createTextNode(" "),o)}}function Mg(a,t){if(!a.size)return a;let s=a.content.firstChild.type.schema,o;try{o=JSON.parse(t)}catch{return a}let{content:c,openStart:d,openEnd:p}=a;for(let x=o.length-2;x>=0;x-=2){let w=s.nodes[o[x]];if(!w||w.hasRequiredAttrs())break;c=ie.from(w.create(o[x+1],c)),d++,p++}return new oe(c,d,p)}const xt={},bt={},Tg={touchstart:!0,touchmove:!0};class Og{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Eg(a){for(let t in xt){let s=xt[t];a.dom.addEventListener(t,a.input.eventHandlers[t]=o=>{Lg(a,o)&&!eo(a,o)&&(a.editable||!(o.type in bt))&&s(a,o)},Tg[t]?{passive:!0}:void 0)}mt&&a.dom.addEventListener("input",()=>null),Xa(a)}function ki(a,t){a.input.lastSelectionOrigin=t,a.input.lastSelectionTime=Date.now()}function Ig(a){a.domObserver.stop();for(let t in a.input.eventHandlers)a.dom.removeEventListener(t,a.input.eventHandlers[t]);clearTimeout(a.input.composingTimeout),clearTimeout(a.input.lastIOSEnterFallbackTimeout)}function Xa(a){a.someProp("handleDOMEvents",t=>{for(let s in t)a.input.eventHandlers[s]||a.dom.addEventListener(s,a.input.eventHandlers[s]=o=>eo(a,o))})}function eo(a,t){return a.someProp("handleDOMEvents",s=>{let o=s[t.type];return o?o(a,t)||t.defaultPrevented:!1})}function Lg(a,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let s=t.target;s!=a.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(t))return!1;return!0}function Pg(a,t){!eo(a,t)&&xt[t.type]&&(a.editable||!(t.type in bt))&&xt[t.type](a,t)}bt.keydown=(a,t)=>{let s=t;if(a.input.shiftKey=s.keyCode==16||s.shiftKey,!id(a,s)&&(a.input.lastKeyCode=s.keyCode,a.input.lastKeyCodeTime=Date.now(),!(ai&&ht&&s.keyCode==13)))if(s.keyCode!=229&&a.domObserver.forceFlush(),As&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let o=Date.now();a.input.lastIOSEnter=o,a.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{a.input.lastIOSEnter==o&&(a.someProp("handleKeyDown",c=>c(a,_i(13,"Enter"))),a.input.lastIOSEnter=0)},200)}else a.someProp("handleKeyDown",o=>o(a,s))||vg(a,s)?s.preventDefault():ki(a,"key")};bt.keyup=(a,t)=>{t.keyCode==16&&(a.input.shiftKey=!1)};bt.keypress=(a,t)=>{let s=t;if(id(a,s)||!s.charCode||s.ctrlKey&&!s.altKey||Ft&&s.metaKey)return;if(a.someProp("handleKeyPress",c=>c(a,s))){s.preventDefault();return}let o=a.state.selection;if(!(o instanceof we)||!o.$from.sameParent(o.$to)){let c=String.fromCharCode(s.charCode);!/[\r\n]/.test(c)&&!a.someProp("handleTextInput",d=>d(a,o.$from.pos,o.$to.pos,c))&&a.dispatch(a.state.tr.insertText(c).scrollIntoView()),s.preventDefault()}};function sr(a){return{left:a.clientX,top:a.clientY}}function Ng(a,t){let s=t.x-a.clientX,o=t.y-a.clientY;return s*s+o*o<100}function to(a,t,s,o,c){if(o==-1)return!1;let d=a.state.doc.resolve(o);for(let p=d.depth+1;p>0;p--)if(a.someProp(t,x=>p>d.depth?x(a,s,d.nodeAfter,d.before(p),c,!0):x(a,s,d.node(p),d.before(p),c,!1)))return!0;return!1}function ks(a,t,s){if(a.focused||a.focus(),a.state.selection.eq(t))return;let o=a.state.tr.setSelection(t);o.setMeta("pointer",!0),a.dispatch(o)}function Dg(a,t){if(t==-1)return!1;let s=a.state.doc.resolve(t),o=s.nodeAfter;return o&&o.isAtom&&ge.isSelectable(o)?(ks(a,new ge(s)),!0):!1}function Rg(a,t){if(t==-1)return!1;let s=a.state.selection,o,c;s instanceof ge&&(o=s.node);let d=a.state.doc.resolve(t);for(let p=d.depth+1;p>0;p--){let x=p>d.depth?d.nodeAfter:d.node(p);if(ge.isSelectable(x)){o&&s.$from.depth>0&&p>=s.$from.depth&&d.before(s.$from.depth+1)==s.$from.pos?c=d.before(s.$from.depth):c=d.before(p);break}}return c!=null?(ks(a,ge.create(a.state.doc,c)),!0):!1}function zg(a,t,s,o,c){return to(a,"handleClickOn",t,s,o)||a.someProp("handleClick",d=>d(a,t,o))||(c?Rg(a,s):Dg(a,s))}function Fg(a,t,s,o){return to(a,"handleDoubleClickOn",t,s,o)||a.someProp("handleDoubleClick",c=>c(a,t,o))}function Bg(a,t,s,o){return to(a,"handleTripleClickOn",t,s,o)||a.someProp("handleTripleClick",c=>c(a,t,o))||Hg(a,s,o)}function Hg(a,t,s){if(s.button!=0)return!1;let o=a.state.doc;if(t==-1)return o.inlineContent?(ks(a,we.create(o,0,o.content.size)),!0):!1;let c=o.resolve(t);for(let d=c.depth+1;d>0;d--){let p=d>c.depth?c.nodeAfter:c.node(d),x=c.before(d);if(p.inlineContent)ks(a,we.create(o,x+1,x+1+p.content.size));else if(ge.isSelectable(p))ks(a,ge.create(o,x));else continue;return!0}}function io(a){return jn(a)}const td=Ft?"metaKey":"ctrlKey";xt.mousedown=(a,t)=>{let s=t;a.input.shiftKey=s.shiftKey;let o=io(a),c=Date.now(),d="singleClick";c-a.input.lastClick.time<500&&Ng(s,a.input.lastClick)&&!s[td]&&(a.input.lastClick.type=="singleClick"?d="doubleClick":a.input.lastClick.type=="doubleClick"&&(d="tripleClick")),a.input.lastClick={time:c,x:s.clientX,y:s.clientY,type:d};let p=a.posAtCoords(sr(s));p&&(d=="singleClick"?(a.input.mouseDown&&a.input.mouseDown.done(),a.input.mouseDown=new Xg(a,p,s,!!o)):(d=="doubleClick"?Fg:Bg)(a,p.pos,p.inside,s)?s.preventDefault():ki(a,"pointer"))};class Xg{constructor(t,s,o,c){this.view=t,this.pos=s,this.event=o,this.flushed=c,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!o[td],this.allowDefault=o.shiftKey;let d,p;if(s.inside>-1)d=t.state.doc.nodeAt(s.inside),p=s.inside;else{let M=t.state.doc.resolve(s.pos);d=M.parent,p=M.depth?M.before():0}const x=c?null:o.target,w=x?t.docView.nearestDesc(x,!0):null;this.target=w&&w.dom.nodeType==1?w.dom:null;let{selection:S}=t.state;(o.button==0&&d.type.spec.draggable&&d.type.spec.selectable!==!1||S instanceof ge&&S.from<=p&&S.to>p)&&(this.mightDrag={node:d,pos:p,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ki(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>oi(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(sr(t))),this.updateAllowDefault(t),this.allowDefault||!s?ki(this.view,"pointer"):zg(this.view,s.pos,s.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||mt&&this.mightDrag&&!this.mightDrag.node.isAtom||ht&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(ks(this.view,ke.near(this.view.state.doc.resolve(s.pos))),t.preventDefault()):ki(this.view,"pointer")}move(t){this.updateAllowDefault(t),ki(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}xt.touchstart=a=>{a.input.lastTouch=Date.now(),io(a),ki(a,"pointer")};xt.touchmove=a=>{a.input.lastTouch=Date.now(),ki(a,"pointer")};xt.contextmenu=a=>io(a);function id(a,t){return a.composing?!0:mt&&Math.abs(t.timeStamp-a.input.compositionEndedAt)<500?(a.input.compositionEndedAt=-2e8,!0):!1}const Yg=ai?5e3:-1;bt.compositionstart=bt.compositionupdate=a=>{if(!a.composing){a.domObserver.flush();let{state:t}=a,s=t.selection.$to;if(t.selection instanceof we&&(t.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(o=>o.type.spec.inclusive===!1)))a.markCursor=a.state.storedMarks||s.marks(),jn(a,!0),a.markCursor=null;else if(jn(a,!t.selection.empty),Gt&&t.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let o=a.domSelectionRange();for(let c=o.focusNode,d=o.focusOffset;c&&c.nodeType==1&&d!=0;){let p=d<0?c.lastChild:c.childNodes[d-1];if(!p)break;if(p.nodeType==3){let x=a.domSelection();x&&x.collapse(p,p.nodeValue.length);break}else c=p,d=-1}}a.input.composing=!0}sd(a,Yg)};bt.compositionend=(a,t)=>{a.composing&&(a.input.composing=!1,a.input.compositionEndedAt=t.timeStamp,a.input.compositionPendingChanges=a.domObserver.pendingRecords().length?a.input.compositionID:0,a.input.compositionNode=null,a.input.compositionPendingChanges&&Promise.resolve().then(()=>a.domObserver.flush()),a.input.compositionID++,sd(a,20))};function sd(a,t){clearTimeout(a.input.composingTimeout),t>-1&&(a.input.composingTimeout=setTimeout(()=>jn(a),t))}function nd(a){for(a.composing&&(a.input.composing=!1,a.input.compositionEndedAt=_g());a.input.compositionNodes.length>0;)a.input.compositionNodes.pop().markParentsDirty()}function Wg(a){let t=a.domSelectionRange();if(!t.focusNode)return null;let s=Dp(t.focusNode,t.focusOffset),o=Rp(t.focusNode,t.focusOffset);if(s&&o&&s!=o){let c=o.pmViewDesc,d=a.domObserver.lastChangedTextNode;if(s==d||o==d)return d;if(!c||!c.isText(o.nodeValue))return o;if(a.input.compositionNode==o){let p=s.pmViewDesc;if(!(!p||!p.isText(s.nodeValue)))return o}}return s||o}function _g(){let a=document.createEvent("Event");return a.initEvent("event",!0,!0),a.timeStamp}function jn(a,t=!1){if(!(ai&&a.domObserver.flushingSoon>=0)){if(a.domObserver.forceFlush(),nd(a),t||a.docView&&a.docView.dirty){let s=Ka(a);return s&&!s.eq(a.state.selection)?a.dispatch(a.state.tr.setSelection(s)):(a.markCursor||t)&&!a.state.selection.empty?a.dispatch(a.state.tr.deleteSelection()):a.updateState(a.state),!0}return!1}}function jg(a,t){if(!a.dom.parentNode)return;let s=a.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(t),s.style.cssText="position: fixed; left: -10000px; top: 10px";let o=getSelection(),c=document.createRange();c.selectNodeContents(t),a.dom.blur(),o.removeAllRanges(),o.addRange(c),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),a.focus()},50)}const tn=St&&Ai<15||As&&Xp<604;xt.copy=bt.cut=(a,t)=>{let s=t,o=a.state.selection,c=s.type=="cut";if(o.empty)return;let d=tn?null:s.clipboardData,p=o.content(),{dom:x,text:w}=$h(a,p);d?(s.preventDefault(),d.clearData(),d.setData("text/html",x.innerHTML),d.setData("text/plain",w)):jg(a,x),c&&a.dispatch(a.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Vg(a){return a.openStart==0&&a.openEnd==0&&a.content.childCount==1?a.content.firstChild:null}function Gg(a,t){if(!a.dom.parentNode)return;let s=a.input.shiftKey||a.state.selection.$from.parent.type.spec.code,o=a.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus();let c=a.input.shiftKey&&a.input.lastKeyCode!=45;setTimeout(()=>{a.focus(),o.parentNode&&o.parentNode.removeChild(o),s?sn(a,o.value,null,c,t):sn(a,o.textContent,o.innerHTML,c,t)},50)}function sn(a,t,s,o,c){let d=Uh(a,t,s,o,a.state.selection.$from);if(a.someProp("handlePaste",w=>w(a,c,d||oe.empty)))return!0;if(!d)return!1;let p=Vg(d),x=p?a.state.tr.replaceSelectionWith(p,o):a.state.tr.replaceSelection(d);return a.dispatch(x.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function rd(a){let t=a.getData("text/plain")||a.getData("Text");if(t)return t;let s=a.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}bt.paste=(a,t)=>{let s=t;if(a.composing&&!ai)return;let o=tn?null:s.clipboardData,c=a.input.shiftKey&&a.input.lastKeyCode!=45;o&&sn(a,rd(o),o.getData("text/html"),c,s)?s.preventDefault():Gg(a,s)};class ad{constructor(t,s,o){this.slice=t,this.move=s,this.node=o}}const od=Ft?"altKey":"ctrlKey";xt.dragstart=(a,t)=>{let s=t,o=a.input.mouseDown;if(o&&o.done(),!s.dataTransfer)return;let c=a.state.selection,d=c.empty?null:a.posAtCoords(sr(s)),p;if(!(d&&d.pos>=c.from&&d.pos<=(c instanceof ge?c.to-1:c.to))){if(o&&o.mightDrag)p=ge.create(a.state.doc,o.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let E=a.docView.nearestDesc(s.target,!0);E&&E.node.type.spec.draggable&&E!=a.docView&&(p=ge.create(a.state.doc,E.posBefore))}}let x=(p||a.state.selection).content(),{dom:w,text:S,slice:M}=$h(a,x);(!s.dataTransfer.files.length||!ht||Ph>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(tn?"Text":"text/html",w.innerHTML),s.dataTransfer.effectAllowed="copyMove",tn||s.dataTransfer.setData("text/plain",S),a.dragging=new ad(M,!s[od],p)};xt.dragend=a=>{let t=a.dragging;window.setTimeout(()=>{a.dragging==t&&(a.dragging=null)},50)};bt.dragover=bt.dragenter=(a,t)=>t.preventDefault();bt.drop=(a,t)=>{let s=t,o=a.dragging;if(a.dragging=null,!s.dataTransfer)return;let c=a.posAtCoords(sr(s));if(!c)return;let d=a.state.doc.resolve(c.pos),p=o&&o.slice;p?a.someProp("transformPasted",R=>{p=R(p,a)}):p=Uh(a,rd(s.dataTransfer),tn?null:s.dataTransfer.getData("text/html"),!1,d);let x=!!(o&&!s[od]);if(a.someProp("handleDrop",R=>R(a,s,p||oe.empty,x))){s.preventDefault();return}if(!p)return;s.preventDefault();let w=p?Ch(a.state.doc,d.pos,p):d.pos;w==null&&(w=d.pos);let S=a.state.tr;if(x){let{node:R}=o;R?R.replace(S):S.deleteSelection()}let M=S.mapping.map(w),E=p.openStart==0&&p.openEnd==0&&p.content.childCount==1,I=S.doc;if(E?S.replaceRangeWith(M,M,p.content.firstChild):S.replaceRange(M,M,p),S.doc.eq(I))return;let D=S.doc.resolve(M);if(E&&ge.isSelectable(p.content.firstChild)&&D.nodeAfter&&D.nodeAfter.sameMarkup(p.content.firstChild))S.setSelection(new ge(D));else{let R=S.mapping.map(w);S.mapping.maps[S.mapping.maps.length-1].forEach((Y,_,$,ne)=>R=ne),S.setSelection(Qa(a,D,S.doc.resolve(R)))}a.focus(),a.dispatch(S.setMeta("uiEvent","drop"))};xt.focus=a=>{a.input.lastFocus=Date.now(),a.focused||(a.domObserver.stop(),a.dom.classList.add("ProseMirror-focused"),a.domObserver.start(),a.focused=!0,setTimeout(()=>{a.docView&&a.hasFocus()&&!a.domObserver.currentSelection.eq(a.domSelectionRange())&&oi(a)},20))};xt.blur=(a,t)=>{let s=t;a.focused&&(a.domObserver.stop(),a.dom.classList.remove("ProseMirror-focused"),a.domObserver.start(),s.relatedTarget&&a.dom.contains(s.relatedTarget)&&a.domObserver.currentSelection.clear(),a.focused=!1)};xt.beforeinput=(a,t)=>{if(ht&&ai&&t.inputType=="deleteContentBackward"){a.domObserver.flushSoon();let{domChangeCount:o}=a.input;setTimeout(()=>{if(a.input.domChangeCount!=o||(a.dom.blur(),a.focus(),a.someProp("handleKeyDown",d=>d(a,_i(8,"Backspace")))))return;let{$cursor:c}=a.state.selection;c&&c.pos>0&&a.dispatch(a.state.tr.delete(c.pos-1,c.pos).scrollIntoView())},50)}};for(let a in bt)xt[a]=bt[a];function nn(a,t){if(a==t)return!0;for(let s in a)if(a[s]!==t[s])return!1;for(let s in t)if(!(s in a))return!1;return!0}class Vn{constructor(t,s){this.toDOM=t,this.spec=s||Zi,this.side=this.spec.side||0}map(t,s,o,c){let{pos:d,deleted:p}=t.mapResult(s.from+c,this.side<0?-1:1);return p?null:new Ht(d-o,d-o,this)}valid(){return!0}eq(t){return this==t||t instanceof Vn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&nn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Ti{constructor(t,s){this.attrs=t,this.spec=s||Zi}map(t,s,o,c){let d=t.map(s.from+c,this.spec.inclusiveStart?-1:1)-o,p=t.map(s.to+c,this.spec.inclusiveEnd?1:-1)-o;return d>=p?null:new Ht(d,p,this)}valid(t,s){return s.from<s.to}eq(t){return this==t||t instanceof Ti&&nn(this.attrs,t.attrs)&&nn(this.spec,t.spec)}static is(t){return t.type instanceof Ti}destroy(){}}class so{constructor(t,s){this.attrs=t,this.spec=s||Zi}map(t,s,o,c){let d=t.mapResult(s.from+c,1);if(d.deleted)return null;let p=t.mapResult(s.to+c,-1);return p.deleted||p.pos<=d.pos?null:new Ht(d.pos-o,p.pos-o,this)}valid(t,s){let{index:o,offset:c}=t.content.findIndex(s.from),d;return c==s.from&&!(d=t.child(o)).isText&&c+d.nodeSize==s.to}eq(t){return this==t||t instanceof so&&nn(this.attrs,t.attrs)&&nn(this.spec,t.spec)}destroy(){}}class Ht{constructor(t,s,o){this.from=t,this.to=s,this.type=o}copy(t,s){return new Ht(t,s,this.type)}eq(t,s=0){return this.type.eq(t.type)&&this.from+s==t.from&&this.to+s==t.to}map(t,s,o){return this.type.map(t,this,s,o)}static widget(t,s,o){return new Ht(t,t,new Vn(s,o))}static inline(t,s,o,c){return new Ht(t,s,new Ti(o,c))}static node(t,s,o,c){return new Ht(t,s,new so(o,c))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ti}get widget(){return this.type instanceof Vn}}const ms=[],Zi={};class Ue{constructor(t,s){this.local=t.length?t:ms,this.children=s.length?s:ms}static create(t,s){return s.length?Gn(s,t,0,Zi):ct}find(t,s,o){let c=[];return this.findInner(t??0,s??1e9,c,0,o),c}findInner(t,s,o,c,d){for(let p=0;p<this.local.length;p++){let x=this.local[p];x.from<=s&&x.to>=t&&(!d||d(x.spec))&&o.push(x.copy(x.from+c,x.to+c))}for(let p=0;p<this.children.length;p+=3)if(this.children[p]<s&&this.children[p+1]>t){let x=this.children[p]+1;this.children[p+2].findInner(t-x,s-x,o,c+x,d)}}map(t,s,o){return this==ct||t.maps.length==0?this:this.mapInner(t,s,0,0,o||Zi)}mapInner(t,s,o,c,d){let p;for(let x=0;x<this.local.length;x++){let w=this.local[x].map(t,o,c);w&&w.type.valid(s,w)?(p||(p=[])).push(w):d.onRemove&&d.onRemove(this.local[x].spec)}return this.children.length?qg(this.children,p||[],t,s,o,c,d):p?new Ue(p.sort(Ki),ms):ct}add(t,s){return s.length?this==ct?Ue.create(t,s):this.addInner(t,s,0):this}addInner(t,s,o){let c,d=0;t.forEach((x,w)=>{let S=w+o,M;if(M=cd(s,x,S)){for(c||(c=this.children.slice());d<c.length&&c[d]<w;)d+=3;c[d]==w?c[d+2]=c[d+2].addInner(x,M,S+1):c.splice(d,0,w,w+x.nodeSize,Gn(M,x,S+1,Zi)),d+=3}});let p=ld(d?hd(s):s,-o);for(let x=0;x<p.length;x++)p[x].type.valid(t,p[x])||p.splice(x--,1);return new Ue(p.length?this.local.concat(p).sort(Ki):this.local,c||this.children)}remove(t){return t.length==0||this==ct?this:this.removeInner(t,0)}removeInner(t,s){let o=this.children,c=this.local;for(let d=0;d<o.length;d+=3){let p,x=o[d]+s,w=o[d+1]+s;for(let M=0,E;M<t.length;M++)(E=t[M])&&E.from>x&&E.to<w&&(t[M]=null,(p||(p=[])).push(E));if(!p)continue;o==this.children&&(o=this.children.slice());let S=o[d+2].removeInner(p,x+1);S!=ct?o[d+2]=S:(o.splice(d,3),d-=3)}if(c.length){for(let d=0,p;d<t.length;d++)if(p=t[d])for(let x=0;x<c.length;x++)c[x].eq(p,s)&&(c==this.local&&(c=this.local.slice()),c.splice(x--,1))}return o==this.children&&c==this.local?this:c.length||o.length?new Ue(c,o):ct}forChild(t,s){if(this==ct)return this;if(s.isLeaf)return Ue.empty;let o,c;for(let x=0;x<this.children.length;x+=3)if(this.children[x]>=t){this.children[x]==t&&(o=this.children[x+2]);break}let d=t+1,p=d+s.content.size;for(let x=0;x<this.local.length;x++){let w=this.local[x];if(w.from<p&&w.to>d&&w.type instanceof Ti){let S=Math.max(d,w.from)-d,M=Math.min(p,w.to)-d;S<M&&(c||(c=[])).push(w.copy(S,M))}}if(c){let x=new Ue(c.sort(Ki),ms);return o?new xi([x,o]):x}return o||ct}eq(t){if(this==t)return!0;if(!(t instanceof Ue)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(t.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=t.children[s]||this.children[s+1]!=t.children[s+1]||!this.children[s+2].eq(t.children[s+2]))return!1;return!0}locals(t){return no(this.localsInner(t))}localsInner(t){if(this==ct)return ms;if(t.inlineContent||!this.local.some(Ti.is))return this.local;let s=[];for(let o=0;o<this.local.length;o++)this.local[o].type instanceof Ti||s.push(this.local[o]);return s}forEachSet(t){t(this)}}Ue.empty=new Ue([],[]);Ue.removeOverlap=no;const ct=Ue.empty;class xi{constructor(t){this.members=t}map(t,s){const o=this.members.map(c=>c.map(t,s,Zi));return xi.from(o)}forChild(t,s){if(s.isLeaf)return Ue.empty;let o=[];for(let c=0;c<this.members.length;c++){let d=this.members[c].forChild(t,s);d!=ct&&(d instanceof xi?o=o.concat(d.members):o.push(d))}return xi.from(o)}eq(t){if(!(t instanceof xi)||t.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(t.members[s]))return!1;return!0}locals(t){let s,o=!0;for(let c=0;c<this.members.length;c++){let d=this.members[c].localsInner(t);if(d.length)if(!s)s=d;else{o&&(s=s.slice(),o=!1);for(let p=0;p<d.length;p++)s.push(d[p])}}return s?no(o?s:s.sort(Ki)):ms}static from(t){switch(t.length){case 0:return ct;case 1:return t[0];default:return new xi(t.every(s=>s instanceof Ue)?t:t.reduce((s,o)=>s.concat(o instanceof Ue?o:o.members),[]))}}forEachSet(t){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(t)}}function qg(a,t,s,o,c,d,p){let x=a.slice();for(let S=0,M=d;S<s.maps.length;S++){let E=0;s.maps[S].forEach((I,D,R,Y)=>{let _=Y-R-(D-I);for(let $=0;$<x.length;$+=3){let ne=x[$+1];if(ne<0||I>ne+M-E)continue;let X=x[$]+M-E;D>=X?x[$+1]=I<=X?-2:-1:I>=M&&_&&(x[$]+=_,x[$+1]+=_)}E+=_}),M=s.maps[S].map(M,-1)}let w=!1;for(let S=0;S<x.length;S+=3)if(x[S+1]<0){if(x[S+1]==-2){w=!0,x[S+1]=-1;continue}let M=s.map(a[S]+d),E=M-c;if(E<0||E>=o.content.size){w=!0;continue}let I=s.map(a[S+1]+d,-1),D=I-c,{index:R,offset:Y}=o.content.findIndex(E),_=o.maybeChild(R);if(_&&Y==E&&Y+_.nodeSize==D){let $=x[S+2].mapInner(s,_,M+1,a[S]+d+1,p);$!=ct?(x[S]=E,x[S+1]=D,x[S+2]=$):(x[S+1]=-2,w=!0)}else w=!0}if(w){let S=$g(x,a,t,s,c,d,p),M=Gn(S,o,0,p);t=M.local;for(let E=0;E<x.length;E+=3)x[E+1]<0&&(x.splice(E,3),E-=3);for(let E=0,I=0;E<M.children.length;E+=3){let D=M.children[E];for(;I<x.length&&x[I]<D;)I+=3;x.splice(I,0,M.children[E],M.children[E+1],M.children[E+2])}}return new Ue(t.sort(Ki),x)}function ld(a,t){if(!t||!a.length)return a;let s=[];for(let o=0;o<a.length;o++){let c=a[o];s.push(new Ht(c.from+t,c.to+t,c.type))}return s}function $g(a,t,s,o,c,d,p){function x(w,S){for(let M=0;M<w.local.length;M++){let E=w.local[M].map(o,c,S);E?s.push(E):p.onRemove&&p.onRemove(w.local[M].spec)}for(let M=0;M<w.children.length;M+=3)x(w.children[M+2],w.children[M]+S+1)}for(let w=0;w<a.length;w+=3)a[w+1]==-1&&x(a[w+2],t[w]+d+1);return s}function cd(a,t,s){if(t.isLeaf)return null;let o=s+t.nodeSize,c=null;for(let d=0,p;d<a.length;d++)(p=a[d])&&p.from>s&&p.to<o&&((c||(c=[])).push(p),a[d]=null);return c}function hd(a){let t=[];for(let s=0;s<a.length;s++)a[s]!=null&&t.push(a[s]);return t}function Gn(a,t,s,o){let c=[],d=!1;t.forEach((x,w)=>{let S=cd(a,x,w+s);if(S){d=!0;let M=Gn(S,x,s+w+1,o);M!=ct&&c.push(w,w+x.nodeSize,M)}});let p=ld(d?hd(a):a,-s).sort(Ki);for(let x=0;x<p.length;x++)p[x].type.valid(t,p[x])||(o.onRemove&&o.onRemove(p[x].spec),p.splice(x--,1));return p.length||c.length?new Ue(p,c):ct}function Ki(a,t){return a.from-t.from||a.to-t.to}function no(a){let t=a;for(let s=0;s<t.length-1;s++){let o=t[s];if(o.from!=o.to)for(let c=s+1;c<t.length;c++){let d=t[c];if(d.from==o.from){d.to!=o.to&&(t==a&&(t=a.slice()),t[c]=d.copy(d.from,o.to),kc(t,c+1,d.copy(o.to,d.to)));continue}else{d.from<o.to&&(t==a&&(t=a.slice()),t[s]=o.copy(o.from,d.from),kc(t,c,o.copy(d.from,o.to)));break}}}return t}function kc(a,t,s){for(;t<a.length&&Ki(s,a[t])>0;)t++;a.splice(t,0,s)}function fa(a){let t=[];return a.someProp("decorations",s=>{let o=s(a.state);o&&o!=ct&&t.push(o)}),a.cursorWrapper&&t.push(Ue.create(a.state.doc,[a.cursorWrapper.deco])),xi.from(t)}const Ug={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Jg=St&&Ai<=11;class Zg{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Kg{constructor(t,s){this.view=t,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zg,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(o=>{for(let c=0;c<o.length;c++)this.queue.push(o[c]);St&&Ai<=11&&o.some(c=>c.type=="childList"&&c.removedNodes.length||c.type=="characterData"&&c.oldValue.length>c.target.nodeValue.length)?this.flushSoon():this.flush()}),Jg&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ug)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let s=0;s<t.length;s++)this.queue.push(t[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(pc(this.view)){if(this.suppressingSelectionUpdates)return oi(this.view);if(St&&Ai<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ts(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let s=new Set,o;for(let d=t.focusNode;d;d=en(d))s.add(d);for(let d=t.anchorNode;d;d=en(d))if(s.has(d)){o=d;break}let c=o&&this.view.docView.nearestDesc(o);if(c&&c.ignoreMutation({type:"selection",target:o.nodeType==3?o.parentNode:o}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let o=t.domSelectionRange(),c=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(o)&&pc(t)&&!this.ignoreSelectionChange(o),d=-1,p=-1,x=!1,w=[];if(t.editable)for(let M=0;M<s.length;M++){let E=this.registerMutation(s[M],w);E&&(d=d<0?E.from:Math.min(E.from,d),p=p<0?E.to:Math.max(E.to,p),E.typeOver&&(x=!0))}if(Gt&&w.length){let M=w.filter(E=>E.nodeName=="BR");if(M.length==2){let[E,I]=M;E.parentNode&&E.parentNode.parentNode==I.parentNode?I.remove():E.remove()}else{let{focusNode:E}=this.currentSelection;for(let I of M){let D=I.parentNode;D&&D.nodeName=="LI"&&(!E||tm(t,E)!=D)&&I.remove()}}}let S=null;d<0&&c&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&tr(o)&&(S=Ka(t))&&S.eq(ke.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,oi(t),this.currentSelection.set(o),t.scrollToSelection()):(d>-1||c)&&(d>-1&&(t.docView.markDirty(d,p),Qg(t)),this.handleDOMChange(d,p,x,w),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(o)||oi(t),this.currentSelection.set(o))}registerMutation(t,s){if(s.indexOf(t.target)>-1)return null;let o=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(o==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!o||o.ignoreMutation(t))return null;if(t.type=="childList"){for(let M=0;M<t.addedNodes.length;M++){let E=t.addedNodes[M];s.push(E),E.nodeType==3&&(this.lastChangedTextNode=E)}if(o.contentDOM&&o.contentDOM!=o.dom&&!o.contentDOM.contains(t.target))return{from:o.posBefore,to:o.posAfter};let c=t.previousSibling,d=t.nextSibling;if(St&&Ai<=11&&t.addedNodes.length)for(let M=0;M<t.addedNodes.length;M++){let{previousSibling:E,nextSibling:I}=t.addedNodes[M];(!E||Array.prototype.indexOf.call(t.addedNodes,E)<0)&&(c=E),(!I||Array.prototype.indexOf.call(t.addedNodes,I)<0)&&(d=I)}let p=c&&c.parentNode==t.target?nt(c)+1:0,x=o.localPosFromDOM(t.target,p,-1),w=d&&d.parentNode==t.target?nt(d):t.target.childNodes.length,S=o.localPosFromDOM(t.target,w,1);return{from:x,to:S}}else return t.type=="attributes"?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:(this.lastChangedTextNode=t.target,{from:o.posAtStart,to:o.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Sc=new WeakMap,Cc=!1;function Qg(a){if(!Sc.has(a)&&(Sc.set(a,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(a.dom).whiteSpace)!==-1)){if(a.requiresGeckoHackNode=Gt,Cc)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Cc=!0}}function Ac(a,t){let s=t.startContainer,o=t.startOffset,c=t.endContainer,d=t.endOffset,p=a.domAtPos(a.state.selection.anchor);return ts(p.node,p.offset,c,d)&&([s,o,c,d]=[c,d,s,o]),{anchorNode:s,anchorOffset:o,focusNode:c,focusOffset:d}}function em(a,t){if(t.getComposedRanges){let c=t.getComposedRanges(a.root)[0];if(c)return Ac(a,c)}let s;function o(c){c.preventDefault(),c.stopImmediatePropagation(),s=c.getTargetRanges()[0]}return a.dom.addEventListener("beforeinput",o,!0),document.execCommand("indent"),a.dom.removeEventListener("beforeinput",o,!0),s?Ac(a,s):null}function tm(a,t){for(let s=t.parentNode;s&&s!=a.dom;s=s.parentNode){let o=a.docView.nearestDesc(s,!0);if(o&&o.node.isBlock)return s}return null}function im(a,t,s){let{node:o,fromOffset:c,toOffset:d,from:p,to:x}=a.docView.parseRange(t,s),w=a.domSelectionRange(),S,M=w.anchorNode;if(M&&a.dom.contains(M.nodeType==1?M:M.parentNode)&&(S=[{node:M,offset:w.anchorOffset}],tr(w)||S.push({node:w.focusNode,offset:w.focusOffset})),ht&&a.input.lastKeyCode===8)for(let _=d;_>c;_--){let $=o.childNodes[_-1],ne=$.pmViewDesc;if($.nodeName=="BR"&&!ne){d=_;break}if(!ne||ne.size)break}let E=a.state.doc,I=a.someProp("domParser")||Ci.fromSchema(a.state.schema),D=E.resolve(p),R=null,Y=I.parse(o,{topNode:D.parent,topMatch:D.parent.contentMatchAt(D.index()),topOpen:!0,from:c,to:d,preserveWhitespace:D.parent.type.whitespace=="pre"?"full":!0,findPositions:S,ruleFromNode:sm,context:D});if(S&&S[0].pos!=null){let _=S[0].pos,$=S[1]&&S[1].pos;$==null&&($=_),R={anchor:_+p,head:$+p}}return{doc:Y,sel:R,from:p,to:x}}function sm(a){let t=a.pmViewDesc;if(t)return t.parseRule();if(a.nodeName=="BR"&&a.parentNode){if(mt&&/^(ul|ol)$/i.test(a.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(a.parentNode.lastChild==a||mt&&/^(tr|table)$/i.test(a.parentNode.nodeName))return{ignore:!0}}else if(a.nodeName=="IMG"&&a.getAttribute("mark-placeholder"))return{ignore:!0};return null}const nm=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rm(a,t,s,o,c){let d=a.input.compositionPendingChanges||(a.composing?a.input.compositionID:0);if(a.input.compositionPendingChanges=0,t<0){let ue=a.input.lastSelectionTime>Date.now()-50?a.input.lastSelectionOrigin:null,Fe=Ka(a,ue);if(Fe&&!a.state.selection.eq(Fe)){if(ht&&ai&&a.input.lastKeyCode===13&&Date.now()-100<a.input.lastKeyCodeTime&&a.someProp("handleKeyDown",Ye=>Ye(a,_i(13,"Enter"))))return;let Pe=a.state.tr.setSelection(Fe);ue=="pointer"?Pe.setMeta("pointer",!0):ue=="key"&&Pe.scrollIntoView(),d&&Pe.setMeta("composition",d),a.dispatch(Pe)}return}let p=a.state.doc.resolve(t),x=p.sharedDepth(s);t=p.before(x+1),s=a.state.doc.resolve(s).after(x+1);let w=a.state.selection,S=im(a,t,s),M=a.state.doc,E=M.slice(S.from,S.to),I,D;a.input.lastKeyCode===8&&Date.now()-100<a.input.lastKeyCodeTime?(I=a.state.selection.to,D="end"):(I=a.state.selection.from,D="start"),a.input.lastKeyCode=null;let R=lm(E.content,S.doc.content,S.from,I,D);if(R&&a.input.domChangeCount++,(As&&a.input.lastIOSEnter>Date.now()-225||ai)&&c.some(ue=>ue.nodeType==1&&!nm.test(ue.nodeName))&&(!R||R.endA>=R.endB)&&a.someProp("handleKeyDown",ue=>ue(a,_i(13,"Enter")))){a.input.lastIOSEnter=0;return}if(!R)if(o&&w instanceof we&&!w.empty&&w.$head.sameParent(w.$anchor)&&!a.composing&&!(S.sel&&S.sel.anchor!=S.sel.head))R={start:w.from,endA:w.to,endB:w.to};else{if(S.sel){let ue=Mc(a,a.state.doc,S.sel);if(ue&&!ue.eq(a.state.selection)){let Fe=a.state.tr.setSelection(ue);d&&Fe.setMeta("composition",d),a.dispatch(Fe)}}return}a.state.selection.from<a.state.selection.to&&R.start==R.endB&&a.state.selection instanceof we&&(R.start>a.state.selection.from&&R.start<=a.state.selection.from+2&&a.state.selection.from>=S.from?R.start=a.state.selection.from:R.endA<a.state.selection.to&&R.endA>=a.state.selection.to-2&&a.state.selection.to<=S.to&&(R.endB+=a.state.selection.to-R.endA,R.endA=a.state.selection.to)),St&&Ai<=11&&R.endB==R.start+1&&R.endA==R.start&&R.start>S.from&&S.doc.textBetween(R.start-S.from-1,R.start-S.from+1)=="  "&&(R.start--,R.endA--,R.endB--);let Y=S.doc.resolveNoCache(R.start-S.from),_=S.doc.resolveNoCache(R.endB-S.from),$=M.resolve(R.start),ne=Y.sameParent(_)&&Y.parent.inlineContent&&$.end()>=R.endA,X;if((As&&a.input.lastIOSEnter>Date.now()-225&&(!ne||c.some(ue=>ue.nodeName=="DIV"||ue.nodeName=="P"))||!ne&&Y.pos<S.doc.content.size&&!Y.sameParent(_)&&(X=ke.findFrom(S.doc.resolve(Y.pos+1),1,!0))&&X.head==_.pos)&&a.someProp("handleKeyDown",ue=>ue(a,_i(13,"Enter")))){a.input.lastIOSEnter=0;return}if(a.state.selection.anchor>R.start&&om(M,R.start,R.endA,Y,_)&&a.someProp("handleKeyDown",ue=>ue(a,_i(8,"Backspace")))){ai&&ht&&a.domObserver.suppressSelectionUpdates();return}ht&&R.endB==R.start&&(a.input.lastChromeDelete=Date.now()),ai&&!ne&&Y.start()!=_.start()&&_.parentOffset==0&&Y.depth==_.depth&&S.sel&&S.sel.anchor==S.sel.head&&S.sel.head==R.endA&&(R.endB-=2,_=S.doc.resolveNoCache(R.endB-S.from),setTimeout(()=>{a.someProp("handleKeyDown",function(ue){return ue(a,_i(13,"Enter"))})},20));let Z=R.start,se=R.endA,ee,te,de;if(ne){if(Y.pos==_.pos)St&&Ai<=11&&Y.parentOffset==0&&(a.domObserver.suppressSelectionUpdates(),setTimeout(()=>oi(a),20)),ee=a.state.tr.delete(Z,se),te=M.resolve(R.start).marksAcross(M.resolve(R.endA));else if(R.endA==R.endB&&(de=am(Y.parent.content.cut(Y.parentOffset,_.parentOffset),$.parent.content.cut($.parentOffset,R.endA-$.start()))))ee=a.state.tr,de.type=="add"?ee.addMark(Z,se,de.mark):ee.removeMark(Z,se,de.mark);else if(Y.parent.child(Y.index()).isText&&Y.index()==_.index()-(_.textOffset?0:1)){let ue=Y.parent.textBetween(Y.parentOffset,_.parentOffset);if(a.someProp("handleTextInput",Fe=>Fe(a,Z,se,ue)))return;ee=a.state.tr.insertText(ue,Z,se)}}if(ee||(ee=a.state.tr.replace(Z,se,S.doc.slice(R.start-S.from,R.endB-S.from))),S.sel){let ue=Mc(a,ee.doc,S.sel);ue&&!(ht&&a.composing&&ue.empty&&(R.start!=R.endB||a.input.lastChromeDelete<Date.now()-100)&&(ue.head==Z||ue.head==ee.mapping.map(se)-1)||St&&ue.empty&&ue.head==Z)&&ee.setSelection(ue)}te&&ee.ensureMarks(te),d&&ee.setMeta("composition",d),a.dispatch(ee.scrollIntoView())}function Mc(a,t,s){return Math.max(s.anchor,s.head)>t.content.size?null:Qa(a,t.resolve(s.anchor),t.resolve(s.head))}function am(a,t){let s=a.firstChild.marks,o=t.firstChild.marks,c=s,d=o,p,x,w;for(let M=0;M<o.length;M++)c=o[M].removeFromSet(c);for(let M=0;M<s.length;M++)d=s[M].removeFromSet(d);if(c.length==1&&d.length==0)x=c[0],p="add",w=M=>M.mark(x.addToSet(M.marks));else if(c.length==0&&d.length==1)x=d[0],p="remove",w=M=>M.mark(x.removeFromSet(M.marks));else return null;let S=[];for(let M=0;M<t.childCount;M++)S.push(w(t.child(M)));if(ie.from(S).eq(a))return{mark:x,type:p}}function om(a,t,s,o,c){if(s-t<=c.pos-o.pos||pa(o,!0,!1)<c.pos)return!1;let d=a.resolve(t);if(!o.parent.isTextblock){let x=d.nodeAfter;return x!=null&&s==t+x.nodeSize}if(d.parentOffset<d.parent.content.size||!d.parent.isTextblock)return!1;let p=a.resolve(pa(d,!0,!0));return!p.parent.isTextblock||p.pos>s||pa(p,!0,!1)<s?!1:o.parent.content.cut(o.parentOffset).eq(p.parent.content)}function pa(a,t,s){let o=a.depth,c=t?a.end():a.pos;for(;o>0&&(t||a.indexAfter(o)==a.node(o).childCount);)o--,c++,t=!1;if(s){let d=a.node(o).maybeChild(a.indexAfter(o));for(;d&&!d.isLeaf;)d=d.firstChild,c++}return c}function lm(a,t,s,o,c){let d=a.findDiffStart(t,s);if(d==null)return null;let{a:p,b:x}=a.findDiffEnd(t,s+a.size,s+t.size);if(c=="end"){let w=Math.max(0,d-Math.min(p,x));o-=p+w-d}if(p<d&&a.size<t.size){let w=o<=d&&o>=p?d-o:0;d-=w,d&&d<t.size&&Tc(t.textBetween(d-1,d+1))&&(d+=w?1:-1),x=d+(x-p),p=d}else if(x<d){let w=o<=d&&o>=x?d-o:0;d-=w,d&&d<a.size&&Tc(a.textBetween(d-1,d+1))&&(d+=w?1:-1),p=d+(p-x),x=d}return{start:d,endA:p,endB:x}}function Tc(a){if(a.length!=2)return!1;let t=a.charCodeAt(0),s=a.charCodeAt(1);return t>=56320&&t<=57343&&s>=55296&&s<=56319}class cm{constructor(t,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Og,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(Pc),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Ic(this),Ec(this),this.nodeViews=Lc(this),this.docView=lc(this.state.doc,Oc(this),fa(this),this.dom,this),this.domObserver=new Kg(this,(o,c,d,p)=>rm(this,o,c,d,p)),this.domObserver.start(),Eg(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let s in t)this._props[s]=t[s];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Xa(this);let s=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Pc),this.directPlugins=t.plugins),this.updateStateInner(t.state,s)}setProps(t){let s={};for(let o in this._props)s[o]=this._props[o];s.state=this.state;for(let o in t)s[o]=t[o];this.update(s)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,s){var o;let c=this.state,d=!1,p=!1;t.storedMarks&&this.composing&&(nd(this),p=!0),this.state=t;let x=c.plugins!=t.plugins||this._props.plugins!=s.plugins;if(x||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let D=Lc(this);dm(D,this.nodeViews)&&(this.nodeViews=D,d=!0)}(x||s.handleDOMEvents!=this._props.handleDOMEvents)&&Xa(this),this.editable=Ic(this),Ec(this);let w=fa(this),S=Oc(this),M=c.plugins!=t.plugins&&!c.doc.eq(t.doc)?"reset":t.scrollToSelection>c.scrollToSelection?"to selection":"preserve",E=d||!this.docView.matchesNode(t.doc,S,w);(E||!t.selection.eq(c.selection))&&(p=!0);let I=M=="preserve"&&p&&this.dom.style.overflowAnchor==null&&_p(this);if(p){this.domObserver.stop();let D=E&&(St||ht)&&!this.composing&&!c.selection.empty&&!t.selection.empty&&hm(c.selection,t.selection);if(E){let R=ht?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Wg(this)),(d||!this.docView.update(t.doc,S,w,this))&&(this.docView.updateOuterDeco(S),this.docView.destroy(),this.docView=lc(t.doc,S,w,this.dom,this)),R&&!this.trackWrites&&(D=!0)}D||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&fg(this))?oi(this,D):(Vh(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(c),!((o=this.dragging)===null||o===void 0)&&o.node&&!c.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,c),M=="reset"?this.dom.scrollTop=0:M=="to selection"?this.scrollToSelection():I&&jp(I)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof ge){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&ic(this,s.getBoundingClientRect(),t)}else ic(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let o=this.directPlugins[s];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let o=this.state.plugins[s];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let o=this.pluginViews[s];o.update&&o.update(this,t)}}updateDraggedNode(t,s){let o=t.node,c=-1;if(this.state.doc.nodeAt(o.from)==o.node)c=o.from;else{let d=o.from+(this.state.doc.content.size-s.doc.content.size);(d>0&&this.state.doc.nodeAt(d))==o.node&&(c=d)}this.dragging=new ad(t.slice,t.move,c<0?void 0:ge.create(this.state.doc,c))}someProp(t,s){let o=this._props&&this._props[t],c;if(o!=null&&(c=s?s(o):o))return c;for(let p=0;p<this.directPlugins.length;p++){let x=this.directPlugins[p].props[t];if(x!=null&&(c=s?s(x):x))return c}let d=this.state.plugins;if(d)for(let p=0;p<d.length;p++){let x=d[p].props[t];if(x!=null&&(c=s?s(x):x))return c}}hasFocus(){if(St){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Vp(this.dom),oi(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return t||document}updateRoot(){this._root=null}posAtCoords(t){return Jp(this,t)}coordsAtPos(t,s=1){return Fh(this,t,s)}domAtPos(t,s=0){return this.docView.domFromPos(t,s)}nodeDOM(t){let s=this.docView.descAt(t);return s?s.nodeDOM:null}posAtDOM(t,s,o=-1){let c=this.docView.posFromDOM(t,s,o);if(c==null)throw new RangeError("DOM position not inside the editor");return c}endOfTextblock(t,s){return tg(this,s||this.state,t)}pasteHTML(t,s){return sn(this,"",t,!1,s||new ClipboardEvent("paste"))}pasteText(t,s){return sn(this,t,null,!0,s||new ClipboardEvent("paste"))}destroy(){this.docView&&(Ig(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fa(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Pp())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return Pg(this,t)}dispatch(t){let s=this._props.dispatchTransaction;s?s.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return t?mt&&this.root.nodeType===11&&Fp(this.dom.ownerDocument)==this.dom&&em(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Oc(a){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(a.editable),a.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(a.state)),s)for(let o in s)o=="class"?t.class+=" "+s[o]:o=="style"?t.style=(t.style?t.style+";":"")+s[o]:!t[o]&&o!="contenteditable"&&o!="nodeName"&&(t[o]=String(s[o]))}),t.translate||(t.translate="no"),[Ht.node(0,a.state.doc.content.size,t)]}function Ec(a){if(a.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),a.cursorWrapper={dom:t,deco:Ht.widget(a.state.selection.from,t,{raw:!0,marks:a.markCursor})}}else a.cursorWrapper=null}function Ic(a){return!a.someProp("editable",t=>t(a.state)===!1)}function hm(a,t){let s=Math.min(a.$anchor.sharedDepth(a.head),t.$anchor.sharedDepth(t.head));return a.$anchor.start(s)!=t.$anchor.start(s)}function Lc(a){let t=Object.create(null);function s(o){for(let c in o)Object.prototype.hasOwnProperty.call(t,c)||(t[c]=o[c])}return a.someProp("nodeViews",s),a.someProp("markViews",s),t}function dm(a,t){let s=0,o=0;for(let c in a){if(a[c]!=t[c])return!0;s++}for(let c in t)o++;return s!=o}function Pc(a){if(a.spec.state||a.spec.filterTransaction||a.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Oi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},um=typeof navigator<"u"&&/Mac/.test(navigator.platform),fm=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rt=0;rt<10;rt++)Oi[48+rt]=Oi[96+rt]=String(rt);for(var rt=1;rt<=24;rt++)Oi[rt+111]="F"+rt;for(var rt=65;rt<=90;rt++)Oi[rt]=String.fromCharCode(rt+32),qn[rt]=String.fromCharCode(rt);for(var ga in Oi)qn.hasOwnProperty(ga)||(qn[ga]=Oi[ga]);function pm(a){var t=um&&a.metaKey&&a.shiftKey&&!a.ctrlKey&&!a.altKey||fm&&a.shiftKey&&a.key&&a.key.length==1||a.key=="Unidentified",s=!t&&a.key||(a.shiftKey?qn:Oi)[a.keyCode]||a.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const gm=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function mm(a){let t=a.split(/-(?!$)/),s=t[t.length-1];s=="Space"&&(s=" ");let o,c,d,p;for(let x=0;x<t.length-1;x++){let w=t[x];if(/^(cmd|meta|m)$/i.test(w))p=!0;else if(/^a(lt)?$/i.test(w))o=!0;else if(/^(c|ctrl|control)$/i.test(w))c=!0;else if(/^s(hift)?$/i.test(w))d=!0;else if(/^mod$/i.test(w))gm?p=!0:c=!0;else throw new Error("Unrecognized modifier name: "+w)}return o&&(s="Alt-"+s),c&&(s="Ctrl-"+s),p&&(s="Meta-"+s),d&&(s="Shift-"+s),s}function xm(a){let t=Object.create(null);for(let s in a)t[mm(s)]=a[s];return t}function ma(a,t,s=!0){return t.altKey&&(a="Alt-"+a),t.ctrlKey&&(a="Ctrl-"+a),t.metaKey&&(a="Meta-"+a),s&&t.shiftKey&&(a="Shift-"+a),a}function bm(a){return new Ct({props:{handleKeyDown:dd(a)}})}function dd(a){let t=xm(a);return function(s,o){let c=pm(o),d,p=t[ma(c,o)];if(p&&p(s.state,s.dispatch,s))return!0;if(c.length==1&&c!=" "){if(o.shiftKey){let x=t[ma(c,o,!1)];if(x&&x(s.state,s.dispatch,s))return!0}if((o.shiftKey||o.altKey||o.metaKey||c.charCodeAt(0)>127)&&(d=Oi[o.keyCode])&&d!=c){let x=t[ma(d,o)];if(x&&x(s.state,s.dispatch,s))return!0}}return!1}}const ym=(a,t)=>a.selection.empty?!1:(t&&t(a.tr.deleteSelection().scrollIntoView()),!0);function ud(a,t){let{$cursor:s}=a.selection;return!s||(t?!t.endOfTextblock("backward",a):s.parentOffset>0)?null:s}const vm=(a,t,s)=>{let o=ud(a,s);if(!o)return!1;let c=ro(o);if(!c){let p=o.blockRange(),x=p&&Es(p);return x==null?!1:(t&&t(a.tr.lift(p,x).scrollIntoView()),!0)}let d=c.nodeBefore;if(md(a,c,t,-1))return!0;if(o.parent.content.size==0&&(Ms(d,"end")||ge.isSelectable(d)))for(let p=o.depth;;p--){let x=Qn(a.doc,o.before(p),o.after(p),oe.empty);if(x&&x.slice.size<x.to-x.from){if(t){let w=a.tr.step(x);w.setSelection(Ms(d,"end")?ke.findFrom(w.doc.resolve(w.mapping.map(c.pos,-1)),-1):ge.create(w.doc,c.pos-d.nodeSize)),t(w.scrollIntoView())}return!0}if(p==1||o.node(p-1).childCount>1)break}return d.isAtom&&c.depth==o.depth-1?(t&&t(a.tr.delete(c.pos-d.nodeSize,c.pos).scrollIntoView()),!0):!1},wm=(a,t,s)=>{let o=ud(a,s);if(!o)return!1;let c=ro(o);return c?fd(a,c,t):!1},km=(a,t,s)=>{let o=pd(a,s);if(!o)return!1;let c=ao(o);return c?fd(a,c,t):!1};function fd(a,t,s){let o=t.nodeBefore,c=o,d=t.pos-1;for(;!c.isTextblock;d--){if(c.type.spec.isolating)return!1;let M=c.lastChild;if(!M)return!1;c=M}let p=t.nodeAfter,x=p,w=t.pos+1;for(;!x.isTextblock;w++){if(x.type.spec.isolating)return!1;let M=x.firstChild;if(!M)return!1;x=M}let S=Qn(a.doc,d,w,oe.empty);if(!S||S.from!=d||S instanceof Je&&S.slice.size>=w-d)return!1;if(s){let M=a.tr.step(S);M.setSelection(we.create(M.doc,d)),s(M.scrollIntoView())}return!0}function Ms(a,t,s=!1){for(let o=a;o;o=t=="start"?o.firstChild:o.lastChild){if(o.isTextblock)return!0;if(s&&o.childCount!=1)return!1}return!1}const Sm=(a,t,s)=>{let{$head:o,empty:c}=a.selection,d=o;if(!c)return!1;if(o.parent.isTextblock){if(s?!s.endOfTextblock("backward",a):o.parentOffset>0)return!1;d=ro(o)}let p=d&&d.nodeBefore;return!p||!ge.isSelectable(p)?!1:(t&&t(a.tr.setSelection(ge.create(a.doc,d.pos-p.nodeSize)).scrollIntoView()),!0)};function ro(a){if(!a.parent.type.spec.isolating)for(let t=a.depth-1;t>=0;t--){if(a.index(t)>0)return a.doc.resolve(a.before(t+1));if(a.node(t).type.spec.isolating)break}return null}function pd(a,t){let{$cursor:s}=a.selection;return!s||(t?!t.endOfTextblock("forward",a):s.parentOffset<s.parent.content.size)?null:s}const Cm=(a,t,s)=>{let o=pd(a,s);if(!o)return!1;let c=ao(o);if(!c)return!1;let d=c.nodeAfter;if(md(a,c,t,1))return!0;if(o.parent.content.size==0&&(Ms(d,"start")||ge.isSelectable(d))){let p=Qn(a.doc,o.before(),o.after(),oe.empty);if(p&&p.slice.size<p.to-p.from){if(t){let x=a.tr.step(p);x.setSelection(Ms(d,"start")?ke.findFrom(x.doc.resolve(x.mapping.map(c.pos)),1):ge.create(x.doc,x.mapping.map(c.pos))),t(x.scrollIntoView())}return!0}}return d.isAtom&&c.depth==o.depth-1?(t&&t(a.tr.delete(c.pos,c.pos+d.nodeSize).scrollIntoView()),!0):!1},Am=(a,t,s)=>{let{$head:o,empty:c}=a.selection,d=o;if(!c)return!1;if(o.parent.isTextblock){if(s?!s.endOfTextblock("forward",a):o.parentOffset<o.parent.content.size)return!1;d=ao(o)}let p=d&&d.nodeAfter;return!p||!ge.isSelectable(p)?!1:(t&&t(a.tr.setSelection(ge.create(a.doc,d.pos)).scrollIntoView()),!0)};function ao(a){if(!a.parent.type.spec.isolating)for(let t=a.depth-1;t>=0;t--){let s=a.node(t);if(a.index(t)+1<s.childCount)return a.doc.resolve(a.after(t+1));if(s.type.spec.isolating)break}return null}const Mm=(a,t)=>{let s=a.selection,o=s instanceof ge,c;if(o){if(s.node.isTextblock||!Li(a.doc,s.from))return!1;c=s.from}else if(c=Kn(a.doc,s.from,-1),c==null)return!1;if(t){let d=a.tr.join(c);o&&d.setSelection(ge.create(d.doc,c-a.doc.resolve(c).nodeBefore.nodeSize)),t(d.scrollIntoView())}return!0},Tm=(a,t)=>{let s=a.selection,o;if(s instanceof ge){if(s.node.isTextblock||!Li(a.doc,s.to))return!1;o=s.to}else if(o=Kn(a.doc,s.to,1),o==null)return!1;return t&&t(a.tr.join(o).scrollIntoView()),!0},Om=(a,t)=>{let{$from:s,$to:o}=a.selection,c=s.blockRange(o),d=c&&Es(c);return d==null?!1:(t&&t(a.tr.lift(c,d).scrollIntoView()),!0)},Em=(a,t)=>{let{$head:s,$anchor:o}=a.selection;return!s.parent.type.spec.code||!s.sameParent(o)?!1:(t&&t(a.tr.insertText(`
`).scrollIntoView()),!0)};function gd(a){for(let t=0;t<a.edgeCount;t++){let{type:s}=a.edge(t);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const Im=(a,t)=>{let{$head:s,$anchor:o}=a.selection;if(!s.parent.type.spec.code||!s.sameParent(o))return!1;let c=s.node(-1),d=s.indexAfter(-1),p=gd(c.contentMatchAt(d));if(!p||!c.canReplaceWith(d,d,p))return!1;if(t){let x=s.after(),w=a.tr.replaceWith(x,x,p.createAndFill());w.setSelection(ke.near(w.doc.resolve(x),1)),t(w.scrollIntoView())}return!0},Lm=(a,t)=>{let s=a.selection,{$from:o,$to:c}=s;if(s instanceof Vt||o.parent.inlineContent||c.parent.inlineContent)return!1;let d=gd(c.parent.contentMatchAt(c.indexAfter()));if(!d||!d.isTextblock)return!1;if(t){let p=(!o.parentOffset&&c.index()<c.parent.childCount?o:c).pos,x=a.tr.insert(p,d.createAndFill());x.setSelection(we.create(x.doc,p+1)),t(x.scrollIntoView())}return!0},Pm=(a,t)=>{let{$cursor:s}=a.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let d=s.before();if(vs(a.doc,d))return t&&t(a.tr.split(d).scrollIntoView()),!0}let o=s.blockRange(),c=o&&Es(o);return c==null?!1:(t&&t(a.tr.lift(o,c).scrollIntoView()),!0)},Nm=(a,t)=>{let{$from:s,to:o}=a.selection,c,d=s.sharedDepth(o);return d==0?!1:(c=s.before(d),t&&t(a.tr.setSelection(ge.create(a.doc,c))),!0)};function Dm(a,t,s){let o=t.nodeBefore,c=t.nodeAfter,d=t.index();return!o||!c||!o.type.compatibleContent(c.type)?!1:!o.content.size&&t.parent.canReplace(d-1,d)?(s&&s(a.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(d,d+1)||!(c.isTextblock||Li(a.doc,t.pos))?!1:(s&&s(a.tr.join(t.pos).scrollIntoView()),!0)}function md(a,t,s,o){let c=t.nodeBefore,d=t.nodeAfter,p,x,w=c.type.spec.isolating||d.type.spec.isolating;if(!w&&Dm(a,t,s))return!0;let S=!w&&t.parent.canReplace(t.index(),t.index()+1);if(S&&(p=(x=c.contentMatchAt(c.childCount)).findWrapping(d.type))&&x.matchType(p[0]||d.type).validEnd){if(s){let D=t.pos+d.nodeSize,R=ie.empty;for(let $=p.length-1;$>=0;$--)R=ie.from(p[$].create(null,R));R=ie.from(c.copy(R));let Y=a.tr.step(new Ze(t.pos-1,D,t.pos,D,new oe(R,1,0),p.length,!0)),_=Y.doc.resolve(D+2*p.length);_.nodeAfter&&_.nodeAfter.type==c.type&&Li(Y.doc,_.pos)&&Y.join(_.pos),s(Y.scrollIntoView())}return!0}let M=d.type.spec.isolating||o>0&&w?null:ke.findFrom(t,1),E=M&&M.$from.blockRange(M.$to),I=E&&Es(E);if(I!=null&&I>=t.depth)return s&&s(a.tr.lift(E,I).scrollIntoView()),!0;if(S&&Ms(d,"start",!0)&&Ms(c,"end")){let D=c,R=[];for(;R.push(D),!D.isTextblock;)D=D.lastChild;let Y=d,_=1;for(;!Y.isTextblock;Y=Y.firstChild)_++;if(D.canReplace(D.childCount,D.childCount,Y.content)){if(s){let $=ie.empty;for(let X=R.length-1;X>=0;X--)$=ie.from(R[X].copy($));let ne=a.tr.step(new Ze(t.pos-R.length,t.pos+d.nodeSize,t.pos+_,t.pos+d.nodeSize-_,new oe($,R.length,0),0,!0));s(ne.scrollIntoView())}return!0}}return!1}function xd(a){return function(t,s){let o=t.selection,c=a<0?o.$from:o.$to,d=c.depth;for(;c.node(d).isInline;){if(!d)return!1;d--}return c.node(d).isTextblock?(s&&s(t.tr.setSelection(we.create(t.doc,a<0?c.start(d):c.end(d)))),!0):!1}}const Rm=xd(-1),zm=xd(1);function Fm(a,t=null){return function(s,o){let{$from:c,$to:d}=s.selection,p=c.blockRange(d),x=p&&Ua(p,a,t);return x?(o&&o(s.tr.wrap(p,x).scrollIntoView()),!0):!1}}function Nc(a,t=null){return function(s,o){let c=!1;for(let d=0;d<s.selection.ranges.length&&!c;d++){let{$from:{pos:p},$to:{pos:x}}=s.selection.ranges[d];s.doc.nodesBetween(p,x,(w,S)=>{if(c)return!1;if(!(!w.isTextblock||w.hasMarkup(a,t)))if(w.type==a)c=!0;else{let M=s.doc.resolve(S),E=M.index();c=M.parent.canReplaceWith(E,E+1,a)}})}if(!c)return!1;if(o){let d=s.tr;for(let p=0;p<s.selection.ranges.length;p++){let{$from:{pos:x},$to:{pos:w}}=s.selection.ranges[p];d.setBlockType(x,w,a,t)}o(d.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Bm(a,t=null){return function(s,o){let{$from:c,$to:d}=s.selection,p=c.blockRange(d),x=!1,w=p;if(!p)return!1;if(p.depth>=2&&c.node(p.depth-1).type.compatibleContent(a)&&p.startIndex==0){if(c.index(p.depth-1)==0)return!1;let M=s.doc.resolve(p.start-2);w=new Xn(M,M,p.depth),p.endIndex<p.parent.childCount&&(p=new Xn(c,s.doc.resolve(d.end(p.depth)),p.depth)),x=!0}let S=Ua(w,a,t,p);return S?(o&&o(Hm(s.tr,p,S,x,a).scrollIntoView()),!0):!1}}function Hm(a,t,s,o,c){let d=ie.empty;for(let M=s.length-1;M>=0;M--)d=ie.from(s[M].type.create(s[M].attrs,d));a.step(new Ze(t.start-(o?2:0),t.end,t.start,t.end,new oe(d,0,0),s.length,!0));let p=0;for(let M=0;M<s.length;M++)s[M].type==c&&(p=M+1);let x=s.length-p,w=t.start+s.length-(o?2:0),S=t.parent;for(let M=t.startIndex,E=t.endIndex,I=!0;M<E;M++,I=!1)!I&&vs(a.doc,w,x)&&(a.split(w,x),w+=2*x),w+=S.child(M).nodeSize;return a}function Xm(a){return function(t,s){let{$from:o,$to:c}=t.selection,d=o.blockRange(c,p=>p.childCount>0&&p.firstChild.type==a);return d?s?o.node(d.depth-1).type==a?Ym(t,s,a,d):Wm(t,s,d):!0:!1}}function Ym(a,t,s,o){let c=a.tr,d=o.end,p=o.$to.end(o.depth);d<p&&(c.step(new Ze(d-1,p,d,p,new oe(ie.from(s.create(null,o.parent.copy())),1,0),1,!0)),o=new Xn(c.doc.resolve(o.$from.pos),c.doc.resolve(p),o.depth));const x=Es(o);if(x==null)return!1;c.lift(o,x);let w=c.mapping.map(d,-1)-1;return Li(c.doc,w)&&c.join(w),t(c.scrollIntoView()),!0}function Wm(a,t,s){let o=a.tr,c=s.parent;for(let D=s.end,R=s.endIndex-1,Y=s.startIndex;R>Y;R--)D-=c.child(R).nodeSize,o.delete(D-1,D+1);let d=o.doc.resolve(s.start),p=d.nodeAfter;if(o.mapping.map(s.end)!=s.start+d.nodeAfter.nodeSize)return!1;let x=s.startIndex==0,w=s.endIndex==c.childCount,S=d.node(-1),M=d.index(-1);if(!S.canReplace(M+(x?0:1),M+1,p.content.append(w?ie.empty:ie.from(c))))return!1;let E=d.pos,I=E+p.nodeSize;return o.step(new Ze(E-(x?1:0),I+(w?1:0),E+1,I-1,new oe((x?ie.empty:ie.from(c.copy(ie.empty))).append(w?ie.empty:ie.from(c.copy(ie.empty))),x?0:1,w?0:1),x?0:1)),t(o.scrollIntoView()),!0}function _m(a){return function(t,s){let{$from:o,$to:c}=t.selection,d=o.blockRange(c,S=>S.childCount>0&&S.firstChild.type==a);if(!d)return!1;let p=d.startIndex;if(p==0)return!1;let x=d.parent,w=x.child(p-1);if(w.type!=a)return!1;if(s){let S=w.lastChild&&w.lastChild.type==x.type,M=ie.from(S?a.create():null),E=new oe(ie.from(a.create(null,ie.from(x.type.create(null,M)))),S?3:1,0),I=d.start,D=d.end;s(t.tr.step(new Ze(I-(S?3:1),D,I,D,E,1,!0)).scrollIntoView())}return!0}}function nr(a){const{state:t,transaction:s}=a;let{selection:o}=s,{doc:c}=s,{storedMarks:d}=s;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return d},get selection(){return o},get doc(){return c},get tr(){return o=s.selection,c=s.doc,d=s.storedMarks,s}}}class rr{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:s,state:o}=this,{view:c}=s,{tr:d}=o,p=this.buildProps(d);return Object.fromEntries(Object.entries(t).map(([x,w])=>[x,(...M)=>{const E=w(...M)(p);return!d.getMeta("preventDispatch")&&!this.hasCustomState&&c.dispatch(d),E}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,s=!0){const{rawCommands:o,editor:c,state:d}=this,{view:p}=c,x=[],w=!!t,S=t||d.tr,M=()=>(!w&&s&&!S.getMeta("preventDispatch")&&!this.hasCustomState&&p.dispatch(S),x.every(I=>I===!0)),E={...Object.fromEntries(Object.entries(o).map(([I,D])=>[I,(...Y)=>{const _=this.buildProps(S,s),$=D(...Y)(_);return x.push($),E}])),run:M};return E}createCan(t){const{rawCommands:s,state:o}=this,c=!1,d=t||o.tr,p=this.buildProps(d,c);return{...Object.fromEntries(Object.entries(s).map(([w,S])=>[w,(...M)=>S(...M)({...p,dispatch:void 0})])),chain:()=>this.createChain(d,c)}}buildProps(t,s=!0){const{rawCommands:o,editor:c,state:d}=this,{view:p}=c,x={tr:t,editor:c,view:p,state:nr({state:d,transaction:t}),dispatch:s?()=>{}:void 0,chain:()=>this.createChain(t,s),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(o).map(([w,S])=>[w,(...M)=>S(...M)(x)]))}};return x}}class jm{constructor(){this.callbacks={}}on(t,s){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(s),this}emit(t,...s){const o=this.callbacks[t];return o&&o.forEach(c=>c.apply(this,s)),this}off(t,s){const o=this.callbacks[t];return o&&(s?this.callbacks[t]=o.filter(c=>c!==s):delete this.callbacks[t]),this}once(t,s){const o=(...c)=>{this.off(t,o),s.apply(this,c)};return this.on(t,o)}removeAllListeners(){this.callbacks={}}}function le(a,t,s){return a.config[t]===void 0&&a.parent?le(a.parent,t,s):typeof a.config[t]=="function"?a.config[t].bind({...s,parent:a.parent?le(a.parent,t,s):null}):a.config[t]}function ar(a){const t=a.filter(c=>c.type==="extension"),s=a.filter(c=>c.type==="node"),o=a.filter(c=>c.type==="mark");return{baseExtensions:t,nodeExtensions:s,markExtensions:o}}function bd(a){const t=[],{nodeExtensions:s,markExtensions:o}=ar(a),c=[...s,...o],d={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return a.forEach(p=>{const x={name:p.name,options:p.options,storage:p.storage,extensions:c},w=le(p,"addGlobalAttributes",x);if(!w)return;w().forEach(M=>{M.types.forEach(E=>{Object.entries(M.attributes).forEach(([I,D])=>{t.push({type:E,name:I,attribute:{...d,...D}})})})})}),c.forEach(p=>{const x={name:p.name,options:p.options,storage:p.storage},w=le(p,"addAttributes",x);if(!w)return;const S=w();Object.entries(S).forEach(([M,E])=>{const I={...d,...E};typeof(I==null?void 0:I.default)=="function"&&(I.default=I.default()),I!=null&&I.isRequired&&(I==null?void 0:I.default)===void 0&&delete I.default,t.push({type:p.name,name:M,attribute:I})})}),t}function Qe(a,t){if(typeof a=="string"){if(!t.nodes[a])throw Error(`There is no node type named '${a}'. Maybe you forgot to add the extension?`);return t.nodes[a]}return a}function yt(...a){return a.filter(t=>!!t).reduce((t,s)=>{const o={...t};return Object.entries(s).forEach(([c,d])=>{if(!o[c]){o[c]=d;return}if(c==="class"){const x=d?d.split(" "):[],w=o[c]?o[c].split(" "):[],S=x.filter(M=>!w.includes(M));o[c]=[...w,...S].join(" ")}else if(c==="style"){const x=d?d.split(";").map(M=>M.trim()).filter(Boolean):[],w=o[c]?o[c].split(";").map(M=>M.trim()).filter(Boolean):[],S=new Map;w.forEach(M=>{const[E,I]=M.split(":").map(D=>D.trim());S.set(E,I)}),x.forEach(M=>{const[E,I]=M.split(":").map(D=>D.trim());S.set(E,I)}),o[c]=Array.from(S.entries()).map(([M,E])=>`${M}: ${E}`).join("; ")}else o[c]=d}),o},{})}function Ya(a,t){return t.filter(s=>s.type===a.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(a.attrs)||{}:{[s.name]:a.attrs[s.name]}).reduce((s,o)=>yt(s,o),{})}function yd(a){return typeof a=="function"}function Se(a,t=void 0,...s){return yd(a)?t?a.bind(t)(...s):a(...s):a}function Vm(a={}){return Object.keys(a).length===0&&a.constructor===Object}function Gm(a){return typeof a!="string"?a:a.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(a):a==="true"?!0:a==="false"?!1:a}function Dc(a,t){return"style"in a?a:{...a,getAttrs:s=>{const o=a.getAttrs?a.getAttrs(s):a.attrs;if(o===!1)return!1;const c=t.reduce((d,p)=>{const x=p.attribute.parseHTML?p.attribute.parseHTML(s):Gm(s.getAttribute(p.name));return x==null?d:{...d,[p.name]:x}},{});return{...o,...c}}}}function Rc(a){return Object.fromEntries(Object.entries(a).filter(([t,s])=>t==="attrs"&&Vm(s)?!1:s!=null))}function qm(a,t){var s;const o=bd(a),{nodeExtensions:c,markExtensions:d}=ar(a),p=(s=c.find(S=>le(S,"topNode")))===null||s===void 0?void 0:s.name,x=Object.fromEntries(c.map(S=>{const M=o.filter($=>$.type===S.name),E={name:S.name,options:S.options,storage:S.storage,editor:t},I=a.reduce(($,ne)=>{const X=le(ne,"extendNodeSchema",E);return{...$,...X?X(S):{}}},{}),D=Rc({...I,content:Se(le(S,"content",E)),marks:Se(le(S,"marks",E)),group:Se(le(S,"group",E)),inline:Se(le(S,"inline",E)),atom:Se(le(S,"atom",E)),selectable:Se(le(S,"selectable",E)),draggable:Se(le(S,"draggable",E)),code:Se(le(S,"code",E)),whitespace:Se(le(S,"whitespace",E)),linebreakReplacement:Se(le(S,"linebreakReplacement",E)),defining:Se(le(S,"defining",E)),isolating:Se(le(S,"isolating",E)),attrs:Object.fromEntries(M.map($=>{var ne;return[$.name,{default:(ne=$==null?void 0:$.attribute)===null||ne===void 0?void 0:ne.default}]}))}),R=Se(le(S,"parseHTML",E));R&&(D.parseDOM=R.map($=>Dc($,M)));const Y=le(S,"renderHTML",E);Y&&(D.toDOM=$=>Y({node:$,HTMLAttributes:Ya($,M)}));const _=le(S,"renderText",E);return _&&(D.toText=_),[S.name,D]})),w=Object.fromEntries(d.map(S=>{const M=o.filter(_=>_.type===S.name),E={name:S.name,options:S.options,storage:S.storage,editor:t},I=a.reduce((_,$)=>{const ne=le($,"extendMarkSchema",E);return{..._,...ne?ne(S):{}}},{}),D=Rc({...I,inclusive:Se(le(S,"inclusive",E)),excludes:Se(le(S,"excludes",E)),group:Se(le(S,"group",E)),spanning:Se(le(S,"spanning",E)),code:Se(le(S,"code",E)),attrs:Object.fromEntries(M.map(_=>{var $;return[_.name,{default:($=_==null?void 0:_.attribute)===null||$===void 0?void 0:$.default}]}))}),R=Se(le(S,"parseHTML",E));R&&(D.parseDOM=R.map(_=>Dc(_,M)));const Y=le(S,"renderHTML",E);return Y&&(D.toDOM=_=>Y({mark:_,HTMLAttributes:Ya(_,M)})),[S.name,D]}));return new fh({topNode:p,nodes:x,marks:w})}function xa(a,t){return t.nodes[a]||t.marks[a]||null}function zc(a,t){return Array.isArray(t)?t.some(s=>(typeof s=="string"?s:s.name)===a.name):t}function oo(a,t){const s=ss.fromSchema(t).serializeFragment(a),c=document.implementation.createHTMLDocument().createElement("div");return c.appendChild(s),c.innerHTML}const $m=(a,t=500)=>{let s="";const o=a.parentOffset;return a.parent.nodesBetween(Math.max(0,o-t),o,(c,d,p,x)=>{var w,S;const M=((S=(w=c.type.spec).toText)===null||S===void 0?void 0:S.call(w,{node:c,pos:d,parent:p,index:x}))||c.textContent||"%leaf%";s+=c.isAtom&&!c.isText?M:M.slice(0,Math.max(0,o-d))}),s};function lo(a){return Object.prototype.toString.call(a)==="[object RegExp]"}class or{constructor(t){this.find=t.find,this.handler=t.handler}}const Um=(a,t)=>{if(lo(t))return t.exec(a);const s=t(a);if(!s)return null;const o=[s.text];return o.index=s.index,o.input=a,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),o.push(s.replaceWith)),o};function On(a){var t;const{editor:s,from:o,to:c,text:d,rules:p,plugin:x}=a,{view:w}=s;if(w.composing)return!1;const S=w.state.doc.resolve(o);if(S.parent.type.spec.code||!((t=S.nodeBefore||S.nodeAfter)===null||t===void 0)&&t.marks.find(I=>I.type.spec.code))return!1;let M=!1;const E=$m(S)+d;return p.forEach(I=>{if(M)return;const D=Um(E,I.find);if(!D)return;const R=w.state.tr,Y=nr({state:w.state,transaction:R}),_={from:o-(D[0].length-d.length),to:c},{commands:$,chain:ne,can:X}=new rr({editor:s,state:Y});I.handler({state:Y,range:_,match:D,commands:$,chain:ne,can:X})===null||!R.steps.length||(R.setMeta(x,{transform:R,from:o,to:c,text:d}),w.dispatch(R),M=!0)}),M}function Jm(a){const{editor:t,rules:s}=a,o=new Ct({state:{init(){return null},apply(c,d,p){const x=c.getMeta(o);if(x)return x;const w=c.getMeta("applyInputRules");return!!w&&setTimeout(()=>{let{text:M}=w;typeof M=="string"?M=M:M=oo(ie.from(M),p.schema);const{from:E}=w,I=E+M.length;On({editor:t,from:E,to:I,text:M,rules:s,plugin:o})}),c.selectionSet||c.docChanged?null:d}},props:{handleTextInput(c,d,p,x){return On({editor:t,from:d,to:p,text:x,rules:s,plugin:o})},handleDOMEvents:{compositionend:c=>(setTimeout(()=>{const{$cursor:d}=c.state.selection;d&&On({editor:t,from:d.pos,to:d.pos,text:"",rules:s,plugin:o})}),!1)},handleKeyDown(c,d){if(d.key!=="Enter")return!1;const{$cursor:p}=c.state.selection;return p?On({editor:t,from:p.pos,to:p.pos,text:`
`,rules:s,plugin:o}):!1}},isInputRules:!0});return o}function Zm(a){return Object.prototype.toString.call(a).slice(8,-1)}function En(a){return Zm(a)!=="Object"?!1:a.constructor===Object&&Object.getPrototypeOf(a)===Object.prototype}function lr(a,t){const s={...a};return En(a)&&En(t)&&Object.keys(t).forEach(o=>{En(t[o])&&En(a[o])?s[o]=lr(a[o],t[o]):s[o]=t[o]}),s}class Ei{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(le(this,"addOptions",{name:this.name}))),this.storage=Se(le(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Ei(t)}configure(t={}){const s=this.extend({...this.config,addOptions:()=>lr(this.options,t)});return s.name=this.name,s.parent=this.parent,s}extend(t={}){const s=new Ei(t);return s.parent=this,this.child=s,s.name=t.name?t.name:s.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=Se(le(s,"addOptions",{name:s.name})),s.storage=Se(le(s,"addStorage",{name:s.name,options:s.options})),s}static handleExit({editor:t,mark:s}){const{tr:o}=t.state,c=t.state.selection.$from;if(c.pos===c.end()){const p=c.marks();if(!!!p.find(S=>(S==null?void 0:S.type.name)===s.name))return!1;const w=p.find(S=>(S==null?void 0:S.type.name)===s.name);return w&&o.removeStoredMark(w),o.insertText(" ",c.pos),t.view.dispatch(o),!0}return!1}}function Km(a){return typeof a=="number"}class Qm{constructor(t){this.find=t.find,this.handler=t.handler}}const ex=(a,t,s)=>{if(lo(t))return[...a.matchAll(t)];const o=t(a,s);return o?o.map(c=>{const d=[c.text];return d.index=c.index,d.input=a,d.data=c.data,c.replaceWith&&(c.text.includes(c.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),d.push(c.replaceWith)),d}):[]};function tx(a){const{editor:t,state:s,from:o,to:c,rule:d,pasteEvent:p,dropEvent:x}=a,{commands:w,chain:S,can:M}=new rr({editor:t,state:s}),E=[];return s.doc.nodesBetween(o,c,(D,R)=>{if(!D.isTextblock||D.type.spec.code)return;const Y=Math.max(o,R),_=Math.min(c,R+D.content.size),$=D.textBetween(Y-R,_-R,void 0,"￼");ex($,d.find,p).forEach(X=>{if(X.index===void 0)return;const Z=Y+X.index+1,se=Z+X[0].length,ee={from:s.tr.mapping.map(Z),to:s.tr.mapping.map(se)},te=d.handler({state:s,range:ee,match:X,commands:w,chain:S,can:M,pasteEvent:p,dropEvent:x});E.push(te)})}),E.every(D=>D!==null)}const ix=a=>{var t;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=s.clipboardData)===null||t===void 0||t.setData("text/html",a),s};function sx(a){const{editor:t,rules:s}=a;let o=null,c=!1,d=!1,p=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x;try{x=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{x=null}const w=({state:M,from:E,to:I,rule:D,pasteEvt:R})=>{const Y=M.tr,_=nr({state:M,transaction:Y});if(!(!tx({editor:t,state:_,from:Math.max(E-1,0),to:I.b-1,rule:D,pasteEvent:R,dropEvent:x})||!Y.steps.length)){try{x=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{x=null}return p=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,Y}};return s.map(M=>new Ct({view(E){const I=D=>{var R;o=!((R=E.dom.parentElement)===null||R===void 0)&&R.contains(D.target)?E.dom.parentElement:null};return window.addEventListener("dragstart",I),{destroy(){window.removeEventListener("dragstart",I)}}},props:{handleDOMEvents:{drop:(E,I)=>(d=o===E.dom.parentElement,x=I,!1),paste:(E,I)=>{var D;const R=(D=I.clipboardData)===null||D===void 0?void 0:D.getData("text/html");return p=I,c=!!(R!=null&&R.includes("data-pm-slice")),!1}}},appendTransaction:(E,I,D)=>{const R=E[0],Y=R.getMeta("uiEvent")==="paste"&&!c,_=R.getMeta("uiEvent")==="drop"&&!d,$=R.getMeta("applyPasteRules"),ne=!!$;if(!Y&&!_&&!ne)return;if(ne){let{text:se}=$;typeof se=="string"?se=se:se=oo(ie.from(se),D.schema);const{from:ee}=$,te=ee+se.length,de=ix(se);return w({rule:M,state:D,from:ee,to:{b:te},pasteEvt:de})}const X=I.doc.content.findDiffStart(D.doc.content),Z=I.doc.content.findDiffEnd(D.doc.content);if(!(!Km(X)||!Z||X===Z.b))return w({rule:M,state:D,from:X,to:Z,pasteEvt:p})}}))}function nx(a){const t=a.filter((s,o)=>a.indexOf(s)!==o);return Array.from(new Set(t))}class bs{constructor(t,s){this.splittableMarks=[],this.editor=s,this.extensions=bs.resolve(t),this.schema=qm(this.extensions,s),this.setupExtensions()}static resolve(t){const s=bs.sort(bs.flatten(t)),o=nx(s.map(c=>c.name));return o.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${o.map(c=>`'${c}'`).join(", ")}]. This can lead to issues.`),s}static flatten(t){return t.map(s=>{const o={name:s.name,options:s.options,storage:s.storage},c=le(s,"addExtensions",o);return c?[s,...this.flatten(c())]:s}).flat(10)}static sort(t){return t.sort((o,c)=>{const d=le(o,"priority")||100,p=le(c,"priority")||100;return d>p?-1:d<p?1:0})}get commands(){return this.extensions.reduce((t,s)=>{const o={name:s.name,options:s.options,storage:s.storage,editor:this.editor,type:xa(s.name,this.schema)},c=le(s,"addCommands",o);return c?{...t,...c()}:t},{})}get plugins(){const{editor:t}=this,s=bs.sort([...this.extensions].reverse()),o=[],c=[],d=s.map(p=>{const x={name:p.name,options:p.options,storage:p.storage,editor:t,type:xa(p.name,this.schema)},w=[],S=le(p,"addKeyboardShortcuts",x);let M={};if(p.type==="mark"&&le(p,"exitable",x)&&(M.ArrowRight=()=>Ei.handleExit({editor:t,mark:p})),S){const Y=Object.fromEntries(Object.entries(S()).map(([_,$])=>[_,()=>$({editor:t})]));M={...M,...Y}}const E=bm(M);w.push(E);const I=le(p,"addInputRules",x);zc(p,t.options.enableInputRules)&&I&&o.push(...I());const D=le(p,"addPasteRules",x);zc(p,t.options.enablePasteRules)&&D&&c.push(...D());const R=le(p,"addProseMirrorPlugins",x);if(R){const Y=R();w.push(...Y)}return w}).flat();return[Jm({editor:t,rules:o}),...sx({editor:t,rules:c}),...d]}get attributes(){return bd(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:s}=ar(this.extensions);return Object.fromEntries(s.filter(o=>!!le(o,"addNodeView")).map(o=>{const c=this.attributes.filter(w=>w.type===o.name),d={name:o.name,options:o.options,storage:o.storage,editor:t,type:Qe(o.name,this.schema)},p=le(o,"addNodeView",d);if(!p)return[];const x=(w,S,M,E,I)=>{const D=Ya(w,c);return p()({node:w,view:S,getPos:M,decorations:E,innerDecorations:I,editor:t,extension:o,HTMLAttributes:D})};return[o.name,x]}))}setupExtensions(){this.extensions.forEach(t=>{var s;this.editor.extensionStorage[t.name]=t.storage;const o={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:xa(t.name,this.schema)};t.type==="mark"&&(!((s=Se(le(t,"keepOnSplit",o)))!==null&&s!==void 0)||s)&&this.splittableMarks.push(t.name);const c=le(t,"onBeforeCreate",o),d=le(t,"onCreate",o),p=le(t,"onUpdate",o),x=le(t,"onSelectionUpdate",o),w=le(t,"onTransaction",o),S=le(t,"onFocus",o),M=le(t,"onBlur",o),E=le(t,"onDestroy",o);c&&this.editor.on("beforeCreate",c),d&&this.editor.on("create",d),p&&this.editor.on("update",p),x&&this.editor.on("selectionUpdate",x),w&&this.editor.on("transaction",w),S&&this.editor.on("focus",S),M&&this.editor.on("blur",M),E&&this.editor.on("destroy",E)})}}class vt{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(le(this,"addOptions",{name:this.name}))),this.storage=Se(le(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new vt(t)}configure(t={}){const s=this.extend({...this.config,addOptions:()=>lr(this.options,t)});return s.name=this.name,s.parent=this.parent,s}extend(t={}){const s=new vt({...this.config,...t});return s.parent=this,this.child=s,s.name=t.name?t.name:s.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=Se(le(s,"addOptions",{name:s.name})),s.storage=Se(le(s,"addStorage",{name:s.name,options:s.options})),s}}function vd(a,t,s){const{from:o,to:c}=t,{blockSeparator:d=`

`,textSerializers:p={}}=s||{};let x="";return a.nodesBetween(o,c,(w,S,M,E)=>{var I;w.isBlock&&S>o&&(x+=d);const D=p==null?void 0:p[w.type.name];if(D)return M&&(x+=D({node:w,pos:S,parent:M,index:E,range:t})),!1;w.isText&&(x+=(I=w==null?void 0:w.text)===null||I===void 0?void 0:I.slice(Math.max(o,S)-S,c-S))}),x}function wd(a){return Object.fromEntries(Object.entries(a.nodes).filter(([,t])=>t.spec.toText).map(([t,s])=>[t,s.spec.toText]))}const rx=vt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ct({key:new Qt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:a}=this,{state:t,schema:s}=a,{doc:o,selection:c}=t,{ranges:d}=c,p=Math.min(...d.map(M=>M.$from.pos)),x=Math.max(...d.map(M=>M.$to.pos)),w=wd(s);return vd(o,{from:p,to:x},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:w})}}})]}}),ax=()=>({editor:a,view:t})=>(requestAnimationFrame(()=>{var s;a.isDestroyed||(t.dom.blur(),(s=window==null?void 0:window.getSelection())===null||s===void 0||s.removeAllRanges())}),!0),ox=(a=!1)=>({commands:t})=>t.setContent("",a),lx=()=>({state:a,tr:t,dispatch:s})=>{const{selection:o}=t,{ranges:c}=o;return s&&c.forEach(({$from:d,$to:p})=>{a.doc.nodesBetween(d.pos,p.pos,(x,w)=>{if(x.type.isText)return;const{doc:S,mapping:M}=t,E=S.resolve(M.map(w)),I=S.resolve(M.map(w+x.nodeSize)),D=E.blockRange(I);if(!D)return;const R=Es(D);if(x.type.isTextblock){const{defaultType:Y}=E.parent.contentMatchAt(E.index());t.setNodeMarkup(D.start,Y)}(R||R===0)&&t.lift(D,R)})}),!0},cx=a=>t=>a(t),hx=()=>({state:a,dispatch:t})=>Lm(a,t),dx=(a,t)=>({editor:s,tr:o})=>{const{state:c}=s,d=c.doc.slice(a.from,a.to);o.deleteRange(a.from,a.to);const p=o.mapping.map(t);return o.insert(p,d.content),o.setSelection(new we(o.doc.resolve(p-1))),!0},ux=()=>({tr:a,dispatch:t})=>{const{selection:s}=a,o=s.$anchor.node();if(o.content.size>0)return!1;const c=a.selection.$anchor;for(let d=c.depth;d>0;d-=1)if(c.node(d).type===o.type){if(t){const x=c.before(d),w=c.after(d);a.delete(x,w).scrollIntoView()}return!0}return!1},fx=a=>({tr:t,state:s,dispatch:o})=>{const c=Qe(a,s.schema),d=t.selection.$anchor;for(let p=d.depth;p>0;p-=1)if(d.node(p).type===c){if(o){const w=d.before(p),S=d.after(p);t.delete(w,S).scrollIntoView()}return!0}return!1},px=a=>({tr:t,dispatch:s})=>{const{from:o,to:c}=a;return s&&t.delete(o,c),!0},gx=()=>({state:a,dispatch:t})=>ym(a,t),mx=()=>({commands:a})=>a.keyboardShortcut("Enter"),xx=()=>({state:a,dispatch:t})=>Im(a,t);function $n(a,t,s={strict:!0}){const o=Object.keys(t);return o.length?o.every(c=>s.strict?t[c]===a[c]:lo(t[c])?t[c].test(a[c]):t[c]===a[c]):!0}function kd(a,t,s={}){return a.find(o=>o.type===t&&$n(Object.fromEntries(Object.keys(s).map(c=>[c,o.attrs[c]])),s))}function Fc(a,t,s={}){return!!kd(a,t,s)}function co(a,t,s){var o;if(!a||!t)return;let c=a.parent.childAfter(a.parentOffset);if((!c.node||!c.node.marks.some(M=>M.type===t))&&(c=a.parent.childBefore(a.parentOffset)),!c.node||!c.node.marks.some(M=>M.type===t)||(s=s||((o=c.node.marks[0])===null||o===void 0?void 0:o.attrs),!kd([...c.node.marks],t,s)))return;let p=c.index,x=a.start()+c.offset,w=p+1,S=x+c.node.nodeSize;for(;p>0&&Fc([...a.parent.child(p-1).marks],t,s);)p-=1,x-=a.parent.child(p).nodeSize;for(;w<a.parent.childCount&&Fc([...a.parent.child(w).marks],t,s);)S+=a.parent.child(w).nodeSize,w+=1;return{from:x,to:S}}function Ni(a,t){if(typeof a=="string"){if(!t.marks[a])throw Error(`There is no mark type named '${a}'. Maybe you forgot to add the extension?`);return t.marks[a]}return a}const bx=(a,t={})=>({tr:s,state:o,dispatch:c})=>{const d=Ni(a,o.schema),{doc:p,selection:x}=s,{$from:w,from:S,to:M}=x;if(c){const E=co(w,d,t);if(E&&E.from<=S&&E.to>=M){const I=we.create(p,E.from,E.to);s.setSelection(I)}}return!0},yx=a=>t=>{const s=typeof a=="function"?a(t):a;for(let o=0;o<s.length;o+=1)if(s[o](t))return!0;return!1};function Sd(a){return a instanceof we}function qi(a=0,t=0,s=0){return Math.min(Math.max(a,t),s)}function Cd(a,t=null){if(!t)return null;const s=ke.atStart(a),o=ke.atEnd(a);if(t==="start"||t===!0)return s;if(t==="end")return o;const c=s.from,d=o.to;return t==="all"?we.create(a,qi(0,c,d),qi(a.content.size,c,d)):we.create(a,qi(t,c,d),qi(t,c,d))}function ho(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const vx=(a=null,t={})=>({editor:s,view:o,tr:c,dispatch:d})=>{t={scrollIntoView:!0,...t};const p=()=>{ho()&&o.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(o.focus(),t!=null&&t.scrollIntoView&&s.commands.scrollIntoView())})};if(o.hasFocus()&&a===null||a===!1)return!0;if(d&&a===null&&!Sd(s.state.selection))return p(),!0;const x=Cd(c.doc,a)||s.state.selection,w=s.state.selection.eq(x);return d&&(w||c.setSelection(x),w&&c.storedMarks&&c.setStoredMarks(c.storedMarks),p()),!0},wx=(a,t)=>s=>a.every((o,c)=>t(o,{...s,index:c})),kx=(a,t)=>({tr:s,commands:o})=>o.insertContentAt({from:s.selection.from,to:s.selection.to},a,t),Ad=a=>{const t=a.childNodes;for(let s=t.length-1;s>=0;s-=1){const o=t[s];o.nodeType===3&&o.nodeValue&&/^(\n\s\s|\n)$/.test(o.nodeValue)?a.removeChild(o):o.nodeType===1&&Ad(o)}return a};function In(a){const t=`<body>${a}</body>`,s=new window.DOMParser().parseFromString(t,"text/html").body;return Ad(s)}function Un(a,t,s){if(a instanceof Si||a instanceof ie)return a;s={slice:!0,parseOptions:{},...s};const o=typeof a=="object"&&a!==null,c=typeof a=="string";if(o)try{if(Array.isArray(a)&&a.length>0)return ie.fromArray(a.map(x=>t.nodeFromJSON(x)));const p=t.nodeFromJSON(a);return s.errorOnInvalidContent&&p.check(),p}catch(d){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:d});return console.warn("[tiptap warn]: Invalid content.","Passed value:",a,"Error:",d),Un("",t,s)}if(c){if(s.errorOnInvalidContent){let p=!1,x="";const w=new fh({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:S=>(p=!0,x=typeof S=="string"?S:S.outerHTML,null)}]}})});if(s.slice?Ci.fromSchema(w).parseSlice(In(a),s.parseOptions):Ci.fromSchema(w).parse(In(a),s.parseOptions),s.errorOnInvalidContent&&p)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${x}`)})}const d=Ci.fromSchema(t);return s.slice?d.parseSlice(In(a),s.parseOptions).content:d.parse(In(a),s.parseOptions)}return Un("",t,s)}function Sx(a,t,s){const o=a.steps.length-1;if(o<t)return;const c=a.steps[o];if(!(c instanceof Je||c instanceof Ze))return;const d=a.mapping.maps[o];let p=0;d.forEach((x,w,S,M)=>{p===0&&(p=M)}),a.setSelection(ke.near(a.doc.resolve(p),s))}const Cx=a=>!("type"in a),Ax=(a,t,s)=>({tr:o,dispatch:c,editor:d})=>{var p;if(c){s={parseOptions:d.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let x;try{x=Un(t,d.schema,{parseOptions:{preserveWhitespace:"full",...s.parseOptions},errorOnInvalidContent:(p=s.errorOnInvalidContent)!==null&&p!==void 0?p:d.options.enableContentCheck})}catch(R){return d.emit("contentError",{editor:d,error:R,disableCollaboration:()=>{d.storage.collaboration&&(d.storage.collaboration.isDisabled=!0)}}),!1}let{from:w,to:S}=typeof a=="number"?{from:a,to:a}:{from:a.from,to:a.to},M=!0,E=!0;if((Cx(x)?x:[x]).forEach(R=>{R.check(),M=M?R.isText&&R.marks.length===0:!1,E=E?R.isBlock:!1}),w===S&&E){const{parent:R}=o.doc.resolve(w);R.isTextblock&&!R.type.spec.code&&!R.childCount&&(w-=1,S+=1)}let D;if(M){if(Array.isArray(t))D=t.map(R=>R.text||"").join("");else if(t instanceof ie){let R="";t.forEach(Y=>{Y.text&&(R+=Y.text)}),D=R}else typeof t=="object"&&t&&t.text?D=t.text:D=t;o.insertText(D,w,S)}else D=x,o.replaceWith(w,S,D);s.updateSelection&&Sx(o,o.steps.length-1,-1),s.applyInputRules&&o.setMeta("applyInputRules",{from:w,text:D}),s.applyPasteRules&&o.setMeta("applyPasteRules",{from:w,text:D})}return!0},Mx=()=>({state:a,dispatch:t})=>Mm(a,t),Tx=()=>({state:a,dispatch:t})=>Tm(a,t),Ox=()=>({state:a,dispatch:t})=>vm(a,t),Ex=()=>({state:a,dispatch:t})=>Cm(a,t),Ix=()=>({state:a,dispatch:t,tr:s})=>{try{const o=Kn(a.doc,a.selection.$from.pos,-1);return o==null?!1:(s.join(o,2),t&&t(s),!0)}catch{return!1}},Lx=()=>({state:a,dispatch:t,tr:s})=>{try{const o=Kn(a.doc,a.selection.$from.pos,1);return o==null?!1:(s.join(o,2),t&&t(s),!0)}catch{return!1}},Px=()=>({state:a,dispatch:t})=>wm(a,t),Nx=()=>({state:a,dispatch:t})=>km(a,t);function Md(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Dx(a){const t=a.split(/-(?!$)/);let s=t[t.length-1];s==="Space"&&(s=" ");let o,c,d,p;for(let x=0;x<t.length-1;x+=1){const w=t[x];if(/^(cmd|meta|m)$/i.test(w))p=!0;else if(/^a(lt)?$/i.test(w))o=!0;else if(/^(c|ctrl|control)$/i.test(w))c=!0;else if(/^s(hift)?$/i.test(w))d=!0;else if(/^mod$/i.test(w))ho()||Md()?p=!0:c=!0;else throw new Error(`Unrecognized modifier name: ${w}`)}return o&&(s=`Alt-${s}`),c&&(s=`Ctrl-${s}`),p&&(s=`Meta-${s}`),d&&(s=`Shift-${s}`),s}const Rx=a=>({editor:t,view:s,tr:o,dispatch:c})=>{const d=Dx(a).split(/-(?!$)/),p=d.find(S=>!["Alt","Ctrl","Meta","Shift"].includes(S)),x=new KeyboardEvent("keydown",{key:p==="Space"?" ":p,altKey:d.includes("Alt"),ctrlKey:d.includes("Ctrl"),metaKey:d.includes("Meta"),shiftKey:d.includes("Shift"),bubbles:!0,cancelable:!0}),w=t.captureTransaction(()=>{s.someProp("handleKeyDown",S=>S(s,x))});return w==null||w.steps.forEach(S=>{const M=S.map(o.mapping);M&&c&&o.maybeStep(M)}),!0};function rn(a,t,s={}){const{from:o,to:c,empty:d}=a.selection,p=t?Qe(t,a.schema):null,x=[];a.doc.nodesBetween(o,c,(E,I)=>{if(E.isText)return;const D=Math.max(o,I),R=Math.min(c,I+E.nodeSize);x.push({node:E,from:D,to:R})});const w=c-o,S=x.filter(E=>p?p.name===E.node.type.name:!0).filter(E=>$n(E.node.attrs,s,{strict:!1}));return d?!!S.length:S.reduce((E,I)=>E+I.to-I.from,0)>=w}const zx=(a,t={})=>({state:s,dispatch:o})=>{const c=Qe(a,s.schema);return rn(s,c,t)?Om(s,o):!1},Fx=()=>({state:a,dispatch:t})=>Pm(a,t),Bx=a=>({state:t,dispatch:s})=>{const o=Qe(a,t.schema);return Xm(o)(t,s)},Hx=()=>({state:a,dispatch:t})=>Em(a,t);function cr(a,t){return t.nodes[a]?"node":t.marks[a]?"mark":null}function Bc(a,t){const s=typeof t=="string"?[t]:t;return Object.keys(a).reduce((o,c)=>(s.includes(c)||(o[c]=a[c]),o),{})}const Xx=(a,t)=>({tr:s,state:o,dispatch:c})=>{let d=null,p=null;const x=cr(typeof a=="string"?a:a.name,o.schema);return x?(x==="node"&&(d=Qe(a,o.schema)),x==="mark"&&(p=Ni(a,o.schema)),c&&s.selection.ranges.forEach(w=>{o.doc.nodesBetween(w.$from.pos,w.$to.pos,(S,M)=>{d&&d===S.type&&s.setNodeMarkup(M,void 0,Bc(S.attrs,t)),p&&S.marks.length&&S.marks.forEach(E=>{p===E.type&&s.addMark(M,M+S.nodeSize,p.create(Bc(E.attrs,t)))})})}),!0):!1},Yx=()=>({tr:a,dispatch:t})=>(t&&a.scrollIntoView(),!0),Wx=()=>({tr:a,commands:t})=>t.setTextSelection({from:0,to:a.doc.content.size}),_x=()=>({state:a,dispatch:t})=>Sm(a,t),jx=()=>({state:a,dispatch:t})=>Am(a,t),Vx=()=>({state:a,dispatch:t})=>Nm(a,t),Gx=()=>({state:a,dispatch:t})=>zm(a,t),qx=()=>({state:a,dispatch:t})=>Rm(a,t);function Wa(a,t,s={},o={}){return Un(a,t,{slice:!1,parseOptions:s,errorOnInvalidContent:o.errorOnInvalidContent})}const $x=(a,t=!1,s={},o={})=>({editor:c,tr:d,dispatch:p,commands:x})=>{var w,S;const{doc:M}=d;if(s.preserveWhitespace!=="full"){const E=Wa(a,c.schema,s,{errorOnInvalidContent:(w=o.errorOnInvalidContent)!==null&&w!==void 0?w:c.options.enableContentCheck});return p&&d.replaceWith(0,M.content.size,E).setMeta("preventUpdate",!t),!0}return p&&d.setMeta("preventUpdate",!t),x.insertContentAt({from:0,to:M.content.size},a,{parseOptions:s,errorOnInvalidContent:(S=o.errorOnInvalidContent)!==null&&S!==void 0?S:c.options.enableContentCheck})};function Td(a,t){const s=Ni(t,a.schema),{from:o,to:c,empty:d}=a.selection,p=[];d?(a.storedMarks&&p.push(...a.storedMarks),p.push(...a.selection.$head.marks())):a.doc.nodesBetween(o,c,w=>{p.push(...w.marks)});const x=p.find(w=>w.type.name===s.name);return x?{...x.attrs}:{}}function Ux(a){for(let t=0;t<a.edgeCount;t+=1){const{type:s}=a.edge(t);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function Jx(a,t){for(let s=a.depth;s>0;s-=1){const o=a.node(s);if(t(o))return{pos:s>0?a.before(s):0,start:a.start(s),depth:s,node:o}}}function uo(a){return t=>Jx(t.$from,a)}function Zx(a,t){const s={from:0,to:a.content.size};return vd(a,s,t)}function Kx(a,t){const s=Qe(t,a.schema),{from:o,to:c}=a.selection,d=[];a.doc.nodesBetween(o,c,x=>{d.push(x)});const p=d.reverse().find(x=>x.type.name===s.name);return p?{...p.attrs}:{}}function Qx(a,t){const s=cr(typeof t=="string"?t:t.name,a.schema);return s==="node"?Kx(a,t):s==="mark"?Td(a,t):{}}function Od(a,t,s){const o=[];return a===t?s.resolve(a).marks().forEach(c=>{const d=s.resolve(a),p=co(d,c.type);p&&o.push({mark:c,...p})}):s.nodesBetween(a,t,(c,d)=>{!c||(c==null?void 0:c.nodeSize)===void 0||o.push(...c.marks.map(p=>({from:d,to:d+c.nodeSize,mark:p})))}),o}function Rn(a,t,s){return Object.fromEntries(Object.entries(s).filter(([o])=>{const c=a.find(d=>d.type===t&&d.name===o);return c?c.attribute.keepOnSplit:!1}))}function _a(a,t,s={}){const{empty:o,ranges:c}=a.selection,d=t?Ni(t,a.schema):null;if(o)return!!(a.storedMarks||a.selection.$from.marks()).filter(E=>d?d.name===E.type.name:!0).find(E=>$n(E.attrs,s,{strict:!1}));let p=0;const x=[];if(c.forEach(({$from:E,$to:I})=>{const D=E.pos,R=I.pos;a.doc.nodesBetween(D,R,(Y,_)=>{if(!Y.isText&&!Y.marks.length)return;const $=Math.max(D,_),ne=Math.min(R,_+Y.nodeSize),X=ne-$;p+=X,x.push(...Y.marks.map(Z=>({mark:Z,from:$,to:ne})))})}),p===0)return!1;const w=x.filter(E=>d?d.name===E.mark.type.name:!0).filter(E=>$n(E.mark.attrs,s,{strict:!1})).reduce((E,I)=>E+I.to-I.from,0),S=x.filter(E=>d?E.mark.type!==d&&E.mark.type.excludes(d):!0).reduce((E,I)=>E+I.to-I.from,0);return(w>0?w+S:w)>=p}function eb(a,t,s={}){if(!t)return rn(a,null,s)||_a(a,null,s);const o=cr(t,a.schema);return o==="node"?rn(a,t,s):o==="mark"?_a(a,t,s):!1}function Hc(a,t){const{nodeExtensions:s}=ar(t),o=s.find(p=>p.name===a);if(!o)return!1;const c={name:o.name,options:o.options,storage:o.storage},d=Se(le(o,"group",c));return typeof d!="string"?!1:d.split(" ").includes("list")}function fo(a,{checkChildren:t=!0,ignoreWhitespace:s=!1}={}){var o;if(s){if(a.type.name==="hardBreak")return!0;if(a.isText)return/^\s*$/m.test((o=a.text)!==null&&o!==void 0?o:"")}if(a.isText)return!a.text;if(a.isAtom||a.isLeaf)return!1;if(a.content.childCount===0)return!0;if(t){let c=!0;return a.content.forEach(d=>{c!==!1&&(fo(d,{ignoreWhitespace:s,checkChildren:t})||(c=!1))}),c}return!1}function tb(a){return a instanceof ge}function ib(a,t,s){var o;const{selection:c}=t;let d=null;if(Sd(c)&&(d=c.$cursor),d){const x=(o=a.storedMarks)!==null&&o!==void 0?o:d.marks();return!!s.isInSet(x)||!x.some(w=>w.type.excludes(s))}const{ranges:p}=c;return p.some(({$from:x,$to:w})=>{let S=x.depth===0?a.doc.inlineContent&&a.doc.type.allowsMarkType(s):!1;return a.doc.nodesBetween(x.pos,w.pos,(M,E,I)=>{if(S)return!1;if(M.isInline){const D=!I||I.type.allowsMarkType(s),R=!!s.isInSet(M.marks)||!M.marks.some(Y=>Y.type.excludes(s));S=D&&R}return!S}),S})}const sb=(a,t={})=>({tr:s,state:o,dispatch:c})=>{const{selection:d}=s,{empty:p,ranges:x}=d,w=Ni(a,o.schema);if(c)if(p){const S=Td(o,w);s.addStoredMark(w.create({...S,...t}))}else x.forEach(S=>{const M=S.$from.pos,E=S.$to.pos;o.doc.nodesBetween(M,E,(I,D)=>{const R=Math.max(D,M),Y=Math.min(D+I.nodeSize,E);I.marks.find($=>$.type===w)?I.marks.forEach($=>{w===$.type&&s.addMark(R,Y,w.create({...$.attrs,...t}))}):s.addMark(R,Y,w.create(t))})});return ib(o,s,w)},nb=(a,t)=>({tr:s})=>(s.setMeta(a,t),!0),rb=(a,t={})=>({state:s,dispatch:o,chain:c})=>{const d=Qe(a,s.schema);let p;return s.selection.$anchor.sameParent(s.selection.$head)&&(p=s.selection.$anchor.parent.attrs),d.isTextblock?c().command(({commands:x})=>Nc(d,{...p,...t})(s)?!0:x.clearNodes()).command(({state:x})=>Nc(d,{...p,...t})(x,o)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ab=a=>({tr:t,dispatch:s})=>{if(s){const{doc:o}=t,c=qi(a,0,o.content.size),d=ge.create(o,c);t.setSelection(d)}return!0},ob=a=>({tr:t,dispatch:s})=>{if(s){const{doc:o}=t,{from:c,to:d}=typeof a=="number"?{from:a,to:a}:a,p=we.atStart(o).from,x=we.atEnd(o).to,w=qi(c,p,x),S=qi(d,p,x),M=we.create(o,w,S);t.setSelection(M)}return!0},lb=a=>({state:t,dispatch:s})=>{const o=Qe(a,t.schema);return _m(o)(t,s)};function Xc(a,t){const s=a.storedMarks||a.selection.$to.parentOffset&&a.selection.$from.marks();if(s){const o=s.filter(c=>t==null?void 0:t.includes(c.type.name));a.tr.ensureMarks(o)}}const cb=({keepMarks:a=!0}={})=>({tr:t,state:s,dispatch:o,editor:c})=>{const{selection:d,doc:p}=t,{$from:x,$to:w}=d,S=c.extensionManager.attributes,M=Rn(S,x.node().type.name,x.node().attrs);if(d instanceof ge&&d.node.isBlock)return!x.parentOffset||!vs(p,x.pos)?!1:(o&&(a&&Xc(s,c.extensionManager.splittableMarks),t.split(x.pos).scrollIntoView()),!0);if(!x.parent.isBlock)return!1;const E=w.parentOffset===w.parent.content.size,I=x.depth===0?void 0:Ux(x.node(-1).contentMatchAt(x.indexAfter(-1)));let D=E&&I?[{type:I,attrs:M}]:void 0,R=vs(t.doc,t.mapping.map(x.pos),1,D);if(!D&&!R&&vs(t.doc,t.mapping.map(x.pos),1,I?[{type:I}]:void 0)&&(R=!0,D=I?[{type:I,attrs:M}]:void 0),o){if(R&&(d instanceof we&&t.deleteSelection(),t.split(t.mapping.map(x.pos),1,D),I&&!E&&!x.parentOffset&&x.parent.type!==I)){const Y=t.mapping.map(x.before()),_=t.doc.resolve(Y);x.node(-1).canReplaceWith(_.index(),_.index()+1,I)&&t.setNodeMarkup(t.mapping.map(x.before()),I)}a&&Xc(s,c.extensionManager.splittableMarks),t.scrollIntoView()}return R},hb=(a,t={})=>({tr:s,state:o,dispatch:c,editor:d})=>{var p;const x=Qe(a,o.schema),{$from:w,$to:S}=o.selection,M=o.selection.node;if(M&&M.isBlock||w.depth<2||!w.sameParent(S))return!1;const E=w.node(-1);if(E.type!==x)return!1;const I=d.extensionManager.attributes;if(w.parent.content.size===0&&w.node(-1).childCount===w.indexAfter(-1)){if(w.depth===2||w.node(-3).type!==x||w.index(-2)!==w.node(-2).childCount-1)return!1;if(c){let $=ie.empty;const ne=w.index(-1)?1:w.index(-2)?2:3;for(let de=w.depth-ne;de>=w.depth-3;de-=1)$=ie.from(w.node(de).copy($));const X=w.indexAfter(-1)<w.node(-2).childCount?1:w.indexAfter(-2)<w.node(-3).childCount?2:3,Z={...Rn(I,w.node().type.name,w.node().attrs),...t},se=((p=x.contentMatch.defaultType)===null||p===void 0?void 0:p.createAndFill(Z))||void 0;$=$.append(ie.from(x.createAndFill(null,se)||void 0));const ee=w.before(w.depth-(ne-1));s.replace(ee,w.after(-X),new oe($,4-ne,0));let te=-1;s.doc.nodesBetween(ee,s.doc.content.size,(de,ue)=>{if(te>-1)return!1;de.isTextblock&&de.content.size===0&&(te=ue+1)}),te>-1&&s.setSelection(we.near(s.doc.resolve(te))),s.scrollIntoView()}return!0}const D=S.pos===w.end()?E.contentMatchAt(0).defaultType:null,R={...Rn(I,E.type.name,E.attrs),...t},Y={...Rn(I,w.node().type.name,w.node().attrs),...t};s.delete(w.pos,S.pos);const _=D?[{type:x,attrs:R},{type:D,attrs:Y}]:[{type:x,attrs:R}];if(!vs(s.doc,w.pos,2))return!1;if(c){const{selection:$,storedMarks:ne}=o,{splittableMarks:X}=d.extensionManager,Z=ne||$.$to.parentOffset&&$.$from.marks();if(s.split(w.pos,2,_).scrollIntoView(),!Z||!c)return!0;const se=Z.filter(ee=>X.includes(ee.type.name));s.ensureMarks(se)}return!0},ba=(a,t)=>{const s=uo(p=>p.type===t)(a.selection);if(!s)return!0;const o=a.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(o===void 0)return!0;const c=a.doc.nodeAt(o);return s.node.type===(c==null?void 0:c.type)&&Li(a.doc,s.pos)&&a.join(s.pos),!0},ya=(a,t)=>{const s=uo(p=>p.type===t)(a.selection);if(!s)return!0;const o=a.doc.resolve(s.start).after(s.depth);if(o===void 0)return!0;const c=a.doc.nodeAt(o);return s.node.type===(c==null?void 0:c.type)&&Li(a.doc,o)&&a.join(o),!0},db=(a,t,s,o={})=>({editor:c,tr:d,state:p,dispatch:x,chain:w,commands:S,can:M})=>{const{extensions:E,splittableMarks:I}=c.extensionManager,D=Qe(a,p.schema),R=Qe(t,p.schema),{selection:Y,storedMarks:_}=p,{$from:$,$to:ne}=Y,X=$.blockRange(ne),Z=_||Y.$to.parentOffset&&Y.$from.marks();if(!X)return!1;const se=uo(ee=>Hc(ee.type.name,E))(Y);if(X.depth>=1&&se&&X.depth-se.depth<=1){if(se.node.type===D)return S.liftListItem(R);if(Hc(se.node.type.name,E)&&D.validContent(se.node.content)&&x)return w().command(()=>(d.setNodeMarkup(se.pos,D),!0)).command(()=>ba(d,D)).command(()=>ya(d,D)).run()}return!s||!Z||!x?w().command(()=>M().wrapInList(D,o)?!0:S.clearNodes()).wrapInList(D,o).command(()=>ba(d,D)).command(()=>ya(d,D)).run():w().command(()=>{const ee=M().wrapInList(D,o),te=Z.filter(de=>I.includes(de.type.name));return d.ensureMarks(te),ee?!0:S.clearNodes()}).wrapInList(D,o).command(()=>ba(d,D)).command(()=>ya(d,D)).run()},ub=(a,t={},s={})=>({state:o,commands:c})=>{const{extendEmptyMarkRange:d=!1}=s,p=Ni(a,o.schema);return _a(o,p,t)?c.unsetMark(p,{extendEmptyMarkRange:d}):c.setMark(p,t)},fb=(a,t,s={})=>({state:o,commands:c})=>{const d=Qe(a,o.schema),p=Qe(t,o.schema),x=rn(o,d,s);let w;return o.selection.$anchor.sameParent(o.selection.$head)&&(w=o.selection.$anchor.parent.attrs),x?c.setNode(p,w):c.setNode(d,{...w,...s})},pb=(a,t={})=>({state:s,commands:o})=>{const c=Qe(a,s.schema);return rn(s,c,t)?o.lift(c):o.wrapIn(c,t)},gb=()=>({state:a,dispatch:t})=>{const s=a.plugins;for(let o=0;o<s.length;o+=1){const c=s[o];let d;if(c.spec.isInputRules&&(d=c.getState(a))){if(t){const p=a.tr,x=d.transform;for(let w=x.steps.length-1;w>=0;w-=1)p.step(x.steps[w].invert(x.docs[w]));if(d.text){const w=p.doc.resolve(d.from).marks();p.replaceWith(d.from,d.to,a.schema.text(d.text,w))}else p.delete(d.from,d.to)}return!0}}return!1},mb=()=>({tr:a,dispatch:t})=>{const{selection:s}=a,{empty:o,ranges:c}=s;return o||t&&c.forEach(d=>{a.removeMark(d.$from.pos,d.$to.pos)}),!0},xb=(a,t={})=>({tr:s,state:o,dispatch:c})=>{var d;const{extendEmptyMarkRange:p=!1}=t,{selection:x}=s,w=Ni(a,o.schema),{$from:S,empty:M,ranges:E}=x;if(!c)return!0;if(M&&p){let{from:I,to:D}=x;const R=(d=S.marks().find(_=>_.type===w))===null||d===void 0?void 0:d.attrs,Y=co(S,w,R);Y&&(I=Y.from,D=Y.to),s.removeMark(I,D,w)}else E.forEach(I=>{s.removeMark(I.$from.pos,I.$to.pos,w)});return s.removeStoredMark(w),!0},bb=(a,t={})=>({tr:s,state:o,dispatch:c})=>{let d=null,p=null;const x=cr(typeof a=="string"?a:a.name,o.schema);return x?(x==="node"&&(d=Qe(a,o.schema)),x==="mark"&&(p=Ni(a,o.schema)),c&&s.selection.ranges.forEach(w=>{const S=w.$from.pos,M=w.$to.pos;let E,I,D,R;s.selection.empty?o.doc.nodesBetween(S,M,(Y,_)=>{d&&d===Y.type&&(D=Math.max(_,S),R=Math.min(_+Y.nodeSize,M),E=_,I=Y)}):o.doc.nodesBetween(S,M,(Y,_)=>{_<S&&d&&d===Y.type&&(D=Math.max(_,S),R=Math.min(_+Y.nodeSize,M),E=_,I=Y),_>=S&&_<=M&&(d&&d===Y.type&&s.setNodeMarkup(_,void 0,{...Y.attrs,...t}),p&&Y.marks.length&&Y.marks.forEach($=>{if(p===$.type){const ne=Math.max(_,S),X=Math.min(_+Y.nodeSize,M);s.addMark(ne,X,p.create({...$.attrs,...t}))}}))}),I&&(E!==void 0&&s.setNodeMarkup(E,void 0,{...I.attrs,...t}),p&&I.marks.length&&I.marks.forEach(Y=>{p===Y.type&&s.addMark(D,R,p.create({...Y.attrs,...t}))}))}),!0):!1},yb=(a,t={})=>({state:s,dispatch:o})=>{const c=Qe(a,s.schema);return Fm(c,t)(s,o)},vb=(a,t={})=>({state:s,dispatch:o})=>{const c=Qe(a,s.schema);return Bm(c,t)(s,o)};var wb=Object.freeze({__proto__:null,blur:ax,clearContent:ox,clearNodes:lx,command:cx,createParagraphNear:hx,cut:dx,deleteCurrentNode:ux,deleteNode:fx,deleteRange:px,deleteSelection:gx,enter:mx,exitCode:xx,extendMarkRange:bx,first:yx,focus:vx,forEach:wx,insertContent:kx,insertContentAt:Ax,joinBackward:Ox,joinDown:Tx,joinForward:Ex,joinItemBackward:Ix,joinItemForward:Lx,joinTextblockBackward:Px,joinTextblockForward:Nx,joinUp:Mx,keyboardShortcut:Rx,lift:zx,liftEmptyBlock:Fx,liftListItem:Bx,newlineInCode:Hx,resetAttributes:Xx,scrollIntoView:Yx,selectAll:Wx,selectNodeBackward:_x,selectNodeForward:jx,selectParentNode:Vx,selectTextblockEnd:Gx,selectTextblockStart:qx,setContent:$x,setMark:sb,setMeta:nb,setNode:rb,setNodeSelection:ab,setTextSelection:ob,sinkListItem:lb,splitBlock:cb,splitListItem:hb,toggleList:db,toggleMark:ub,toggleNode:fb,toggleWrap:pb,undoInputRule:gb,unsetAllMarks:mb,unsetMark:xb,updateAttributes:bb,wrapIn:yb,wrapInList:vb});const kb=vt.create({name:"commands",addCommands(){return{...wb}}}),Sb=vt.create({name:"drop",addProseMirrorPlugins(){return[new Ct({key:new Qt("tiptapDrop"),props:{handleDrop:(a,t,s,o)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:s,moved:o})}}})]}}),Cb=vt.create({name:"editable",addProseMirrorPlugins(){return[new Ct({key:new Qt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Ab=vt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:a}=this;return[new Ct({key:new Qt("focusEvents"),props:{handleDOMEvents:{focus:(t,s)=>{a.isFocused=!0;const o=a.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return t.dispatch(o),!1},blur:(t,s)=>{a.isFocused=!1;const o=a.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return t.dispatch(o),!1}}}})]}}),Mb=vt.create({name:"keymap",addKeyboardShortcuts(){const a=()=>this.editor.commands.first(({commands:p})=>[()=>p.undoInputRule(),()=>p.command(({tr:x})=>{const{selection:w,doc:S}=x,{empty:M,$anchor:E}=w,{pos:I,parent:D}=E,R=E.parent.isTextblock&&I>0?x.doc.resolve(I-1):E,Y=R.parent.type.spec.isolating,_=E.pos-E.parentOffset,$=Y&&R.parent.childCount===1?_===E.pos:ke.atStart(S).from===I;return!M||!D.type.isTextblock||D.textContent.length||!$||$&&E.parent.type.name==="paragraph"?!1:p.clearNodes()}),()=>p.deleteSelection(),()=>p.joinBackward(),()=>p.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:p})=>[()=>p.deleteSelection(),()=>p.deleteCurrentNode(),()=>p.joinForward(),()=>p.selectNodeForward()]),o={Enter:()=>this.editor.commands.first(({commands:p})=>[()=>p.newlineInCode(),()=>p.createParagraphNear(),()=>p.liftEmptyBlock(),()=>p.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:a,"Mod-Backspace":a,"Shift-Backspace":a,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},c={...o},d={...o,"Ctrl-h":a,"Alt-Backspace":a,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ho()||Md()?d:c},addProseMirrorPlugins(){return[new Ct({key:new Qt("clearDocument"),appendTransaction:(a,t,s)=>{const o=a.some(Y=>Y.docChanged)&&!t.doc.eq(s.doc),c=a.some(Y=>Y.getMeta("preventClearDocument"));if(!o||c)return;const{empty:d,from:p,to:x}=t.selection,w=ke.atStart(t.doc).from,S=ke.atEnd(t.doc).to;if(d||!(p===w&&x===S)||!fo(s.doc))return;const I=s.tr,D=nr({state:s,transaction:I}),{commands:R}=new rr({editor:this.editor,state:D});if(R.clearNodes(),!!I.steps.length)return I}})]}}),Tb=vt.create({name:"paste",addProseMirrorPlugins(){return[new Ct({key:new Qt("tiptapPaste"),props:{handlePaste:(a,t,s)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:s})}}})]}}),Ob=vt.create({name:"tabindex",addProseMirrorPlugins(){return[new Ct({key:new Qt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ji{get name(){return this.node.type.name}constructor(t,s,o=!1,c=null){this.currentNode=null,this.actualDepth=null,this.isBlock=o,this.resolvedPos=t,this.editor=s,this.currentNode=c}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!==null&&t!==void 0?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let s=this.from,o=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,o=this.to-1}this.editor.commands.insertContentAt({from:s,to:o},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(t);return new ji(s,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ji(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ji(t,this.editor)}get children(){const t=[];return this.node.content.forEach((s,o)=>{const c=s.isBlock&&!s.isTextblock,d=s.isAtom&&!s.isText,p=this.pos+o+(d?0:1),x=this.resolvedPos.doc.resolve(p);if(!c&&x.depth<=this.depth)return;const w=new ji(x,this.editor,c,c?s:null);c&&(w.actualDepth=this.depth+1),t.push(new ji(x,this.editor,c,c?s:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,s={}){let o=null,c=this.parent;for(;c&&!o;){if(c.node.type.name===t)if(Object.keys(s).length>0){const d=c.node.attrs,p=Object.keys(s);for(let x=0;x<p.length;x+=1){const w=p[x];if(d[w]!==s[w])break}}else o=c;c=c.parent}return o}querySelector(t,s={}){return this.querySelectorAll(t,s,!0)[0]||null}querySelectorAll(t,s={},o=!1){let c=[];if(!this.children||this.children.length===0)return c;const d=Object.keys(s);return this.children.forEach(p=>{o&&c.length>0||(p.node.type.name===t&&d.every(w=>s[w]===p.node.attrs[w])&&c.push(p),!(o&&c.length>0)&&(c=c.concat(p.querySelectorAll(t,s,o))))}),c}setAttribute(t){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(s)}}const Eb=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Ib(a,t,s){const o=document.querySelector("style[data-tiptap-style]");if(o!==null)return o;const c=document.createElement("style");return t&&c.setAttribute("nonce",t),c.setAttribute("data-tiptap-style",""),c.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(c),c}class Lb extends jm{constructor(t={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:o,moved:c})=>this.options.onDrop(s,o,c)),this.on("paste",({event:s,slice:o})=>this.options.onPaste(s,o)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Ib(Eb,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,s=!0){this.setOptions({editable:t}),s&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,s){const o=yd(s)?s(t,[...this.state.plugins]):[...this.state.plugins,t],c=this.state.reconfigure({plugins:o});return this.view.updateState(c),c}unregisterPlugin(t){if(this.isDestroyed)return;const s=this.state.plugins;let o=s;if([].concat(t).forEach(d=>{const p=typeof d=="string"?`${d}$`:d.key;o=s.filter(x=>!x.key.startsWith(p))}),s.length===o.length)return;const c=this.state.reconfigure({plugins:o});return this.view.updateState(c),c}createExtensionManager(){var t,s;const c=[...this.options.enableCoreExtensions?[Cb,rx.configure({blockSeparator:(s=(t=this.options.coreExtensionOptions)===null||t===void 0?void 0:t.clipboardTextSerializer)===null||s===void 0?void 0:s.blockSeparator}),kb,Ab,Mb,Ob,Sb,Tb].filter(d=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[d.name]!==!1:!0):[],...this.options.extensions].filter(d=>["extension","node","mark"].includes(d==null?void 0:d.type));this.extensionManager=new bs(c,this)}createCommandManager(){this.commandManager=new rr({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var t;let s;try{s=Wa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(p){if(!(p instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(p.message))throw p;this.emit("contentError",{editor:this,error:p,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(x=>x.name!=="collaboration"),this.createExtensionManager()}}),s=Wa(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const o=Cd(s,this.options.autofocus);this.view=new cm(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)===null||t===void 0?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:xs.create({doc:s,selection:o||void 0})});const c=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(c),this.createNodeViews(),this.prependClass();const d=this.view.dom;d.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const s=this.capturedTransaction;return this.capturedTransaction=null,s}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(p=>{var x;return(x=this.capturedTransaction)===null||x===void 0?void 0:x.step(p)});return}const s=this.state.apply(t),o=!this.state.selection.eq(s.selection);this.emit("beforeTransaction",{editor:this,transaction:t,nextState:s}),this.view.updateState(s),this.emit("transaction",{editor:this,transaction:t}),o&&this.emit("selectionUpdate",{editor:this,transaction:t});const c=t.getMeta("focus"),d=t.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:t}),d&&this.emit("blur",{editor:this,event:d.event,transaction:t}),!(!t.docChanged||t.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Qx(this.state,t)}isActive(t,s){const o=typeof t=="string"?t:null,c=typeof t=="string"?s:t;return eb(this.state,o,c)}getJSON(){return this.state.doc.toJSON()}getHTML(){return oo(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:s=`

`,textSerializers:o={}}=t||{};return Zx(this.state.doc,{blockSeparator:s,textSerializers:{...wd(this.schema),...o}})}get isEmpty(){return fo(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const t=this.view.dom;t&&t.editor&&delete t.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var t;return!(!((t=this.view)===null||t===void 0)&&t.docView)}$node(t,s){var o;return((o=this.$doc)===null||o===void 0?void 0:o.querySelector(t,s))||null}$nodes(t,s){var o;return((o=this.$doc)===null||o===void 0?void 0:o.querySelectorAll(t,s))||null}$pos(t){const s=this.state.doc.resolve(t);return new ji(s,this)}get $doc(){return this.$pos(0)}}function Ts(a){return new or({find:a.find,handler:({state:t,range:s,match:o})=>{const c=Se(a.getAttributes,void 0,o);if(c===!1||c===null)return null;const{tr:d}=t,p=o[o.length-1],x=o[0];if(p){const w=x.search(/\S/),S=s.from+x.indexOf(p),M=S+p.length;if(Od(s.from,s.to,t.doc).filter(D=>D.mark.type.excluded.find(Y=>Y===a.type&&Y!==D.mark.type)).filter(D=>D.to>S).length)return null;M<s.to&&d.delete(M,s.to),S>s.from&&d.delete(s.from+w,S);const I=s.from+w+p.length;d.addMark(s.from+w,I,a.type.create(c||{})),d.removeStoredMark(a.type)}}})}function Pb(a){return new or({find:a.find,handler:({state:t,range:s,match:o})=>{const c=Se(a.getAttributes,void 0,o)||{},{tr:d}=t,p=s.from;let x=s.to;const w=a.type.create(c);if(o[1]){const S=o[0].lastIndexOf(o[1]);let M=p+S;M>x?M=x:x=M+o[1].length;const E=o[0][o[0].length-1];d.insertText(E,p+o[0].length-1),d.replaceWith(M,x,w)}else if(o[0]){const S=a.type.isInline?p:p-1;d.insert(S,a.type.create(c)).delete(d.mapping.map(p),d.mapping.map(x))}d.scrollIntoView()}})}function ja(a){return new or({find:a.find,handler:({state:t,range:s,match:o})=>{const c=t.doc.resolve(s.from),d=Se(a.getAttributes,void 0,o)||{};if(!c.node(-1).canReplaceWith(c.index(-1),c.indexAfter(-1),a.type))return null;t.tr.delete(s.from,s.to).setBlockType(s.from,s.from,a.type,d)}})}function an(a){return new or({find:a.find,handler:({state:t,range:s,match:o,chain:c})=>{const d=Se(a.getAttributes,void 0,o)||{},p=t.tr.delete(s.from,s.to),w=p.doc.resolve(s.from).blockRange(),S=w&&Ua(w,a.type,d);if(!S)return null;if(p.wrap(w,S),a.keepMarks&&a.editor){const{selection:E,storedMarks:I}=t,{splittableMarks:D}=a.editor.extensionManager,R=I||E.$to.parentOffset&&E.$from.marks();if(R){const Y=R.filter(_=>D.includes(_.type.name));p.ensureMarks(Y)}}if(a.keepAttributes){const E=a.type.name==="bulletList"||a.type.name==="orderedList"?"listItem":"taskList";c().updateAttributes(E,d).run()}const M=p.doc.resolve(s.from-1).nodeBefore;M&&M.type===a.type&&Li(p.doc,s.from-1)&&(!a.joinPredicate||a.joinPredicate(o,M))&&p.join(s.from-1)}})}let qt=class Va{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Se(le(this,"addOptions",{name:this.name}))),this.storage=Se(le(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Va(t)}configure(t={}){const s=this.extend({...this.config,addOptions:()=>lr(this.options,t)});return s.name=this.name,s.parent=this.parent,s}extend(t={}){const s=new Va(t);return s.parent=this,this.child=s,s.name=t.name?t.name:s.parent.name,t.defaultOptions&&Object.keys(t.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${s.name}".`),s.options=Se(le(s,"addOptions",{name:s.name})),s.storage=Se(le(s,"addStorage",{name:s.name,options:s.options})),s}};function Os(a){return new Qm({find:a.find,handler:({state:t,range:s,match:o,pasteEvent:c})=>{const d=Se(a.getAttributes,void 0,o,c);if(d===!1||d===null)return null;const{tr:p}=t,x=o[o.length-1],w=o[0];let S=s.to;if(x){const M=w.search(/\S/),E=s.from+w.indexOf(x),I=E+x.length;if(Od(s.from,s.to,t.doc).filter(R=>R.mark.type.excluded.find(_=>_===a.type&&_!==R.mark.type)).filter(R=>R.to>E).length)return null;I<s.to&&p.delete(I,s.to),E>s.from&&p.delete(s.from+M,E),S=s.from+M+x.length,p.addMark(s.from+M,S,a.type.create(d||{})),p.removeStoredMark(a.type)}}})}function Nb(a){return a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ed={exports:{}},va={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc;function Db(){if(Yc)return va;Yc=1;var a=gt;function t(E,I){return E===I&&(E!==0||1/E===1/I)||E!==E&&I!==I}var s=typeof Object.is=="function"?Object.is:t,o=a.useState,c=a.useEffect,d=a.useLayoutEffect,p=a.useDebugValue;function x(E,I){var D=I(),R=o({inst:{value:D,getSnapshot:I}}),Y=R[0].inst,_=R[1];return d(function(){Y.value=D,Y.getSnapshot=I,w(Y)&&_({inst:Y})},[E,D,I]),c(function(){return w(Y)&&_({inst:Y}),E(function(){w(Y)&&_({inst:Y})})},[E]),p(D),D}function w(E){var I=E.getSnapshot;E=E.value;try{var D=I();return!s(E,D)}catch{return!0}}function S(E,I){return I()}var M=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S:x;return va.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:M,va}Ed.exports=Db();var po=Ed.exports;const Rb=(...a)=>t=>{a.forEach(s=>{typeof s=="function"?s(t):s&&(s.current=t)})},zb=({contentComponent:a})=>{const t=po.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getServerSnapshot);return gt.createElement(gt.Fragment,null,Object.values(t))};function Fb(){const a=new Set;let t={};return{subscribe(s){return a.add(s),()=>{a.delete(s)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(s,o){t={...t,[s]:Ku.createPortal(o.reactElement,o.element,s)},a.forEach(c=>c())},removeRenderer(s){const o={...t};delete o[s],t=o,a.forEach(c=>c())}}}class Bb extends gt.Component{constructor(t){var s;super(t),this.editorContentRef=gt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((s=t.editor)===null||s===void 0)&&s.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const s=this.editorContentRef.current;s.append(...t.options.element.childNodes),t.setOptions({element:s}),t.contentComponent=Fb(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(o=>o.hasContentComponentInitialized?o:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!t.options.element.firstChild))return;const s=document.createElement("div");s.append(...t.options.element.childNodes),t.setOptions({element:s})}render(){const{editor:t,innerRef:s,...o}=this.props;return gt.createElement(gt.Fragment,null,gt.createElement("div",{ref:Rb(s,this.editorContentRef),...o}),(t==null?void 0:t.contentComponent)&&gt.createElement(zb,{contentComponent:t.contentComponent}))}}const Hb=Ve.forwardRef((a,t)=>{const s=gt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[a.editor]);return gt.createElement(Bb,{key:s,innerRef:t,...a})}),Xb=gt.memo(Hb);var Yb=function a(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var o,c,d;if(Array.isArray(t)){if(o=t.length,o!=s.length)return!1;for(c=o;c--!==0;)if(!a(t[c],s[c]))return!1;return!0}if(t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(c of t.entries())if(!s.has(c[0]))return!1;for(c of t.entries())if(!a(c[1],s.get(c[0])))return!1;return!0}if(t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(c of t.entries())if(!s.has(c[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if(o=t.length,o!=s.length)return!1;for(c=o;c--!==0;)if(t[c]!==s[c])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if(d=Object.keys(t),o=d.length,o!==Object.keys(s).length)return!1;for(c=o;c--!==0;)if(!Object.prototype.hasOwnProperty.call(s,d[c]))return!1;for(c=o;c--!==0;){var p=d[c];if(!(p==="_owner"&&t.$$typeof)&&!a(t[p],s[p]))return!1}return!0}return t!==t&&s!==s},Wb=Nb(Yb),Id={exports:{}},wa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc;function _b(){if(Wc)return wa;Wc=1;var a=gt,t=po;function s(S,M){return S===M&&(S!==0||1/S===1/M)||S!==S&&M!==M}var o=typeof Object.is=="function"?Object.is:s,c=t.useSyncExternalStore,d=a.useRef,p=a.useEffect,x=a.useMemo,w=a.useDebugValue;return wa.useSyncExternalStoreWithSelector=function(S,M,E,I,D){var R=d(null);if(R.current===null){var Y={hasValue:!1,value:null};R.current=Y}else Y=R.current;R=x(function(){function $(ee){if(!ne){if(ne=!0,X=ee,ee=I(ee),D!==void 0&&Y.hasValue){var te=Y.value;if(D(te,ee))return Z=te}return Z=ee}if(te=Z,o(X,ee))return te;var de=I(ee);return D!==void 0&&D(te,de)?te:(X=ee,Z=de)}var ne=!1,X,Z,se=E===void 0?null:E;return[function(){return $(M())},se===null?void 0:function(){return $(se())}]},[M,E,I,D]);var _=c(S,R[0],R[1]);return p(function(){Y.hasValue=!0,Y.value=_},[_]),w(_),_},wa}Id.exports=_b();var jb=Id.exports;const Vb=typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;class Gb{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const s=()=>{this.transactionNumber+=1,this.subscribers.forEach(c=>c())},o=this.editor;return o.on("transaction",s),()=>{o.off("transaction",s)}}}}function qb(a){var t;const[s]=Ve.useState(()=>new Gb(a.editor)),o=jb.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,a.selector,(t=a.equalityFn)!==null&&t!==void 0?t:Wb);return Vb(()=>s.watch(a.editor),[a.editor,s]),Ve.useDebugValue(o),o}const $b=!1,Ga=typeof window>"u",Ub=Ga||!!(typeof window<"u"&&window.next);class Jb{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(s=>s())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Ga||Ub?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...o)=>{var c,d;return(d=(c=this.options.current).onBeforeCreate)===null||d===void 0?void 0:d.call(c,...o)},onBlur:(...o)=>{var c,d;return(d=(c=this.options.current).onBlur)===null||d===void 0?void 0:d.call(c,...o)},onCreate:(...o)=>{var c,d;return(d=(c=this.options.current).onCreate)===null||d===void 0?void 0:d.call(c,...o)},onDestroy:(...o)=>{var c,d;return(d=(c=this.options.current).onDestroy)===null||d===void 0?void 0:d.call(c,...o)},onFocus:(...o)=>{var c,d;return(d=(c=this.options.current).onFocus)===null||d===void 0?void 0:d.call(c,...o)},onSelectionUpdate:(...o)=>{var c,d;return(d=(c=this.options.current).onSelectionUpdate)===null||d===void 0?void 0:d.call(c,...o)},onTransaction:(...o)=>{var c,d;return(d=(c=this.options.current).onTransaction)===null||d===void 0?void 0:d.call(c,...o)},onUpdate:(...o)=>{var c,d;return(d=(c=this.options.current).onUpdate)===null||d===void 0?void 0:d.call(c,...o)},onContentError:(...o)=>{var c,d;return(d=(c=this.options.current).onContentError)===null||d===void 0?void 0:d.call(c,...o)},onDrop:(...o)=>{var c,d;return(d=(c=this.options.current).onDrop)===null||d===void 0?void 0:d.call(c,...o)},onPaste:(...o)=>{var c,d;return(d=(c=this.options.current).onPaste)===null||d===void 0?void 0:d.call(c,...o)}};return new Lb(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((o,c)=>o===t[c]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,s=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){s&&s.setOptions(this.options.current);return}s&&!s.isDestroyed&&(s.destroy(),this.instanceId===t&&this.setEditor(null))},1)}}function Zb(a={},t=[]){const s=Ve.useRef(a);s.current=a;const[o]=Ve.useState(()=>new Jb(s)),c=po.useSyncExternalStore(o.subscribe,o.getEditor,o.getServerSnapshot);return Ve.useDebugValue(c),Ve.useEffect(o.onRender(t)),qb({editor:c,selector:({transactionNumber:d})=>a.shouldRerenderOnTransaction===!1?null:a.immediatelyRender&&d===0?0:d+1}),c}const Kb=Ve.createContext({editor:null});Kb.Consumer;const Qb=Ve.createContext({onDragStart:void 0}),ey=()=>Ve.useContext(Qb);gt.forwardRef((a,t)=>{const{onDragStart:s}=ey(),o=a.as||"div";return gt.createElement(o,{...a,ref:t,"data-node-view-wrapper":"",onDragStart:s,style:{whiteSpace:"normal",...a.style}})});const ty=/^\s*>\s$/,iy=qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:a}){return["blockquote",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setBlockquote:()=>({commands:a})=>a.wrapIn(this.name),toggleBlockquote:()=>({commands:a})=>a.toggleWrap(this.name),unsetBlockquote:()=>({commands:a})=>a.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[an({find:ty,type:this.type})]}}),sy=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ny=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ry=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,ay=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,oy=Ei.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:a=>a.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:a=>a.type.name===this.name},{style:"font-weight",getAttrs:a=>/^(bold(er)?|[5-9]\d{2,})$/.test(a)&&null}]},renderHTML({HTMLAttributes:a}){return["strong",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setBold:()=>({commands:a})=>a.setMark(this.name),toggleBold:()=>({commands:a})=>a.toggleMark(this.name),unsetBold:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ts({find:sy,type:this.type}),Ts({find:ry,type:this.type})]},addPasteRules(){return[Os({find:ny,type:this.type}),Os({find:ay,type:this.type})]}}),ly="listItem",_c="textStyle",jc=/^\s*([-+*])\s$/,cy=qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:a}){return["ul",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{toggleBulletList:()=>({commands:a,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ly,this.editor.getAttributes(_c)).run():a.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let a=an({find:jc,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(a=an({find:jc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(_c),editor:this.editor})),[a]}}),hy=new RegExp("(?<!`)`([^`]+)`(?!`)"),dy=new RegExp("(?<!`)`([^`]+)`(?!`)","g"),uy=Ei.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:a}){return["code",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setCode:()=>({commands:a})=>a.setMark(this.name),toggleCode:()=>({commands:a})=>a.toggleMark(this.name),unsetCode:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ts({find:hy,type:this.type})]},addPasteRules(){return[Os({find:dy,type:this.type})]}}),fy=/^```([a-z]+)?[\s\n]$/,py=/^~~~([a-z]+)?[\s\n]$/,gy=qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:a=>{var t;const{languageClassPrefix:s}=this.options,d=[...((t=a.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(p=>p.startsWith(s)).map(p=>p.replace(s,""))[0];return d||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:a,HTMLAttributes:t}){return["pre",yt(this.options.HTMLAttributes,t),["code",{class:a.attrs.language?this.options.languageClassPrefix+a.attrs.language:null},0]]},addCommands(){return{setCodeBlock:a=>({commands:t})=>t.setNode(this.name,a),toggleCodeBlock:a=>({commands:t})=>t.toggleNode(this.name,"paragraph",a)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:a,$anchor:t}=this.editor.state.selection,s=t.pos===1;return!a||t.parent.type.name!==this.name?!1:s||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:a})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=a,{selection:s}=t,{$from:o,empty:c}=s;if(!c||o.parent.type!==this.type)return!1;const d=o.parentOffset===o.parent.nodeSize-2,p=o.parent.textContent.endsWith(`

`);return!d||!p?!1:a.chain().command(({tr:x})=>(x.delete(o.pos-2,o.pos),!0)).exitCode().run()},ArrowDown:({editor:a})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=a,{selection:s,doc:o}=t,{$from:c,empty:d}=s;if(!d||c.parent.type!==this.type||!(c.parentOffset===c.parent.nodeSize-2))return!1;const x=c.after();return x===void 0?!1:o.nodeAt(x)?a.commands.command(({tr:S})=>(S.setSelection(ke.near(o.resolve(x))),!0)):a.commands.exitCode()}}},addInputRules(){return[ja({find:fy,type:this.type,getAttributes:a=>({language:a[1]})}),ja({find:py,type:this.type,getAttributes:a=>({language:a[1]})})]},addProseMirrorPlugins(){return[new Ct({key:new Qt("codeBlockVSCodeHandler"),props:{handlePaste:(a,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const s=t.clipboardData.getData("text/plain"),o=t.clipboardData.getData("vscode-editor-data"),c=o?JSON.parse(o):void 0,d=c==null?void 0:c.mode;if(!s||!d)return!1;const{tr:p,schema:x}=a.state,w=x.text(s.replace(/\r\n?/g,`
`));return p.replaceSelectionWith(this.type.create({language:d},w)),p.selection.$from.parent.type!==this.type&&p.setSelection(we.near(p.doc.resolve(Math.max(0,p.selection.from-2)))),p.setMeta("paste",!0),a.dispatch(p),!0}}})]}}),my=qt.create({name:"doc",topNode:!0,content:"block+"});function xy(a={}){return new Ct({view(t){return new by(t,a)}})}class by{constructor(t,s){var o;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(o=s.width)!==null&&o!==void 0?o:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(c=>{let d=p=>{this[c](p)};return t.dom.addEventListener(c,d),{name:c,handler:d}})}destroy(){this.handlers.forEach(({name:t,handler:s})=>this.editorView.dom.removeEventListener(t,s))}update(t,s){this.cursorPos!=null&&s.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),s=!t.parent.inlineContent,o;if(s){let x=t.nodeBefore,w=t.nodeAfter;if(x||w){let S=this.editorView.nodeDOM(this.cursorPos-(x?x.nodeSize:0));if(S){let M=S.getBoundingClientRect(),E=x?M.bottom:M.top;x&&w&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),o={left:M.left,right:M.right,top:E-this.width/2,bottom:E+this.width/2}}}}if(!o){let x=this.editorView.coordsAtPos(this.cursorPos);o={left:x.left-this.width/2,right:x.left+this.width/2,top:x.top,bottom:x.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let d,p;if(!c||c==document.body&&getComputedStyle(c).position=="static")d=-pageXOffset,p=-pageYOffset;else{let x=c.getBoundingClientRect();d=x.left-c.scrollLeft,p=x.top-c.scrollTop}this.element.style.left=o.left-d+"px",this.element.style.top=o.top-p+"px",this.element.style.width=o.right-o.left+"px",this.element.style.height=o.bottom-o.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),o=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),c=o&&o.type.spec.disableDropCursor,d=typeof c=="function"?c(this.editorView,s,t):c;if(s&&!d){let p=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let x=Ch(this.editorView.state.doc,p,this.editorView.dragging.slice);x!=null&&(p=x)}this.setCursor(p),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}const yy=vt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[xy(this.options)]}});class Ge extends ke{constructor(t){super(t,t)}map(t,s){let o=t.resolve(s.map(this.head));return Ge.valid(o)?new Ge(o):ke.near(o)}content(){return oe.empty}eq(t){return t instanceof Ge&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ge(t.resolve(s.pos))}getBookmark(){return new go(this.anchor)}static valid(t){let s=t.parent;if(s.isTextblock||!vy(t)||!wy(t))return!1;let o=s.type.spec.allowGapCursor;if(o!=null)return o;let c=s.contentMatchAt(t.index()).defaultType;return c&&c.isTextblock}static findGapCursorFrom(t,s,o=!1){e:for(;;){if(!o&&Ge.valid(t))return t;let c=t.pos,d=null;for(let p=t.depth;;p--){let x=t.node(p);if(s>0?t.indexAfter(p)<x.childCount:t.index(p)>0){d=x.child(s>0?t.indexAfter(p):t.index(p)-1);break}else if(p==0)return null;c+=s;let w=t.doc.resolve(c);if(Ge.valid(w))return w}for(;;){let p=s>0?d.firstChild:d.lastChild;if(!p){if(d.isAtom&&!d.isText&&!ge.isSelectable(d)){t=t.doc.resolve(c+d.nodeSize*s),o=!1;continue e}break}d=p,c+=s;let x=t.doc.resolve(c);if(Ge.valid(x))return x}return null}}}Ge.prototype.visible=!1;Ge.findFrom=Ge.findGapCursorFrom;ke.jsonID("gapcursor",Ge);class go{constructor(t){this.pos=t}map(t){return new go(t.map(this.pos))}resolve(t){let s=t.resolve(this.pos);return Ge.valid(s)?new Ge(s):ke.near(s)}}function vy(a){for(let t=a.depth;t>=0;t--){let s=a.index(t),o=a.node(t);if(s==0){if(o.type.spec.isolating)return!0;continue}for(let c=o.child(s-1);;c=c.lastChild){if(c.childCount==0&&!c.inlineContent||c.isAtom||c.type.spec.isolating)return!0;if(c.inlineContent)return!1}}return!0}function wy(a){for(let t=a.depth;t>=0;t--){let s=a.indexAfter(t),o=a.node(t);if(s==o.childCount){if(o.type.spec.isolating)return!0;continue}for(let c=o.child(s);;c=c.firstChild){if(c.childCount==0&&!c.inlineContent||c.isAtom||c.type.spec.isolating)return!0;if(c.inlineContent)return!1}}return!0}function ky(){return new Ct({props:{decorations:My,createSelectionBetween(a,t,s){return t.pos==s.pos&&Ge.valid(s)?new Ge(s):null},handleClick:Cy,handleKeyDown:Sy,handleDOMEvents:{beforeinput:Ay}}})}const Sy=dd({ArrowLeft:Ln("horiz",-1),ArrowRight:Ln("horiz",1),ArrowUp:Ln("vert",-1),ArrowDown:Ln("vert",1)});function Ln(a,t){const s=a=="vert"?t>0?"down":"up":t>0?"right":"left";return function(o,c,d){let p=o.selection,x=t>0?p.$to:p.$from,w=p.empty;if(p instanceof we){if(!d.endOfTextblock(s)||x.depth==0)return!1;w=!1,x=o.doc.resolve(t>0?x.after():x.before())}let S=Ge.findGapCursorFrom(x,t,w);return S?(c&&c(o.tr.setSelection(new Ge(S))),!0):!1}}function Cy(a,t,s){if(!a||!a.editable)return!1;let o=a.state.doc.resolve(t);if(!Ge.valid(o))return!1;let c=a.posAtCoords({left:s.clientX,top:s.clientY});return c&&c.inside>-1&&ge.isSelectable(a.state.doc.nodeAt(c.inside))?!1:(a.dispatch(a.state.tr.setSelection(new Ge(o))),!0)}function Ay(a,t){if(t.inputType!="insertCompositionText"||!(a.state.selection instanceof Ge))return!1;let{$from:s}=a.state.selection,o=s.parent.contentMatchAt(s.index()).findWrapping(a.state.schema.nodes.text);if(!o)return!1;let c=ie.empty;for(let p=o.length-1;p>=0;p--)c=ie.from(o[p].createAndFill(null,c));let d=a.state.tr.replace(s.pos,s.pos,new oe(c,0,0));return d.setSelection(we.near(d.doc.resolve(s.pos+1))),a.dispatch(d),!1}function My(a){if(!(a.selection instanceof Ge))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ue.create(a.doc,[Ht.widget(a.selection.head,t,{key:"gapcursor"})])}const Ty=vt.create({name:"gapCursor",addProseMirrorPlugins(){return[ky()]},extendNodeSchema(a){var t;const s={name:a.name,options:a.options,storage:a.storage};return{allowGapCursor:(t=Se(le(a,"allowGapCursor",s)))!==null&&t!==void 0?t:null}}}),Oy=qt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:a}){return["br",yt(this.options.HTMLAttributes,a)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:a,chain:t,state:s,editor:o})=>a.first([()=>a.exitCode(),()=>a.command(()=>{const{selection:c,storedMarks:d}=s;if(c.$from.parent.type.spec.isolating)return!1;const{keepMarks:p}=this.options,{splittableMarks:x}=o.extensionManager,w=d||c.$to.parentOffset&&c.$from.marks();return t().insertContent({type:this.name}).command(({tr:S,dispatch:M})=>{if(M&&w&&p){const E=w.filter(I=>x.includes(I.type.name));S.ensureMarks(E)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Ey=qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(a=>({tag:`h${a}`,attrs:{level:a}}))},renderHTML({node:a,HTMLAttributes:t}){return[`h${this.options.levels.includes(a.attrs.level)?a.attrs.level:this.options.levels[0]}`,yt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:a=>({commands:t})=>this.options.levels.includes(a.level)?t.setNode(this.name,a):!1,toggleHeading:a=>({commands:t})=>this.options.levels.includes(a.level)?t.toggleNode(this.name,"paragraph",a):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((a,t)=>({...a,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(a=>ja({find:new RegExp(`^(#{1,${a}})\\s$`),type:this.type,getAttributes:{level:a}}))}});var Jn=200,Ke=function(){};Ke.prototype.append=function(t){return t.length?(t=Ke.from(t),!this.length&&t||t.length<Jn&&this.leafAppend(t)||this.length<Jn&&t.leafPrepend(this)||this.appendInner(t)):this};Ke.prototype.prepend=function(t){return t.length?Ke.from(t).append(this):this};Ke.prototype.appendInner=function(t){return new Iy(this,t)};Ke.prototype.slice=function(t,s){return t===void 0&&(t=0),s===void 0&&(s=this.length),t>=s?Ke.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,s))};Ke.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ke.prototype.forEach=function(t,s,o){s===void 0&&(s=0),o===void 0&&(o=this.length),s<=o?this.forEachInner(t,s,o,0):this.forEachInvertedInner(t,s,o,0)};Ke.prototype.map=function(t,s,o){s===void 0&&(s=0),o===void 0&&(o=this.length);var c=[];return this.forEach(function(d,p){return c.push(t(d,p))},s,o),c};Ke.from=function(t){return t instanceof Ke?t:t&&t.length?new Ld(t):Ke.empty};var Ld=function(a){function t(o){a.call(this),this.values=o}t.__proto__=a,t.prototype=Object.create(a.prototype),t.prototype.constructor=t;var s={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(c,d){return c==0&&d==this.length?this:new t(this.values.slice(c,d))},t.prototype.getInner=function(c){return this.values[c]},t.prototype.forEachInner=function(c,d,p,x){for(var w=d;w<p;w++)if(c(this.values[w],x+w)===!1)return!1},t.prototype.forEachInvertedInner=function(c,d,p,x){for(var w=d-1;w>=p;w--)if(c(this.values[w],x+w)===!1)return!1},t.prototype.leafAppend=function(c){if(this.length+c.length<=Jn)return new t(this.values.concat(c.flatten()))},t.prototype.leafPrepend=function(c){if(this.length+c.length<=Jn)return new t(c.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(t.prototype,s),t}(Ke);Ke.empty=new Ld([]);var Iy=function(a){function t(s,o){a.call(this),this.left=s,this.right=o,this.length=s.length+o.length,this.depth=Math.max(s.depth,o.depth)+1}return t.__proto__=a,t.prototype=Object.create(a.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(o){return o<this.left.length?this.left.get(o):this.right.get(o-this.left.length)},t.prototype.forEachInner=function(o,c,d,p){var x=this.left.length;if(c<x&&this.left.forEachInner(o,c,Math.min(d,x),p)===!1||d>x&&this.right.forEachInner(o,Math.max(c-x,0),Math.min(this.length,d)-x,p+x)===!1)return!1},t.prototype.forEachInvertedInner=function(o,c,d,p){var x=this.left.length;if(c>x&&this.right.forEachInvertedInner(o,c-x,Math.max(d,x)-x,p+x)===!1||d<x&&this.left.forEachInvertedInner(o,Math.min(c,x),d,p)===!1)return!1},t.prototype.sliceInner=function(o,c){if(o==0&&c==this.length)return this;var d=this.left.length;return c<=d?this.left.slice(o,c):o>=d?this.right.slice(o-d,c-d):this.left.slice(o,d).append(this.right.slice(0,c-d))},t.prototype.leafAppend=function(o){var c=this.right.leafAppend(o);if(c)return new t(this.left,c)},t.prototype.leafPrepend=function(o){var c=this.left.leafPrepend(o);if(c)return new t(c,this.right)},t.prototype.appendInner=function(o){return this.left.depth>=Math.max(this.right.depth,o.depth)+1?new t(this.left,new t(this.right,o)):new t(this,o)},t}(Ke);const Ly=500;class jt{constructor(t,s){this.items=t,this.eventCount=s}popEvent(t,s){if(this.eventCount==0)return null;let o=this.items.length;for(;;o--)if(this.items.get(o-1).selection){--o;break}let c,d;s&&(c=this.remapping(o,this.items.length),d=c.maps.length);let p=t.tr,x,w,S=[],M=[];return this.items.forEach((E,I)=>{if(!E.step){c||(c=this.remapping(o,I+1),d=c.maps.length),d--,M.push(E);return}if(c){M.push(new Ut(E.map));let D=E.step.map(c.slice(d)),R;D&&p.maybeStep(D).doc&&(R=p.mapping.maps[p.mapping.maps.length-1],S.push(new Ut(R,void 0,void 0,S.length+M.length))),d--,R&&c.appendMap(R,d)}else p.maybeStep(E.step);if(E.selection)return x=c?E.selection.map(c.slice(d)):E.selection,w=new jt(this.items.slice(0,o).append(M.reverse().concat(S)),this.eventCount-1),!1},this.items.length,0),{remaining:w,transform:p,selection:x}}addTransform(t,s,o,c){let d=[],p=this.eventCount,x=this.items,w=!c&&x.length?x.get(x.length-1):null;for(let M=0;M<t.steps.length;M++){let E=t.steps[M].invert(t.docs[M]),I=new Ut(t.mapping.maps[M],E,s),D;(D=w&&w.merge(I))&&(I=D,M?d.pop():x=x.slice(0,x.length-1)),d.push(I),s&&(p++,s=void 0),c||(w=I)}let S=p-o.depth;return S>Ny&&(x=Py(x,S),p-=S),new jt(x.append(d),p)}remapping(t,s){let o=new ys;return this.items.forEach((c,d)=>{let p=c.mirrorOffset!=null&&d-c.mirrorOffset>=t?o.maps.length-c.mirrorOffset:void 0;o.appendMap(c.map,p)},t,s),o}addMaps(t){return this.eventCount==0?this:new jt(this.items.append(t.map(s=>new Ut(s))),this.eventCount)}rebased(t,s){if(!this.eventCount)return this;let o=[],c=Math.max(0,this.items.length-s),d=t.mapping,p=t.steps.length,x=this.eventCount;this.items.forEach(I=>{I.selection&&x--},c);let w=s;this.items.forEach(I=>{let D=d.getMirror(--w);if(D==null)return;p=Math.min(p,D);let R=d.maps[D];if(I.step){let Y=t.steps[D].invert(t.docs[D]),_=I.selection&&I.selection.map(d.slice(w+1,D));_&&x++,o.push(new Ut(R,Y,_))}else o.push(new Ut(R))},c);let S=[];for(let I=s;I<p;I++)S.push(new Ut(d.maps[I]));let M=this.items.slice(0,c).append(S).append(o),E=new jt(M,x);return E.emptyItemCount()>Ly&&(E=E.compress(this.items.length-o.length)),E}emptyItemCount(){let t=0;return this.items.forEach(s=>{s.step||t++}),t}compress(t=this.items.length){let s=this.remapping(0,t),o=s.maps.length,c=[],d=0;return this.items.forEach((p,x)=>{if(x>=t)c.push(p),p.selection&&d++;else if(p.step){let w=p.step.map(s.slice(o)),S=w&&w.getMap();if(o--,S&&s.appendMap(S,o),w){let M=p.selection&&p.selection.map(s.slice(o));M&&d++;let E=new Ut(S.invert(),w,M),I,D=c.length-1;(I=c.length&&c[D].merge(E))?c[D]=I:c.push(E)}}else p.map&&o--},this.items.length,0),new jt(Ke.from(c.reverse()),d)}}jt.empty=new jt(Ke.empty,0);function Py(a,t){let s;return a.forEach((o,c)=>{if(o.selection&&t--==0)return s=c,!1}),a.slice(s)}class Ut{constructor(t,s,o,c){this.map=t,this.step=s,this.selection=o,this.mirrorOffset=c}merge(t){if(this.step&&t.step&&!t.selection){let s=t.step.merge(this.step);if(s)return new Ut(s.getMap().invert(),s,this.selection)}}}class mi{constructor(t,s,o,c,d){this.done=t,this.undone=s,this.prevRanges=o,this.prevTime=c,this.prevComposition=d}}const Ny=20;function Dy(a,t,s,o){let c=s.getMeta(Qi),d;if(c)return c.historyState;s.getMeta(Fy)&&(a=new mi(a.done,a.undone,null,0,-1));let p=s.getMeta("appendedTransaction");if(s.steps.length==0)return a;if(p&&p.getMeta(Qi))return p.getMeta(Qi).redo?new mi(a.done.addTransform(s,void 0,o,zn(t)),a.undone,Vc(s.mapping.maps),a.prevTime,a.prevComposition):new mi(a.done,a.undone.addTransform(s,void 0,o,zn(t)),null,a.prevTime,a.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(p&&p.getMeta("addToHistory")===!1)){let x=s.getMeta("composition"),w=a.prevTime==0||!p&&a.prevComposition!=x&&(a.prevTime<(s.time||0)-o.newGroupDelay||!Ry(s,a.prevRanges)),S=p?ka(a.prevRanges,s.mapping):Vc(s.mapping.maps);return new mi(a.done.addTransform(s,w?t.selection.getBookmark():void 0,o,zn(t)),jt.empty,S,s.time,x??a.prevComposition)}else return(d=s.getMeta("rebased"))?new mi(a.done.rebased(s,d),a.undone.rebased(s,d),ka(a.prevRanges,s.mapping),a.prevTime,a.prevComposition):new mi(a.done.addMaps(s.mapping.maps),a.undone.addMaps(s.mapping.maps),ka(a.prevRanges,s.mapping),a.prevTime,a.prevComposition)}function Ry(a,t){if(!t)return!1;if(!a.docChanged)return!0;let s=!1;return a.mapping.maps[0].forEach((o,c)=>{for(let d=0;d<t.length;d+=2)o<=t[d+1]&&c>=t[d]&&(s=!0)}),s}function Vc(a){let t=[];for(let s=a.length-1;s>=0&&t.length==0;s--)a[s].forEach((o,c,d,p)=>t.push(d,p));return t}function ka(a,t){if(!a)return null;let s=[];for(let o=0;o<a.length;o+=2){let c=t.map(a[o],1),d=t.map(a[o+1],-1);c<=d&&s.push(c,d)}return s}function zy(a,t,s){let o=zn(t),c=Qi.get(t).spec.config,d=(s?a.undone:a.done).popEvent(t,o);if(!d)return null;let p=d.selection.resolve(d.transform.doc),x=(s?a.done:a.undone).addTransform(d.transform,t.selection.getBookmark(),c,o),w=new mi(s?x:d.remaining,s?d.remaining:x,null,0,-1);return d.transform.setSelection(p).setMeta(Qi,{redo:s,historyState:w})}let Sa=!1,Gc=null;function zn(a){let t=a.plugins;if(Gc!=t){Sa=!1,Gc=t;for(let s=0;s<t.length;s++)if(t[s].spec.historyPreserveItems){Sa=!0;break}}return Sa}const Qi=new Qt("history"),Fy=new Qt("closeHistory");function By(a={}){return a={depth:a.depth||100,newGroupDelay:a.newGroupDelay||500},new Ct({key:Qi,state:{init(){return new mi(jt.empty,jt.empty,null,0,-1)},apply(t,s,o){return Dy(s,o,t,a)}},config:a,props:{handleDOMEvents:{beforeinput(t,s){let o=s.inputType,c=o=="historyUndo"?Nd:o=="historyRedo"?Dd:null;return c?(s.preventDefault(),c(t.state,t.dispatch)):!1}}}})}function Pd(a,t){return(s,o)=>{let c=Qi.getState(s);if(!c||(a?c.undone:c.done).eventCount==0)return!1;if(o){let d=zy(c,s,a);d&&o(t?d.scrollIntoView():d)}return!0}}const Nd=Pd(!1,!0),Dd=Pd(!0,!0),Hy=vt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:a,dispatch:t})=>Nd(a,t),redo:()=>({state:a,dispatch:t})=>Dd(a,t)}},addProseMirrorPlugins(){return[By(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),Xy=qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:a}){return["hr",yt(this.options.HTMLAttributes,a)]},addCommands(){return{setHorizontalRule:()=>({chain:a,state:t})=>{const{selection:s}=t,{$from:o,$to:c}=s,d=a();return o.parentOffset===0?d.insertContentAt({from:Math.max(o.pos-1,0),to:c.pos},{type:this.name}):tb(s)?d.insertContentAt(c.pos,{type:this.name}):d.insertContent({type:this.name}),d.command(({tr:p,dispatch:x})=>{var w;if(x){const{$to:S}=p.selection,M=S.end();if(S.nodeAfter)S.nodeAfter.isTextblock?p.setSelection(we.create(p.doc,S.pos+1)):S.nodeAfter.isBlock?p.setSelection(ge.create(p.doc,S.pos)):p.setSelection(we.create(p.doc,S.pos));else{const E=(w=S.parent.type.contentMatch.defaultType)===null||w===void 0?void 0:w.create();E&&(p.insert(M,E),p.setSelection(we.create(p.doc,M+1)))}p.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Pb({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),Yy=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Wy=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,_y=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,jy=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Vy=Ei.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:a=>a.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:a=>a.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:a}){return["em",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setItalic:()=>({commands:a})=>a.setMark(this.name),toggleItalic:()=>({commands:a})=>a.toggleMark(this.name),unsetItalic:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ts({find:Yy,type:this.type}),Ts({find:_y,type:this.type})]},addPasteRules(){return[Os({find:Wy,type:this.type}),Os({find:jy,type:this.type})]}}),Gy=qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:a}){return["li",yt(this.options.HTMLAttributes,a),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qy="listItem",qc="textStyle",$c=/^(\d+)\.\s$/,$y=qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:a=>a.hasAttribute("start")?parseInt(a.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:a=>a.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:a}){const{start:t,...s}=a;return t===1?["ol",yt(this.options.HTMLAttributes,s),0]:["ol",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{toggleOrderedList:()=>({commands:a,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qy,this.editor.getAttributes(qc)).run():a.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let a=an({find:$c,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(a=an({find:$c,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(qc)}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1],editor:this.editor})),[a]}}),Uy=qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:a}){return["p",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setParagraph:()=>({commands:a})=>a.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Jy=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Zy=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ky=Ei.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:a=>a.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:a}){return["s",yt(this.options.HTMLAttributes,a),0]},addCommands(){return{setStrike:()=>({commands:a})=>a.setMark(this.name),toggleStrike:()=>({commands:a})=>a.toggleMark(this.name),unsetStrike:()=>({commands:a})=>a.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ts({find:Jy,type:this.type})]},addPasteRules(){return[Os({find:Zy,type:this.type})]}}),Qy=qt.create({name:"text",group:"inline"}),ev=vt.create({name:"starterKit",addExtensions(){var a,t,s,o,c,d,p,x,w,S,M,E,I,D,R,Y,_,$;const ne=[];return this.options.bold!==!1&&ne.push(oy.configure((a=this.options)===null||a===void 0?void 0:a.bold)),this.options.blockquote!==!1&&ne.push(iy.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bulletList!==!1&&ne.push(cy.configure((s=this.options)===null||s===void 0?void 0:s.bulletList)),this.options.code!==!1&&ne.push(uy.configure((o=this.options)===null||o===void 0?void 0:o.code)),this.options.codeBlock!==!1&&ne.push(gy.configure((c=this.options)===null||c===void 0?void 0:c.codeBlock)),this.options.document!==!1&&ne.push(my.configure((d=this.options)===null||d===void 0?void 0:d.document)),this.options.dropcursor!==!1&&ne.push(yy.configure((p=this.options)===null||p===void 0?void 0:p.dropcursor)),this.options.gapcursor!==!1&&ne.push(Ty.configure((x=this.options)===null||x===void 0?void 0:x.gapcursor)),this.options.hardBreak!==!1&&ne.push(Oy.configure((w=this.options)===null||w===void 0?void 0:w.hardBreak)),this.options.heading!==!1&&ne.push(Ey.configure((S=this.options)===null||S===void 0?void 0:S.heading)),this.options.history!==!1&&ne.push(Hy.configure((M=this.options)===null||M===void 0?void 0:M.history)),this.options.horizontalRule!==!1&&ne.push(Xy.configure((E=this.options)===null||E===void 0?void 0:E.horizontalRule)),this.options.italic!==!1&&ne.push(Vy.configure((I=this.options)===null||I===void 0?void 0:I.italic)),this.options.listItem!==!1&&ne.push(Gy.configure((D=this.options)===null||D===void 0?void 0:D.listItem)),this.options.orderedList!==!1&&ne.push($y.configure((R=this.options)===null||R===void 0?void 0:R.orderedList)),this.options.paragraph!==!1&&ne.push(Uy.configure((Y=this.options)===null||Y===void 0?void 0:Y.paragraph)),this.options.strike!==!1&&ne.push(Ky.configure((_=this.options)===null||_===void 0?void 0:_.strike)),this.options.text!==!1&&ne.push(Qy.configure(($=this.options)===null||$===void 0?void 0:$.text)),ne}}),tv=a=>{const{content:t="",customToolBar:s,invalid:o,onChange:c,editorContentClass:d,customEditor:p,ref:x,...w}=a,S=p||Zb({extensions:[ev.configure({bulletList:{keepMarks:!0},orderedList:{keepMarks:!0}})],editorProps:{attributes:{class:"m-2 focus:outline-none"}},content:t,onUpdate({editor:M}){c==null||c({text:M.getText(),html:M.getHTML(),json:M.getJSON()})}});return S?J.jsxs("div",{className:Ca("rich-text-editor rounded-xl ring-1 ring-gray-200 dark:ring-gray-600 border border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 pt-3",S.isFocused&&"ring-primary border-primary",o&&"bg-error-subtle",S.isFocused&&o&&"bg-error-subtle ring-error border-error"),children:[J.jsx("div",{className:"flex gap-x-1 gap-y-2 px-2",children:s?s(S,{ToolButtonBold:Al,ToolButtonItalic:Ml,ToolButtonStrike:Tl,ToolButtonCode:Ol,ToolButtonBlockquote:Ll,ToolButtonHeading:Nl,ToolButtonBulletList:Dl,ToolButtonOrderedList:El,ToolButtonCodeBlock:Il,ToolButtonHorizontalRule:Pl,ToolButtonParagraph:Nf,ToolButtonUndo:Df,ToolButtonRedo:Rf}):J.jsxs(J.Fragment,{children:[J.jsx(Al,{editor:S}),J.jsx(Ml,{editor:S}),J.jsx(Tl,{editor:S}),J.jsx(Ol,{editor:S}),J.jsx(Ll,{editor:S}),J.jsx(Nl,{editor:S}),J.jsx(Dl,{editor:S}),J.jsx(El,{editor:S}),J.jsx(Il,{editor:S}),J.jsx(Pl,{editor:S})]})}),J.jsx(Xb,{ref:x,className:Ca("max-h-[600px] overflow-auto px-2 prose prose-p:text-sm prose-p:dark:text-gray-400 max-w-full",d),editor:S,...w})]}):null};function iv({control:a,errors:t,register:s}){const{fields:o,append:c,remove:d}=Uc({control:a,name:"customQuestions"});return J.jsxs("div",{className:"mt-5",children:[o.map((p,x)=>{var w,S,M,E,I,D,R,Y,_,$,ne,X,Z,se,ee,te,de,ue,Fe,Pe;return J.jsxs("div",{className:"mt-5 w-full flex flex-wrap mb-5",children:[J.jsxs("div",{className:"flex w-full flex-wrap",children:[J.jsx(bi,{className:"w-full",label:"Название",layout:"vertical",invalid:!!((S=(w=t.customQuestions)==null?void 0:w[x])!=null&&S.label),errorMessage:(I=(E=(M=t.customQuestions)==null?void 0:M[x])==null?void 0:E.label)==null?void 0:I.message,children:J.jsx(yi,{name:`customQuestions.${x}.label`,control:a,render:({field:Ye})=>J.jsx(Gs,{type:"text",autoComplete:"off",placeholder:"Введите название",...Ye})})}),J.jsx(bi,{className:"w-full",layout:"vertical",label:"Описание",invalid:!!((R=(D=t.customQuestions)==null?void 0:D[x])!=null&&R.description),errorMessage:($=(_=(Y=t.customQuestions)==null?void 0:Y[x])==null?void 0:_.description)==null?void 0:$.message,children:J.jsx(yi,{name:`customQuestions.${x}.description`,control:a,render:({field:Ye})=>J.jsx(Gs,{type:"text",autoComplete:"off",placeholder:"Введите описание",...Ye})})})]}),J.jsxs("div",{className:"w-full",children:[J.jsx(bi,{asterisk:!0,label:"Изображение",invalid:!!((X=(ne=t.customQuestions)==null?void 0:ne[x])!=null&&X.image),errorMessage:(ee=(se=(Z=t.customQuestions)==null?void 0:Z[x])==null?void 0:se.image)==null?void 0:ee.message,children:J.jsx(yi,{name:`customQuestions.${x}.image`,control:a,render:({field:Ye})=>J.jsx(kf,{uploadLimit:1,fileList:Ye.value,onFileRemove:He=>Ye.onChange(He),onChange:He=>Ye.onChange(He),children:J.jsxs($i,{onClick:He=>He.preventDefault(),children:[" ","Выбрать изображение"," "]})})})}),J.jsx(bi,{layout:"vertical",className:"w-full",label:"Описание изображения",invalid:!!((de=(te=t.customQuestions)==null?void 0:te[x])!=null&&de.imageDescription),errorMessage:(Pe=(Fe=(ue=t.customQuestions)==null?void 0:ue[x])==null?void 0:Fe.imageDescription)==null?void 0:Pe.message,children:J.jsx(yi,{name:`customQuestions.${x}.imageDescription`,control:a,render:({field:Ye})=>J.jsx(Gs,{type:"text",autoComplete:"off",placeholder:"Введите описание",...Ye})})}),J.jsx($i,{className:"",type:"button",shape:"circle",size:"sm",icon:J.jsx(Zc,{}),onClick:()=>d(x),children:" Удалить "})]})]},p.id)}),J.jsx($i,{type:"button",onClick:()=>{c({value:""})},children:"Добавить опцию"})]})}const sv=({control:a,errors:t,register:s})=>{const{fields:o,append:c,remove:d}=Uc({name:"inputs",control:a});return J.jsxs("div",{children:[J.jsx("div",{className:"mb-5",children:J.jsx("h5",{className:"mb-2",children:"Дополнительные вопросы"})}),o.map((p,x)=>J.jsxs("div",{children:[J.jsx(bi,{layout:"vertical",label:"Вопрос",children:J.jsx(yi,{name:`inputs.${x}.value`,control:a,render:({field:w})=>J.jsx(Gs,{type:"text",autoComplete:"off",...w})})}),J.jsx($i,{type:"button",shape:"circle",size:"sm",className:"mb-5",icon:J.jsx(Zc,{}),onClick:()=>d(x),children:" Удалить "})]},x)),J.jsx("div",{className:"flex items-center gap-2",children:J.jsx($i,{type:"button",className:"ltr:mr-2 rtl:ml-2",onClick:()=>{c({value:""})},children:"Добавить вопрос"})})]})},nv=kt.object({label:kt.string().min(1,{message:"Обязательное поле"}),description:kt.string().optional(),customQuestions:kt.array(kt.object({label:kt.string().min(1,"Заполните название"),description:kt.string().min(1,"Заполните описание").optional(),image:kt.array(kt.instanceof(File),{message:"Загрузите изображение"}).nonempty("Загрузите изображение"),imageDescription:kt.string().optional()})),inputs:kt.array(kt.object({value:kt.string().optional()})),visible:kt.string().default("PUBLIC")}),Pn={label:"",description:"",customQuestions:[{label:"",description:"",image:void 0,imageDescription:""}],inputs:[{value:""}],visible:"PUBLIC"},xv=()=>{var w,S;const{control:a,handleSubmit:t,register:s,getValues:o,setValue:c,reset:d,formState:{errors:p}}=Qu({defaultValues:Pn,resolver:tf(nv)}),x=async M=>{try{const E=await nf({description:M.description,label:M.label,options:[...M.customQuestions],inputs:[...M.inputs.flatMap(D=>Object.values(D))],visible:M.visible}),{id:I}=E;I&&E.options.forEach(D=>{const{label:R}=D,Y=M.customQuestions.find(_=>_.label===R);if(Y!=null&&Y.image){const _=new FormData;Y==null||Y.image.forEach($=>{_.append("file",$)}),rf(_,I.toString(),D.id.toString()).catch($=>{Zr.error($.response.data.message)})}}),Zr.success("Задание успешно создано"),d({...Pn}),console.log(E)}catch(E){console.log(E),Zr.error("Произошла ошибка")}};return J.jsxs(J.Fragment,{children:[J.jsx("h1",{className:"mb-5 h3",children:"Создать задание"}),J.jsx(ef,{layout:"inline",onSubmit:t(x),children:J.jsxs("div",{className:"grid-cols-1 gap-2 grid w-3/4",children:[J.jsx("div",{children:J.jsxs(Jr,{children:[J.jsx("h5",{className:"mb-4",children:"Общая информация"}),J.jsx(bi,{layout:"vertical",label:"Текст задания",invalid:!!p.label,errorMessage:(w=p.label)==null?void 0:w.message,className:"mb-0",children:J.jsx(yi,{name:"label",control:a,render:({field:M})=>J.jsx(Gs,{type:"text",autoComplete:"off",placeholder:"Укажите, какой товар на ваш взгляд более привлекательный",...M})})}),J.jsx(bi,{layout:"vertical",label:"Описание задания",className:"mb-0 mt-5",children:J.jsx(yi,{name:"description",control:a,render:({field:M})=>J.jsx(tv,{content:M.value,invalid:!!p.description,onChange:({html:E})=>{M.onChange(E)}})})}),J.jsx(bi,{asterisk:!0,className:"mb-0 mt-5",layout:"vertical",label:"Тип задания",invalid:!!p.visible,errorMessage:(S=p.visible)==null?void 0:S.message,children:J.jsx(yi,{name:"visible",control:a,render:({field:M})=>J.jsxs(Kr.Group,{...M,children:[J.jsx(Kr,{value:"PUBLIC",children:"Публичный"}),J.jsx(Kr,{value:"PRIVATE",children:"Приватный"})]})})})]})}),J.jsxs("div",{children:[J.jsxs(Jr,{children:[J.jsx("h5",{className:"mb-4",children:"Опции"}),J.jsx(iv,{errors:p,control:a,register:s,defaultValues:Pn,getValues:o,setValue:c})]}),J.jsx(Jr,{className:"mb-4 mt-2",children:J.jsx(sv,{errors:p,control:a,register:s,defaultValues:Pn,getValues:o,setValue:c})})]}),J.jsx("div",{className:"grid-cols",children:J.jsx($i,{className:"mt-2",type:"submit",variant:"solid",children:"Отправить"})})]})}),J.jsx(sf,{})]})};export{xv as default};
