import{j as e,r as o,P as j,h as f}from"./index-DmENW6B2.js";import{y as m,C as d,L as p,c as w}from"./index-fVCei9CP.js";import{p as b}from"./index-CsPxhSsc.js";const x=({item:s,isOpen:t,onClick:i})=>e.jsxs("li",{className:"relative border-b border-gray-200",children:[e.jsx("button",{type:"button",className:"w-full px-6 py-6 text-left",onClick:i,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.title}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${t?"rotate-180":""}`,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{d:"M19 9l-7 7-7-7"})})]})}),e.jsx("div",{className:`relative overflow-hidden transition-all duration-700 ${t?"max-h-[500px]":"max-h-0"}`,children:e.jsx("div",{className:"px-6 pb-6",children:s.content.map((c,a)=>e.jsx("div",{children:c},a))})})]}),N=({data:s})=>{const[t,i]=o.useState(null),c=a=>{i(t===a?null:a)};return e.jsx("div",{className:"w-screen flex max-w-full",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-white max-w-full mx-auto border border-gray-200",children:e.jsx("ul",{className:"shadow-box",children:s.slice(0,2).map((a,l)=>e.jsx(x,{item:a,isOpen:t===l,onClick:()=>c(l)},l))})}),e.jsx("div",{className:"bg-white max-w-full mx-auto border border-gray-200",children:e.jsx("ul",{className:"shadow-box",children:s.slice(2).map((a,l)=>e.jsx(x,{item:a,isOpen:t===l+2,onClick:()=>c(l+2)},l+2))})})]})})})},y=()=>{var a,l;const[s,t]=o.useState(null),i=j(),c=f(r=>r.user);return o.useEffect(()=>{async function r(){if(i.label){const n=await w(i.label);n.taskDetails&&t(n)}else m.error("Данные не получены")}r().catch(n=>{console.error(n),m.error("Ошибка получения даннных")})},[i.label]),o.useEffect(()=>{c.userId&&c.userId!==(s==null?void 0:s.userId)&&(window.location.href="/create-task")},[s,c.userId]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Статистика задания"}),e.jsxs("div",{className:"w-3/3",children:[e.jsxs(d,{className:"mt-5",children:[e.jsx("h5",{children:s==null?void 0:s.taskDetails.label}),(s==null?void 0:s.taskDetails.description)&&b((a=s==null?void 0:s.taskDetails)==null?void 0:a.description),e.jsxs("p",{children:["Количество открытий: ",e.jsxs("b",{children:[" ",s==null?void 0:s.taskDetails.openCount," "]})," "]})]}),e.jsx("div",{className:"flex w-full",children:e.jsx(d,{className:"mt-5 w-full",header:{content:"Статистика опций"},children:e.jsx("div",{className:"flex gap-5 w-full flex-wrap",children:s==null?void 0:s.optionsStatistics.map((r,n)=>e.jsxs(d,{className:"w-[calc(50%-2rem)]",header:{content:r.optionLabel},children:[e.jsx("img",{className:"task-vote-img max-w-full",src:r.imageUrl,alt:""}),e.jsxs("p",{className:"mt-2",children:["Количество голосов:"," ",r.votesCount]}),(r==null?void 0:r.reasons.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{children:"Причины выбора опции: "}),e.jsx("ul",{children:r.reasons.map((h,u)=>e.jsx("li",{children:h},u))})]})]},n))})})}),((l=s==null?void 0:s.inputsStatistics)==null?void 0:l.length)&&e.jsx(d,{className:"mt-5",header:{content:"Вопросы и ответы"},children:s==null?void 0:s.inputsStatistics.map((r,n)=>e.jsx("div",{className:"mb-5",children:e.jsx(N,{data:[{title:r.inputLabel,content:r.answers}]})},n))})]})]}),e.jsx(p,{})]})};export{y as default};
